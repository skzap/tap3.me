var xC=Object.defineProperty;var pC=(r,e,t)=>e in r?xC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var me=(r,e,t)=>(pC(r,typeof e!="symbol"?e+"":e,t),t),Fx=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var W=(r,e,t)=>(Fx(r,e,"read from private field"),t?t.call(r):e.get(r)),ve=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},he=(r,e,t,n)=>(Fx(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);var Zl=(r,e,t,n)=>({set _(i){he(r,e,i,t)},get _(){return W(r,e,n)}}),Me=(r,e,t)=>(Fx(r,e,"access private method"),t);function gC(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function mn(){}function a6(r){return r()}function Zm(){return Object.create(null)}function i0(r){r.forEach(a6)}function c6(r){return typeof r=="function"}function pb(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function bC(r){return Object.keys(r).length===0}function f6(r,...e){if(r==null){for(const n of e)n(void 0);return mn}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ed(r){let e;return f6(r,t=>e=t)(),e}function Jm(r,e,t){r.$$.on_destroy.push(f6(e,t))}function Bt(r,e){r.appendChild(e)}function Ue(r,e,t){r.insertBefore(e,t||null)}function ke(r){r.parentNode&&r.parentNode.removeChild(r)}function mC(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function lt(r){return document.createElement(r)}function ey(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Hr(r){return document.createTextNode(r)}function Gt(){return Hr(" ")}function gb(){return Hr("")}function Vr(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function Xt(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function ty(r,e,t){r.setAttributeNS("http://www.w3.org/1999/xlink",e,t)}function yC(r){return Array.from(r.childNodes)}function ss(r,e){e=""+e,r.data!==e&&(r.data=e)}function cc(r,e,t,n){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,n?"important":"")}let Pu;function Cu(r){Pu=r}function wC(){if(!Pu)throw new Error("Function called outside component initialization");return Pu}function l6(r){wC().$$.on_mount.push(r)}const Gc=[],ry=[];let af=[];const ny=[],vC=Promise.resolve();let Mg=!1;function EC(){Mg||(Mg=!0,vC.then(u6))}function Bg(r){af.push(r)}const Lx=new Set;let Oc=0;function u6(){if(Oc!==0)return;const r=Pu;do{try{for(;Oc<Gc.length;){const e=Gc[Oc];Oc++,Cu(e),AC(e.$$)}}catch(e){throw Gc.length=0,Oc=0,e}for(Cu(null),Gc.length=0,Oc=0;ry.length;)ry.pop()();for(let e=0;e<af.length;e+=1){const t=af[e];Lx.has(t)||(Lx.add(t),t())}af.length=0}while(Gc.length);for(;ny.length;)ny.pop()();Mg=!1,Lx.clear(),Cu(r)}function AC(r){if(r.fragment!==null){r.update(),i0(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Bg)}}function _C(r){const e=[],t=[];af.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),af=e}const Ad=new Set;let D0;function h6(){D0={r:0,c:[],p:D0}}function d6(){D0.r||i0(D0.c),D0=D0.p}function Qa(r,e){r&&r.i&&(Ad.delete(r),r.i(e))}function Fu(r,e,t,n){if(r&&r.o){if(Ad.has(r))return;Ad.add(r),D0.c.push(()=>{Ad.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}function iy(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function CC(r){r&&r.c()}function x6(r,e,t){const{fragment:n,after_update:i}=r.$$;n&&n.m(e,t),Bg(()=>{const s=r.$$.on_mount.map(a6).filter(c6);r.$$.on_destroy?r.$$.on_destroy.push(...s):i0(s),r.$$.on_mount=[]}),i.forEach(Bg)}function p6(r,e){const t=r.$$;t.fragment!==null&&(_C(t.after_update),i0(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function SC(r,e){r.$$.dirty[0]===-1&&(Gc.push(r),EC(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function g6(r,e,t,n,i,s,c=null,l=[-1]){const h=Pu;Cu(r);const u=r.$$={fragment:null,ctx:[],props:s,update:mn,not_equal:i,bound:Zm(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:Zm(),dirty:l,skip_bound:!1,root:e.target||h.$$.root};c&&c(u.root);let p=!1;if(u.ctx=t?t(r,e.props||{},(b,y,...w)=>{const _=w.length?w[0]:y;return u.ctx&&i(u.ctx[b],u.ctx[b]=_)&&(!u.skip_bound&&u.bound[b]&&u.bound[b](_),p&&SC(r,b)),y}):[],u.update(),p=!0,i0(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const b=yC(e.target);u.fragment&&u.fragment.l(b),b.forEach(ke)}else u.fragment&&u.fragment.c();e.intro&&Qa(r.$$.fragment),x6(r,e.target,e.anchor),u6()}Cu(h)}class b6{constructor(){me(this,"$$");me(this,"$$set")}$destroy(){p6(this,1),this.$destroy=mn}$on(e,t){if(!c6(t))return mn;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!bC(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const IC="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(IC);const m6="6.10.0";function DC(r,e,t){const n=e.split("|").map(s=>s.trim());for(let s=0;s<n.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=r,i}async function Gn(r){const e=Object.keys(r);return(await Promise.all(e.map(n=>Promise.resolve(r[n])))).reduce((n,i,s)=>(n[e[s]]=i,n),{})}function xt(r,e,t){for(let n in e){let i=e[n];const s=t?t[n]:null;s&&DC(i,s,n),Object.defineProperty(r,n,{enumerable:!0,value:i,writable:!1})}}function Kc(r){if(r==null)return"null";if(Array.isArray(r))return"[ "+r.map(Kc).join(", ")+" ]";if(r instanceof Uint8Array){const e="0123456789abcdef";let t="0x";for(let n=0;n<r.length;n++)t+=e[r[n]>>4],t+=e[r[n]&15];return t}if(typeof r=="object"&&typeof r.toJSON=="function")return Kc(r.toJSON());switch(typeof r){case"boolean":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"number":return r.toString();case"string":return JSON.stringify(r);case"object":{const e=Object.keys(r);return e.sort(),"{ "+e.map(t=>`${Kc(t)}: ${Kc(r[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Kn(r,e){return r&&r.code===e}function bb(r){return Kn(r,"CALL_EXCEPTION")}function ln(r,e,t){let n=r;{const s=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${Kc(t)}`);for(const c in t){if(c==="shortMessage")continue;const l=t[c];s.push(c+"="+Kc(l))}}s.push(`code=${e}`),s.push(`version=${m6}`),s.length&&(r+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(r);break;default:i=new Error(r)}return xt(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&xt(i,{shortMessage:n}),i}function Te(r,e,t,n){if(!r)throw ln(e,t,n)}function pe(r,e,t,n){Te(r,e,"INVALID_ARGUMENT",{argument:t,value:n})}function y6(r,e,t){t==null&&(t=""),t&&(t=": "+t),Te(r>=e,"missing arguemnt"+t,"MISSING_ARGUMENT",{count:r,expectedCount:e}),Te(r<=e,"too many arguemnts"+t,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:e})}const TC=["NFD","NFC","NFKD","NFKC"].reduce((r,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");r.push(e)}catch{}return r},[]);function w6(r){Te(TC.indexOf(r)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:r}})}function s0(r,e,t){if(t==null&&(t=""),r!==e){let n=t,i="new";t&&(n+=".",i+=" "+t),Te(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function v6(r,e,t){if(r instanceof Uint8Array)return t?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x([0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let i=2;for(let s=0;s<n.length;s++)n[s]=parseInt(r.substring(i,i+2),16),i+=2;return n}pe(!1,"invalid BytesLike value",e||"value",r)}function at(r,e){return v6(r,e,!1)}function Tn(r,e){return v6(r,e,!0)}function Kr(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&r.length!==2+2*e||e===!0&&r.length%2!==0)}function E6(r){return Kr(r,!0)||r instanceof Uint8Array}const sy="0123456789abcdef";function ze(r){const e=at(r);let t="0x";for(let n=0;n<e.length;n++){const i=e[n];t+=sy[(i&240)>>4]+sy[i&15]}return t}function Rr(r){return"0x"+r.map(e=>ze(e).substring(2)).join("")}function cf(r){return Kr(r,!0)?(r.length-2)/2:at(r).length}function Ur(r,e,t){const n=at(r);return t!=null&&t>n.length&&Te(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:t}),ze(n.slice(e??0,t??n.length))}function A6(r,e,t){const n=at(r);Te(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(n,e-n.length):i.set(n,0),ze(i)}function fc(r,e){return A6(r,e,!0)}function NC(r,e){return A6(r,e,!1)}const k1=BigInt(0),Ns=BigInt(1),Wc=9007199254740991;function Wd(r,e){const t=U1(r,"value"),n=BigInt(Vt(e,"width"));if(Te(t>>n===k1,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),t>>n-Ns){const i=(Ns<<n)-Ns;return-((~t&i)+Ns)}return t}function _6(r,e){let t=Et(r,"value");const n=BigInt(Vt(e,"width")),i=Ns<<n-Ns;if(t<k1){t=-t,Te(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const s=(Ns<<n)-Ns;return(~t&s)+Ns}else Te(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return t}function T0(r,e){const t=U1(r,"value"),n=BigInt(Vt(e,"bits"));return t&(Ns<<n)-Ns}function Et(r,e){switch(typeof r){case"bigint":return r;case"number":return pe(Number.isInteger(r),"underflow",e||"value",r),pe(r>=-Wc&&r<=Wc,"overflow",e||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(t){pe(!1,`invalid BigNumberish string: ${t.message}`,e||"value",r)}}pe(!1,"invalid BigNumberish value",e||"value",r)}function U1(r,e){const t=Et(r,e);return Te(t>=k1,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),t}const oy="0123456789abcdef";function Nh(r){if(r instanceof Uint8Array){let e="0x0";for(const t of r)e+=oy[t>>4],e+=oy[t&15];return BigInt(e)}return Et(r)}function Vt(r,e){switch(typeof r){case"bigint":return pe(r>=-Wc&&r<=Wc,"overflow",e||"value",r),Number(r);case"number":return pe(Number.isInteger(r),"underflow",e||"value",r),pe(r>=-Wc&&r<=Wc,"overflow",e||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return Vt(BigInt(r),e)}catch(t){pe(!1,`invalid numeric string: ${t.message}`,e||"value",r)}}pe(!1,"invalid numeric value",e||"value",r)}function OC(r){return Vt(Nh(r))}function ca(r,e){let n=U1(r,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{const i=Vt(e,"width");for(Te(i*2>=n.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<i*2;)n="0"+n}return"0x"+n}function vi(r){const e=U1(r,"value");if(e===k1)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const n=new Uint8Array(t.length/2);for(let i=0;i<n.length;i++){const s=i*2;n[i]=parseInt(t.substring(s,s+2),16)}return n}function Yc(r){let e=ze(E6(r)?r:vi(r)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Yd="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let td=null;function RC(r){if(td==null){td={};for(let t=0;t<Yd.length;t++)td[Yd[t]]=BigInt(t)}const e=td[r];return pe(e!=null,"invalid base58 value","letter",r),e}const MC=BigInt(0),Pg=BigInt(58);function C6(r){const e=at(r);let t=Nh(e),n="";for(;t;)n=Yd[Number(t%Pg)]+n,t/=Pg;for(let i=0;i<e.length&&!e[i];i++)n=Yd[0]+n;return n}function BC(r){let e=MC;for(let t=0;t<r.length;t++)e*=Pg,e+=RC(r[t]);return e}function PC(r){r=atob(r);const e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return at(e)}function FC(r){const e=at(r);let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}var bf;class S6{constructor(e,t,n){me(this,"filter");me(this,"emitter");ve(this,bf,void 0);he(this,bf,t),xt(this,{emitter:e,filter:n})}async removeListener(){W(this,bf)!=null&&await this.emitter.off(this.filter,W(this,bf))}}bf=new WeakMap;function LC(r,e,t,n,i){pe(!1,`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function I6(r,e,t,n,i){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let s=0;for(let c=e+1;c<t.length&&t[c]>>6===2;c++)s++;return s}return r==="OVERRUN"?t.length-e-1:0}function kC(r,e,t,n,i){return r==="OVERLONG"?(pe(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),n.push(i),0):(n.push(65533),I6(r,e,t))}const UC=Object.freeze({error:LC,ignore:I6,replace:kC});function HC(r,e){e==null&&(e=UC.error);const t=at(r,"bytes"),n=[];let i=0;for(;i<t.length;){const s=t[i++];if(!(s>>7)){n.push(s);continue}let c=null,l=null;if((s&224)===192)c=1,l=127;else if((s&240)===224)c=2,l=2047;else if((s&248)===240)c=3,l=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,n):i+=e("BAD_PREFIX",i-1,t,n);continue}if(i-1+c>=t.length){i+=e("OVERRUN",i-1,t,n);continue}let h=s&(1<<8-c-1)-1;for(let u=0;u<c;u++){let p=t[i];if((p&192)!=128){i+=e("MISSING_CONTINUE",i,t,n),h=null;break}h=h<<6|p&63,i++}if(h!==null){if(h>1114111){i+=e("OUT_OF_RANGE",i-1-c,t,n,h);continue}if(h>=55296&&h<=57343){i+=e("UTF16_SURROGATE",i-1-c,t,n,h);continue}if(h<=l){i+=e("OVERLONG",i-1-c,t,n,h);continue}n.push(h)}}return n}function oi(r,e){e!=null&&(w6(e),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const s=r.charCodeAt(n);pe(n<r.length&&(s&64512)===56320,"invalid surrogate pair","str",r);const c=65536+((i&1023)<<10)+(s&1023);t.push(c>>18|240),t.push(c>>12&63|128),t.push(c>>6&63|128),t.push(c&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function zC(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function mb(r,e){return zC(HC(r,e))}function D6(r){async function e(t,n){const i=t.url.split(":")[0].toLowerCase();Te(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),Te(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s;if(n){const b=new AbortController;s=b.signal,n.addListener(()=>{b.abort()})}const c={method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:s},l=await fetch(t.url,c),h={};l.headers.forEach((b,y)=>{h[y.toLowerCase()]=b});const u=await l.arrayBuffer(),p=u==null?null:new Uint8Array(u);return{statusCode:l.status,statusMessage:l.statusText,headers:h,body:p}}return e}const jC=12,GC=250;let ay=D6();const VC=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),qC=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let kx=!1;async function T6(r,e){try{const t=r.match(VC);if(!t)throw new Error("invalid data");return new Za(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?PC(t[3]):KC(t[3]))}catch{return new Za(599,"BAD REQUEST (invalid data: URI)",{},null,new fa(r))}}function N6(r){async function e(t,n){try{const i=t.match(qC);if(!i)throw new Error("invalid link");return new fa(`${r}${i[2]}`)}catch{return new Za(599,"BAD REQUEST (invalid IPFS URI)",{},null,new fa(t))}}return e}const rd={data:T6,ipfs:N6("https://gateway.ipfs.io/ipfs/")},O6=new WeakMap;var P0,Ra;class $C{constructor(e){ve(this,P0,void 0);ve(this,Ra,void 0);he(this,P0,[]),he(this,Ra,!1),O6.set(e,()=>{if(!W(this,Ra)){he(this,Ra,!0);for(const t of W(this,P0))setTimeout(()=>{t()},0);he(this,P0,[])}})}addListener(e){Te(!W(this,Ra),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),W(this,P0).push(e)}get cancelled(){return W(this,Ra)}checkSignal(){Te(!this.cancelled,"cancelled","CANCELLED",{})}}P0=new WeakMap,Ra=new WeakMap;function nd(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}var mf,yf,Es,Ho,wf,vf,gn,Ni,zo,F0,L0,k0,Zs,jo,Ma,U0,xu;const N1=class N1{constructor(e){ve(this,U0);ve(this,mf,void 0);ve(this,yf,void 0);ve(this,Es,void 0);ve(this,Ho,void 0);ve(this,wf,void 0);ve(this,vf,void 0);ve(this,gn,void 0);ve(this,Ni,void 0);ve(this,zo,void 0);ve(this,F0,void 0);ve(this,L0,void 0);ve(this,k0,void 0);ve(this,Zs,void 0);ve(this,jo,void 0);ve(this,Ma,void 0);he(this,vf,String(e)),he(this,mf,!1),he(this,yf,!0),he(this,Es,{}),he(this,Ho,""),he(this,wf,3e5),he(this,jo,{slotInterval:GC,maxAttempts:jC}),he(this,Ma,null)}get url(){return W(this,vf)}set url(e){he(this,vf,String(e))}get body(){return W(this,gn)==null?null:new Uint8Array(W(this,gn))}set body(e){if(e==null)he(this,gn,void 0),he(this,Ni,void 0);else if(typeof e=="string")he(this,gn,oi(e)),he(this,Ni,"text/plain");else if(e instanceof Uint8Array)he(this,gn,e),he(this,Ni,"application/octet-stream");else if(typeof e=="object")he(this,gn,oi(JSON.stringify(e))),he(this,Ni,"application/json");else throw new Error("invalid body")}hasBody(){return W(this,gn)!=null}get method(){return W(this,Ho)?W(this,Ho):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),he(this,Ho,String(e).toUpperCase())}get headers(){const e=Object.assign({},W(this,Es));return W(this,zo)&&(e.authorization=`Basic ${FC(oi(W(this,zo)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&W(this,Ni)&&(e["content-type"]=W(this,Ni)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){W(this,Es)[String(e).toLowerCase()]=String(t)}clearHeaders(){he(this,Es,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const i=t[n++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return W(this,zo)||null}setCredentials(e,t){pe(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),he(this,zo,`${e}:${t}`)}get allowGzip(){return W(this,yf)}set allowGzip(e){he(this,yf,!!e)}get allowInsecureAuthentication(){return!!W(this,mf)}set allowInsecureAuthentication(e){he(this,mf,!!e)}get timeout(){return W(this,wf)}set timeout(e){pe(e>=0,"timeout must be non-zero","timeout",e),he(this,wf,e)}get preflightFunc(){return W(this,F0)||null}set preflightFunc(e){he(this,F0,e)}get processFunc(){return W(this,L0)||null}set processFunc(e){he(this,L0,e)}get retryFunc(){return W(this,k0)||null}set retryFunc(e){he(this,k0,e)}get getUrlFunc(){return W(this,Ma)||ay}set getUrlFunc(e){he(this,Ma,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${W(this,gn)?ze(W(this,gn)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(W(this,jo).slotInterval=e.slotInterval),e.maxAttempts!=null&&(W(this,jo).maxAttempts=e.maxAttempts)}send(){return Te(W(this,Zs)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),he(this,Zs,new $C(this)),Me(this,U0,xu).call(this,0,cy()+this.timeout,0,this,new Za(0,"",{},null,this))}cancel(){Te(W(this,Zs)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=O6.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();Te(this.method==="GET"&&(t!=="https"||n!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new N1(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,he(i,Es,Object.assign({},W(this,Es))),W(this,gn)&&he(i,gn,new Uint8Array(W(this,gn))),he(i,Ni,W(this,Ni)),i}clone(){const e=new N1(this.url);return he(e,Ho,W(this,Ho)),W(this,gn)&&he(e,gn,W(this,gn)),he(e,Ni,W(this,Ni)),he(e,Es,Object.assign({},W(this,Es))),he(e,zo,W(this,zo)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),he(e,F0,W(this,F0)),he(e,L0,W(this,L0)),he(e,k0,W(this,k0)),he(e,Ma,W(this,Ma)),e}static lockConfig(){kx=!0}static getGateway(e){return rd[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(kx)throw new Error("gateways locked");rd[e]=t}static registerGetUrl(e){if(kx)throw new Error("gateways locked");ay=e}static createGetUrlFunc(e){return D6()}static createDataGateway(){return T6}static createIpfsGatewayFunc(e){return N6(e)}};mf=new WeakMap,yf=new WeakMap,Es=new WeakMap,Ho=new WeakMap,wf=new WeakMap,vf=new WeakMap,gn=new WeakMap,Ni=new WeakMap,zo=new WeakMap,F0=new WeakMap,L0=new WeakMap,k0=new WeakMap,Zs=new WeakMap,jo=new WeakMap,Ma=new WeakMap,U0=new WeakSet,xu=async function(e,t,n,i,s){var p,b,y;if(e>=W(this,jo).maxAttempts)return s.makeServerError("exceeded maximum retry limit");Te(cy()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),n>0&&await WC(n);let c=this.clone();const l=(c.url.split(":")[0]||"").toLowerCase();if(l in rd){const w=await rd[l](c.url,nd(W(i,Zs)));if(w instanceof Za){let _=w;if(this.processFunc){nd(W(i,Zs));try{_=await this.processFunc(c,_)}catch(S){(S.throttle==null||typeof S.stall!="number")&&_.makeServerError("error in post-processing function",S).assertOk()}}return _}c=w}this.preflightFunc&&(c=await this.preflightFunc(c));const h=await this.getUrlFunc(c,nd(W(i,Zs)));let u=new Za(h.statusCode,h.statusMessage,h.headers,h.body,i);if(u.statusCode===301||u.statusCode===302){try{const w=u.headers.location||"";return Me(p=c.redirect(w),U0,xu).call(p,e+1,t,0,i,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(c,u,e))){const w=u.headers["retry-after"];let _=W(this,jo).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof w=="string"&&w.match(/^[1-9][0-9]*$/)&&(_=parseInt(w)),Me(b=c.clone(),U0,xu).call(b,e+1,t,_,i,u)}if(this.processFunc){nd(W(i,Zs));try{u=await this.processFunc(c,u)}catch(w){(w.throttle==null||typeof w.stall!="number")&&u.makeServerError("error in post-processing function",w).assertOk();let _=W(this,jo).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return w.stall>=0&&(_=w.stall),Me(y=c.clone(),U0,xu).call(y,e+1,t,_,i,u)}}return u};let fa=N1;var ih,sh,oh,As,Ef,H0;const zm=class zm{constructor(e,t,n,i,s){ve(this,ih,void 0);ve(this,sh,void 0);ve(this,oh,void 0);ve(this,As,void 0);ve(this,Ef,void 0);ve(this,H0,void 0);he(this,ih,e),he(this,sh,t),he(this,oh,Object.keys(n).reduce((c,l)=>(c[l.toLowerCase()]=String(n[l]),c),{})),he(this,As,i==null?null:new Uint8Array(i)),he(this,Ef,s||null),he(this,H0,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${W(this,As)?ze(W(this,As)):"null"}>`}get statusCode(){return W(this,ih)}get statusMessage(){return W(this,sh)}get headers(){return Object.assign({},W(this,oh))}get body(){return W(this,As)==null?null:new Uint8Array(W(this,As))}get bodyText(){try{return W(this,As)==null?"":mb(W(this,As))}catch{Te(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Te(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const i=t[n++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let n;e?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new zm(599,n,this.headers,this.body,W(this,Ef)||void 0);return he(i,H0,{message:e,error:t}),i}throwThrottleError(e,t){t==null?t=-1:pe(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw xt(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return W(this,As)!=null}get request(){return W(this,Ef)}ok(){return W(this,H0).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=W(this,H0);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`),Te(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t})}};ih=new WeakMap,sh=new WeakMap,oh=new WeakMap,As=new WeakMap,Ef=new WeakMap,H0=new WeakMap;let Za=zm;function cy(){return new Date().getTime()}function KC(r){return oi(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function WC(r){return new Promise(e=>setTimeout(e,r))}const YC=BigInt(-1),bs=BigInt(0),Xc=BigInt(1),XC=BigInt(5),Rc={};let ff="0000";for(;ff.length<80;)ff+=ff;function m0(r){let e=ff;for(;e.length<r;)e+=e;return BigInt("1"+e.substring(0,r))}function Jl(r,e,t){const n=BigInt(e.width);if(e.signed){const i=Xc<<n-Xc;Te(t==null||r>=-i&&r<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:r}),r>bs?r=Wd(T0(r,n),n):r=-Wd(T0(-r,n),n)}else{const i=Xc<<n;Te(t==null||r>=0&&r<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:r}),r=(r%i+i)%i&i-Xc}return r}function Ux(r){typeof r=="number"&&(r=`fixed128x${r}`);let e=!0,t=128,n=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")e=!1;else{const s=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);pe(s,"invalid fixed format","format",r),e=s[1]!=="u",t=parseInt(s[2]),n=parseInt(s[3])}}else if(r){const s=r,c=(l,h,u)=>s[l]==null?u:(pe(typeof s[l]===h,"invalid fixed format ("+l+" not "+h+")","format."+l,s[l]),s[l]);e=c("signed","boolean",e),t=c("width","number",t),n=c("decimals","number",n)}pe(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),pe(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const i=(e?"":"u")+"fixed"+String(t)+"x"+String(n);return{signed:e,width:t,decimals:n,name:i}}function QC(r,e){let t="";r<bs&&(t="-",r*=YC);let n=r.toString();if(e===0)return t+n;for(;n.length<=e;)n=ff+n;const i=n.length-e;for(n=n.substring(0,i)+"."+n.substring(i);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return t+n}var _s,_r,ti,Go,A0,Cs,Bo,ah,Fg,ch,Lg,fh,kg,lh,Ug;const Na=class Na{constructor(e,t,n){ve(this,Go);ve(this,Cs);ve(this,ah);ve(this,ch);ve(this,fh);ve(this,lh);me(this,"format");ve(this,_s,void 0);ve(this,_r,void 0);ve(this,ti,void 0);me(this,"_value");s0(e,Rc,"FixedNumber"),he(this,_r,t),he(this,_s,n);const i=QC(t,n.decimals);xt(this,{format:n.name,_value:i}),he(this,ti,m0(n.decimals))}get signed(){return W(this,_s).signed}get width(){return W(this,_s).width}get decimals(){return W(this,_s).decimals}get value(){return W(this,_r)}addUnsafe(e){return Me(this,ah,Fg).call(this,e)}add(e){return Me(this,ah,Fg).call(this,e,"add")}subUnsafe(e){return Me(this,ch,Lg).call(this,e)}sub(e){return Me(this,ch,Lg).call(this,e,"sub")}mulUnsafe(e){return Me(this,fh,kg).call(this,e)}mul(e){return Me(this,fh,kg).call(this,e,"mul")}mulSignal(e){Me(this,Go,A0).call(this,e);const t=W(this,_r)*W(e,_r);return Te(t%W(this,ti)===bs,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),Me(this,Cs,Bo).call(this,t/W(this,ti),"mulSignal")}divUnsafe(e){return Me(this,lh,Ug).call(this,e)}div(e){return Me(this,lh,Ug).call(this,e,"div")}divSignal(e){Te(W(e,_r)!==bs,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Me(this,Go,A0).call(this,e);const t=W(this,_r)*W(this,ti);return Te(t%W(e,_r)===bs,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),Me(this,Cs,Bo).call(this,t/W(e,_r),"divSignal")}cmp(e){let t=this.value,n=e.value;const i=this.decimals-e.decimals;return i>0?n*=m0(i):i<0&&(t*=m0(-i)),t<n?-1:t>n?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=W(this,_r);return W(this,_r)<bs&&(e-=W(this,ti)-Xc),e=W(this,_r)/W(this,ti)*W(this,ti),Me(this,Cs,Bo).call(this,e,"floor")}ceiling(){let e=W(this,_r);return W(this,_r)>bs&&(e+=W(this,ti)-Xc),e=W(this,_r)/W(this,ti)*W(this,ti),Me(this,Cs,Bo).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,n=XC*m0(t-1);let i=this.value+n;const s=m0(t);return i=i/s*s,Jl(i,W(this,_s),"round"),new Na(Rc,i,W(this,_s))}isZero(){return W(this,_r)===bs}isNegative(){return W(this,_r)<bs}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Na.fromString(this.toString(),e)}static fromValue(e,t,n){const i=t==null?0:Vt(t),s=Ux(n);let c=Et(e,"value");const l=i-s.decimals;if(l>0){const h=m0(l);Te(c%h===bs,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),c/=h}else l<0&&(c*=m0(-l));return Jl(c,s,"fromValue"),new Na(Rc,c,s)}static fromString(e,t){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);pe(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const i=Ux(t);let s=n[2]||"0",c=n[3]||"";for(;c.length<i.decimals;)c+=ff;Te(c.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),c=c.substring(0,i.decimals);const l=BigInt(n[1]+s+c);return Jl(l,i,"fromString"),new Na(Rc,l,i)}static fromBytes(e,t){let n=Nh(at(e,"value"));const i=Ux(t);return i.signed&&(n=Wd(n,i.width)),Jl(n,i,"fromBytes"),new Na(Rc,n,i)}};_s=new WeakMap,_r=new WeakMap,ti=new WeakMap,Go=new WeakSet,A0=function(e){pe(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Cs=new WeakSet,Bo=function(e,t){return e=Jl(e,W(this,_s),t),new Na(Rc,e,W(this,_s))},ah=new WeakSet,Fg=function(e,t){return Me(this,Go,A0).call(this,e),Me(this,Cs,Bo).call(this,W(this,_r)+W(e,_r),t)},ch=new WeakSet,Lg=function(e,t){return Me(this,Go,A0).call(this,e),Me(this,Cs,Bo).call(this,W(this,_r)-W(e,_r),t)},fh=new WeakSet,kg=function(e,t){return Me(this,Go,A0).call(this,e),Me(this,Cs,Bo).call(this,W(this,_r)*W(e,_r)/W(this,ti),t)},lh=new WeakSet,Ug=function(e,t){return Te(W(e,_r)!==bs,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Me(this,Go,A0).call(this,e),Me(this,Cs,Bo).call(this,W(this,_r)*W(this,ti)/W(e,_r),t)};let Xd=Na;function ZC(r){let e=r.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function fy(r,e,t){let n=0;for(let i=0;i<t;i++)n=n*256+r[e+i];return n}function ly(r,e,t,n){const i=[];for(;t<e+1+n;){const s=R6(r,t);i.push(s.result),t+=s.consumed,Te(t<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:e})}return{consumed:1+n,result:i}}function R6(r,e){Te(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const t=n=>{Te(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[e]>=248){const n=r[e]-247;t(e+1+n);const i=fy(r,e+1,n);return t(e+1+n+i),ly(r,e,e+1+n,n+i)}else if(r[e]>=192){const n=r[e]-192;return t(e+1+n),ly(r,e,e+1,n)}else if(r[e]>=184){const n=r[e]-183;t(e+1+n);const i=fy(r,e+1,n);t(e+1+n+i);const s=ze(r.slice(e+1+n,e+1+n+i));return{consumed:1+n+i,result:s}}else if(r[e]>=128){const n=r[e]-128;t(e+1+n);const i=ze(r.slice(e+1,e+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:ZC(r[e])}}function yb(r){const e=at(r,"data"),t=R6(e,0);return pe(t.consumed===e.length,"unexpected junk after rlp payload","data",r),t.result}function uy(r){const e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function M6(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(s){n=n.concat(M6(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=uy(n.length);return i.unshift(247+i.length),i.concat(n)}const e=Array.prototype.slice.call(at(r,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=uy(e.length);return t.unshift(183+t.length),t.concat(e)}const hy="0123456789abcdef";function Lu(r){let e="0x";for(const t of M6(r))e+=hy[t>>4],e+=hy[t&15];return e}const B6=["wei","kwei","mwei","gwei","szabo","finney","ether"];function JC(r,e){let t=18;if(typeof e=="string"){const n=B6.indexOf(e);pe(n>=0,"invalid unit","unit",e),t=3*n}else e!=null&&(t=Vt(e,"unit"));return Xd.fromValue(r,t,{decimals:t,width:512}).toString()}function e7(r,e){pe(typeof r=="string","value must be a string","value",r);let t=18;if(typeof e=="string"){const n=B6.indexOf(e);pe(n>=0,"invalid unit","unit",e),t=3*n}else e!=null&&(t=Vt(e,"unit"));return Xd.fromString(r,{decimals:t,width:512}).value}function t7(r){return JC(r,18)}function r7(r){const e=at(r,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=ze(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}const ii=32,Hg=new Uint8Array(ii),n7=["then"],id={};function eu(r,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw t.error=e,t}var Ba;const Mu=class Mu extends Array{constructor(...t){const n=t[0];let i=t[1],s=(t[2]||[]).slice(),c=!0;n!==id&&(i=t,s=[],c=!1);super(i.length);ve(this,Ba,void 0);i.forEach((h,u)=>{this[u]=h});const l=s.reduce((h,u)=>(typeof u=="string"&&h.set(u,(h.get(u)||0)+1),h),new Map);if(he(this,Ba,Object.freeze(i.map((h,u)=>{const p=s[u];return p!=null&&l.get(p)===1?p:null}))),!!c)return Object.freeze(this),new Proxy(this,{get:(h,u,p)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const y=Vt(u,"%index");if(y<0||y>=this.length)throw new RangeError("out of result range");const w=h[y];return w instanceof Error&&eu(`index ${y}`,w),w}if(n7.indexOf(u)>=0)return Reflect.get(h,u,p);const b=h[u];if(b instanceof Function)return function(...y){return b.apply(this===p?h:this,y)};if(!(u in h))return h.getValue.apply(this===p?h:this,[u])}return Reflect.get(h,u,p)}})}toArray(){const t=[];return this.forEach((n,i)=>{n instanceof Error&&eu(`index ${i}`,n),t.push(n)}),t}toObject(){return W(this,Ba).reduce((t,n,i)=>(Te(n!=null,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),n in t||(t[n]=this.getValue(n)),t),{})}slice(t,n){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const i=[],s=[];for(let c=t;c<n;c++)i.push(this[c]),s.push(W(this,Ba)[c]);return new Mu(id,i,s)}filter(t,n){const i=[],s=[];for(let c=0;c<this.length;c++){const l=this[c];l instanceof Error&&eu(`index ${c}`,l),t.call(n,l,c,this)&&(i.push(l),s.push(W(this,Ba)[c]))}return new Mu(id,i,s)}map(t,n){const i=[];for(let s=0;s<this.length;s++){const c=this[s];c instanceof Error&&eu(`index ${s}`,c),i.push(t.call(n,c,s,this))}return i}getValue(t){const n=W(this,Ba).indexOf(t);if(n===-1)return;const i=this[n];return i instanceof Error&&eu(`property ${JSON.stringify(t)}`,i.error),i}static fromItems(t,n){return new Mu(id,t,n)}};Ba=new WeakMap;let Qd=Mu;function dy(r){let e=vi(r);return Te(e.length<=ii,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:ii,offset:e.length}),e.length!==ii&&(e=Tn(Rr([Hg.slice(e.length%ii),e]))),e}class ga{constructor(e,t,n,i){me(this,"name");me(this,"type");me(this,"localName");me(this,"dynamic");xt(this,{name:e,type:t,localName:n,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){pe(!1,e,this.localName,t)}}var Vo,z0,Af,_d;class zg{constructor(){ve(this,Af);ve(this,Vo,void 0);ve(this,z0,void 0);he(this,Vo,[]),he(this,z0,0)}get data(){return Rr(W(this,Vo))}get length(){return W(this,z0)}appendWriter(e){return Me(this,Af,_d).call(this,Tn(e.data))}writeBytes(e){let t=Tn(e);const n=t.length%ii;return n&&(t=Tn(Rr([t,Hg.slice(n)]))),Me(this,Af,_d).call(this,t)}writeValue(e){return Me(this,Af,_d).call(this,dy(e))}writeUpdatableValue(){const e=W(this,Vo).length;return W(this,Vo).push(Hg),he(this,z0,W(this,z0)+ii),t=>{W(this,Vo)[e]=dy(t)}}}Vo=new WeakMap,z0=new WeakMap,Af=new WeakSet,_d=function(e){return W(this,Vo).push(e),he(this,z0,W(this,z0)+e.length),e.length};var xi,Oi,j0,G0,Pa,uh,Gg,O1,P6;const jm=class jm{constructor(e,t,n){ve(this,uh);ve(this,O1);me(this,"allowLoose");ve(this,xi,void 0);ve(this,Oi,void 0);ve(this,j0,void 0);ve(this,G0,void 0);ve(this,Pa,void 0);xt(this,{allowLoose:!!t}),he(this,xi,Tn(e)),he(this,j0,0),he(this,G0,null),he(this,Pa,n??1024),he(this,Oi,0)}get data(){return ze(W(this,xi))}get dataLength(){return W(this,xi).length}get consumed(){return W(this,Oi)}get bytes(){return new Uint8Array(W(this,xi))}subReader(e){const t=new jm(W(this,xi).slice(W(this,Oi)+e),this.allowLoose,W(this,Pa));return he(t,G0,this),t}readBytes(e,t){let n=Me(this,O1,P6).call(this,0,e,!!t);return Me(this,uh,Gg).call(this,e),he(this,Oi,W(this,Oi)+n.length),n.slice(0,e)}readValue(){return Nh(this.readBytes(ii))}readIndex(){return OC(this.readBytes(ii))}};xi=new WeakMap,Oi=new WeakMap,j0=new WeakMap,G0=new WeakMap,Pa=new WeakMap,uh=new WeakSet,Gg=function(e){var t;if(W(this,G0))return Me(t=W(this,G0),uh,Gg).call(t,e);he(this,j0,W(this,j0)+e),Te(W(this,Pa)<1||W(this,j0)<=W(this,Pa)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${W(this,Pa)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Tn(W(this,xi)),offset:W(this,Oi),length:e,info:{bytesRead:W(this,j0),dataLength:this.dataLength}})},O1=new WeakSet,P6=function(e,t,n){let i=Math.ceil(t/ii)*ii;return W(this,Oi)+i>W(this,xi).length&&(this.allowLoose&&n&&W(this,Oi)+t<=W(this,xi).length?i=t:Te(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Tn(W(this,xi)),length:W(this,xi).length,offset:W(this,Oi)+i})),W(this,xi).slice(W(this,Oi),W(this,Oi)+i)};let jg=jm;function Bi(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function wb(r,...e){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function F6(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Bi(r.outputLen),Bi(r.blockLen)}function ol(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function L6(r,e){wb(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Hx=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const k6=r=>r instanceof Uint8Array,Cd=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),Sd=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Vs=(r,e)=>r<<32-e|r>>>e,i7=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!i7)throw new Error("Non little-endian hardware is not supported");const s7=async()=>{};async function xy(r,e,t){let n=Date.now();for(let i=0;i<r;i++){t(i);const s=Date.now()-n;s>=0&&s<e||(await s7(),n+=s)}}function o7(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function al(r){if(typeof r=="string"&&(r=o7(r)),!k6(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function a7(...r){const e=new Uint8Array(r.reduce((n,i)=>n+i.length,0));let t=0;return r.forEach(n=>{if(!k6(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}class vb{clone(){return this._cloneInto()}}const c7={}.toString;function U6(r,e){if(e!==void 0&&c7.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(r,e)}function H1(r){const e=n=>r().update(al(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function f7(r=32){if(Hx&&typeof Hx.getRandomValues=="function")return Hx.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}let H6=class extends vb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,F6(e);const n=al(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let c=0;c<s.length;c++)s[c]^=54;this.iHash.update(s),this.oHash=e.create();for(let c=0;c<s.length;c++)s[c]^=106;this.oHash.update(s),s.fill(0)}update(e){return ol(this),this.iHash.update(e),this}digestInto(e){ol(this),wb(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:c,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=c,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const z1=(r,e,t)=>new H6(r,e).update(t).digest();z1.create=(r,e)=>new H6(r,e);function l7(r,e,t,n){F6(r);const i=U6({dkLen:32,asyncTick:10},n),{c:s,dkLen:c,asyncTick:l}=i;if(Bi(s),Bi(c),Bi(l),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const h=al(e),u=al(t),p=new Uint8Array(c),b=z1.create(r,h),y=b._cloneInto().update(u);return{c:s,dkLen:c,asyncTick:l,DK:p,PRF:b,PRFSalt:y}}function u7(r,e,t,n,i){return r.destroy(),e.destroy(),n&&n.destroy(),i.fill(0),t}function Eb(r,e,t,n){const{c:i,dkLen:s,DK:c,PRF:l,PRFSalt:h}=l7(r,e,t,n);let u;const p=new Uint8Array(4),b=Sd(p),y=new Uint8Array(l.outputLen);for(let w=1,_=0;_<s;w++,_+=l.outputLen){const S=c.subarray(_,_+l.outputLen);b.setInt32(0,w,!1),(u=h._cloneInto(u)).update(p).digestInto(y),S.set(y.subarray(0,S.length));for(let T=1;T<i;T++){l._cloneInto(u).update(y).digestInto(y);for(let F=0;F<S.length;F++)S[F]^=y[F]}}return u7(l,h,c,u,y)}function h7(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),c=Number(t>>i&s),l=Number(t&s),h=n?4:0,u=n?0:4;r.setUint32(e+h,c,n),r.setUint32(e+u,l,n)}class Ab extends vb{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Sd(this.buffer)}update(e){ol(this);const{view:t,buffer:n,blockLen:i}=this;e=al(e);const s=e.length;for(let c=0;c<s;){const l=Math.min(i-this.pos,s-c);if(l===i){const h=Sd(e);for(;i<=s-c;c+=i)this.process(h,c);continue}n.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ol(this),L6(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(n,0),c=0);for(let b=c;b<i;b++)t[b]=0;h7(n,i-8,BigInt(this.length*8),s),this.process(n,0);const l=Sd(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=h/4,p=this.get();if(u>p.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<u;b++)l.setUint32(4*b,p[b],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:c,pos:l}=this;return e.length=i,e.pos=l,e.finished=s,e.destroyed=c,i%t&&e.buffer.set(n),e}}const d7=(r,e,t)=>r&e^~r&t,x7=(r,e,t)=>r&e^r&t^e&t,p7=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Aa=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_a=new Uint32Array(64);let g7=class extends Ab{constructor(){super(64,32,8,!1),this.A=Aa[0]|0,this.B=Aa[1]|0,this.C=Aa[2]|0,this.D=Aa[3]|0,this.E=Aa[4]|0,this.F=Aa[5]|0,this.G=Aa[6]|0,this.H=Aa[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:c,G:l,H:h}=this;return[e,t,n,i,s,c,l,h]}set(e,t,n,i,s,c,l,h){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=c|0,this.G=l|0,this.H=h|0}process(e,t){for(let b=0;b<16;b++,t+=4)_a[b]=e.getUint32(t,!1);for(let b=16;b<64;b++){const y=_a[b-15],w=_a[b-2],_=Vs(y,7)^Vs(y,18)^y>>>3,S=Vs(w,17)^Vs(w,19)^w>>>10;_a[b]=S+_a[b-7]+_+_a[b-16]|0}let{A:n,B:i,C:s,D:c,E:l,F:h,G:u,H:p}=this;for(let b=0;b<64;b++){const y=Vs(l,6)^Vs(l,11)^Vs(l,25),w=p+y+d7(l,h,u)+p7[b]+_a[b]|0,S=(Vs(n,2)^Vs(n,13)^Vs(n,22))+x7(n,i,s)|0;p=u,u=h,h=l,l=c+w|0,c=s,s=i,i=n,n=w+S|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,c=c+this.D|0,l=l+this.E|0,h=h+this.F|0,u=u+this.G|0,p=p+this.H|0,this.set(n,i,s,c,l,h,u,p)}roundClean(){_a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Il=H1(()=>new g7),sd=BigInt(2**32-1),Vg=BigInt(32);function z6(r,e=!1){return e?{h:Number(r&sd),l:Number(r>>Vg&sd)}:{h:Number(r>>Vg&sd)|0,l:Number(r&sd)|0}}function j6(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:c}=z6(r[i],e);[t[i],n[i]]=[s,c]}return[t,n]}const b7=(r,e)=>BigInt(r>>>0)<<Vg|BigInt(e>>>0),m7=(r,e,t)=>r>>>t,y7=(r,e,t)=>r<<32-t|e>>>t,w7=(r,e,t)=>r>>>t|e<<32-t,v7=(r,e,t)=>r<<32-t|e>>>t,E7=(r,e,t)=>r<<64-t|e>>>t-32,A7=(r,e,t)=>r>>>t-32|e<<64-t,_7=(r,e)=>e,C7=(r,e)=>r,G6=(r,e,t)=>r<<t|e>>>32-t,V6=(r,e,t)=>e<<t|r>>>32-t,q6=(r,e,t)=>e<<t-32|r>>>64-t,$6=(r,e,t)=>r<<t-32|e>>>64-t;function S7(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const I7=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),D7=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,T7=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),N7=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,O7=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),R7=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,Yt={fromBig:z6,split:j6,toBig:b7,shrSH:m7,shrSL:y7,rotrSH:w7,rotrSL:v7,rotrBH:E7,rotrBL:A7,rotr32H:_7,rotr32L:C7,rotlSH:G6,rotlSL:V6,rotlBH:q6,rotlBL:$6,add:S7,add3L:I7,add3H:D7,add4L:T7,add4H:N7,add5H:R7,add5L:O7},[M7,B7]=Yt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Ca=new Uint32Array(80),Sa=new Uint32Array(80);let P7=class extends Ab{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:c,Dh:l,Dl:h,Eh:u,El:p,Fh:b,Fl:y,Gh:w,Gl:_,Hh:S,Hl:T}=this;return[e,t,n,i,s,c,l,h,u,p,b,y,w,_,S,T]}set(e,t,n,i,s,c,l,h,u,p,b,y,w,_,S,T){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=c|0,this.Dh=l|0,this.Dl=h|0,this.Eh=u|0,this.El=p|0,this.Fh=b|0,this.Fl=y|0,this.Gh=w|0,this.Gl=_|0,this.Hh=S|0,this.Hl=T|0}process(e,t){for(let O=0;O<16;O++,t+=4)Ca[O]=e.getUint32(t),Sa[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const M=Ca[O-15]|0,L=Sa[O-15]|0,R=Yt.rotrSH(M,L,1)^Yt.rotrSH(M,L,8)^Yt.shrSH(M,L,7),v=Yt.rotrSL(M,L,1)^Yt.rotrSL(M,L,8)^Yt.shrSL(M,L,7),P=Ca[O-2]|0,Y=Sa[O-2]|0,J=Yt.rotrSH(P,Y,19)^Yt.rotrBH(P,Y,61)^Yt.shrSH(P,Y,6),ne=Yt.rotrSL(P,Y,19)^Yt.rotrBL(P,Y,61)^Yt.shrSL(P,Y,6),le=Yt.add4L(v,ne,Sa[O-7],Sa[O-16]),V=Yt.add4H(le,R,J,Ca[O-7],Ca[O-16]);Ca[O]=V|0,Sa[O]=le|0}let{Ah:n,Al:i,Bh:s,Bl:c,Ch:l,Cl:h,Dh:u,Dl:p,Eh:b,El:y,Fh:w,Fl:_,Gh:S,Gl:T,Hh:F,Hl:N}=this;for(let O=0;O<80;O++){const M=Yt.rotrSH(b,y,14)^Yt.rotrSH(b,y,18)^Yt.rotrBH(b,y,41),L=Yt.rotrSL(b,y,14)^Yt.rotrSL(b,y,18)^Yt.rotrBL(b,y,41),R=b&w^~b&S,v=y&_^~y&T,P=Yt.add5L(N,L,v,B7[O],Sa[O]),Y=Yt.add5H(P,F,M,R,M7[O],Ca[O]),J=P|0,ne=Yt.rotrSH(n,i,28)^Yt.rotrBH(n,i,34)^Yt.rotrBH(n,i,39),le=Yt.rotrSL(n,i,28)^Yt.rotrBL(n,i,34)^Yt.rotrBL(n,i,39),V=n&s^n&l^s&l,E=i&c^i&h^c&h;F=S|0,N=T|0,S=w|0,T=_|0,w=b|0,_=y|0,{h:b,l:y}=Yt.add(u|0,p|0,Y|0,J|0),u=l|0,p=h|0,l=s|0,h=c|0,s=n|0,c=i|0;const C=Yt.add3L(J,le,E);n=Yt.add3H(C,Y,ne,V),i=C|0}({h:n,l:i}=Yt.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:c}=Yt.add(this.Bh|0,this.Bl|0,s|0,c|0),{h:l,l:h}=Yt.add(this.Ch|0,this.Cl|0,l|0,h|0),{h:u,l:p}=Yt.add(this.Dh|0,this.Dl|0,u|0,p|0),{h:b,l:y}=Yt.add(this.Eh|0,this.El|0,b|0,y|0),{h:w,l:_}=Yt.add(this.Fh|0,this.Fl|0,w|0,_|0),{h:S,l:T}=Yt.add(this.Gh|0,this.Gl|0,S|0,T|0),{h:F,l:N}=Yt.add(this.Hh|0,this.Hl|0,F|0,N|0),this.set(n,i,s,c,l,h,u,p,b,y,w,_,S,T,F,N)}roundClean(){Ca.fill(0),Sa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const _b=H1(()=>new P7);function F7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const py=F7(),gy=py.crypto||py.msCrypto;function L7(r){switch(r){case"sha256":return Il.create();case"sha512":return _b.create()}pe(!1,"invalid hashing algorithm name","algorithm",r)}function k7(r,e){const t={sha256:Il,sha512:_b}[r];return pe(t!=null,"invalid hmac algorithm","algorithm",r),z1.create(t,e)}function U7(r,e,t,n,i){const s={sha256:Il,sha512:_b}[i];return pe(s!=null,"invalid pbkdf2 algorithm","algorithm",i),Eb(s,r,e,{c:t,dkLen:n})}function H7(r){Te(gy!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),pe(Number.isInteger(r)&&r>0&&r<=1024,"invalid length","length",r);const e=new Uint8Array(r);return gy.getRandomValues(e),e}let K6=!1;const W6=function(r,e,t){return k7(r,e).update(t).digest()};let Y6=W6;function Dl(r,e,t){const n=at(e,"key"),i=at(t,"data");return ze(Y6(r,n,i))}Dl._=W6;Dl.lock=function(){K6=!0};Dl.register=function(r){if(K6)throw new Error("computeHmac is locked");Y6=r};Object.freeze(Dl);const[X6,Q6,Z6]=[[],[],[]],z7=BigInt(0),tu=BigInt(1),j7=BigInt(2),G7=BigInt(7),V7=BigInt(256),q7=BigInt(113);for(let r=0,e=tu,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],X6.push(2*(5*n+t)),Q6.push((r+1)*(r+2)/2%64);let i=z7;for(let s=0;s<7;s++)e=(e<<tu^(e>>G7)*q7)%V7,e&j7&&(i^=tu<<(tu<<BigInt(s))-tu);Z6.push(i)}const[$7,K7]=j6(Z6,!0),by=(r,e,t)=>t>32?q6(r,e,t):G6(r,e,t),my=(r,e,t)=>t>32?$6(r,e,t):V6(r,e,t);function W7(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let c=0;c<10;c++)t[c]=r[c]^r[c+10]^r[c+20]^r[c+30]^r[c+40];for(let c=0;c<10;c+=2){const l=(c+8)%10,h=(c+2)%10,u=t[h],p=t[h+1],b=by(u,p,1)^t[l],y=my(u,p,1)^t[l+1];for(let w=0;w<50;w+=10)r[c+w]^=b,r[c+w+1]^=y}let i=r[2],s=r[3];for(let c=0;c<24;c++){const l=Q6[c],h=by(i,s,l),u=my(i,s,l),p=X6[c];i=r[p],s=r[p+1],r[p]=h,r[p+1]=u}for(let c=0;c<50;c+=10){for(let l=0;l<10;l++)t[l]=r[c+l];for(let l=0;l<10;l++)r[c+l]^=~t[(l+2)%10]&t[(l+4)%10]}r[0]^=$7[n],r[1]^=K7[n]}t.fill(0)}class Cb extends vb{constructor(e,t,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Bi(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Cd(this.state)}keccak(){W7(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ol(this);const{blockLen:t,state:n}=this;e=al(e);const i=e.length;for(let s=0;s<i;){const c=Math.min(t-this.pos,i-s);for(let l=0;l<c;l++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,t&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ol(this,!1),wb(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const c=Math.min(n-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Bi(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(L6(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:s,enableXOF:c}=this;return e||(e=new Cb(t,n,i,c,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=c,e.destroyed=this.destroyed,e}}const Y7=(r,e,t)=>H1(()=>new Cb(e,r,t)),X7=Y7(1,136,256/8);let J6=!1;const ev=function(r){return X7(r)};let tv=ev;function Or(r){const e=at(r,"data");return ze(tv(e))}Or._=ev;Or.lock=function(){J6=!0};Or.register=function(r){if(J6)throw new TypeError("keccak256 is locked");tv=r};Object.freeze(Or);const Q7=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),rv=Uint8Array.from({length:16},(r,e)=>e),Z7=rv.map(r=>(9*r+5)%16);let Sb=[rv],Ib=[Z7];for(let r=0;r<4;r++)for(let e of[Sb,Ib])e.push(e[r].map(t=>Q7[t]));const nv=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(r=>new Uint8Array(r)),J7=Sb.map((r,e)=>r.map(t=>nv[e][t])),e9=Ib.map((r,e)=>r.map(t=>nv[e][t])),t9=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),r9=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),od=(r,e)=>r<<e|r>>>32-e;function yy(r,e,t,n){return r===0?e^t^n:r===1?e&t|~e&n:r===2?(e|~t)^n:r===3?e&n|t&~n:e^(t|~n)}const ad=new Uint32Array(16);let n9=class extends Ab{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:i,h4:s}=this;return[e,t,n,i,s]}set(e,t,n,i,s){this.h0=e|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(e,t){for(let w=0;w<16;w++,t+=4)ad[w]=e.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,c=s,l=this.h2|0,h=l,u=this.h3|0,p=u,b=this.h4|0,y=b;for(let w=0;w<5;w++){const _=4-w,S=t9[w],T=r9[w],F=Sb[w],N=Ib[w],O=J7[w],M=e9[w];for(let L=0;L<16;L++){const R=od(n+yy(w,s,l,u)+ad[F[L]]+S,O[L])+b|0;n=b,b=u,u=od(l,10)|0,l=s,s=R}for(let L=0;L<16;L++){const R=od(i+yy(_,c,h,p)+ad[N[L]]+T,M[L])+y|0;i=y,y=p,p=od(h,10)|0,h=c,c=R}}this.set(this.h1+l+p|0,this.h2+u+y|0,this.h3+b+i|0,this.h4+n+c|0,this.h0+s+h|0)}roundClean(){ad.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};const i9=H1(()=>new n9);let iv=!1;const sv=function(r){return i9(r)};let ov=sv;function Tl(r){const e=at(r,"data");return ze(ov(e))}Tl._=sv;Tl.lock=function(){iv=!0};Tl.register=function(r){if(iv)throw new TypeError("ripemd160 is locked");ov=r};Object.freeze(Tl);let av=!1;const cv=function(r,e,t,n,i){return U7(r,e,t,n,i)};let fv=cv;function o0(r,e,t,n,i){const s=at(r,"password"),c=at(e,"salt");return ze(fv(s,c,t,n,i))}o0._=cv;o0.lock=function(){av=!0};o0.register=function(r){if(av)throw new Error("pbkdf2 is locked");fv=r};Object.freeze(o0);let lv=!1;const uv=function(r){return new Uint8Array(H7(r))};let hv=uv;function ia(r){return hv(r)}ia._=uv;ia.lock=function(){lv=!0};ia.register=function(r){if(lv)throw new Error("randomBytes is locked");hv=r};Object.freeze(ia);const xr=(r,e)=>r<<e|r>>>32-e;function wy(r,e,t,n,i,s){let c=r[e++]^t[n++],l=r[e++]^t[n++],h=r[e++]^t[n++],u=r[e++]^t[n++],p=r[e++]^t[n++],b=r[e++]^t[n++],y=r[e++]^t[n++],w=r[e++]^t[n++],_=r[e++]^t[n++],S=r[e++]^t[n++],T=r[e++]^t[n++],F=r[e++]^t[n++],N=r[e++]^t[n++],O=r[e++]^t[n++],M=r[e++]^t[n++],L=r[e++]^t[n++],R=c,v=l,P=h,Y=u,J=p,ne=b,le=y,V=w,E=_,C=S,U=T,j=F,K=N,X=O,te=M,z=L;for(let D=0;D<8;D+=2)J^=xr(R+K|0,7),E^=xr(J+R|0,9),K^=xr(E+J|0,13),R^=xr(K+E|0,18),C^=xr(ne+v|0,7),X^=xr(C+ne|0,9),v^=xr(X+C|0,13),ne^=xr(v+X|0,18),te^=xr(U+le|0,7),P^=xr(te+U|0,9),le^=xr(P+te|0,13),U^=xr(le+P|0,18),Y^=xr(z+j|0,7),V^=xr(Y+z|0,9),j^=xr(V+Y|0,13),z^=xr(j+V|0,18),v^=xr(R+Y|0,7),P^=xr(v+R|0,9),Y^=xr(P+v|0,13),R^=xr(Y+P|0,18),le^=xr(ne+J|0,7),V^=xr(le+ne|0,9),J^=xr(V+le|0,13),ne^=xr(J+V|0,18),j^=xr(U+C|0,7),E^=xr(j+U|0,9),C^=xr(E+j|0,13),U^=xr(C+E|0,18),K^=xr(z+te|0,7),X^=xr(K+z|0,9),te^=xr(X+K|0,13),z^=xr(te+X|0,18);i[s++]=c+R|0,i[s++]=l+v|0,i[s++]=h+P|0,i[s++]=u+Y|0,i[s++]=p+J|0,i[s++]=b+ne|0,i[s++]=y+le|0,i[s++]=w+V|0,i[s++]=_+E|0,i[s++]=S+C|0,i[s++]=T+U|0,i[s++]=F+j|0,i[s++]=N+K|0,i[s++]=O+X|0,i[s++]=M+te|0,i[s++]=L+z|0}function lf(r,e,t,n,i){let s=n+0,c=n+16*i;for(let l=0;l<16;l++)t[c+l]=r[e+(2*i-1)*16+l];for(let l=0;l<i;l++,s+=16,e+=16)wy(t,c,r,e,t,s),l>0&&(c+=16),wy(t,s,r,e+=16,t,c)}function dv(r,e,t){const n=U6({dkLen:32,asyncTick:10,maxmem:1073742848},t),{N:i,r:s,p:c,dkLen:l,asyncTick:h,maxmem:u,onProgress:p}=n;if(Bi(i),Bi(s),Bi(c),Bi(l),Bi(h),Bi(u),p!==void 0&&typeof p!="function")throw new Error("progressCb should be function");const b=128*s,y=b/4;if(i<=1||i&i-1||i>=2**(b/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(c<0||c>(2**32-1)*32/b)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(l<0||l>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const w=b*(i+c);if(w>u)throw new Error(`Scrypt: parameters too large, ${w} (128 * r * (N + p)) > ${u} (maxmem)`);const _=Eb(Il,r,e,{c:1,dkLen:b*c}),S=Cd(_),T=Cd(new Uint8Array(b*i)),F=Cd(new Uint8Array(b));let N=()=>{};if(p){const O=2*i*c,M=Math.max(Math.floor(O/1e4),1);let L=0;N=()=>{L++,p&&(!(L%M)||L===O)&&p(L/O)}}return{N:i,r:s,p:c,dkLen:l,blockSize32:y,V:T,B32:S,B:_,tmp:F,blockMixCb:N,asyncTick:h}}function xv(r,e,t,n,i){const s=Eb(Il,r,t,{c:1,dkLen:e});return t.fill(0),n.fill(0),i.fill(0),s}function s9(r,e,t){const{N:n,r:i,p:s,dkLen:c,blockSize32:l,V:h,B32:u,B:p,tmp:b,blockMixCb:y}=dv(r,e,t);for(let w=0;w<s;w++){const _=l*w;for(let S=0;S<l;S++)h[S]=u[_+S];for(let S=0,T=0;S<n-1;S++)lf(h,T,h,T+=l,i),y();lf(h,(n-1)*l,u,_,i),y();for(let S=0;S<n;S++){const T=u[_+l-16]%n;for(let F=0;F<l;F++)b[F]=u[_+F]^h[T*l+F];lf(b,0,u,_,i),y()}}return xv(r,c,p,h,b)}async function o9(r,e,t){const{N:n,r:i,p:s,dkLen:c,blockSize32:l,V:h,B32:u,B:p,tmp:b,blockMixCb:y,asyncTick:w}=dv(r,e,t);for(let _=0;_<s;_++){const S=l*_;for(let F=0;F<l;F++)h[F]=u[S+F];let T=0;await xy(n-1,w,()=>{lf(h,T,h,T+=l,i),y()}),lf(h,(n-1)*l,u,S,i),y(),await xy(n,w,()=>{const F=u[S+l-16]%n;for(let N=0;N<l;N++)b[N]=u[S+N]^h[F*l+N];lf(b,0,u,S,i),y()})}return xv(r,c,p,h,b)}let pv=!1,gv=!1;const bv=async function(r,e,t,n,i,s,c){return await o9(r,e,{N:t,r:n,p:i,dkLen:s,onProgress:c})},mv=function(r,e,t,n,i,s){return s9(r,e,{N:t,r:n,p:i,dkLen:s})};let yv=bv,wv=mv;async function Nl(r,e,t,n,i,s,c){const l=at(r,"passwd"),h=at(e,"salt");return ze(await yv(l,h,t,n,i,s,c))}Nl._=bv;Nl.lock=function(){gv=!0};Nl.register=function(r){if(gv)throw new Error("scrypt is locked");yv=r};Object.freeze(Nl);function Ol(r,e,t,n,i,s){const c=at(r,"passwd"),l=at(e,"salt");return ze(wv(c,l,t,n,i,s))}Ol._=mv;Ol.lock=function(){pv=!0};Ol.register=function(r){if(pv)throw new Error("scryptSync is locked");wv=r};Object.freeze(Ol);const vv=function(r){return L7("sha256").update(r).digest()};let Ev=vv,Av=!1;function Ms(r){const e=at(r,"data");return ze(Ev(e))}Ms._=vv;Ms.lock=function(){Av=!0};Ms.register=function(r){if(Av)throw new Error("sha256 is locked");Ev=r};Object.freeze(Ms);Object.freeze(Ms);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _v=BigInt(0),j1=BigInt(1),a9=BigInt(2),G1=r=>r instanceof Uint8Array,c9=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function cl(r){if(!G1(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=c9[r[t]];return e}function Cv(r){const e=r.toString(16);return e.length&1?`0${e}`:e}function Db(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function fl(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let n=0;n<t.length;n++){const i=n*2,s=r.slice(i,i+2),c=Number.parseInt(s,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");t[n]=c}return t}function ic(r){return Db(cl(r))}function Tb(r){if(!G1(r))throw new Error("Uint8Array expected");return Db(cl(Uint8Array.from(r).reverse()))}function ll(r,e){return fl(r.toString(16).padStart(e*2,"0"))}function Nb(r,e){return ll(r,e).reverse()}function f9(r){return fl(Cv(r))}function ys(r,e,t){let n;if(typeof e=="string")try{n=fl(e)}catch(s){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${s}`)}else if(G1(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${r} expected ${t} bytes, got ${i}`);return n}function ku(...r){const e=new Uint8Array(r.reduce((n,i)=>n+i.length,0));let t=0;return r.forEach(n=>{if(!G1(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}function l9(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function u9(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function h9(r){let e;for(e=0;r>_v;r>>=j1,e+=1);return e}function d9(r,e){return r>>BigInt(e)&j1}const x9=(r,e,t)=>r|(t?j1:_v)<<BigInt(e),Ob=r=>(a9<<BigInt(r-1))-j1,zx=r=>new Uint8Array(r),vy=r=>Uint8Array.from(r);function Sv(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=zx(r),i=zx(r),s=0;const c=()=>{n.fill(1),i.fill(0),s=0},l=(...b)=>t(i,n,...b),h=(b=zx())=>{i=l(vy([0]),b),n=l(),b.length!==0&&(i=l(vy([1]),b),n=l())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const y=[];for(;b<e;){n=l();const w=n.slice();y.push(w),b+=n.length}return ku(...y)};return(b,y)=>{c(),h(b);let w;for(;!(w=y(u()));)h();return c(),w}}const p9={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Oh(r,e,t={}){const n=(i,s,c)=>{const l=p9[s];if(typeof l!="function")throw new Error(`Invalid validator "${s}", expected function`);const h=r[i];if(!(c&&h===void 0)&&!l(h,r))throw new Error(`Invalid param ${String(i)}=${h} (${typeof h}), expected ${s}`)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return r}const g9=Object.freeze(Object.defineProperty({__proto__:null,bitGet:d9,bitLen:h9,bitMask:Ob,bitSet:x9,bytesToHex:cl,bytesToNumberBE:ic,bytesToNumberLE:Tb,concatBytes:ku,createHmacDrbg:Sv,ensureBytes:ys,equalBytes:l9,hexToBytes:fl,hexToNumber:Db,numberToBytesBE:ll,numberToBytesLE:Nb,numberToHexUnpadded:Cv,numberToVarBytesBE:f9,utf8ToBytes:u9,validateObject:Oh},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bn=BigInt(0),sn=BigInt(1),C0=BigInt(2),b9=BigInt(3),qg=BigInt(4),Ey=BigInt(5),Ay=BigInt(8);BigInt(9);BigInt(16);function mi(r,e){const t=r%e;return t>=bn?t:e+t}function m9(r,e,t){if(t<=bn||e<bn)throw new Error("Expected power/modulo > 0");if(t===sn)return bn;let n=sn;for(;e>bn;)e&sn&&(n=n*r%t),r=r*r%t,e>>=sn;return n}function Gi(r,e,t){let n=r;for(;e-- >bn;)n*=n,n%=t;return n}function $g(r,e){if(r===bn||e<=bn)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=mi(r,e),n=e,i=bn,s=sn;for(;t!==bn;){const l=n/t,h=n%t,u=i-s*l;n=t,t=h,i=s,s=u}if(n!==sn)throw new Error("invert: does not exist");return mi(i,e)}function y9(r){const e=(r-sn)/C0;let t,n,i;for(t=r-sn,n=0;t%C0===bn;t/=C0,n++);for(i=C0;i<r&&m9(i,e,r)!==r-sn;i++);if(n===1){const c=(r+sn)/qg;return function(h,u){const p=h.pow(u,c);if(!h.eql(h.sqr(p),u))throw new Error("Cannot find square root");return p}}const s=(t+sn)/C0;return function(l,h){if(l.pow(h,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let u=n,p=l.pow(l.mul(l.ONE,i),t),b=l.pow(h,s),y=l.pow(h,t);for(;!l.eql(y,l.ONE);){if(l.eql(y,l.ZERO))return l.ZERO;let w=1;for(let S=l.sqr(y);w<u&&!l.eql(S,l.ONE);w++)S=l.sqr(S);const _=l.pow(p,sn<<BigInt(u-w-1));p=l.sqr(_),b=l.mul(b,_),y=l.mul(y,p),u=w}return b}}function w9(r){if(r%qg===b9){const e=(r+sn)/qg;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%Ay===Ey){const e=(r-Ey)/Ay;return function(n,i){const s=n.mul(i,C0),c=n.pow(s,e),l=n.mul(i,c),h=n.mul(n.mul(l,C0),c),u=n.mul(l,n.sub(h,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return y9(r)}const v9=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function E9(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=v9.reduce((n,i)=>(n[i]="function",n),e);return Oh(r,t)}function A9(r,e,t){if(t<bn)throw new Error("Expected power > 0");if(t===bn)return r.ONE;if(t===sn)return e;let n=r.ONE,i=e;for(;t>bn;)t&sn&&(n=r.mul(n,i)),i=r.sqr(i),t>>=sn;return n}function _9(r,e){const t=new Array(e.length),n=e.reduce((s,c,l)=>r.is0(c)?s:(t[l]=s,r.mul(s,c)),r.ONE),i=r.inv(n);return e.reduceRight((s,c,l)=>r.is0(c)?s:(t[l]=r.mul(s,t[l]),r.mul(s,c)),i),t}function Iv(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function C9(r,e,t=!1,n={}){if(r<=bn)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:s}=Iv(r,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=w9(r),l=Object.freeze({ORDER:r,BITS:i,BYTES:s,MASK:Ob(i),ZERO:bn,ONE:sn,create:h=>mi(h,r),isValid:h=>{if(typeof h!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof h}`);return bn<=h&&h<r},is0:h=>h===bn,isOdd:h=>(h&sn)===sn,neg:h=>mi(-h,r),eql:(h,u)=>h===u,sqr:h=>mi(h*h,r),add:(h,u)=>mi(h+u,r),sub:(h,u)=>mi(h-u,r),mul:(h,u)=>mi(h*u,r),pow:(h,u)=>A9(l,h,u),div:(h,u)=>mi(h*$g(u,r),r),sqrN:h=>h*h,addN:(h,u)=>h+u,subN:(h,u)=>h-u,mulN:(h,u)=>h*u,inv:h=>$g(h,r),sqrt:n.sqrt||(h=>c(l,h)),invertBatch:h=>_9(l,h),cmov:(h,u,p)=>p?u:h,toBytes:h=>t?Nb(h,s):ll(h,s),fromBytes:h=>{if(h.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${h.length}`);return t?Tb(h):ic(h)}});return Object.freeze(l)}function Dv(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function Tv(r){const e=Dv(r);return e+Math.ceil(e/2)}function S9(r,e,t=!1){const n=r.length,i=Dv(e),s=Tv(e);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const c=t?ic(r):Tb(r),l=mi(c,e-sn)+sn;return t?Nb(l,i):ll(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const I9=BigInt(0),jx=BigInt(1);function D9(r,e){const t=(i,s)=>{const c=s.negate();return i?c:s},n=i=>{const s=Math.ceil(e/i)+1,c=2**(i-1);return{windows:s,windowSize:c}};return{constTimeNegate:t,unsafeLadder(i,s){let c=r.ZERO,l=i;for(;s>I9;)s&jx&&(c=c.add(l)),l=l.double(),s>>=jx;return c},precomputeWindow(i,s){const{windows:c,windowSize:l}=n(s),h=[];let u=i,p=u;for(let b=0;b<c;b++){p=u,h.push(p);for(let y=1;y<l;y++)p=p.add(u),h.push(p);u=p.double()}return h},wNAF(i,s,c){const{windows:l,windowSize:h}=n(i);let u=r.ZERO,p=r.BASE;const b=BigInt(2**i-1),y=2**i,w=BigInt(i);for(let _=0;_<l;_++){const S=_*h;let T=Number(c&b);c>>=w,T>h&&(T-=y,c+=jx);const F=S,N=S+Math.abs(T)-1,O=_%2!==0,M=T<0;T===0?p=p.add(t(O,s[F])):u=u.add(t(M,s[N]))}return{p:u,f:p}},wNAFCached(i,s,c,l){const h=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,h),h!==1&&s.set(i,l(u))),this.wNAF(h,u,c)}}}function Nv(r){return E9(r.Fp),Oh(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Iv(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function T9(r){const e=Nv(r);Oh(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=e;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:N9,hexToBytes:O9}=g9,N0={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){const{Err:e}=N0;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:N9(n),l:r.subarray(t+2)}},toSig(r){const{Err:e}=N0,t=typeof r=="string"?O9(r):r;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=N0._parseInt(t.subarray(2)),{d:c,l}=N0._parseInt(s);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:c}},hexFromSig(r){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const p=u.toString(16);return p.length&1?`0${p}`:p},n=e(t(r.s)),i=e(t(r.r)),s=n.length/2,c=i.length/2,l=t(s),h=t(c);return`30${t(c+s+4)}02${h}${i}02${l}${n}`}},ea=BigInt(0),ts=BigInt(1);BigInt(2);const _y=BigInt(3);BigInt(4);function R9(r){const e=T9(r),{Fp:t}=e,n=e.toBytes||((_,S,T)=>{const F=S.toAffine();return ku(Uint8Array.from([4]),t.toBytes(F.x),t.toBytes(F.y))}),i=e.fromBytes||(_=>{const S=_.subarray(1),T=t.fromBytes(S.subarray(0,t.BYTES)),F=t.fromBytes(S.subarray(t.BYTES,2*t.BYTES));return{x:T,y:F}});function s(_){const{a:S,b:T}=e,F=t.sqr(_),N=t.mul(F,_);return t.add(t.add(N,t.mul(_,S)),T)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function c(_){return typeof _=="bigint"&&ea<_&&_<e.n}function l(_){if(!c(_))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function h(_){const{allowedPrivateKeyLengths:S,nByteLength:T,wrapPrivateKey:F,n:N}=e;if(S&&typeof _!="bigint"){if(_ instanceof Uint8Array&&(_=cl(_)),typeof _!="string"||!S.includes(_.length))throw new Error("Invalid key");_=_.padStart(T*2,"0")}let O;try{O=typeof _=="bigint"?_:ic(ys("private key",_,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof _}`)}return F&&(O=mi(O,N)),l(O),O}const u=new Map;function p(_){if(!(_ instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(S,T,F){if(this.px=S,this.py=T,this.pz=F,S==null||!t.isValid(S))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(F==null||!t.isValid(F))throw new Error("z required")}static fromAffine(S){const{x:T,y:F}=S||{};if(!S||!t.isValid(T)||!t.isValid(F))throw new Error("invalid affine point");if(S instanceof b)throw new Error("projective point not allowed");const N=O=>t.eql(O,t.ZERO);return N(T)&&N(F)?b.ZERO:new b(T,F,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){const T=t.invertBatch(S.map(F=>F.pz));return S.map((F,N)=>F.toAffine(T[N])).map(b.fromAffine)}static fromHex(S){const T=b.fromAffine(i(ys("pointHex",S)));return T.assertValidity(),T}static fromPrivateKey(S){return b.BASE.multiply(h(S))}_setWindowSize(S){this._WINDOW_SIZE=S,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:S,y:T}=this.toAffine();if(!t.isValid(S)||!t.isValid(T))throw new Error("bad point: x or y not FE");const F=t.sqr(T),N=s(S);if(!t.eql(F,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:S}=this.toAffine();if(t.isOdd)return!t.isOdd(S);throw new Error("Field doesn't support isOdd")}equals(S){p(S);const{px:T,py:F,pz:N}=this,{px:O,py:M,pz:L}=S,R=t.eql(t.mul(T,L),t.mul(O,N)),v=t.eql(t.mul(F,L),t.mul(M,N));return R&&v}negate(){return new b(this.px,t.neg(this.py),this.pz)}double(){const{a:S,b:T}=e,F=t.mul(T,_y),{px:N,py:O,pz:M}=this;let L=t.ZERO,R=t.ZERO,v=t.ZERO,P=t.mul(N,N),Y=t.mul(O,O),J=t.mul(M,M),ne=t.mul(N,O);return ne=t.add(ne,ne),v=t.mul(N,M),v=t.add(v,v),L=t.mul(S,v),R=t.mul(F,J),R=t.add(L,R),L=t.sub(Y,R),R=t.add(Y,R),R=t.mul(L,R),L=t.mul(ne,L),v=t.mul(F,v),J=t.mul(S,J),ne=t.sub(P,J),ne=t.mul(S,ne),ne=t.add(ne,v),v=t.add(P,P),P=t.add(v,P),P=t.add(P,J),P=t.mul(P,ne),R=t.add(R,P),J=t.mul(O,M),J=t.add(J,J),P=t.mul(J,ne),L=t.sub(L,P),v=t.mul(J,Y),v=t.add(v,v),v=t.add(v,v),new b(L,R,v)}add(S){p(S);const{px:T,py:F,pz:N}=this,{px:O,py:M,pz:L}=S;let R=t.ZERO,v=t.ZERO,P=t.ZERO;const Y=e.a,J=t.mul(e.b,_y);let ne=t.mul(T,O),le=t.mul(F,M),V=t.mul(N,L),E=t.add(T,F),C=t.add(O,M);E=t.mul(E,C),C=t.add(ne,le),E=t.sub(E,C),C=t.add(T,N);let U=t.add(O,L);return C=t.mul(C,U),U=t.add(ne,V),C=t.sub(C,U),U=t.add(F,N),R=t.add(M,L),U=t.mul(U,R),R=t.add(le,V),U=t.sub(U,R),P=t.mul(Y,C),R=t.mul(J,V),P=t.add(R,P),R=t.sub(le,P),P=t.add(le,P),v=t.mul(R,P),le=t.add(ne,ne),le=t.add(le,ne),V=t.mul(Y,V),C=t.mul(J,C),le=t.add(le,V),V=t.sub(ne,V),V=t.mul(Y,V),C=t.add(C,V),ne=t.mul(le,C),v=t.add(v,ne),ne=t.mul(U,C),R=t.mul(E,R),R=t.sub(R,ne),ne=t.mul(E,le),P=t.mul(U,P),P=t.add(P,ne),new b(R,v,P)}subtract(S){return this.add(S.negate())}is0(){return this.equals(b.ZERO)}wNAF(S){return w.wNAFCached(this,u,S,T=>{const F=t.invertBatch(T.map(N=>N.pz));return T.map((N,O)=>N.toAffine(F[O])).map(b.fromAffine)})}multiplyUnsafe(S){const T=b.ZERO;if(S===ea)return T;if(l(S),S===ts)return this;const{endo:F}=e;if(!F)return w.unsafeLadder(this,S);let{k1neg:N,k1:O,k2neg:M,k2:L}=F.splitScalar(S),R=T,v=T,P=this;for(;O>ea||L>ea;)O&ts&&(R=R.add(P)),L&ts&&(v=v.add(P)),P=P.double(),O>>=ts,L>>=ts;return N&&(R=R.negate()),M&&(v=v.negate()),v=new b(t.mul(v.px,F.beta),v.py,v.pz),R.add(v)}multiply(S){l(S);let T=S,F,N;const{endo:O}=e;if(O){const{k1neg:M,k1:L,k2neg:R,k2:v}=O.splitScalar(T);let{p:P,f:Y}=this.wNAF(L),{p:J,f:ne}=this.wNAF(v);P=w.constTimeNegate(M,P),J=w.constTimeNegate(R,J),J=new b(t.mul(J.px,O.beta),J.py,J.pz),F=P.add(J),N=Y.add(ne)}else{const{p:M,f:L}=this.wNAF(T);F=M,N=L}return b.normalizeZ([F,N])[0]}multiplyAndAddUnsafe(S,T,F){const N=b.BASE,O=(L,R)=>R===ea||R===ts||!L.equals(N)?L.multiplyUnsafe(R):L.multiply(R),M=O(this,T).add(O(S,F));return M.is0()?void 0:M}toAffine(S){const{px:T,py:F,pz:N}=this,O=this.is0();S==null&&(S=O?t.ONE:t.inv(N));const M=t.mul(T,S),L=t.mul(F,S),R=t.mul(N,S);if(O)return{x:t.ZERO,y:t.ZERO};if(!t.eql(R,t.ONE))throw new Error("invZ was invalid");return{x:M,y:L}}isTorsionFree(){const{h:S,isTorsionFree:T}=e;if(S===ts)return!0;if(T)return T(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:S,clearCofactor:T}=e;return S===ts?this:T?T(b,this):this.multiplyUnsafe(e.h)}toRawBytes(S=!0){return this.assertValidity(),n(b,this,S)}toHex(S=!0){return cl(this.toRawBytes(S))}}b.BASE=new b(e.Gx,e.Gy,t.ONE),b.ZERO=new b(t.ZERO,t.ONE,t.ZERO);const y=e.nBitLength,w=D9(b,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:h,weierstrassEquation:s,isWithinCurveOrder:c}}function M9(r){const e=Nv(r);return Oh(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function B9(r){const e=M9(r),{Fp:t,n}=e,i=t.BYTES+1,s=2*t.BYTES+1;function c(C){return ea<C&&C<t.ORDER}function l(C){return mi(C,n)}function h(C){return $g(C,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:p,weierstrassEquation:b,isWithinCurveOrder:y}=R9({...e,toBytes(C,U,j){const K=U.toAffine(),X=t.toBytes(K.x),te=ku;return j?te(Uint8Array.from([U.hasEvenY()?2:3]),X):te(Uint8Array.from([4]),X,t.toBytes(K.y))},fromBytes(C){const U=C.length,j=C[0],K=C.subarray(1);if(U===i&&(j===2||j===3)){const X=ic(K);if(!c(X))throw new Error("Point is not on curve");const te=b(X);let z=t.sqrt(te);const D=(z&ts)===ts;return(j&1)===1!==D&&(z=t.neg(z)),{x:X,y:z}}else if(U===s&&j===4){const X=t.fromBytes(K.subarray(0,t.BYTES)),te=t.fromBytes(K.subarray(t.BYTES,2*t.BYTES));return{x:X,y:te}}else throw new Error(`Point of length ${U} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),w=C=>cl(ll(C,e.nByteLength));function _(C){const U=n>>ts;return C>U}function S(C){return _(C)?l(-C):C}const T=(C,U,j)=>ic(C.slice(U,j));class F{constructor(U,j,K){this.r=U,this.s=j,this.recovery=K,this.assertValidity()}static fromCompact(U){const j=e.nByteLength;return U=ys("compactSignature",U,j*2),new F(T(U,0,j),T(U,j,2*j))}static fromDER(U){const{r:j,s:K}=N0.toSig(ys("DER",U));return new F(j,K)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(U){return new F(this.r,this.s,U)}recoverPublicKey(U){const{r:j,s:K,recovery:X}=this,te=v(ys("msgHash",U));if(X==null||![0,1,2,3].includes(X))throw new Error("recovery id invalid");const z=X===2||X===3?j+e.n:j;if(z>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const D=X&1?"03":"02",G=u.fromHex(D+w(z)),ue=h(z),H=l(-te*ue),fe=l(K*ue),ie=u.BASE.multiplyAndAddUnsafe(G,H,fe);if(!ie)throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new F(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return fl(this.toDERHex())}toDERHex(){return N0.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return fl(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}const N={isValidPrivateKey(C){try{return p(C),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const C=Tv(e.n);return S9(e.randomBytes(C),e.n)},precompute(C=8,U=u.BASE){return U._setWindowSize(C),U.multiply(BigInt(3)),U}};function O(C,U=!0){return u.fromPrivateKey(C).toRawBytes(U)}function M(C){const U=C instanceof Uint8Array,j=typeof C=="string",K=(U||j)&&C.length;return U?K===i||K===s:j?K===2*i||K===2*s:C instanceof u}function L(C,U,j=!0){if(M(C))throw new Error("first arg must be private key");if(!M(U))throw new Error("second arg must be public key");return u.fromHex(U).multiply(p(C)).toRawBytes(j)}const R=e.bits2int||function(C){const U=ic(C),j=C.length*8-e.nBitLength;return j>0?U>>BigInt(j):U},v=e.bits2int_modN||function(C){return l(R(C))},P=Ob(e.nBitLength);function Y(C){if(typeof C!="bigint")throw new Error("bigint expected");if(!(ea<=C&&C<P))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ll(C,e.nByteLength)}function J(C,U,j=ne){if(["recovered","canonical"].some(se=>se in j))throw new Error("sign() legacy options not supported");const{hash:K,randomBytes:X}=e;let{lowS:te,prehash:z,extraEntropy:D}=j;te==null&&(te=!0),C=ys("msgHash",C),z&&(C=ys("prehashed msgHash",K(C)));const G=v(C),ue=p(U),H=[Y(ue),Y(G)];if(D!=null){const se=D===!0?X(t.BYTES):D;H.push(ys("extraEntropy",se))}const fe=ku(...H),ie=G;function re(se){const B=R(se);if(!y(B))return;const ee=h(B),de=u.BASE.multiply(B).toAffine(),Ae=l(de.x);if(Ae===ea)return;const Se=l(ee*l(ie+Ae*ue));if(Se===ea)return;let Pe=(de.x===Ae?0:2)|Number(de.y&ts),pt=Se;return te&&_(Se)&&(pt=S(Se),Pe^=1),new F(Ae,pt,Pe)}return{seed:fe,k2sig:re}}const ne={lowS:e.lowS,prehash:!1},le={lowS:e.lowS,prehash:!1};function V(C,U,j=ne){const{seed:K,k2sig:X}=J(C,U,j),te=e;return Sv(te.hash.outputLen,te.nByteLength,te.hmac)(K,X)}u.BASE._setWindowSize(8);function E(C,U,j,K=le){var de;const X=C;if(U=ys("msgHash",U),j=ys("publicKey",j),"strict"in K)throw new Error("options.strict was renamed to lowS");const{lowS:te,prehash:z}=K;let D,G;try{if(typeof X=="string"||X instanceof Uint8Array)try{D=F.fromDER(X)}catch(Ae){if(!(Ae instanceof N0.Err))throw Ae;D=F.fromCompact(X)}else if(typeof X=="object"&&typeof X.r=="bigint"&&typeof X.s=="bigint"){const{r:Ae,s:Se}=X;D=new F(Ae,Se)}else throw new Error("PARSE");G=u.fromHex(j)}catch(Ae){if(Ae.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(te&&D.hasHighS())return!1;z&&(U=e.hash(U));const{r:ue,s:H}=D,fe=v(U),ie=h(H),re=l(fe*ie),se=l(ue*ie),B=(de=u.BASE.multiplyAndAddUnsafe(G,re,se))==null?void 0:de.toAffine();return B?l(B.x)===ue:!1}return{CURVE:e,getPublicKey:O,getSharedSecret:L,sign:V,verify:E,ProjectivePoint:u,Signature:F,utils:N}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function P9(r){return{hash:r,hmac:(e,...t)=>z1(r,e,a7(...t)),randomBytes:f7}}function F9(r,e){const t=n=>B9({...r,...P9(n)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ov=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Cy=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),L9=BigInt(1),Kg=BigInt(2),Sy=(r,e)=>(r+e/Kg)/e;function k9(r){const e=Ov,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),c=BigInt(23),l=BigInt(44),h=BigInt(88),u=r*r*r%e,p=u*u*r%e,b=Gi(p,t,e)*p%e,y=Gi(b,t,e)*p%e,w=Gi(y,Kg,e)*u%e,_=Gi(w,i,e)*w%e,S=Gi(_,s,e)*_%e,T=Gi(S,l,e)*S%e,F=Gi(T,h,e)*T%e,N=Gi(F,l,e)*S%e,O=Gi(N,t,e)*p%e,M=Gi(O,c,e)*_%e,L=Gi(M,n,e)*u%e,R=Gi(L,Kg,e);if(!Wg.eql(Wg.sqr(R),r))throw new Error("Cannot find square root");return R}const Wg=C9(Ov,void 0,void 0,{sqrt:k9}),Ta=F9({a:BigInt(0),b:BigInt(7),Fp:Wg,n:Cy,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=Cy,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-L9*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,c=BigInt("0x100000000000000000000000000000000"),l=Sy(s*r,e),h=Sy(-n*r,e);let u=mi(r-l*t-h*i,e),p=mi(-l*n-h*s,e);const b=u>c,y=p>c;if(b&&(u=e-u),y&&(p=e-p),u>c||p>c)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:b,k1:u,k2neg:y,k2:p}}}},Il);BigInt(0);Ta.ProjectivePoint;const Yg="0x0000000000000000000000000000000000000000",Iy="0x0000000000000000000000000000000000000000000000000000000000000000",U9=`Ethereum Signed Message:
`,Dy=BigInt(0),Ty=BigInt(1),Ny=BigInt(2),Oy=BigInt(27),Ry=BigInt(28),cd=BigInt(35),Mc={};function My(r){return fc(vi(r),32)}var _f,Cf,Sf,V0,Mi;let la=(Mi=class{constructor(e,t,n,i){ve(this,_f,void 0);ve(this,Cf,void 0);ve(this,Sf,void 0);ve(this,V0,void 0);s0(e,Mc,"Signature"),he(this,_f,t),he(this,Cf,n),he(this,Sf,i),he(this,V0,null)}get r(){return W(this,_f)}set r(e){pe(cf(e)===32,"invalid r","value",e),he(this,_f,ze(e))}get s(){return W(this,Cf)}set s(e){pe(cf(e)===32,"invalid s","value",e);const t=ze(e);pe(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),he(this,Cf,t)}get v(){return W(this,Sf)}set v(e){const t=Vt(e,"value");pe(t===27||t===28,"invalid v","v",e),he(this,Sf,t)}get networkV(){return W(this,V0)}get legacyChainId(){const e=this.networkV;return e==null?null:Mi.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=at(this.s);return this.yParity&&(e[0]|=128),ze(e)}get compactSerialized(){return Rr([this.r,this.yParityAndS])}get serialized(){return Rr([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Mi(Mc,this.r,this.s,this.v);return this.networkV&&he(e,V0,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=Et(e,"v");return t==Oy||t==Ry?Dy:(pe(t>=cd,"invalid EIP-155 v","v",e),(t-cd)/Ny)}static getChainIdV(e,t){return Et(e)*Ny+BigInt(35+t-27)}static getNormalizedV(e){const t=Et(e);return t===Dy||t===Oy?27:t===Ty||t===Ry?28:(pe(t>=cd,"invalid v","v",e),t&Ty?27:28)}static from(e){function t(u,p){pe(u,p,"signature",e)}if(e==null)return new Mi(Mc,Iy,Iy,27);if(typeof e=="string"){const u=at(e,"signature");if(u.length===64){const p=ze(u.slice(0,32)),b=u.slice(32,64),y=b[0]&128?28:27;return b[0]&=127,new Mi(Mc,p,ze(b),y)}if(u.length===65){const p=ze(u.slice(0,32)),b=u.slice(32,64);t((b[0]&128)===0,"non-canonical s");const y=Mi.getNormalizedV(u[64]);return new Mi(Mc,p,ze(b),y)}t(!1,"invalid raw signature length")}if(e instanceof Mi)return e.clone();const n=e.r;t(n!=null,"missing r");const i=My(n),s=function(u,p){if(u!=null)return My(u);if(p!=null){t(Kr(p,32),"invalid yParityAndS");const b=at(p);return b[0]&=127,ze(b)}t(!1,"missing s")}(e.s,e.yParityAndS);t((at(s)[0]&128)==0,"non-canonical s");const{networkV:c,v:l}=function(u,p,b){if(u!=null){const y=Et(u);return{networkV:y>=cd?y:void 0,v:Mi.getNormalizedV(y)}}if(p!=null)return t(Kr(p,32),"invalid yParityAndS"),{v:at(p)[0]&128?28:27};if(b!=null){switch(Vt(b,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),h=new Mi(Mc,i,s,l);return c&&he(h,V0,c),t(e.yParity==null||Vt(e.yParity,"sig.yParity")===h.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===h.yParityAndS,"yParityAndS mismatch"),h}},_f=new WeakMap,Cf=new WeakMap,Sf=new WeakMap,V0=new WeakMap,Mi);var qo,ta;let Ja=(ta=class{constructor(e){ve(this,qo,void 0);pe(cf(e)===32,"invalid private key","privateKey","[REDACTED]"),he(this,qo,ze(e))}get privateKey(){return W(this,qo)}get publicKey(){return ta.computePublicKey(W(this,qo))}get compressedPublicKey(){return ta.computePublicKey(W(this,qo),!0)}sign(e){pe(cf(e)===32,"invalid digest length","digest",e);const t=Ta.sign(Tn(e),Tn(W(this,qo)),{lowS:!0});return la.from({r:ca(t.r,32),s:ca(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=ta.computePublicKey(e);return ze(Ta.getSharedSecret(Tn(W(this,qo)),at(t),!1))}static computePublicKey(e,t){let n=at(e,"key");if(n.length===32){const s=Ta.getPublicKey(n,!!t);return ze(s)}if(n.length===64){const s=new Uint8Array(65);s[0]=4,s.set(n,1),n=s}const i=Ta.ProjectivePoint.fromHex(n);return ze(i.toRawBytes(t))}static recoverPublicKey(e,t){pe(cf(e)===32,"invalid digest length","digest",e);const n=la.from(t);let i=Ta.Signature.fromCompact(Tn(Rr([n.r,n.s])));i=i.addRecoveryBit(n.yParity);const s=i.recoverPublicKey(Tn(e));return pe(s!=null,"invalid signautre for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(e,t,n){const i=Ta.ProjectivePoint.fromHex(ta.computePublicKey(e).substring(2)),s=Ta.ProjectivePoint.fromHex(ta.computePublicKey(t).substring(2));return"0x"+i.add(s).toHex(!!n)}},qo=new WeakMap,ta);const H9=BigInt(0),z9=BigInt(36);function By(r){r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=at(Or(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Rb={};for(let r=0;r<10;r++)Rb[String(r)]=String(r);for(let r=0;r<26;r++)Rb[String.fromCharCode(65+r)]=String(10+r);const Py=15;function j9(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>Rb[n]).join("");for(;e.length>=Py;){let n=e.substring(0,Py);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const G9=function(){const r={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];r[t]=BigInt(e)}return r}();function V9(r){r=r.toLowerCase();let e=H9;for(let t=0;t<r.length;t++)e=e*z9+G9[r[t]];return e}function or(r){if(pe(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const e=By(r);return pe(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===r,"bad address checksum","address",r),e}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){pe(r.substring(2,4)===j9(r),"bad icap checksum","address",r);let e=V9(r.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return By("0x"+e)}pe(!1,"invalid address","address",r)}function q9(r){const e=or(r.from);let n=Et(r.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,or(Ur(Or(Lu([e,n])),12))}function Rv(r){return r&&typeof r.getAddress=="function"}async function Gx(r,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(Te(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),pe(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),or(t)}function Nn(r,e){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?or(r):(Te(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Gx(r,e.resolveName(r)));if(Rv(r))return Gx(r,r.getAddress());if(r&&typeof r.then=="function")return Gx(r,r);pe(!1,"unsupported addressable value","target",r)}const Lo={};function it(r,e){let t=!1;return e<0&&(t=!0,e*=-1),new Yn(Lo,`${t?"":"u"}int${e}`,r,{signed:t,width:e})}function pr(r,e){return new Yn(Lo,`bytes${e||""}`,r,{size:e})}const Fy=Symbol.for("_ethers_typed");var q0;const ko=class ko{constructor(e,t,n,i){me(this,"type");me(this,"value");ve(this,q0,void 0);me(this,"_typedSymbol");i==null&&(i=null),s0(Lo,e,"Typed"),xt(this,{_typedSymbol:Fy,type:t,value:n}),he(this,q0,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return W(this,q0)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return W(this,q0)===!0?-1:W(this,q0)===!1?this.value.length:null}static from(e,t){return new ko(Lo,e,t)}static uint8(e){return it(e,8)}static uint16(e){return it(e,16)}static uint24(e){return it(e,24)}static uint32(e){return it(e,32)}static uint40(e){return it(e,40)}static uint48(e){return it(e,48)}static uint56(e){return it(e,56)}static uint64(e){return it(e,64)}static uint72(e){return it(e,72)}static uint80(e){return it(e,80)}static uint88(e){return it(e,88)}static uint96(e){return it(e,96)}static uint104(e){return it(e,104)}static uint112(e){return it(e,112)}static uint120(e){return it(e,120)}static uint128(e){return it(e,128)}static uint136(e){return it(e,136)}static uint144(e){return it(e,144)}static uint152(e){return it(e,152)}static uint160(e){return it(e,160)}static uint168(e){return it(e,168)}static uint176(e){return it(e,176)}static uint184(e){return it(e,184)}static uint192(e){return it(e,192)}static uint200(e){return it(e,200)}static uint208(e){return it(e,208)}static uint216(e){return it(e,216)}static uint224(e){return it(e,224)}static uint232(e){return it(e,232)}static uint240(e){return it(e,240)}static uint248(e){return it(e,248)}static uint256(e){return it(e,256)}static uint(e){return it(e,256)}static int8(e){return it(e,-8)}static int16(e){return it(e,-16)}static int24(e){return it(e,-24)}static int32(e){return it(e,-32)}static int40(e){return it(e,-40)}static int48(e){return it(e,-48)}static int56(e){return it(e,-56)}static int64(e){return it(e,-64)}static int72(e){return it(e,-72)}static int80(e){return it(e,-80)}static int88(e){return it(e,-88)}static int96(e){return it(e,-96)}static int104(e){return it(e,-104)}static int112(e){return it(e,-112)}static int120(e){return it(e,-120)}static int128(e){return it(e,-128)}static int136(e){return it(e,-136)}static int144(e){return it(e,-144)}static int152(e){return it(e,-152)}static int160(e){return it(e,-160)}static int168(e){return it(e,-168)}static int176(e){return it(e,-176)}static int184(e){return it(e,-184)}static int192(e){return it(e,-192)}static int200(e){return it(e,-200)}static int208(e){return it(e,-208)}static int216(e){return it(e,-216)}static int224(e){return it(e,-224)}static int232(e){return it(e,-232)}static int240(e){return it(e,-240)}static int248(e){return it(e,-248)}static int256(e){return it(e,-256)}static int(e){return it(e,-256)}static bytes1(e){return pr(e,1)}static bytes2(e){return pr(e,2)}static bytes3(e){return pr(e,3)}static bytes4(e){return pr(e,4)}static bytes5(e){return pr(e,5)}static bytes6(e){return pr(e,6)}static bytes7(e){return pr(e,7)}static bytes8(e){return pr(e,8)}static bytes9(e){return pr(e,9)}static bytes10(e){return pr(e,10)}static bytes11(e){return pr(e,11)}static bytes12(e){return pr(e,12)}static bytes13(e){return pr(e,13)}static bytes14(e){return pr(e,14)}static bytes15(e){return pr(e,15)}static bytes16(e){return pr(e,16)}static bytes17(e){return pr(e,17)}static bytes18(e){return pr(e,18)}static bytes19(e){return pr(e,19)}static bytes20(e){return pr(e,20)}static bytes21(e){return pr(e,21)}static bytes22(e){return pr(e,22)}static bytes23(e){return pr(e,23)}static bytes24(e){return pr(e,24)}static bytes25(e){return pr(e,25)}static bytes26(e){return pr(e,26)}static bytes27(e){return pr(e,27)}static bytes28(e){return pr(e,28)}static bytes29(e){return pr(e,29)}static bytes30(e){return pr(e,30)}static bytes31(e){return pr(e,31)}static bytes32(e){return pr(e,32)}static address(e){return new ko(Lo,"address",e)}static bool(e){return new ko(Lo,"bool",!!e)}static bytes(e){return new ko(Lo,"bytes",e)}static string(e){return new ko(Lo,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new ko(Lo,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===Fy}static dereference(e,t){if(ko.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};q0=new WeakMap;let Yn=ko;class $9 extends ga{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=Yn.dereference(t,"string");try{n=or(n)}catch(i){return this._throwError(i.message,t)}return e.writeValue(n)}decode(e){return or(ca(e.readValue(),20))}}class K9 extends ga{constructor(t){super(t.name,t.type,"_",t.dynamic);me(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,n){return this.coder.encode(t,n)}decode(t){return this.coder.decode(t)}}function Mv(r,e,t){let n=[];if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let h={};n=e.map(u=>{const p=u.localName;return Te(p,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:t}),Te(!h[p],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:t}),h[p]=!0,t[p]})}else pe(!1,"invalid tuple value","tuple",t);pe(e.length===n.length,"types/value length mismatch","tuple",t);let i=new zg,s=new zg,c=[];e.forEach((h,u)=>{let p=n[u];if(h.dynamic){let b=s.length;h.encode(s,p);let y=i.writeUpdatableValue();c.push(w=>{y(w+b)})}else h.encode(i,p)}),c.forEach(h=>{h(i.length)});let l=r.appendWriter(i);return l+=r.appendWriter(s),l}function Bv(r,e){let t=[],n=[],i=r.subReader(0);return e.forEach(s=>{let c=null;if(s.dynamic){let l=r.readIndex(),h=i.subReader(l);try{c=s.decode(h)}catch(u){if(Kn(u,"BUFFER_OVERRUN"))throw u;c=u,c.baseType=s.name,c.name=s.localName,c.type=s.type}}else try{c=s.decode(r)}catch(l){if(Kn(l,"BUFFER_OVERRUN"))throw l;c=l,c.baseType=s.name,c.name=s.localName,c.type=s.type}if(c==null)throw new Error("investigate");t.push(c),n.push(s.localName||null)}),Qd.fromItems(t,n)}class W9 extends ga{constructor(t,n,i){const s=t.type+"["+(n>=0?n:"")+"]",c=n===-1||t.dynamic;super("array",s,i,c);me(this,"coder");me(this,"length");xt(this,{coder:t,length:n})}defaultValue(){const t=this.coder.defaultValue(),n=[];for(let i=0;i<this.length;i++)n.push(t);return n}encode(t,n){const i=Yn.dereference(n,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,t.writeValue(i.length)),y6(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let c=[];for(let l=0;l<i.length;l++)c.push(this.coder);return Mv(t,c,i)}decode(t){let n=this.length;n===-1&&(n=t.readIndex(),Te(n*ii<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:n*ii,length:t.dataLength}));let i=[];for(let s=0;s<n;s++)i.push(new K9(this.coder));return Bv(t,i)}}class Y9 extends ga{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=Yn.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class Pv extends ga{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Tn(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class X9 extends Pv{constructor(e){super("bytes",e)}decode(e){return ze(super.decode(e))}}class Q9 extends ga{constructor(t,n){let i="bytes"+String(t);super(i,i,n,!1);me(this,"size");xt(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,n){let i=Tn(Yn.dereference(n,this.type));return i.length!==this.size&&this._throwError("incorrect data length",n),t.writeBytes(i)}decode(t){return ze(t.readBytes(this.size))}}const Z9=new Uint8Array([]);class J9 extends ga{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(Z9)}decode(e){return e.readBytes(0),null}}const eS=BigInt(0),tS=BigInt(1),rS=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class nS extends ga{constructor(t,n,i){const s=(n?"int":"uint")+t*8;super(s,s,i,!1);me(this,"size");me(this,"signed");xt(this,{size:t,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,n){let i=Et(Yn.dereference(n,this.type)),s=T0(rS,ii*8);if(this.signed){let c=T0(s,this.size*8-1);(i>c||i<-(c+tS))&&this._throwError("value out-of-bounds",n),i=_6(i,8*ii)}else(i<eS||i>T0(s,this.size*8))&&this._throwError("value out-of-bounds",n);return t.writeValue(i)}decode(t){let n=T0(t.readValue(),this.size*8);return this.signed&&(n=Wd(n,this.size*8)),n}}class iS extends Pv{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,oi(Yn.dereference(t,"string")))}decode(e){return mb(super.decode(e))}}class fd extends ga{constructor(t,n){let i=!1;const s=[];t.forEach(l=>{l.dynamic&&(i=!0),s.push(l.type)});const c="tuple("+s.join(",")+")";super("tuple",c,n,i);me(this,"coders");xt(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const n=this.coders.reduce((i,s)=>{const c=s.localName;return c&&(i[c]||(i[c]=0),i[c]++),i},{});return this.coders.forEach((i,s)=>{let c=i.localName;!c||n[c]!==1||(c==="length"&&(c="_length"),t[c]==null&&(t[c]=t[s]))}),Object.freeze(t)}encode(t,n){const i=Yn.dereference(n,"tuple");return Mv(t,this.coders,i)}decode(t){return Bv(t,this.coders)}}function ua(r){return Or(oi(r))}var sS="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const Ly=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),ky=4;function oS(r){let e=0;function t(){return r[e++]<<8|r[e++]}let n=t(),i=1,s=[0,1];for(let L=1;L<n;L++)s.push(i+=t());let c=t(),l=e;e+=c;let h=0,u=0;function p(){return h==0&&(u=u<<8|r[e++],h=8),u>>--h&1}const b=31,y=2**b,w=y>>>1,_=w>>1,S=y-1;let T=0;for(let L=0;L<b;L++)T=T<<1|p();let F=[],N=0,O=y;for(;;){let L=Math.floor(((T-N+1)*i-1)/O),R=0,v=n;for(;v-R>1;){let J=R+v>>>1;L<s[J]?v=J:R=J}if(R==0)break;F.push(R);let P=N+Math.floor(O*s[R]/i),Y=N+Math.floor(O*s[R+1]/i)-1;for(;!((P^Y)&w);)T=T<<1&S|p(),P=P<<1&S,Y=Y<<1&S|1;for(;P&~Y&_;)T=T&w|T<<1&S>>>1|p(),P=P<<1^w,Y=(Y^w)<<1|w|1;N=P,O=1+Y-P}let M=n-4;return F.map(L=>{switch(L-M){case 3:return M+65792+(r[l++]<<16|r[l++]<<8|r[l++]);case 2:return M+256+(r[l++]<<8|r[l++]);case 1:return M+r[l++];default:return L-1}})}function aS(r){let e=0;return()=>r[e++]}function Fv(r){return aS(oS(cS(r)))}function cS(r){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let t=r.length,n=new Uint8Array(6*t>>3);for(let i=0,s=0,c=0,l=0;i<t;i++)l=l<<6|e[r.charCodeAt(i)],c+=6,c>=8&&(n[s++]=l>>(c-=8));return n}function fS(r){return r&1?~r>>1:r>>1}function lS(r,e){let t=Array(r);for(let n=0,i=0;n<r;n++)t[n]=i+=fS(e());return t}function Uu(r,e=0){let t=[];for(;;){let n=r(),i=r();if(!i)break;e+=n;for(let s=0;s<i;s++)t.push(e+s);e+=i+1}return t}function Lv(r){return Hu(()=>{let e=Uu(r);if(e.length)return e})}function kv(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(uS(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(hS(t,r))}return e.flat()}function Hu(r){let e=[];for(;;){let t=r(e.length);if(!t)break;e.push(t)}return e}function Uv(r,e,t){let n=Array(r).fill().map(()=>[]);for(let i=0;i<e;i++)lS(r,t).forEach((s,c)=>n[c].push(s));return n}function uS(r,e){let t=1+e(),n=e(),i=Hu(e);return Uv(i.length,1+r,e).flatMap((c,l)=>{let[h,...u]=c;return Array(i[l]).fill().map((p,b)=>{let y=b*n;return[h+b*t,u.map(w=>w+y)]})})}function hS(r,e){let t=1+e();return Uv(t,1+r,e).map(i=>[i[0],i.slice(1)])}function dS(r){let e=[],t=Uu(r);return i(n([]),[]),e;function n(s){let c=r(),l=Hu(()=>{let h=Uu(r).map(u=>t[u]);if(h.length)return n(h)});return{S:c,B:l,Q:s}}function i({S:s,B:c},l,h){if(!(s&4&&h===l[l.length-1])){s&2&&(h=l[l.length-1]),s&1&&e.push(l);for(let u of c)for(let p of u.Q)i(u,[...l,p],h)}}}function xS(r){return r.toString(16).toUpperCase().padStart(2,"0")}function Hv(r){return`{${xS(r)}}`}function pS(r){let e=[];for(let t=0,n=r.length;t<n;){let i=r.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function ul(r){let t=r.length;if(t<4096)return String.fromCodePoint(...r);let n=[];for(let i=0;i<t;)n.push(String.fromCodePoint(...r.slice(i,i+=4096)));return n.join("")}function gS(r,e){let t=r.length,n=t-e.length;for(let i=0;n==0&&i<t;i++)n=r[i]-e[i];return n}var bS="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const zu=44032,Zd=4352,Jd=4449,e1=4519,zv=19,jv=21,hl=28,t1=jv*hl,mS=zv*t1,yS=zu+mS,wS=Zd+zv,vS=Jd+jv,ES=e1+hl;function pu(r){return r>>24&255}function Gv(r){return r&16777215}let Xg,Uy,Qg,Id;function AS(){let r=Fv(bS);Xg=new Map(Lv(r).flatMap((e,t)=>e.map(n=>[n,t+1<<24]))),Uy=new Set(Uu(r)),Qg=new Map,Id=new Map;for(let[e,t]of kv(r)){if(!Uy.has(e)&&t.length==2){let[n,i]=t,s=Id.get(n);s||(s=new Map,Id.set(n,s)),s.set(i,e)}Qg.set(e,t.reverse())}}function Vv(r){return r>=zu&&r<yS}function _S(r,e){if(r>=Zd&&r<wS&&e>=Jd&&e<vS)return zu+(r-Zd)*t1+(e-Jd)*hl;if(Vv(r)&&e>e1&&e<ES&&(r-zu)%hl==0)return r+(e-e1);{let t=Id.get(r);return t&&(t=t.get(e),t)?t:-1}}function qv(r){Xg||AS();let e=[],t=[],n=!1;function i(s){let c=Xg.get(s);c&&(n=!0,s|=c),e.push(s)}for(let s of r)for(;;){if(s<128)e.push(s);else if(Vv(s)){let c=s-zu,l=c/t1|0,h=c%t1/hl|0,u=c%hl;i(Zd+l),i(Jd+h),u>0&&i(e1+u)}else{let c=Qg.get(s);c?t.push(...c):i(s)}if(!t.length)break;s=t.pop()}if(n&&e.length>1){let s=pu(e[0]);for(let c=1;c<e.length;c++){let l=pu(e[c]);if(l==0||s<=l){s=l;continue}let h=c-1;for(;;){let u=e[h+1];if(e[h+1]=e[h],e[h]=u,!h||(s=pu(e[--h]),s<=l))break}s=pu(e[c])}}return e}function CS(r){let e=[],t=[],n=-1,i=0;for(let s of r){let c=pu(s),l=Gv(s);if(n==-1)c==0?n=l:e.push(l);else if(i>0&&i>=c)c==0?(e.push(n,...t),t.length=0,n=l):t.push(l),i=c;else{let h=_S(n,l);h>=0?n=h:i==0&&c==0?(e.push(n),n=l):(t.push(l),i=c)}}return n>=0&&e.push(n,...t),e}function $v(r){return qv(r).map(Gv)}function SS(r){return CS(qv(r))}const Hy=45,Kv=".",Wv=65039,Yv=1,Qc=r=>Array.from(r);function ju(r,e){return r.P.has(e)||r.Q.has(e)}class IS extends Array{get is_emoji(){return!0}}let Zg,Xv,O0,Jg,Qv,uf,Vx,Vc,Zv,zy,e2;function Mb(){if(Zg)return;let r=Fv(sS);const e=()=>Uu(r),t=()=>new Set(e());Zg=new Map(kv(r)),Xv=t(),O0=e(),Jg=new Set(e().map(p=>O0[p])),O0=new Set(O0),Qv=t(),t();let n=Lv(r),i=r();const s=()=>new Set(e().flatMap(p=>n[p]).concat(e()));uf=Hu(p=>{let b=Hu(r).map(y=>y+96);if(b.length){let y=p>=i;b[0]-=32,b=ul(b),y&&(b=`Restricted[${b}]`);let w=s(),_=s(),S=!r();return{N:b,P:w,Q:_,M:S,R:y}}}),Vx=t(),Vc=new Map;let c=e().concat(Qc(Vx)).sort((p,b)=>p-b);c.forEach((p,b)=>{let y=r(),w=c[b]=y?c[b-y]:{V:[],M:new Map};w.V.push(p),Vx.has(p)||Vc.set(p,w)});for(let{V:p,M:b}of new Set(Vc.values())){let y=[];for(let _ of p){let S=uf.filter(F=>ju(F,_)),T=y.find(({G:F})=>S.some(N=>F.has(N)));T||(T={G:new Set,V:[]},y.push(T)),T.V.push(_),S.forEach(F=>T.G.add(F))}let w=y.flatMap(_=>Qc(_.G));for(let{G:_,V:S}of y){let T=new Set(w.filter(F=>!_.has(F)));for(let F of S)b.set(F,T)}}let l=new Set,h=new Set;const u=p=>l.has(p)?h.add(p):l.add(p);for(let p of uf){for(let b of p.P)u(b);for(let b of p.Q)u(b)}for(let p of l)!Vc.has(p)&&!h.has(p)&&Vc.set(p,Yv);Zv=new Set(Qc(l).concat(Qc($v(l)))),zy=dS(r).map(p=>IS.from(p)).sort(gS),e2=new Map;for(let p of zy){let b=[e2];for(let y of p){let w=b.map(_=>{let S=_.get(y);return S||(S=new Map,_.set(y,S)),S});y===Wv?b.push(...w):b=w}for(let y of b)y.V=p}}function Bb(r){return(Jv(r)?"":`${Pb(V1([r]))} `)+Hv(r)}function Pb(r){return`"${r}"‎`}function DS(r){if(r.length>=4&&r[2]==Hy&&r[3]==Hy)throw new Error(`invalid label extension: "${ul(r.slice(0,4))}"`)}function TS(r){for(let t=r.lastIndexOf(95);t>0;)if(r[--t]!==95)throw new Error("underscore allowed only at start")}function NS(r){let e=r[0],t=Ly.get(e);if(t)throw Su(`leading ${t}`);let n=r.length,i=-1;for(let s=1;s<n;s++){e=r[s];let c=Ly.get(e);if(c){if(i==s)throw Su(`${t} + ${c}`);i=s+1,t=c}}if(i==n)throw Su(`trailing ${t}`)}function V1(r,e=Hv){let t=[];OS(r[0])&&t.push("◌");let n=0,i=r.length;for(let s=0;s<i;s++){let c=r[s];Jv(c)&&(t.push(ul(r.slice(n,s))),t.push(e(c)),n=s+1)}return t.push(ul(r.slice(n,i))),t.join("")}function OS(r){return Mb(),O0.has(r)}function Jv(r){return Mb(),Qv.has(r)}function RS(r){return FS(MS(r,SS,US))}function MS(r,e,t){if(!r)return[];Mb();let n=0;return r.split(Kv).map(i=>{let s=pS(i),c={input:s,offset:n};n+=s.length+1;try{let l=c.tokens=kS(s,e,t),h=l.length,u;if(!h)throw new Error("empty label");let p=c.output=l.flat();if(TS(p),!(c.emoji=h>1||l[0].is_emoji)&&p.every(y=>y<128))DS(p),u="ASCII";else{let y=l.flatMap(w=>w.is_emoji?[]:w);if(!y.length)u="Emoji";else{if(O0.has(p[0]))throw Su("leading combining mark");for(let S=1;S<h;S++){let T=l[S];if(!T.is_emoji&&O0.has(T[0]))throw Su(`emoji + combining mark: "${ul(l[S-1])} + ${V1([T[0]])}"`)}NS(p);let w=Qc(new Set(y)),[_]=PS(w);LS(_,y),BS(_,w),u=_.N}}c.type=u}catch(l){c.error=l}return c})}function BS(r,e){let t,n=[];for(let i of e){let s=Vc.get(i);if(s===Yv)return;if(s){let c=s.M.get(i);if(t=t?t.filter(l=>c.has(l)):Qc(c),!t.length)return}else n.push(i)}if(t){for(let i of t)if(n.every(s=>ju(i,s)))throw new Error(`whole-script confusable: ${r.N}/${i.N}`)}}function PS(r){let e=uf;for(let t of r){let n=e.filter(i=>ju(i,t));if(!n.length)throw uf.some(i=>ju(i,t))?tE(e[0],t):eE(t);if(e=n,n.length==1)break}return e}function FS(r){return r.map(({input:e,error:t,output:n})=>{if(t){let i=t.message;throw new Error(r.length==1?i:`Invalid label ${Pb(V1(e))}: ${i}`)}return ul(n)}).join(Kv)}function eE(r){return new Error(`disallowed character: ${Bb(r)}`)}function tE(r,e){let t=Bb(e),n=uf.find(i=>i.P.has(e));return n&&(t=`${n.N} ${t}`),new Error(`illegal mixture: ${r.N} + ${t}`)}function Su(r){return new Error(`illegal placement: ${r}`)}function LS(r,e){for(let t of e)if(!ju(r,t))throw tE(r,t);if(r.M){let t=$v(e);for(let n=1,i=t.length;n<i;n++)if(Jg.has(t[n])){let s=n+1;for(let c;s<i&&Jg.has(c=t[s]);s++)for(let l=n;l<s;l++)if(t[l]==c)throw new Error(`duplicate non-spacing marks: ${Bb(c)}`);if(s-n>ky)throw new Error(`excessive non-spacing marks: ${Pb(V1(t.slice(n-1,s)))} (${s-n}/${ky})`);n=s}}}function kS(r,e,t){let n=[],i=[];for(r=r.slice().reverse();r.length;){let s=HS(r);if(s)i.length&&(n.push(e(i)),i=[]),n.push(t(s));else{let c=r.pop();if(Zv.has(c))i.push(c);else{let l=Zg.get(c);if(l)i.push(...l);else if(!Xv.has(c))throw eE(c)}}}return i.length&&n.push(e(i)),n}function US(r){return r.filter(e=>e!=Wv)}function HS(r,e){let t=e2,n,i=r.length;for(;i&&(t=t.get(r[--i]),!!t);){let{V:s}=t;s&&(n=s,e&&e.push(...r.slice(i).reverse()),r.length=i)}return n}const rE=new Uint8Array(32);rE.fill(0);function jy(r){return pe(r.length!==0,"invalid ENS name; empty component","comp",r),r}function nE(r){const e=oi(zS(r)),t=[];if(r.length===0)return t;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(jy(e.slice(n,i))),n=i+1);return pe(n<e.length,"invalid ENS name; empty component","name",r),t.push(jy(e.slice(n))),t}function zS(r){try{if(r.length===0)throw new Error("empty label");return RS(r)}catch(e){pe(!1,`invalid ENS name (${e.message})`,"name",r)}}function t2(r){pe(typeof r=="string","invalid ENS name; not a string","name",r),pe(r.length,"invalid ENS name (empty label)","name",r);let e=rE;const t=nE(r);for(;t.length;)e=Or(Rr([e,Or(t.pop())]));return ze(e)}function jS(r){return ze(Rr(nE(r).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}function qx(r,e){return{address:or(r),storageKeys:e.map((t,n)=>(pe(Kr(t,32),"invalid slot",`storageKeys[${n}]`,t),t.toLowerCase()))}}function bc(r){if(Array.isArray(r))return r.map((t,n)=>Array.isArray(t)?(pe(t.length===2,"invalid slot set",`value[${n}]`,t),qx(t[0],t[1])):(pe(t!=null&&typeof t=="object","invalid address-slot set","value",r),qx(t.address,t.storageKeys)));pe(r!=null&&typeof r=="object","invalid access list","value",r);const e=Object.keys(r).map(t=>{const n=r[t].reduce((i,s)=>(i[s]=!0,i),{});return qx(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function Rh(r){let e;return typeof r=="string"?e=Ja.computePublicKey(r,!1):e=r.publicKey,or(Or("0x"+e.substring(4)).substring(26))}function GS(r,e){return Rh(Ja.recoverPublicKey(r,e))}const yi=BigInt(0),VS=BigInt(2),qS=BigInt(27),$S=BigInt(28),KS=BigInt(35),WS=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Fb(r){return r==="0x"?null:or(r)}function iE(r,e){try{return bc(r)}catch(t){pe(!1,t.message,e,r)}}function q1(r,e){return r==="0x"?0:Vt(r,e)}function ni(r,e){if(r==="0x")return yi;const t=Et(r,e);return pe(t<=WS,"value exceeds uint size",e,t),t}function In(r,e){const t=Et(r,"value"),n=vi(t);return pe(n.length<=32,"value too large",`tx.${e}`,t),n}function sE(r){return bc(r).map(e=>[e.address,e.storageKeys])}function YS(r){const e=yb(r);pe(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",r);const t={type:0,nonce:q1(e[0],"nonce"),gasPrice:ni(e[1],"gasPrice"),gasLimit:ni(e[2],"gasLimit"),to:Fb(e[3]),value:ni(e[4],"value"),data:ze(e[5]),chainId:yi};if(e.length===6)return t;const n=ni(e[6],"v"),i=ni(e[7],"r"),s=ni(e[8],"s");if(i===yi&&s===yi)t.chainId=n;else{let c=(n-KS)/VS;c<yi&&(c=yi),t.chainId=c,pe(c!==yi||n===qS||n===$S,"non-canonical legacy v","v",e[6]),t.signature=la.from({r:fc(e[7],32),s:fc(e[8],32),v:n}),t.hash=Or(r)}return t}function Gy(r,e){const t=[In(r.nonce||0,"nonce"),In(r.gasPrice||0,"gasPrice"),In(r.gasLimit||0,"gasLimit"),r.to!=null?or(r.to):"0x",In(r.value||0,"value"),r.data||"0x"];let n=yi;if(r.chainId!=yi)n=Et(r.chainId,"tx.chainId"),pe(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(r.signature){const s=r.signature.legacyChainId;s!=null&&(n=s)}if(!e)return n!==yi&&(t.push(vi(n)),t.push("0x"),t.push("0x")),Lu(t);let i=BigInt(27+e.yParity);return n!==yi?i=la.getChainIdV(n,e.v):BigInt(e.v)!==i&&pe(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(vi(i)),t.push(vi(e.r)),t.push(vi(e.s)),Lu(t)}function oE(r,e){let t;try{if(t=q1(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{pe(!1,"invalid yParity","yParity",e[0])}const n=fc(e[1],32),i=fc(e[2],32),s=la.from({r:n,s:i,yParity:t});r.signature=s}function XS(r){const e=yb(at(r).slice(1));pe(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",ze(r));const t=ni(e[2],"maxPriorityFeePerGas"),n=ni(e[3],"maxFeePerGas"),i={type:2,chainId:ni(e[0],"chainId"),nonce:q1(e[1],"nonce"),maxPriorityFeePerGas:t,maxFeePerGas:n,gasPrice:null,gasLimit:ni(e[4],"gasLimit"),to:Fb(e[5]),value:ni(e[6],"value"),data:ze(e[7]),accessList:iE(e[8],"accessList")};return e.length===9||(i.hash=Or(r),oE(i,e.slice(9))),i}function Vy(r,e){const t=[In(r.chainId||0,"chainId"),In(r.nonce||0,"nonce"),In(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),In(r.maxFeePerGas||0,"maxFeePerGas"),In(r.gasLimit||0,"gasLimit"),r.to!=null?or(r.to):"0x",In(r.value||0,"value"),r.data||"0x",sE(r.accessList||[])];return e&&(t.push(In(e.yParity,"yParity")),t.push(vi(e.r)),t.push(vi(e.s))),Rr(["0x02",Lu(t)])}function QS(r){const e=yb(at(r).slice(1));pe(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",ze(r));const t={type:1,chainId:ni(e[0],"chainId"),nonce:q1(e[1],"nonce"),gasPrice:ni(e[2],"gasPrice"),gasLimit:ni(e[3],"gasLimit"),to:Fb(e[4]),value:ni(e[5],"value"),data:ze(e[6]),accessList:iE(e[7],"accessList")};return e.length===8||(t.hash=Or(r),oE(t,e.slice(8))),t}function qy(r,e){const t=[In(r.chainId||0,"chainId"),In(r.nonce||0,"nonce"),In(r.gasPrice||0,"gasPrice"),In(r.gasLimit||0,"gasLimit"),r.to!=null?or(r.to):"0x",In(r.value||0,"value"),r.data||"0x",sE(r.accessList||[])];return e&&(t.push(In(e.yParity,"recoveryParam")),t.push(vi(e.r)),t.push(vi(e.s))),Rr(["0x01",Lu(t)])}var $o,If,Df,Tf,Nf,Of,Rf,Mf,Bf,Pf,Ff,Lf;const Oa=class Oa{constructor(){ve(this,$o,void 0);ve(this,If,void 0);ve(this,Df,void 0);ve(this,Tf,void 0);ve(this,Nf,void 0);ve(this,Of,void 0);ve(this,Rf,void 0);ve(this,Mf,void 0);ve(this,Bf,void 0);ve(this,Pf,void 0);ve(this,Ff,void 0);ve(this,Lf,void 0);he(this,$o,null),he(this,If,null),he(this,Tf,0),he(this,Nf,BigInt(0)),he(this,Of,null),he(this,Rf,null),he(this,Mf,null),he(this,Df,"0x"),he(this,Bf,BigInt(0)),he(this,Pf,BigInt(0)),he(this,Ff,null),he(this,Lf,null)}get type(){return W(this,$o)}set type(e){switch(e){case null:he(this,$o,null);break;case 0:case"legacy":he(this,$o,0);break;case 1:case"berlin":case"eip-2930":he(this,$o,1);break;case 2:case"london":case"eip-1559":he(this,$o,2);break;default:pe(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return W(this,If)}set to(e){he(this,If,e==null?null:or(e))}get nonce(){return W(this,Tf)}set nonce(e){he(this,Tf,Vt(e,"value"))}get gasLimit(){return W(this,Nf)}set gasLimit(e){he(this,Nf,Et(e))}get gasPrice(){const e=W(this,Of);return e==null&&(this.type===0||this.type===1)?yi:e}set gasPrice(e){he(this,Of,e==null?null:Et(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=W(this,Rf);return e??(this.type===2?yi:null)}set maxPriorityFeePerGas(e){he(this,Rf,e==null?null:Et(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=W(this,Mf);return e??(this.type===2?yi:null)}set maxFeePerGas(e){he(this,Mf,e==null?null:Et(e,"maxFeePerGas"))}get data(){return W(this,Df)}set data(e){he(this,Df,ze(e))}get value(){return W(this,Bf)}set value(e){he(this,Bf,Et(e,"value"))}get chainId(){return W(this,Pf)}set chainId(e){he(this,Pf,Et(e))}get signature(){return W(this,Ff)||null}set signature(e){he(this,Ff,e==null?null:la.from(e))}get accessList(){const e=W(this,Lf)||null;return e??(this.type===1||this.type===2?[]:null)}set accessList(e){he(this,Lf,e==null?null:bc(e))}get hash(){return this.signature==null?null:Or(this.serialized)}get unsignedHash(){return Or(this.unsignedSerialized)}get from(){return this.signature==null?null:GS(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Ja.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){switch(Te(this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return Gy(this,this.signature);case 1:return qy(this,this.signature);case 2:return Vy(this,this.signature)}Te(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return Gy(this);case 1:return qy(this);case 2:return Vy(this)}Te(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Te(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Te(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Te(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):t?i.push(2):e?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(i.push(0),i.push(1),i.push(2)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}clone(){return Oa.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Oa;if(typeof e=="string"){const n=at(e);if(n[0]>=127)return Oa.from(YS(n));switch(n[0]){case 1:return Oa.from(QS(n));case 2:return Oa.from(XS(n))}Te(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Oa;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=la.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.hash!=null&&(pe(t.isSigned(),"unsigned transaction cannot define hash","tx",e),pe(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(pe(t.isSigned(),"unsigned transaction cannot define from","tx",e),pe(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};$o=new WeakMap,If=new WeakMap,Df=new WeakMap,Tf=new WeakMap,Nf=new WeakMap,Of=new WeakMap,Rf=new WeakMap,Mf=new WeakMap,Bf=new WeakMap,Pf=new WeakMap,Ff=new WeakMap,Lf=new WeakMap;let Gu=Oa;function ZS(r){return typeof r=="string"&&(r=oi(r)),Or(Rr([oi(U9),oi(String(r.length)),r]))}const aE=new Uint8Array(32);aE.fill(0);const JS=BigInt(-1),cE=BigInt(0),fE=BigInt(1),eI=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function tI(r){const e=at(r),t=e.length%32;return t?Rr([e,aE.slice(t)]):ze(e)}const rI=ca(fE,32),nI=ca(cE,32),$y={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},$x=["name","version","chainId","verifyingContract","salt"];function Ky(r){return function(e){return pe(typeof e=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}const iI={name:Ky("name"),version:Ky("version"),chainId:function(r){const e=Et(r,"domain.chainId");return pe(e>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(e)?Number(e):Yc(e)},verifyingContract:function(r){try{return or(r).toLowerCase()}catch{}pe(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const e=at(r,"domain.salt");return pe(e.length===32,'invalid domain value "salt"',"domain.salt",r),ze(e)}};function Kx(r){{const e=r.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",n=parseInt(e[2]||"256");pe(n%8===0&&n!==0&&n<=256&&(e[2]==null||e[2]===String(n)),"invalid numeric width","type",r);const i=T0(eI,t?n-1:n),s=t?(i+fE)*JS:cE;return function(c){const l=Et(c,"value");return pe(l>=s&&l<=i,`value out-of-bounds for ${r}`,"value",l),ca(t?_6(l,256):l,32)}}}{const e=r.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return pe(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",r),function(n){const i=at(n);return pe(i.length===t,`invalid length for ${r}`,"value",n),tI(n)}}}switch(r){case"address":return function(e){return fc(or(e),32)};case"bool":return function(e){return e?rI:nI};case"bytes":return function(e){return Or(e)};case"string":return function(e){return ua(e)}}return null}function Wy(r,e){return`${r}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}var hh,Ko,kf,R1,lE;const Yi=class Yi{constructor(e){ve(this,R1);me(this,"primaryType");ve(this,hh,void 0);ve(this,Ko,void 0);ve(this,kf,void 0);he(this,hh,JSON.stringify(e)),he(this,Ko,new Map),he(this,kf,new Map);const t=new Map,n=new Map,i=new Map;Object.keys(e).forEach(l=>{t.set(l,new Set),n.set(l,[]),i.set(l,new Set)});for(const l in e){const h=new Set;for(const u of e[l]){pe(!h.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),h.add(u.name);const p=u.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;pe(p!==l,`circular type reference to ${JSON.stringify(p)}`,"types",e),!Kx(p)&&(pe(n.has(p),`unknown type ${JSON.stringify(p)}`,"types",e),n.get(p).push(l),t.get(l).add(p))}}const s=Array.from(n.keys()).filter(l=>n.get(l).length===0);pe(s.length!==0,"missing primary type","types",e),pe(s.length===1,`ambiguous primary types or unused types: ${s.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),xt(this,{primaryType:s[0]});function c(l,h){pe(!h.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),h.add(l);for(const u of t.get(l))if(n.has(u)){c(u,h);for(const p of h)i.get(p).add(u)}h.delete(l)}c(this.primaryType,new Set);for(const[l,h]of i){const u=Array.from(h);u.sort(),W(this,Ko).set(l,Wy(l,e[l])+u.map(p=>Wy(p,e[p])).join(""))}}get types(){return JSON.parse(W(this,hh))}getEncoder(e){let t=W(this,kf).get(e);return t||(t=Me(this,R1,lE).call(this,e),W(this,kf).set(e,t)),t}encodeType(e){const t=W(this,Ko).get(e);return pe(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Or(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(Kx(e))return n(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i)return pe(!i[3]||parseInt(i[3])===t.length,`array length mismatch; expected length ${parseInt(i[3])}`,"value",t),t.map(c=>this._visit(i[1],c,n));const s=this.types[e];if(s)return s.reduce((c,{name:l,type:h})=>(c[l]=this._visit(h,t[l],n),c),{});pe(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Yi(e)}static getPrimaryType(e){return Yi.from(e).primaryType}static hashStruct(e,t,n){return Yi.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(e[n]==null)continue;const i=$y[n];pe(i,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:i})}return t.sort((n,i)=>$x.indexOf(n.name)-$x.indexOf(i.name)),Yi.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return Rr(["0x1901",Yi.hashDomain(e),Yi.from(t).hash(n)])}static hash(e,t,n){return Or(Yi.encode(e,t,n))}static async resolveNames(e,t,n,i){e=Object.assign({},e);for(const l in e)e[l]==null&&delete e[l];const s={};e.verifyingContract&&!Kr(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const c=Yi.from(t);c.visit(n,(l,h)=>(l==="address"&&!Kr(h,20)&&(s[h]="0x"),h));for(const l in s)s[l]=await i(l);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=c.visit(n,(l,h)=>l==="address"&&s[h]?s[h]:h),{domain:e,value:n}}static getPayload(e,t,n){Yi.hashDomain(e);const i={},s=[];$x.forEach(h=>{const u=e[h];u!=null&&(i[h]=iI[h](u),s.push({name:h,type:$y[h]}))});const c=Yi.from(t),l=Object.assign({},t);return pe(l.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),l.EIP712Domain=s,c.encode(n),{types:l,domain:i,primaryType:c.primaryType,message:c.visit(n,(h,u)=>{if(h.match(/^bytes(\d*)/))return ze(at(u));if(h.match(/^u?int/))return Et(u).toString();switch(h){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return pe(typeof u=="string","invalid string","value",u),u}pe(!1,"unsupported type","type",h)})}}};hh=new WeakMap,Ko=new WeakMap,kf=new WeakMap,R1=new WeakSet,lE=function(e){{const i=Kx(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i);return c=>{pe(!t[3]||parseInt(t[3])===c.length,`array length mismatch; expected length ${parseInt(t[3])}`,"value",c);let l=c.map(s);return W(this,Ko).has(i)&&(l=l.map(Or)),Or(Rr(l))}}const n=this.types[e];if(n){const i=ua(W(this,Ko).get(e));return s=>{const c=n.map(({name:l,type:h})=>{const u=this.getEncoder(h)(s[l]);return W(this,Ko).has(h)?Or(u):u});return c.unshift(i),Rr(c)}}pe(!1,`unknown type: ${e}`,"type",e)};let dl=Yi;function si(r){const e=new Set;return r.forEach(t=>e.add(t)),Object.freeze(e)}const sI="external public payable",oI=si(sI.split(" ")),uE="constant external internal payable private public pure view",aI=si(uE.split(" ")),hE="constructor error event fallback function receive struct",dE=si(hE.split(" ")),xE="calldata memory storage payable indexed",cI=si(xE.split(" ")),fI="tuple returns",lI=[hE,xE,fI,uE].join(" "),uI=si(lI.split(" ")),hI={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},dI=new RegExp("^(\\s*)"),xI=new RegExp("^([0-9]+)"),pI=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),pE=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),gE=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Sn,Ss,dh,r2;const M1=class M1{constructor(e){ve(this,dh);ve(this,Sn,void 0);ve(this,Ss,void 0);he(this,Sn,0),he(this,Ss,e.slice())}get offset(){return W(this,Sn)}get length(){return W(this,Ss).length-W(this,Sn)}clone(){return new M1(W(this,Ss))}reset(){he(this,Sn,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e)throw new Error(`expected ${e}; got ${JSON.stringify(this.peek())}`);return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=Me(this,dh,r2).call(this,W(this,Sn)+1,e.match+1);return he(this,Sn,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;W(this,Sn)<e.match-1;){const n=this.peek().linkNext;t.push(Me(this,dh,r2).call(this,W(this,Sn)+1,n)),he(this,Sn,n)}return he(this,Sn,e.match+1),t}peek(){if(W(this,Sn)>=W(this,Ss).length)throw new Error("out-of-bounds");return W(this,Ss)[W(this,Sn)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return Zl(this,Sn)._++,e}toString(){const e=[];for(let t=W(this,Sn);t<W(this,Ss).length;t++){const n=W(this,Ss)[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}};Sn=new WeakMap,Ss=new WeakMap,dh=new WeakSet,r2=function(e=0,t=0){return new M1(W(this,Ss).slice(e,t).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))};let Bs=M1;function a0(r){const e=[],t=c=>{const l=s<r.length?JSON.stringify(r[s]):"$EOI";throw new Error(`invalid token ${l} at ${s}: ${c}`)};let n=[],i=[],s=0;for(;s<r.length;){let c=r.substring(s),l=c.match(dI);l&&(s+=l[1].length,c=r.substring(s));const h={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(h);let u=hI[c[0]]||"";if(u){if(h.type=u,h.text=c[0],s++,u==="OPEN_PAREN")n.push(e.length-1),i.push(e.length-1);else if(u=="CLOSE_PAREN")n.length===0&&t("no matching open bracket"),h.match=n.pop(),e[h.match].match=e.length-1,h.depth--,h.linkBack=i.pop(),e[h.linkBack].linkNext=e.length-1;else if(u==="COMMA")h.linkBack=i.pop(),e[h.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(u==="OPEN_BRACKET")h.type="BRACKET";else if(u==="CLOSE_BRACKET"){let p=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const b=e.pop().text;p=b+p,e[e.length-1].value=Vt(b)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=p}continue}if(l=c.match(pI),l){if(h.text=l[1],s+=h.text.length,uI.has(h.text)){h.type="KEYWORD";continue}if(h.text.match(gE)){h.type="TYPE";continue}h.type="ID";continue}if(l=c.match(xI),l){h.text=l[1],h.type="NUMBER",s+=h.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(c[0])} at position ${s}`)}return new Bs(e.map(c=>Object.freeze(c)))}function Yy(r,e){let t=[];for(const n in e.keys())r.has(n)&&t.push(n);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function $1(r,e){if(e.peekKeyword(dE)){const t=e.pop().text;if(t!==r)throw new Error(`expected ${r}, got ${t}`)}return e.popType("ID")}function ha(r,e){const t=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(r.pop(),t.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);t.add(n)}return Object.freeze(t)}function bE(r){let e=ha(r,aI);return Yy(e,si("constant payable nonpayable".split(" "))),Yy(e,si("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function sa(r,e){return r.popParams().map(t=>On.from(t,e))}function mE(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return Et(r.pop().text);throw new Error("invalid gas")}return null}function lc(r){if(r.length)throw new Error(`unexpected tokens: ${r.toString()}`)}const gI=new RegExp(/^(.*)\[([0-9]*)\]$/);function Xy(r){const e=r.match(gE);if(pe(e,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(e[2]){const t=parseInt(e[2]);pe(t!==0&&t<=32,"invalid bytes length","type",r)}else if(e[3]){const t=parseInt(e[3]);pe(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",r)}return r}const $r={},Ei=Symbol.for("_ethers_internal"),Qy="_ParamTypeInternal",Zy="_ErrorInternal",Jy="_EventInternal",e3="_ConstructorInternal",t3="_FallbackInternal",r3="_FunctionInternal",n3="_StructInternal";var Uf,Dd;const Xi=class Xi{constructor(e,t,n,i,s,c,l,h){ve(this,Uf);me(this,"name");me(this,"type");me(this,"baseType");me(this,"indexed");me(this,"components");me(this,"arrayLength");me(this,"arrayChildren");if(s0(e,$r,"ParamType"),Object.defineProperty(this,Ei,{value:Qy}),c&&(c=Object.freeze(c.slice())),i==="array"){if(l==null||h==null)throw new Error("")}else if(l!=null||h!=null)throw new Error("");if(i==="tuple"){if(c==null)throw new Error("")}else if(c!=null)throw new Error("");xt(this,{name:t,type:n,baseType:i,indexed:s,components:c,arrayLength:l,arrayChildren:h})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=n,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(i=>n.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((i,s)=>n.components[s].walk(i,t))}return t(this.type,e)}async walkAsync(e,t){const n=[],i=[e];return Me(this,Uf,Dd).call(this,n,e,t,s=>{i[0]=s}),n.length&&await Promise.all(n),i[0]}static from(e,t){if(Xi.isParamType(e))return e;if(typeof e=="string")try{return Xi.from(a0(e),t)}catch{pe(!1,"invalid param type","obj",e)}else if(e instanceof Bs){let l="",h="",u=null;ha(e,si(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(h="tuple",u=e.popParams().map(S=>Xi.from(S)),l=`tuple(${u.map(S=>S.format()).join(",")})`):(l=Xy(e.popType("TYPE")),h=l);let p=null,b=null;for(;e.length&&e.peekType("BRACKET");){const S=e.pop();p=new Xi($r,"",l,h,null,u,b,p),b=S.value,l+=S.text,h="array",u=null}let y=null;if(ha(e,cI).has("indexed")){if(!t)throw new Error("");y=!0}const _=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Xi($r,_,l,h,y,u,b,p)}const n=e.name;pe(!n||typeof n=="string"&&n.match(pE),"invalid name","obj.name",n);let i=e.indexed;i!=null&&(pe(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,c=s.match(gI);if(c){const l=parseInt(c[2]||"-1"),h=Xi.from({type:c[1],components:e.components});return new Xi($r,n||"",s,"array",i,null,l,h)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const l=e.components!=null?e.components.map(u=>Xi.from(u)):null;return new Xi($r,n||"",s,"tuple",i,l,null,null)}return s=Xy(e.type),new Xi($r,n||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[Ei]===Qy}};Uf=new WeakSet,Dd=function(e,t,n,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const c=this.arrayChildren,l=t.slice();l.forEach((h,u)=>{var p;Me(p=c,Uf,Dd).call(p,e,h,n,b=>{l[u]=b})}),i(l);return}if(this.isTuple()){const c=this.components;let l;if(Array.isArray(t))l=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");l=c.map(h=>{if(!h.name)throw new Error("cannot use object value with unnamed components");if(!(h.name in t))throw new Error(`missing value for component ${h.name}`);return t[h.name]})}if(l.length!==this.components.length)throw new Error("array is wrong length");l.forEach((h,u)=>{var p;Me(p=c[u],Uf,Dd).call(p,e,h,n,b=>{l[u]=b})}),i(l);return}const s=n(this.type,t);s.then?e.push(async function(){i(await s)}()):i(s)};let On=Xi;class uc{constructor(e,t,n){me(this,"type");me(this,"inputs");s0(e,$r,"Fragment"),n=Object.freeze(n.slice()),xt(this,{type:t,inputs:n})}static from(e){if(typeof e=="string"){try{uc.from(JSON.parse(e))}catch{}return uc.from(a0(e))}if(e instanceof Bs)switch(e.peekKeyword(dE)){case"constructor":return ra.from(e);case"error":return wi.from(e);case"event":return ao.from(e);case"fallback":case"receive":return Uo.from(e);case"function":return co.from(e);case"struct":return sc.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return ra.from(e);case"error":return wi.from(e);case"event":return ao.from(e);case"fallback":case"receive":return Uo.from(e);case"function":return co.from(e);case"struct":return sc.from(e)}Te(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}pe(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return ra.isFragment(e)}static isError(e){return wi.isFragment(e)}static isEvent(e){return ao.isFragment(e)}static isFunction(e){return co.isFragment(e)}static isStruct(e){return sc.isFragment(e)}}class K1 extends uc{constructor(t,n,i,s){super(t,n,s);me(this,"name");pe(typeof i=="string"&&i.match(pE),"invalid identifier","name",i),s=Object.freeze(s.slice()),xt(this,{name:i})}}function Vu(r,e){return"("+e.map(t=>t.format(r)).join(r==="full"?", ":",")+")"}class wi extends K1{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,Ei,{value:Zy})}get selector(){return ua(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+Vu(e,this.inputs)),t.join(" ")}static from(e){if(wi.isFragment(e))return e;if(typeof e=="string")return wi.from(a0(e));if(e instanceof Bs){const t=$1("error",e),n=sa(e);return lc(e),new wi($r,t,n)}return new wi($r,e.name,e.inputs?e.inputs.map(On.from):[])}static isFragment(e){return e&&e[Ei]===Zy}}class ao extends K1{constructor(t,n,i,s){super(t,"event",n,i);me(this,"anonymous");Object.defineProperty(this,Ei,{value:Jy}),xt(this,{anonymous:s})}get topicHash(){return ua(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const n=[];return t!=="sighash"&&n.push("event"),n.push(this.name+Vu(t,this.inputs)),t!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(t,n){return n=(n||[]).map(s=>On.from(s)),new ao($r,t,n,!1).topicHash}static from(t){if(ao.isFragment(t))return t;if(typeof t=="string")try{return ao.from(a0(t))}catch{pe(!1,"invalid event fragment","obj",t)}else if(t instanceof Bs){const n=$1("event",t),i=sa(t,!0),s=!!ha(t,si(["anonymous"])).has("anonymous");return lc(t),new ao($r,n,i,s)}return new ao($r,t.name,t.inputs?t.inputs.map(n=>On.from(n,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[Ei]===Jy}}class ra extends uc{constructor(t,n,i,s,c){super(t,n,i);me(this,"payable");me(this,"gas");Object.defineProperty(this,Ei,{value:e3}),xt(this,{payable:s,gas:c})}format(t){if(Te(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const n=[`constructor${Vu(t,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(t){if(ra.isFragment(t))return t;if(typeof t=="string")try{return ra.from(a0(t))}catch{pe(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Bs){ha(t,si(["constructor"]));const n=sa(t),i=!!ha(t,oI).has("payable"),s=mE(t);return lc(t),new ra($r,"constructor",n,i,s)}return new ra($r,"constructor",t.inputs?t.inputs.map(On.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[Ei]===e3}}class Uo extends uc{constructor(t,n,i){super(t,"fallback",n);me(this,"payable");Object.defineProperty(this,Ei,{value:t3}),xt(this,{payable:i})}format(t){const n=this.inputs.length===0?"receive":"fallback";if(t==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:i})}return`${n}()${this.payable?" payable":""}`}static from(t){if(Uo.isFragment(t))return t;if(typeof t=="string")try{return Uo.from(a0(t))}catch{pe(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Bs){const n=t.toString(),i=t.peekKeyword(si(["fallback","receive"]));if(pe(i,"type must be fallback or receive","obj",n),t.popKeyword(si(["fallback","receive"]))==="receive"){const h=sa(t);return pe(h.length===0,"receive cannot have arguments","obj.inputs",h),ha(t,si(["payable"])),lc(t),new Uo($r,[],!0)}let c=sa(t);c.length?pe(c.length===1&&c[0].type==="bytes","invalid fallback inputs","obj.inputs",c.map(h=>h.format("minimal")).join(", ")):c=[On.from("bytes")];const l=bE(t);if(pe(l==="nonpayable"||l==="payable","fallback cannot be constants","obj.stateMutability",l),ha(t,si(["returns"])).has("returns")){const h=sa(t);pe(h.length===1&&h[0].type==="bytes","invalid fallback outputs","obj.outputs",h.map(u=>u.format("minimal")).join(", "))}return lc(t),new Uo($r,c,l==="payable")}if(t.type==="receive")return new Uo($r,[],!0);if(t.type==="fallback"){const n=[On.from("bytes")],i=t.stateMutability==="payable";return new Uo($r,n,i)}pe(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[Ei]===t3}}class co extends K1{constructor(t,n,i,s,c,l){super(t,"function",n,s);me(this,"constant");me(this,"outputs");me(this,"stateMutability");me(this,"payable");me(this,"gas");Object.defineProperty(this,Ei,{value:r3}),c=Object.freeze(c.slice()),xt(this,{constant:i==="view"||i==="pure",gas:l,outputs:c,payable:i==="payable",stateMutability:i})}get selector(){return ua(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});const n=[];return t!=="sighash"&&n.push("function"),n.push(this.name+Vu(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(Vu(t,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(t,n){return n=(n||[]).map(s=>On.from(s)),new co($r,t,"view",n,[],null).selector}static from(t){if(co.isFragment(t))return t;if(typeof t=="string")try{return co.from(a0(t))}catch{pe(!1,"invalid function fragment","obj",t)}else if(t instanceof Bs){const i=$1("function",t),s=sa(t),c=bE(t);let l=[];ha(t,si(["returns"])).has("returns")&&(l=sa(t));const h=mE(t);return lc(t),new co($r,i,c,s,l,h)}let n=t.stateMutability;return n==null&&(n="payable",typeof t.constant=="boolean"?(n="view",t.constant||(n="payable",typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable")),new co($r,t.name,n,t.inputs?t.inputs.map(On.from):[],t.outputs?t.outputs.map(On.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[Ei]===r3}}class sc extends K1{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,Ei,{value:n3})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return sc.from(a0(e))}catch{pe(!1,"invalid struct fragment","obj",e)}else if(e instanceof Bs){const t=$1("struct",e),n=sa(e);return lc(e),new sc($r,t,n)}return new sc($r,e.name,e.inputs?e.inputs.map(On.from):[])}static isFragment(e){return e&&e[Ei]===n3}}const Fs=new Map;Fs.set(0,"GENERIC_PANIC");Fs.set(1,"ASSERT_FALSE");Fs.set(17,"OVERFLOW");Fs.set(18,"DIVIDE_BY_ZERO");Fs.set(33,"ENUM_RANGE_ERROR");Fs.set(34,"BAD_STORAGE_DATA");Fs.set(49,"STACK_UNDERFLOW");Fs.set(50,"ARRAY_RANGE_ERROR");Fs.set(65,"OUT_OF_MEMORY");Fs.set(81,"UNINITIALIZED_FUNCTION_CALL");const bI=new RegExp(/^bytes([0-9]*)$/),mI=new RegExp(/^(u?int)([0-9]*)$/);let Wx=null,i3=1024;function yI(r,e,t,n){let i="missing revert data",s=null;const c=null;let l=null;if(t){i="execution reverted";const u=at(t);if(t=ze(t),u.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(u.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(ze(u.slice(0,4))==="0x08c379a0")try{s=n.decode(["string"],u.slice(4))[0],l={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(ze(u.slice(0,4))==="0x4e487b71")try{const p=Number(n.decode(["uint256"],u.slice(4))[0]);l={signature:"Panic(uint256)",name:"Panic",args:[p]},s=`Panic due to ${Fs.get(p)||"UNKNOWN"}(${p})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const h={to:e.to?or(e.to):null,data:e.data||"0x"};return e.from&&(h.from=or(e.from)),ln(i,"CALL_EXCEPTION",{action:r,data:t,reason:s,transaction:h,invocation:c,revert:l})}var Fa,qc;const B1=class B1{constructor(){ve(this,Fa)}getDefaultValue(e){const t=e.map(i=>Me(this,Fa,qc).call(this,On.from(i)));return new fd(t,"_").defaultValue()}encode(e,t){y6(t.length,e.length,"types/values length mismatch");const n=e.map(c=>Me(this,Fa,qc).call(this,On.from(c))),i=new fd(n,"_"),s=new zg;return i.encode(s,t),s.data}decode(e,t,n){const i=e.map(c=>Me(this,Fa,qc).call(this,On.from(c)));return new fd(i,"_").decode(new jg(t,n,i3))}static _setDefaultMaxInflation(e){pe(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),i3=e}static defaultAbiCoder(){return Wx==null&&(Wx=new B1),Wx}static getBuiltinCallException(e,t,n){return yI(e,t,n,B1.defaultAbiCoder())}};Fa=new WeakSet,qc=function(e){if(e.isArray())return new W9(Me(this,Fa,qc).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new fd(e.components.map(n=>Me(this,Fa,qc).call(this,n)),e.name);switch(e.baseType){case"address":return new $9(e.name);case"bool":return new Y9(e.name);case"string":return new iS(e.name);case"bytes":return new X9(e.name);case"":return new J9(e.name)}let t=e.type.match(mI);if(t){let n=parseInt(t[2]||"256");return pe(n!==0&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new nS(n/8,t[1]==="int",e.name)}if(t=e.type.match(bI),t){let n=parseInt(t[1]);return pe(n!==0&&n<=32,"invalid bytes length","param",e),new Q9(n,e.name)}pe(!1,"invalid type","type",e.type)};let qu=B1;class wI{constructor(e,t,n){me(this,"fragment");me(this,"name");me(this,"signature");me(this,"topic");me(this,"args");const i=e.name,s=e.format();xt(this,{fragment:e,name:i,signature:s,topic:t,args:n})}}class vI{constructor(e,t,n,i){me(this,"fragment");me(this,"name");me(this,"args");me(this,"signature");me(this,"selector");me(this,"value");const s=e.name,c=e.format();xt(this,{fragment:e,name:s,args:n,signature:c,selector:t,value:i})}}class EI{constructor(e,t,n){me(this,"fragment");me(this,"name");me(this,"args");me(this,"signature");me(this,"selector");const i=e.name,s=e.format();xt(this,{fragment:e,name:i,args:n,signature:s,selector:t})}}class s3{constructor(e){me(this,"hash");me(this,"_isIndexed");xt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const o3={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},a3={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let e="unknown panic code";return r>=0&&r<=255&&o3[r.toString()]&&(e=o3[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${e})`}}};var Js,eo,to,Un,Hf,Td,zf,Nd;const nf=class nf{constructor(e){ve(this,Hf);ve(this,zf);me(this,"fragments");me(this,"deploy");me(this,"fallback");me(this,"receive");ve(this,Js,void 0);ve(this,eo,void 0);ve(this,to,void 0);ve(this,Un,void 0);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,he(this,to,new Map),he(this,Js,new Map),he(this,eo,new Map);const n=[];for(const c of t)try{n.push(uc.from(c))}catch(l){console.log("EE",l)}xt(this,{fragments:Object.freeze(n)});let i=null,s=!1;he(this,Un,this.getAbiCoder()),this.fragments.forEach((c,l)=>{let h;switch(c.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}xt(this,{deploy:c});return;case"fallback":c.inputs.length===0?s=!0:(pe(!i||c.payable!==i.payable,"conflicting fallback fragments",`fragments[${l}]`,c),i=c,s=i.payable);return;case"function":h=W(this,to);break;case"event":h=W(this,eo);break;case"error":h=W(this,Js);break;default:return}const u=c.format();h.has(u)||h.set(u,c)}),this.deploy||xt(this,{deploy:ra.from("constructor()")}),xt(this,{fallback:i,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return qu.defaultAbiCoder()}getFunctionName(e){const t=Me(this,Hf,Td).call(this,e,null,!1);return pe(t,"no matching function","key",e),t.name}hasFunction(e){return!!Me(this,Hf,Td).call(this,e,null,!1)}getFunction(e,t){return Me(this,Hf,Td).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(W(this,to).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(W(this,to).get(i),n)}}getEventName(e){const t=Me(this,zf,Nd).call(this,e,null,!1);return pe(t,"no matching event","key",e),t.name}hasEvent(e){return!!Me(this,zf,Nd).call(this,e,null,!1)}getEvent(e,t){return Me(this,zf,Nd).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(W(this,eo).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(W(this,eo).get(i),n)}}getError(e,t){if(Kr(e)){const i=e.toLowerCase();if(a3[i])return wi.from(a3[i].signature);for(const s of W(this,Js).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,c]of W(this,Js))s.split("(")[0]===e&&i.push(c);if(i.length===0)return e==="Error"?wi.from("error Error(string)"):e==="Panic"?wi.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(c=>JSON.stringify(c.format())).join(", ");pe(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=wi.from(e).format(),e==="Error(string)")return wi.from("error Error(string)");if(e==="Panic(uint256)")return wi.from("error Panic(uint256)");const n=W(this,Js).get(e);return n||null}forEachError(e){const t=Array.from(W(this,Js).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(W(this,Js).get(i),n)}}_decodeParams(e,t){return W(this,Un).decode(e,t)}_encodeParams(e,t){return W(this,Un).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);pe(n,"unknown error","fragment",e),e=n}return pe(Ur(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Ur(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);pe(n,"unknown error","fragment",e),e=n}return Rr([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);pe(n,"unknown function","fragment",e),e=n}return pe(Ur(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Ur(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);pe(n,"unknown function","fragment",e),e=n}return Rr([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);pe(s,"unknown function","fragment",e),e=s}let n="invalid length for result data";const i=Tn(t);if(i.length%32===0)try{return W(this,Un).decode(e.outputs,i)}catch{n="could not decode result data"}Te(!1,n,"BAD_DATA",{value:ze(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=at(e,"data"),i=qu.getBuiltinCallException("call",t,n);if(i.message.startsWith("execution reverted (unknown custom error)")){const l=ze(n.slice(0,4)),h=this.getError(l);if(h)try{const u=W(this,Un).decode(h.inputs,n.slice(4));i.revert={name:h.name,signature:h.format(),args:u},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const c=this.parseTransaction(t);return c&&(i.invocation={method:c.name,signature:c.signature,args:c.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const n=this.getFunction(e);pe(n,"unknown function","fragment",e),e=n}return ze(W(this,Un).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const s=this.getEvent(e);pe(s,"unknown event","eventFragment",e),e=s}Te(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const i=(s,c)=>s.type==="string"?ua(c):s.type==="bytes"?Or(ze(c)):(s.type==="bool"&&typeof c=="boolean"?c=c?"0x01":"0x00":s.type.match(/^u?int/)?c=ca(c):s.type.match(/^bytes/)?c=NC(c,32):s.type==="address"&&W(this,Un).encode(["address"],[c]),fc(ze(c),32));for(t.forEach((s,c)=>{const l=e.inputs[c];if(!l.indexed){pe(s==null,"cannot filter non-indexed parameters; must be null","contract."+l.name,s);return}s==null?n.push(null):l.baseType==="array"||l.baseType==="tuple"?pe(!1,"filtering with tuples or arrays not supported","contract."+l.name,s):Array.isArray(s)?n.push(s.map(h=>i(l,h))):n.push(i(l,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){if(typeof e=="string"){const c=this.getEvent(e);pe(c,"unknown event","eventFragment",e),e=c}const n=[],i=[],s=[];return e.anonymous||n.push(e.topicHash),pe(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((c,l)=>{const h=t[l];if(c.indexed)if(c.type==="string")n.push(ua(h));else if(c.type==="bytes")n.push(Or(h));else{if(c.baseType==="tuple"||c.baseType==="array")throw new Error("not implemented");n.push(W(this,Un).encode([c.type],[h]))}else i.push(c),s.push(h)}),{data:W(this,Un).encode(i,s),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"){const w=this.getEvent(e);pe(w,"unknown event","eventFragment",e),e=w}if(n!=null&&!e.anonymous){const w=e.topicHash;pe(Kr(n[0],32)&&n[0].toLowerCase()===w,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const i=[],s=[],c=[];e.inputs.forEach((w,_)=>{w.indexed?w.type==="string"||w.type==="bytes"||w.baseType==="tuple"||w.baseType==="array"?(i.push(On.from({type:"bytes32",name:w.name})),c.push(!0)):(i.push(w),c.push(!1)):(s.push(w),c.push(!1))});const l=n!=null?W(this,Un).decode(i,Rr(n)):null,h=W(this,Un).decode(s,t,!0),u=[],p=[];let b=0,y=0;return e.inputs.forEach((w,_)=>{let S=null;if(w.indexed)if(l==null)S=new s3(null);else if(c[_])S=new s3(l[y++]);else try{S=l[y++]}catch(T){S=T}else try{S=h[b++]}catch(T){S=T}u.push(S),p.push(w.name||null)}),Qd.fromItems(u,p)}parseTransaction(e){const t=at(e.data,"tx.data"),n=Et(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(ze(t.slice(0,4)));if(!i)return null;const s=W(this,Un).decode(i.inputs,t.slice(4));return new vI(i,i.selector,s,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new wI(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=ze(e),n=this.getError(Ur(t,0,4));if(!n)return null;const i=W(this,Un).decode(n.inputs,Ur(t,4));return new EI(n,n.selector,i)}static from(e){return e instanceof nf?e:typeof e=="string"?new nf(JSON.parse(e)):typeof e.format=="function"?new nf(e.format("json")):new nf(e)}};Js=new WeakMap,eo=new WeakMap,to=new WeakMap,Un=new WeakMap,Hf=new WeakSet,Td=function(e,t,n){if(Kr(e)){const s=e.toLowerCase();for(const c of W(this,to).values())if(s===c.selector)return c;return null}if(e.indexOf("(")===-1){const s=[];for(const[c,l]of W(this,to))c.split("(")[0]===e&&s.push(l);if(t){const c=t.length>0?t[t.length-1]:null;let l=t.length,h=!0;Yn.isTyped(c)&&c.type==="overrides"&&(h=!1,l--);for(let u=s.length-1;u>=0;u--){const p=s[u].inputs.length;p!==l&&(!h||p!==l-1)&&s.splice(u,1)}for(let u=s.length-1;u>=0;u--){const p=s[u].inputs;for(let b=0;b<t.length;b++)if(Yn.isTyped(t[b])){if(b>=p.length){if(t[b].type==="overrides")continue;s.splice(u,1);break}if(t[b].type!==p[b].baseType){s.splice(u,1);break}}}}if(s.length===1&&t&&t.length!==s[0].inputs.length){const c=t[t.length-1];(c==null||Array.isArray(c)||typeof c!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&n){const c=s.map(l=>JSON.stringify(l.format())).join(", ");pe(!1,`ambiguous function description (i.e. matches ${c})`,"key",e)}return s[0]}const i=W(this,to).get(co.from(e).format());return i||null},zf=new WeakSet,Nd=function(e,t,n){if(Kr(e)){const s=e.toLowerCase();for(const c of W(this,eo).values())if(s===c.topicHash)return c;return null}if(e.indexOf("(")===-1){const s=[];for(const[c,l]of W(this,eo))c.split("(")[0]===e&&s.push(l);if(t){for(let c=s.length-1;c>=0;c--)s[c].inputs.length<t.length&&s.splice(c,1);for(let c=s.length-1;c>=0;c--){const l=s[c].inputs;for(let h=0;h<t.length;h++)if(Yn.isTyped(t[h])&&t[h].type!==l[h].baseType){s.splice(c,1);break}}}if(s.length===0)return null;if(s.length>1&&n){const c=s.map(l=>JSON.stringify(l.format())).join(", ");pe(!1,`ambiguous event description (i.e. matches ${c})`,"key",e)}return s[0]}const i=W(this,eo).get(ao.from(e).format());return i||null};let n2=nf;const yE=BigInt(0);function Iu(r){return r??null}function qn(r){return r==null?null:r.toString()}class c3{constructor(e,t,n){me(this,"gasPrice");me(this,"maxFeePerGas");me(this,"maxPriorityFeePerGas");xt(this,{gasPrice:Iu(e),maxFeePerGas:Iu(t),maxPriorityFeePerGas:Iu(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:qn(e),maxFeePerGas:qn(t),maxPriorityFeePerGas:qn(n)}}}function r1(r){const e={};r.to&&(e.to=r.to),r.from&&(e.from=r.from),r.data&&(e.data=ze(r.data));const t="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in r)||r[i]==null||(e[i]=Et(r[i],`request.${i}`));const n="type,nonce".split(/,/);for(const i of n)!(i in r)||r[i]==null||(e[i]=Vt(r[i],`request.${i}`));return r.accessList&&(e.accessList=bc(r.accessList)),"blockTag"in r&&(e.blockTag=r.blockTag),"enableCcipRead"in r&&(e.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(e.customData=r.customData),e}var Wo;class AI{constructor(e,t){me(this,"provider");me(this,"number");me(this,"hash");me(this,"timestamp");me(this,"parentHash");me(this,"nonce");me(this,"difficulty");me(this,"gasLimit");me(this,"gasUsed");me(this,"miner");me(this,"extraData");me(this,"baseFeePerGas");ve(this,Wo,void 0);he(this,Wo,e.transactions.map(n=>typeof n!="string"?new $u(n,t):n)),xt(this,{provider:t,hash:Iu(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,miner:e.miner,extraData:e.extraData,baseFeePerGas:Iu(e.baseFeePerGas)})}get transactions(){return W(this,Wo).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=W(this,Wo).slice();return e.length===0?[]:(Te(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:i,gasUsed:s,hash:c,miner:l,nonce:h,number:u,parentHash:p,timestamp:b,transactions:y}=this;return{_type:"Block",baseFeePerGas:qn(e),difficulty:qn(t),extraData:n,gasLimit:qn(i),gasUsed:qn(s),hash:c,miner:l,nonce:h,number:u,parentHash:p,timestamp:b,transactions:y}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return W(this,Wo).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=W(this,Wo)[e];else{const n=e.toLowerCase();for(const i of W(this,Wo))if(typeof i=="string"){if(i!==n)continue;t=i;break}else{if(i.hash===n)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;pe(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return _I(this)}}Wo=new WeakMap;class Mh{constructor(e,t){me(this,"provider");me(this,"transactionHash");me(this,"blockHash");me(this,"blockNumber");me(this,"removed");me(this,"address");me(this,"data");me(this,"topics");me(this,"index");me(this,"transactionIndex");this.provider=t;const n=Object.freeze(e.topics.slice());xt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:i,index:s,removed:c,topics:l,transactionHash:h,transactionIndex:u}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:i,index:s,removed:c,topics:l,transactionHash:h,transactionIndex:u}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Te(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Te(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Te(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return CI(this)}}var xh;class wE{constructor(e,t){me(this,"provider");me(this,"to");me(this,"from");me(this,"contractAddress");me(this,"hash");me(this,"index");me(this,"blockHash");me(this,"blockNumber");me(this,"logsBloom");me(this,"gasUsed");me(this,"cumulativeGasUsed");me(this,"gasPrice");me(this,"type");me(this,"status");me(this,"root");ve(this,xh,void 0);he(this,xh,Object.freeze(e.logs.map(i=>new Mh(i,t))));let n=yE;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),xt(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,gasPrice:n,type:e.type,status:e.status,root:e.root})}get logs(){return W(this,xh)}toJSON(){const{to:e,from:t,contractAddress:n,hash:i,index:s,blockHash:c,blockNumber:l,logsBloom:h,logs:u,status:p,root:b}=this;return{_type:"TransactionReceipt",blockHash:c,blockNumber:l,contractAddress:n,cumulativeGasUsed:qn(this.cumulativeGasUsed),from:t,gasPrice:qn(this.gasPrice),gasUsed:qn(this.gasUsed),hash:i,index:s,logs:u,logsBloom:h,root:b,status:p,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return EE(this)}reorderedEvent(e){return Te(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),vE(this,e)}}xh=new WeakMap;var La;const Gm=class Gm{constructor(e,t){me(this,"provider");me(this,"blockNumber");me(this,"blockHash");me(this,"index");me(this,"hash");me(this,"type");me(this,"to");me(this,"from");me(this,"nonce");me(this,"gasLimit");me(this,"gasPrice");me(this,"maxPriorityFeePerGas");me(this,"maxFeePerGas");me(this,"data");me(this,"value");me(this,"chainId");me(this,"signature");me(this,"accessList");ve(this,La,void 0);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,he(this,La,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:i,type:s,to:c,from:l,nonce:h,data:u,signature:p,accessList:b}=this;return{_type:"TransactionReceipt",accessList:b,blockNumber:e,blockHash:t,chainId:qn(this.chainId),data:u,from:l,gasLimit:qn(this.gasLimit),gasPrice:qn(this.gasPrice),hash:i,maxFeePerGas:qn(this.maxFeePerGas),maxPriorityFeePerGas:qn(this.maxPriorityFeePerGas),nonce:h,signature:p,to:c,index:n,type:s,value:qn(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const n=await this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:n}=await Gn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:n-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=e??1,i=t??0;let s=W(this,La),c=-1,l=s===-1;const h=async()=>{if(l)return null;const{blockNumber:y,nonce:w}=await Gn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(w<this.nonce){s=y;return}if(l)return null;const _=await this.getTransaction();if(!(_&&_.blockNumber!=null))for(c===-1&&(c=s-3,c<W(this,La)&&(c=W(this,La)));c<=y;){if(l)return null;const S=await this.provider.getBlock(c,!0);if(S==null)return;for(const T of S)if(T===this.hash)return;for(let T=0;T<S.length;T++){const F=await S.getTransaction(T);if(F.from===this.from&&F.nonce===this.nonce){if(l)return null;const N=await this.provider.getTransactionReceipt(F.hash);if(N==null||y-N.blockNumber+1<n)return;let O="replaced";F.data===this.data&&F.to===this.to&&F.value===this.value?O="repriced":F.data==="0x"&&F.from===F.to&&F.value===yE&&(O="cancelled"),Te(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:O==="replaced"||O==="cancelled",reason:O,replacement:F.replaceableTransaction(s),hash:F.hash,receipt:N})}}c++}},u=y=>{if(y==null||y.status!==0)return y;Te(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:y.to,from:y.from,data:""},receipt:y})},p=await this.provider.getTransactionReceipt(this.hash);if(n===0)return u(p);if(p){if(await p.confirmations()>=n)return u(p)}else if(await h(),n===0)return null;return await new Promise((y,w)=>{const _=[],S=()=>{_.forEach(F=>F())};if(_.push(()=>{l=!0}),i>0){const F=setTimeout(()=>{S(),w(ln("wait for transaction timeout","TIMEOUT"))},i);_.push(()=>{clearTimeout(F)})}const T=async F=>{if(await F.confirmations()>=n){S();try{y(u(F))}catch(N){w(N)}}};if(_.push(()=>{this.provider.off(this.hash,T)}),this.provider.on(this.hash,T),s>=0){const F=async()=>{try{await h()}catch(N){if(Kn(N,"TRANSACTION_REPLACED")){S(),w(N);return}}l||this.provider.once("block",F)};_.push(()=>{this.provider.off("block",F)}),this.provider.once("block",F)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}removedEvent(){return Te(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),EE(this)}reorderedEvent(e){return Te(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Te(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),vE(this,e)}replaceableTransaction(e){pe(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Gm(this,this.provider);return he(t,La,e),t}};La=new WeakMap;let $u=Gm;function _I(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function vE(r,e){return{orphan:"reorder-transaction",tx:r,other:e}}function EE(r){return{orphan:"drop-transaction",tx:r}}function CI(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class Lb extends Mh{constructor(t,n,i){super(t,t.provider);me(this,"interface");me(this,"fragment");me(this,"args");const s=n.decodeEventLog(i,t.data,t.topics);xt(this,{args:s,fragment:i,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class AE extends Mh{constructor(t,n){super(t,t.provider);me(this,"error");xt(this,{error:n})}}var jf;class SI extends wE{constructor(t,n,i){super(i,n);ve(this,jf,void 0);he(this,jf,t)}get logs(){return super.logs.map(t=>{const n=t.topics.length?W(this,jf).getEvent(t.topics[0]):null;if(n)try{return new Lb(t,W(this,jf),n)}catch(i){return new AE(t,i)}return t})}}jf=new WeakMap;var ph;class kb extends $u{constructor(t,n,i){super(i,n);ve(this,ph,void 0);he(this,ph,t)}async wait(t){const n=await super.wait(t);return n==null?null:new SI(W(this,ph),this.provider,n)}}ph=new WeakMap;class _E extends S6{constructor(t,n,i,s){super(t,n,i);me(this,"log");xt(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class II extends _E{constructor(e,t,n,i,s){super(e,t,n,new Lb(s,e.interface,i));const c=e.interface.decodeEventLog(i,this.log.data,this.log.topics);xt(this,{args:c,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const f3=BigInt(0);function CE(r){return r&&typeof r.call=="function"}function SE(r){return r&&typeof r.estimateGas=="function"}function W1(r){return r&&typeof r.resolveName=="function"}function IE(r){return r&&typeof r.sendTransaction=="function"}function DE(r){if(r!=null){if(W1(r))return r;if(r.provider)return r.provider}}var gh;class DI{constructor(e,t,n){ve(this,gh,void 0);me(this,"fragment");if(xt(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const i=hc(e.runner,"resolveName"),s=W1(i)?i:null;he(this,gh,async function(){const c=await Promise.all(t.inputs.map((l,h)=>n[h]==null?null:l.walkAsync(n[h],(p,b)=>p==="address"?Array.isArray(b)?Promise.all(b.map(y=>Nn(y,s))):Nn(b,s):b)));return e.interface.encodeFilterTopics(t,c)}())}getTopicFilter(){return W(this,gh)}}gh=new WeakMap;function hc(r,e){return r==null?null:typeof r[e]=="function"?r:r.provider&&typeof r.provider[e]=="function"?r.provider:null}function R0(r){return r==null?null:r.provider||null}async function TE(r,e){const t=Yn.dereference(r,"overrides");pe(typeof t=="object","invalid overrides parameter","overrides",r);const n=r1(t);return pe(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),pe(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function TI(r,e,t){const n=hc(r,"resolveName"),i=W1(n)?n:null;return await Promise.all(e.map((s,c)=>s.walkAsync(t[c],(l,h)=>(h=Yn.dereference(h,l),l==="address"?Nn(h,i):h))))}function NI(r){const e=async function(c){const l=await TE(c,["data"]);l.to=await r.getAddress(),l.from&&(l.from=await Nn(l.from,DE(r.runner)));const h=r.interface,u=Et(l.value||f3,"overrides.value")===f3,p=(l.data||"0x")==="0x";h.fallback&&!h.fallback.payable&&h.receive&&!p&&!u&&pe(!1,"cannot send data to receive or send value to non-payable fallback","overrides",c),pe(h.fallback||p,"cannot send data to receive-only contract","overrides.data",l.data);const b=h.receive||h.fallback&&h.fallback.payable;return pe(b||u,"cannot send value to non-payable fallback","overrides.value",l.value),pe(h.fallback||p,"cannot send data to receive-only contract","overrides.data",l.data),l},t=async function(c){const l=hc(r.runner,"call");Te(CE(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await e(c);try{return await l.call(h)}catch(u){throw bb(u)&&u.data?r.interface.makeError(u.data,h):u}},n=async function(c){const l=r.runner;Te(IE(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await l.sendTransaction(await e(c)),u=R0(r.runner);return new kb(r.interface,u,h)},i=async function(c){const l=hc(r.runner,"estimateGas");return Te(SE(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await e(c))},s=async c=>await n(c);return xt(s,{_contract:r,estimateGas:i,populateTransaction:e,send:n,staticCall:t}),s}function OI(r,e){const t=function(...u){const p=r.interface.getFunction(e,u);return Te(p,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:u}}),p},n=async function(...u){const p=t(...u);let b={};if(p.inputs.length+1===u.length&&(b=await TE(u.pop()),b.from&&(b.from=await Nn(b.from,DE(r.runner)))),p.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const y=await TI(r.runner,p.inputs,u);return Object.assign({},b,await Gn({to:r.getAddress(),data:r.interface.encodeFunctionData(p,y)}))},i=async function(...u){const p=await l(...u);return p.length===1?p[0]:p},s=async function(...u){const p=r.runner;Te(IE(p),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const b=await p.sendTransaction(await n(...u)),y=R0(r.runner);return new kb(r.interface,y,b)},c=async function(...u){const p=hc(r.runner,"estimateGas");return Te(SE(p),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await p.estimateGas(await n(...u))},l=async function(...u){const p=hc(r.runner,"call");Te(CE(p),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const b=await n(...u);let y="0x";try{y=await p.call(b)}catch(_){throw bb(_)&&_.data?r.interface.makeError(_.data,b):_}const w=t(...u);return r.interface.decodeFunctionResult(w,y)},h=async(...u)=>t(...u).constant?await i(...u):await s(...u);return xt(h,{name:r.interface.getFunctionName(e),_contract:r,_key:e,getFragment:t,estimateGas:c,populateTransaction:n,send:s,staticCall:i,staticCallResult:l}),Object.defineProperty(h,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=r.interface.getFunction(e);return Te(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),u}}),h}function RI(r,e){const t=function(...i){const s=r.interface.getEvent(e,i);return Te(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},n=function(...i){return new DI(r,t(...i),i)};return xt(n,{name:r.interface.getEventName(e),_contract:r,_key:e,getFragment:t}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=r.interface.getEvent(e);return Te(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),n}const n1=Symbol.for("_ethersInternal_contract"),NE=new WeakMap;function MI(r,e){NE.set(r[n1],e)}function Ti(r){return NE.get(r[n1])}function BI(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function Ub(r,e){let t,n=null;if(Array.isArray(e)){const s=function(c){if(Kr(c,32))return c;const l=r.interface.getEvent(c);return pe(l,"unknown fragment","name",c),l.topicHash};t=e.map(c=>c==null?null:Array.isArray(c)?c.map(s):s(c))}else e==="*"?t=[null]:typeof e=="string"?Kr(e,32)?t=[e]:(n=r.interface.getEvent(e),pe(n,"unknown fragment","event",e),t=[n.topicHash]):BI(e)?t=await e.getTopicFilter():"fragment"in e?(n=e.fragment,t=[n.topicHash]):pe(!1,"unknown event name","event",e);t=t.map(s=>{if(s==null)return null;if(Array.isArray(s)){const c=Array.from(new Set(s.map(l=>l.toLowerCase())).values());return c.length===1?c[0]:(c.sort(),c)}return s.toLowerCase()});const i=t.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:n,tag:i,topics:t}}async function gu(r,e){const{subs:t}=Ti(r);return t.get((await Ub(r,e)).tag)||null}async function l3(r,e,t){const n=R0(r.runner);Te(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:c}=await Ub(r,t),{addr:l,subs:h}=Ti(r);let u=h.get(s);if(!u){const b={address:l||r,topics:c},y=T=>{let F=i;if(F==null)try{F=r.interface.getEvent(T.topics[0])}catch{}if(F){const N=F,O=i?r.interface.decodeEventLog(i,T.data,T.topics):[];s2(r,t,O,M=>new II(r,M,t,N,T))}else s2(r,t,[],N=>new _E(r,N,t,T))};let w=[];u={tag:s,listeners:[],start:()=>{w.length||w.push(n.on(b,y))},stop:async()=>{if(w.length==0)return;let T=w;w=[],await Promise.all(T),n.off(b,y)}},h.set(s,u)}return u}let i2=Promise.resolve();async function PI(r,e,t,n){await i2;const i=await gu(r,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:c,once:l})=>{const h=Array.from(t);n&&h.push(n(l?null:c));try{c.call(r,...h)}catch{}return!l}),i.listeners.length===0&&(i.stop(),Ti(r).subs.delete(i.tag)),s>0}async function s2(r,e,t,n){try{await i2}catch{}const i=PI(r,e,t,n);return i2=i,await i}const ld=["then"];var G$;const Bu=class Bu{constructor(e,t,n,i){me(this,"target");me(this,"interface");me(this,"runner");me(this,"filters");me(this,G$);me(this,"fallback");pe(typeof e=="string"||Rv(e),"invalid value for Contract target","target",e),n==null&&(n=null);const s=n2.from(t);xt(this,{target:e,runner:n,interface:s}),Object.defineProperty(this,n1,{value:{}});let c,l=null,h=null;if(i){const b=R0(n);h=new kb(this.interface,b,i)}let u=new Map;if(typeof e=="string")if(Kr(e))l=e,c=Promise.resolve(e);else{const b=hc(n,"resolveName");if(!W1(b))throw ln("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});c=b.resolveName(e).then(y=>{if(y==null)throw ln("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Ti(this).addr=y,y})}else c=e.getAddress().then(b=>{if(b==null)throw new Error("TODO");return Ti(this).addr=b,b});MI(this,{addrPromise:c,addr:l,deployTx:h,subs:u});const p=new Proxy({},{get:(b,y,w)=>{if(typeof y=="symbol"||ld.indexOf(y)>=0)return Reflect.get(b,y,w);try{return this.getEvent(y)}catch(_){if(!Kn(_,"INVALID_ARGUMENT")||_.argument!=="key")throw _}},has:(b,y)=>ld.indexOf(y)>=0?Reflect.has(b,y):Reflect.has(b,y)||this.interface.hasEvent(String(y))});return xt(this,{filters:p}),xt(this,{fallback:s.receive||s.fallback?NI(this):null}),new Proxy(this,{get:(b,y,w)=>{if(typeof y=="symbol"||y in b||ld.indexOf(y)>=0)return Reflect.get(b,y,w);try{return b.getFunction(y)}catch(_){if(!Kn(_,"INVALID_ARGUMENT")||_.argument!=="key")throw _}},has:(b,y)=>typeof y=="symbol"||y in b||ld.indexOf(y)>=0?Reflect.has(b,y):b.interface.hasFunction(y)})}connect(e){return new Bu(this.target,this.interface,e)}attach(e){return new Bu(e,this.interface,this.runner)}async getAddress(){return await Ti(this).addrPromise}async getDeployedCode(){const e=R0(this.runner);Te(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=R0(this.runner);return Te(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const c=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);n.once("block",c)}catch(l){s(l)}};c()})}deploymentTransaction(){return Ti(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),OI(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),RI(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){t==null&&(t=0),n==null&&(n="latest");const{addr:i,addrPromise:s}=Ti(this),c=i||await s,{fragment:l,topics:h}=await Ub(this,e),u={address:c,topics:h,fromBlock:t,toBlock:n},p=R0(this.runner);return Te(p,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await p.getLogs(u)).map(b=>{let y=l;if(y==null)try{y=this.interface.getEvent(b.topics[0])}catch{}if(y)try{return new Lb(b,this.interface,y)}catch(w){return new AE(b,w)}return new Mh(b,p)})}async on(e,t){const n=await l3(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await l3(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await s2(this,e,t,null)}async listenerCount(e){if(e){const i=await gu(this,e);return i?i.listeners.length:0}const{subs:t}=Ti(this);let n=0;for(const{listeners:i}of t.values())n+=i.length;return n}async listeners(e){if(e){const i=await gu(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:t}=Ti(this);let n=[];for(const{listeners:i}of t.values())n=n.concat(i.map(({listener:s})=>s));return n}async off(e,t){const n=await gu(this,e);if(!n)return this;if(t){const i=n.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&n.listeners.splice(i,1)}return(t==null||n.listeners.length===0)&&(n.stop(),Ti(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await gu(this,e);if(!t)return this;t.stop(),Ti(this).subs.delete(t.tag)}else{const{subs:t}=Ti(this);for(const{tag:n,stop:i}of t.values())i(),t.delete(n)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends Bu{constructor(i,s=null){super(i,e,s)}}return t}static from(e,t,n){return n==null&&(n=null),new this(e,t,n)}};G$=n1;let o2=Bu;function FI(){return o2}class Du extends FI(){}function Yx(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):pe(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class LI{constructor(e){me(this,"name");xt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const OE=new RegExp("^(ipfs)://(.*)$","i"),u3=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),OE,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var ka,$0,Ua,$c,P1,RE;const sf=class sf{constructor(e,t,n){ve(this,Ua);me(this,"provider");me(this,"address");me(this,"name");ve(this,ka,void 0);ve(this,$0,void 0);xt(this,{provider:e,address:t,name:n}),he(this,ka,null),he(this,$0,new Du(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return W(this,ka)==null&&he(this,ka,(async()=>{try{return await W(this,$0).supportsInterface("0x9061b923")}catch(e){if(Kn(e,"CALL_EXCEPTION"))return!1;throw he(this,ka,null),e}})()),await W(this,ka)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await Me(this,Ua,$c).call(this,"addr(bytes32)");return s==null||s===Yg?null:s}catch(s){if(Kn(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const c=await Me(this,Ua,$c).call(this,"addr(bytes32,uint)",[s]);if(Kr(c,20))return or(c)}let t=null;for(const s of this.provider.plugins)if(s instanceof LI&&s.supportsCoinType(e)){t=s;break}if(t==null)return null;const n=await Me(this,Ua,$c).call(this,"addr(bytes32,uint)",[e]);if(n==null||n==="0x")return null;const i=await t.decodeAddress(e,n);if(i!=null)return i;Te(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const t=await Me(this,Ua,$c).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await Me(this,Ua,$c).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",s=parseInt(t[4],16);if(t[5].length===s*2)return`${i}://${C6("0x"+t[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;Te(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let n=0;n<u3.length;n++){const i=t.match(u3[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const c=Yx(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:c}),{linkage:e,url:c}}case"erc721":case"erc1155":{const c=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:t});const l=await this.getAddress();if(l==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const h=(i[2]||"").split("/");if(h.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const u=h[1],p=new Du(h[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const S=await p.ownerOf(u);if(l!==S)return e.push({type:"!owner",value:S}),{url:null,linkage:e};e.push({type:"owner",value:S})}else if(s==="erc1155"){const S=await p.balanceOf(l,u);if(!S)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:S.toString()})}let b=await p[c](u);if(b==null||b==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:b}),s==="erc1155"&&(b=b.replace("{id}",ca(u,32).substring(2)),e.push({type:"metadata-url-expanded",value:b})),b.match(/^ipfs:/i)&&(b=Yx(b)),e.push({type:"metadata-url",value:b});let y={};const w=await new fa(b).send();w.assertOk();try{y=w.bodyJson}catch{try{e.push({type:"!metadata",value:w.bodyText})}catch{const F=w.body;return F&&e.push({type:"!metadata",value:ze(F)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!y)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(y)});let _=y.image;if(typeof _!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!_.match(/^(https:\/\/|data:)/i)){if(_.match(OE)==null)return e.push({type:"!imageUrl-ipfs",value:_}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:_}),_=Yx(_)}return e.push({type:"url",value:_}),{linkage:e,url:_}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return Te(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async fromName(e,t){var i;let n=t;for(;;){if(n===""||n==="."||t!=="eth"&&n==="eth")return null;const s=await Me(i=sf,P1,RE).call(i,e,n);if(s!=null){const c=new sf(e,s,t);return n!==t&&!await c.supportsWildcard()?null:c}n=n.split(".").slice(1).join(".")}}};ka=new WeakMap,$0=new WeakMap,Ua=new WeakSet,$c=async function(e,t){t=(t||[]).slice();const n=W(this,$0).interface;t.unshift(t2(this.name));let i=null;await this.supportsWildcard()&&(i=n.getFunction(e),Te(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[jS(this.name),n.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const s=await W(this,$0)[e](...t);return i?n.decodeFunctionResult(i,s)[0]:s}catch(s){if(!Kn(s,"CALL_EXCEPTION"))throw s}return null},P1=new WeakSet,RE=async function(e,t){const n=await sf.getEnsAddress(e);try{const s=await new Du(n,["function resolver(bytes32) view returns (address)"],e).resolver(t2(t),{enableCcipRead:!0});return s===Yg?null:s}catch(i){throw i}return null},ve(sf,P1);let i1=sf;const h3=BigInt(0);function qr(r,e){return function(t){return t==null?e:r(t)}}function Hb(r){return e=>{if(!Array.isArray(e))throw new Error("not an array");return e.map(t=>r(t))}}function Bh(r,e){return t=>{const n={};for(const i in r){let s=i;if(e&&i in e&&!(s in t)){for(const c of e[i])if(c in t){s=c;break}}try{const c=r[i](t[s]);c!==void 0&&(n[i]=c)}catch(c){const l=c instanceof Error?c.message:"not-an-error";Te(!1,`invalid value for value.${i} (${l})`,"BAD_DATA",{value:t})}}return n}}function kI(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}pe(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function xl(r){return pe(Kr(r,!0),"invalid data","value",r),r}function os(r){return pe(Kr(r,32),"invalid hash","value",r),r}const UI=Bh({address:or,blockHash:os,blockNumber:Vt,data:xl,index:Vt,removed:qr(kI,!1),topics:Hb(os),transactionHash:os,transactionIndex:Vt},{index:["logIndex"]});function HI(r){return UI(r)}const zI=Bh({hash:qr(os),parentHash:os,number:Vt,timestamp:Vt,nonce:qr(xl),difficulty:Et,gasLimit:Et,gasUsed:Et,miner:qr(or),extraData:xl,baseFeePerGas:qr(Et)});function jI(r){const e=zI(r);return e.transactions=r.transactions.map(t=>typeof t=="string"?t:ME(t)),e}const GI=Bh({transactionIndex:Vt,blockNumber:Vt,transactionHash:os,address:or,topics:Hb(os),data:xl,index:Vt,blockHash:os},{index:["logIndex"]});function VI(r){return GI(r)}const qI=Bh({to:qr(or,null),from:qr(or,null),contractAddress:qr(or,null),index:Vt,root:qr(ze),gasUsed:Et,logsBloom:qr(xl),blockHash:os,hash:os,logs:Hb(VI),blockNumber:Vt,cumulativeGasUsed:Et,effectiveGasPrice:qr(Et),status:qr(Vt),type:qr(Vt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function $I(r){return qI(r)}function ME(r){r.to&&Et(r.to)===h3&&(r.to="0x0000000000000000000000000000000000000000");const e=Bh({hash:os,type:t=>t==="0x"||t==null?0:Vt(t),accessList:qr(bc,null),blockHash:qr(os,null),blockNumber:qr(Vt,null),transactionIndex:qr(Vt,null),from:or,gasPrice:qr(Et),maxPriorityFeePerGas:qr(Et),maxFeePerGas:qr(Et),gasLimit:Et,to:qr(or,null),value:Et,nonce:Vt,data:xl,creates:qr(or,null),chainId:qr(Et,null)},{data:["input"],gasLimit:["gas"]})(r);if(e.to==null&&e.creates==null&&(e.creates=q9(e)),(r.type===1||r.type===2)&&r.accessList==null&&(e.accessList=[]),r.signature?e.signature=la.from(r.signature):e.signature=la.from(r),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&Et(e.blockHash)===h3&&(e.blockHash=null),e}const KI="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Ph{constructor(e){me(this,"name");xt(this,{name:e})}clone(){return new Ph(this.name)}}class Y1 extends Ph{constructor(t,n){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);me(this,"effectiveBlock");me(this,"txBase");me(this,"txCreate");me(this,"txDataZero");me(this,"txDataNonzero");me(this,"txAccessListStorageKey");me(this,"txAccessListAddress");const i={effectiveBlock:t};function s(c,l){let h=(n||{})[c];h==null&&(h=l),pe(typeof h=="number",`invalud value for ${c}`,"costs",n),i[c]=h}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),xt(this,i)}clone(){return new Y1(this.effectiveBlock,this)}}class X1 extends Ph{constructor(t,n){super("org.ethers.plugins.network.Ens");me(this,"address");me(this,"targetNetwork");xt(this,{address:t||KI,targetNetwork:n??1})}clone(){return new X1(this.address,this.targetNetwork)}}var bh,mh;class WI extends Ph{constructor(t,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");ve(this,bh,void 0);ve(this,mh,void 0);he(this,bh,t),he(this,mh,n)}get url(){return W(this,bh)}get processFunc(){return W(this,mh)}clone(){return this}}bh=new WeakMap,mh=new WeakMap;const Xx=new Map;var Gf,Vf,Ha;const of=class of{constructor(e,t){ve(this,Gf,void 0);ve(this,Vf,void 0);ve(this,Ha,void 0);he(this,Gf,e),he(this,Vf,Et(t)),he(this,Ha,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return W(this,Gf)}set name(e){he(this,Gf,e)}get chainId(){return W(this,Vf)}set chainId(e){he(this,Vf,Et(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Et(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Et(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Et(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(W(this,Ha).values())}attachPlugin(e){if(W(this,Ha).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return W(this,Ha).set(e.name,e.clone()),this}getPlugin(e){return W(this,Ha).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new of(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new Y1;let n=t.txBase;if(e.to==null&&(n+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const i=bc(e.accessList);for(const s in i)n+=t.txAccessListAddress+t.txAccessListStorageKey*i[s].storageKeys.length}return n}static from(e){if(YI(),e==null)return of.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=Xx.get(e);if(t)return t();if(typeof e=="bigint")return new of("unknown",e);pe(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){pe(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new of(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new X1(e.ensAddress,e.ensNetwork)),t}pe(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const n=Xx.get(e);n&&pe(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),Xx.set(e,t)}};Gf=new WeakMap,Vf=new WeakMap,Ha=new WeakMap;let fo=of;function d3(r,e){const t=String(r);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const n=t.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let i=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||i++,n[1]=i.toString()}return BigInt(n[0]+n[1])}function x3(r){return new WI(r,async(e,t,n)=>{n.setHeader("User-Agent","ethers");let i;try{const[s,c]=await Promise.all([n.send(),e()]);i=s;const l=i.bodyJson.standard;return{gasPrice:c.gasPrice,maxFeePerGas:d3(l.maxFee,9),maxPriorityFeePerGas:d3(l.maxPriorityFee,9)}}catch(s){Te(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:i,error:s})}})}let p3=!1;function YI(){if(p3)return;p3=!0;function r(e,t,n){const i=function(){const s=new fo(e,t);return n.ensNetwork!=null&&s.attachPlugin(new X1(null,n.ensNetwork)),s.attachPlugin(new Y1),(n.plugins||[]).forEach(c=>{s.attachPlugin(c)}),s};fo.register(e,i),fo.register(t,i),n.altNames&&n.altNames.forEach(s=>{fo.register(s,i)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("matic",137,{ensNetwork:1,plugins:[x3("https://gasstation.polygon.technology/v2")]}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[x3("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("xdai",100,{ensNetwork:1})}function a2(r){return JSON.parse(JSON.stringify(r))}var Yo,Qi,za,ro,qf,Od;class XI{constructor(e){ve(this,qf);ve(this,Yo,void 0);ve(this,Qi,void 0);ve(this,za,void 0);ve(this,ro,void 0);he(this,Yo,e),he(this,Qi,null),he(this,za,4e3),he(this,ro,-2)}get pollingInterval(){return W(this,za)}set pollingInterval(e){he(this,za,e)}start(){W(this,Qi)||(he(this,Qi,W(this,Yo)._setTimeout(Me(this,qf,Od).bind(this),W(this,za))),Me(this,qf,Od).call(this))}stop(){W(this,Qi)&&(W(this,Yo)._clearTimeout(W(this,Qi)),he(this,Qi,null))}pause(e){this.stop(),e&&he(this,ro,-2)}resume(){this.start()}}Yo=new WeakMap,Qi=new WeakMap,za=new WeakMap,ro=new WeakMap,qf=new WeakSet,Od=async function(){try{const e=await W(this,Yo).getBlockNumber();if(W(this,ro)===-2){he(this,ro,e);return}if(e!==W(this,ro)){for(let t=W(this,ro)+1;t<=e;t++){if(W(this,Qi)==null)return;await W(this,Yo).emit("block",t)}he(this,ro,e)}}catch{}W(this,Qi)!=null&&he(this,Qi,W(this,Yo)._setTimeout(Me(this,qf,Od).bind(this),W(this,za)))};var K0,W0,ja;class zb{constructor(e){ve(this,K0,void 0);ve(this,W0,void 0);ve(this,ja,void 0);he(this,K0,e),he(this,ja,!1),he(this,W0,t=>{this._poll(t,W(this,K0))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){W(this,ja)||(he(this,ja,!0),W(this,W0).call(this,-2),W(this,K0).on("block",W(this,W0)))}stop(){W(this,ja)&&(he(this,ja,!1),W(this,K0).off("block",W(this,W0)))}pause(e){this.stop()}resume(){this.start()}}K0=new WeakMap,W0=new WeakMap,ja=new WeakMap;var $f,Xo;class QI extends zb{constructor(t,n){super(t);ve(this,$f,void 0);ve(this,Xo,void 0);he(this,$f,n),he(this,Xo,-2)}pause(t){t&&he(this,Xo,-2),super.pause(t)}async _poll(t,n){const i=await n.getBlock(W(this,$f));i!=null&&(W(this,Xo)===-2?he(this,Xo,i.number):i.number>W(this,Xo)&&(n.emit(W(this,$f),i.number),he(this,Xo,i.number)))}}$f=new WeakMap,Xo=new WeakMap;var F1;class ZI extends zb{constructor(t,n){super(t);ve(this,F1,void 0);he(this,F1,a2(n))}async _poll(t,n){throw new Error("@TODO")}}F1=new WeakMap;var Kf;class JI extends zb{constructor(t,n){super(t);ve(this,Kf,void 0);he(this,Kf,n)}async _poll(t,n){const i=await n.getTransactionReceipt(W(this,Kf));i&&n.emit(W(this,Kf),i)}}Kf=new WeakMap;var Qo,Wf,Yf,Ga,Zi,L1,BE;class jb{constructor(e,t){ve(this,L1);ve(this,Qo,void 0);ve(this,Wf,void 0);ve(this,Yf,void 0);ve(this,Ga,void 0);ve(this,Zi,void 0);he(this,Qo,e),he(this,Wf,a2(t)),he(this,Yf,Me(this,L1,BE).bind(this)),he(this,Ga,!1),he(this,Zi,-2)}start(){W(this,Ga)||(he(this,Ga,!0),W(this,Zi)===-2&&W(this,Qo).getBlockNumber().then(e=>{he(this,Zi,e)}),W(this,Qo).on("block",W(this,Yf)))}stop(){W(this,Ga)&&(he(this,Ga,!1),W(this,Qo).off("block",W(this,Yf)))}pause(e){this.stop(),e&&he(this,Zi,-2)}resume(){this.start()}}Qo=new WeakMap,Wf=new WeakMap,Yf=new WeakMap,Ga=new WeakMap,Zi=new WeakMap,L1=new WeakSet,BE=async function(e){if(W(this,Zi)===-2)return;const t=a2(W(this,Wf));t.fromBlock=W(this,Zi)+1,t.toBlock=e;const n=await W(this,Qo).getLogs(t);if(n.length===0){W(this,Zi)<e-60&&he(this,Zi,e-60);return}for(const i of n)W(this,Qo).emit(W(this,Wf),i),he(this,Zi,i.blockNumber)};const eD=BigInt(2),tD=10;function ud(r){return r&&typeof r.then=="function"}function Rd(r,e){return r+":"+JSON.stringify(e,(t,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const i=Object.keys(n);return i.sort(),i.reduce((s,c)=>(s[c]=n[c],s),{})}return n})}class PE{constructor(e){me(this,"name");xt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function rD(r){return JSON.parse(JSON.stringify(r))}function c2(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function Qx(r,e){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(Kr(r,32)){const t=r.toLowerCase();return{type:"transaction",tag:Rd("tx",{hash:t}),hash:t}}if(r.orphan){const t=r;return{type:"orphan",tag:Rd("orphan",t),filter:rD(t)}}if(r.address||r.topics){const t=r,n={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?c2(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],s=[],c=l=>{Kr(l)?i.push(l):s.push((async()=>{i.push(await Nn(l,e))})())};Array.isArray(t.address)?t.address.forEach(c):c(t.address),s.length&&await Promise.all(s),n.address=c2(i.map(l=>l.toLowerCase()))}return{filter:n,tag:Rd("event",n),type:"event"}}pe(!1,"unknown ProviderEvent","event",r)}function Zx(){return new Date().getTime()}const nD={cacheTimeout:250,pollingInterval:4e3};var Hn,Va,zn,Xf,Ri,Y0,qa,Zo,yh,Ji,Qf,Zf,ri,Si,wh,f2,vh,l2,X0,bu,Eh,u2,Q0,mu,Jf,Md;class iD{constructor(e,t){ve(this,ri);ve(this,wh);ve(this,vh);ve(this,X0);ve(this,Eh);ve(this,Q0);ve(this,Jf);ve(this,Hn,void 0);ve(this,Va,void 0);ve(this,zn,void 0);ve(this,Xf,void 0);ve(this,Ri,void 0);ve(this,Y0,void 0);ve(this,qa,void 0);ve(this,Zo,void 0);ve(this,yh,void 0);ve(this,Ji,void 0);ve(this,Qf,void 0);ve(this,Zf,void 0);if(he(this,Zf,Object.assign({},nD,t||{})),e==="any")he(this,Y0,!0),he(this,Ri,null);else if(e){const n=fo.from(e);he(this,Y0,!1),he(this,Ri,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else he(this,Y0,!1),he(this,Ri,null);he(this,Zo,-1),he(this,qa,new Map),he(this,Hn,new Map),he(this,Va,new Map),he(this,zn,null),he(this,Xf,!1),he(this,yh,1),he(this,Ji,new Map),he(this,Qf,!1)}get pollingInterval(){return W(this,Zf).pollingInterval}get provider(){return this}get plugins(){return Array.from(W(this,Va).values())}attachPlugin(e){if(W(this,Va).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return W(this,Va).set(e.name,e.connect(this)),this}getPlugin(e){return W(this,Va).get(e)||null}get disableCcipRead(){return W(this,Qf)}set disableCcipRead(e){he(this,Qf,!!e)}async ccipReadFetch(e,t,n){if(this.disableCcipRead||n.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),c=[];for(let l=0;l<n.length;l++){const h=n[l],u=h.replace("{sender}",i).replace("{data}",s),p=new fa(u);h.indexOf("{data}")===-1&&(p.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:p,index:l,urls:n});let b="unknown error";const y=await p.send();try{const w=y.bodyJson;if(w.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:p,result:w}),w.data;w.message&&(b=w.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:p,result:w})}catch{}Te(y.statusCode<400||y.statusCode>=500,`response not found during CCIP fetch: ${b}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:h,errorMessage:b}}),c.push(b)}Te(!1,`error encountered during CCIP fetch: ${c.map(l=>JSON.stringify(l)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:c}})}_wrapBlock(e,t){return new AI(jI(e),this)}_wrapLog(e,t){return new Mh(HI(e),this)}_wrapTransactionReceipt(e,t){return new wE($I(e),this)}_wrapTransactionResponse(e,t){return new $u(ME(e),this)}_detectNetwork(){Te(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Te(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Vt(await Me(this,ri,Si).call(this,{method:"getBlockNumber"}),"%response");return W(this,Zo)>=0&&he(this,Zo,e),e}_getAddress(e){return Nn(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Kr(e))return Kr(e,32)?e:Yc(e);if(typeof e=="bigint"&&(e=Vt(e,"blockTag")),typeof e=="number")return e>=0?Yc(e):W(this,Zo)>=0?Yc(W(this,Zo)+e):this.getBlockNumber().then(t=>Yc(t+e));pe(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(h=>h==null?null:Array.isArray(h)?c2(h.map(u=>u.toLowerCase())):h.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,i=(h,u,p)=>{let b;switch(h.length){case 0:break;case 1:b=h[0];break;default:h.sort(),b=h}if(n&&(u!=null||p!=null))throw new Error("invalid filter");const y={};return b&&(y.address=b),t.length&&(y.topics=t),u&&(y.fromBlock=u),p&&(y.toBlock=p),n&&(y.blockHash=n),y};let s=[];if(e.address)if(Array.isArray(e.address))for(const h of e.address)s.push(this._getAddress(h));else s.push(this._getAddress(e.address));let c;"fromBlock"in e&&(c=this._getBlockTag(e.fromBlock));let l;return"toBlock"in e&&(l=this._getBlockTag(e.toBlock)),s.filter(h=>typeof h!="string").length||c!=null&&typeof c!="string"||l!=null&&typeof l!="string"?Promise.all([Promise.all(s),c,l]).then(h=>i(h[0],h[1],h[2])):i(s,c,l)}_getTransactionRequest(e){const t=r1(e),n=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const s=Nn(t[i],this);ud(s)?n.push(async function(){t[i]=await s}()):t[i]=s}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);ud(i)?n.push(async function(){t.blockTag=await i}()):t.blockTag=i}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(W(this,Ri)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw W(this,Ri)===i&&he(this,Ri,null),s}})();return he(this,Ri,i),(await i).clone()}const e=W(this,Ri),[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(W(this,Y0)?(this.emit("network",n,t),W(this,Ri)===e&&he(this,Ri,Promise.resolve(n))):Te(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:s,priorityFee:c}=await Gn({_block:Me(this,Eh,u2).call(this,"latest",!1),gasPrice:(async()=>{try{const p=await Me(this,ri,Si).call(this,{method:"getGasPrice"});return Et(p,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const p=await Me(this,ri,Si).call(this,{method:"getPriorityFee"});return Et(p,"%response")}catch{}return null})()});let l=null,h=null;const u=this._wrapBlock(i,e);return u&&u.baseFeePerGas&&(h=c??BigInt("1000000000"),l=u.baseFeePerGas*eD+h),new c3(s,l,h)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const i=new fa(n.url),s=await n.processFunc(t,this,i);return new c3(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return ud(t)&&(t=await t),Et(await Me(this,ri,Si).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:n}=await Gn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await Me(this,vh,l2).call(this,Me(this,wh,f2).call(this,t,n,e.enableCcipRead?0:-1))}async getBalance(e,t){return Et(await Me(this,X0,bu).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return Vt(await Me(this,X0,bu).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return ze(await Me(this,X0,bu).call(this,{method:"getCode"},e,t))}async getStorage(e,t,n){const i=Et(t,"position");return ze(await Me(this,X0,bu).call(this,{method:"getStorage",position:i},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:i}=await Gn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=Gu.from(e);if(s.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(t)}async getBlock(e,t){const{network:n,params:i}=await Gn({network:this.getNetwork(),params:Me(this,Eh,u2).call(this,e,!!t)});return i==null?null:this._wrapBlock(i,n)}async getTransaction(e){const{network:t,params:n}=await Gn({network:this.getNetwork(),params:Me(this,ri,Si).call(this,{method:"getTransaction",hash:e})});return n==null?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await Gn({network:this.getNetwork(),params:Me(this,ri,Si).call(this,{method:"getTransactionReceipt",hash:e})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const i=await Me(this,ri,Si).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await Gn({network:this.getNetwork(),result:Me(this,ri,Si).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:ze(t)}async getLogs(e){let t=this._getFilter(e);ud(t)&&(t=await t);const{network:n,params:i}=await Gn({network:this.getNetwork(),params:Me(this,ri,Si).call(this,{method:"getLogs",filter:t})});return i.map(s=>this._wrapLog(s,n))}_getProvider(e){Te(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await i1.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=or(e);const t=t2(e.substring(2).toLowerCase()+".addr.reverse");try{const n=await i1.getEnsAddress(this),s=await new Du(n,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(s==null||s===Yg)return null;const l=await new Du(s,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(l)!==e?null:l}catch(n){if(Kn(n,"BAD_DATA")&&n.value==="0x"||Kn(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(e,t,n){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,c)=>{let l=null;const h=async u=>{try{const p=await this.getTransactionReceipt(e);if(p!=null&&u-p.blockNumber+1>=i){s(p),l&&(clearTimeout(l),l=null);return}}catch(p){console.log("EEE",p)}this.once("block",h)};n!=null&&(l=setTimeout(()=>{l!=null&&(l=null,this.off("block",h),c(ln("timeout","TIMEOUT",{reason:"timeout"})))},n)),h(await this.getBlockNumber())})}async waitForBlock(e){Te(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=W(this,Ji).get(e);t&&(t.timer&&clearTimeout(t.timer),W(this,Ji).delete(e))}_setTimeout(e,t){t==null&&(t=0);const n=Zl(this,yh)._++,i=()=>{W(this,Ji).delete(n),e()};if(this.paused)W(this,Ji).set(n,{timer:null,func:i,time:t});else{const s=setTimeout(i,t);W(this,Ji).set(n,{timer:s,func:i,time:Zx()})}return n}_forEachSubscriber(e){for(const t of W(this,Hn).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new PE(e.type);case"block":{const t=new XI(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new QI(this,e.type);case"event":return new jb(this,e.filter);case"transaction":return new JI(this,e.hash);case"orphan":return new ZI(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const n of W(this,Hn).values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),W(this,zn)!=null&&t.pause(W(this,zn));break}}async on(e,t){const n=await Me(this,Jf,Md).call(this,e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,W(this,zn)!=null&&n.subscriber.pause(W(this,zn))),this}async once(e,t){const n=await Me(this,Jf,Md).call(this,e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,W(this,zn)!=null&&n.subscriber.pause(W(this,zn))),this}async emit(e,...t){const n=await Me(this,Q0,mu).call(this,e,t);if(!n||n.listeners.length===0)return!1;const i=n.listeners.length;return n.listeners=n.listeners.filter(({listener:s,once:c})=>{const l=new S6(this,c?null:s,e);try{s.call(this,...t,l)}catch{}return!c}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),W(this,Hn).delete(n.tag)),i>0}async listenerCount(e){if(e){const n=await Me(this,Q0,mu).call(this,e);return n?n.listeners.length:0}let t=0;for(const{listeners:n}of W(this,Hn).values())t+=n.length;return t}async listeners(e){if(e){const n=await Me(this,Q0,mu).call(this,e);return n?n.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:n}of W(this,Hn).values())t=t.concat(n.map(({listener:i})=>i));return t}async off(e,t){const n=await Me(this,Q0,mu).call(this,e);if(!n)return this;if(t){const i=n.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&n.listeners.splice(i,1)}return(!t||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),W(this,Hn).delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:i}=await Me(this,Jf,Md).call(this,e);n&&i.stop(),W(this,Hn).delete(t)}else for(const[t,{started:n,subscriber:i}]of W(this,Hn))n&&i.stop(),W(this,Hn).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return W(this,Xf)}destroy(){this.removeAllListeners();for(const e of W(this,Ji).keys())this._clearTimeout(e);he(this,Xf,!0)}get paused(){return W(this,zn)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(he(this,Zo,-1),W(this,zn)!=null){if(W(this,zn)==!!e)return;Te(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),he(this,zn,!!e);for(const t of W(this,Ji).values())t.timer&&clearTimeout(t.timer),t.time=Zx()-t.time}resume(){if(W(this,zn)!=null){this._forEachSubscriber(e=>e.resume()),he(this,zn,null);for(const e of W(this,Ji).values()){let t=e.time;t<0&&(t=0),e.time=Zx(),setTimeout(e.func,t)}}}}Hn=new WeakMap,Va=new WeakMap,zn=new WeakMap,Xf=new WeakMap,Ri=new WeakMap,Y0=new WeakMap,qa=new WeakMap,Zo=new WeakMap,yh=new WeakMap,Ji=new WeakMap,Qf=new WeakMap,Zf=new WeakMap,ri=new WeakSet,Si=async function(e){const t=W(this,Zf).cacheTimeout;if(t<0)return await this._perform(e);const n=Rd(e.method,e);let i=W(this,qa).get(n);return i||(i=this._perform(e),W(this,qa).set(n,i),setTimeout(()=>{W(this,qa).get(n)===i&&W(this,qa).delete(n)},t)),await i},wh=new WeakSet,f2=async function(e,t,n){Te(n<tD,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=r1(e);try{return ze(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(s){if(!this.disableCcipRead&&bb(s)&&s.data&&n>=0&&t==="latest"&&i.to!=null&&Ur(s.data,0,4)==="0x556f1830"){const c=s.data,l=await Nn(i.to,this);let h;try{h=fD(Ur(s.data,4))}catch(b){Te(!1,b.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:c}})}Te(h.sender.toLowerCase()===l.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:c,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:h.errorArgs}});const u=await this.ccipReadFetch(i,h.calldata,h.urls);Te(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:h.errorArgs}});const p={to:l,data:Rr([h.selector,cD([u,h.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:p});try{const b=await Me(this,wh,f2).call(this,p,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},p),result:b}),b}catch(b){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},p),error:b}),b}}throw s}},vh=new WeakSet,l2=async function(e){const{value:t}=await Gn({network:this.getNetwork(),value:e});return t},X0=new WeakSet,bu=async function(e,t,n){let i=this._getAddress(t),s=this._getBlockTag(n);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await Me(this,vh,l2).call(this,Me(this,ri,Si).call(this,Object.assign(e,{address:i,blockTag:s})))},Eh=new WeakSet,u2=async function(e,t){if(Kr(e,32))return await Me(this,ri,Si).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return typeof n!="string"&&(n=await n),await Me(this,ri,Si).call(this,{method:"getBlock",blockTag:n,includeTransactions:t})},Q0=new WeakSet,mu=async function(e,t){let n=await Qx(e,this);return n.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(n=await Qx({orphan:"drop-log",log:t[0]},this)),W(this,Hn).get(n.tag)||null},Jf=new WeakSet,Md=async function(e){const t=await Qx(e,this),n=t.tag;let i=W(this,Hn).get(n);return i||(i={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},W(this,Hn).set(n,i)),i};function sD(r,e){try{const t=h2(r,e);if(t)return mb(t)}catch{}return null}function h2(r,e){if(r==="0x")return null;try{const t=Vt(Ur(r,e,e+32)),n=Vt(Ur(r,t,t+32));return Ur(r,t+32,t+32+n)}catch{}return null}function g3(r){const e=vi(r);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function oD(r){if(r.length%32===0)return r;const e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}const aD=new Uint8Array([]);function cD(r){const e=[];let t=0;for(let n=0;n<r.length;n++)e.push(aD),t+=32;for(let n=0;n<r.length;n++){const i=at(r[n]);e[n]=g3(t),e.push(g3(i.length)),e.push(oD(i)),t+=32+Math.ceil(i.length/32)*32}return Rr(e)}const b3="0x0000000000000000000000000000000000000000000000000000000000000000";function fD(r){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Te(cf(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Ur(r,0,32);Te(Ur(t,0,12)===Ur(b3,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Ur(t,12);try{const n=[],i=Vt(Ur(r,32,64)),s=Vt(Ur(r,i,i+32)),c=Ur(r,i+32);for(let l=0;l<s;l++){const h=sD(c,l*32);if(h==null)throw new Error("abort");n.push(h)}e.urls=n}catch{Te(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=h2(r,64);if(n==null)throw new Error("abort");e.calldata=n}catch{Te(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Te(Ur(r,100,128)===Ur(b3,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Ur(r,96,100);try{const n=h2(r,128);if(n==null)throw new Error("abort");e.extraData=n}catch{Te(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>e[n]),e}function Bc(r,e){if(r.provider)return r.provider;Te(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function m3(r,e){let t=r1(e);if(t.to!=null&&(t.to=Nn(t.to,r)),t.from!=null){const n=t.from;t.from=Promise.all([r.getAddress(),Nn(n,r)]).then(([i,s])=>(pe(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else t.from=r.getAddress();return await Gn(t)}class Gb{constructor(e){me(this,"provider");xt(this,{provider:e||null})}async getNonce(e){return Bc(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await m3(this,e)}async populateTransaction(e){const t=Bc(this,"populateTransaction"),n=await m3(this,e);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const i=await this.provider.getNetwork();if(n.chainId!=null){const c=Et(n.chainId);pe(c===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=i.chainId;const s=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||s)?pe(!1,"eip-1559 transaction do not support gasPrice","tx",e):(n.type===0||n.type===1)&&s&&pe(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const c=await t.getFeeData();Te(c.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=c.gasPrice)}else{const c=await t.getFeeData();if(n.type==null)if(c.maxFeePerGas!=null&&c.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const l=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=l,n.maxPriorityFeePerGas=l}else n.maxFeePerGas==null&&(n.maxFeePerGas=c.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=c.maxPriorityFeePerGas);else c.gasPrice!=null?(Te(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=c.gasPrice),n.type=0):Te(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else n.type===2&&(n.maxFeePerGas==null&&(n.maxFeePerGas=c.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=c.maxPriorityFeePerGas))}return await Gn(n)}async estimateGas(e){return Bc(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Bc(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Bc(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Bc(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const i=Gu.from(n);return await t.broadcastTransaction(await this.signTransaction(i))}}var el,Bd;const Vm=class Vm extends Gb{constructor(t,n){super(n);ve(this,el);me(this,"address");xt(this,{address:t})}async getAddress(){return this.address}connect(t){return new Vm(this.address,t)}async signTransaction(t){Me(this,el,Bd).call(this,"transactions","signTransaction")}async signMessage(t){Me(this,el,Bd).call(this,"messages","signMessage")}async signTypedData(t,n,i){Me(this,el,Bd).call(this,"typed-data","signTypedData")}};el=new WeakSet,Bd=function(t,n){Te(!1,`VoidSigner cannot sign ${t}`,"UNSUPPORTED_OPERATION",{operation:n})};let d2=Vm;function lD(r){return JSON.parse(JSON.stringify(r))}var pi,no,Z0,$a,J0,tl,Ah,x2,_h,p2;class FE{constructor(e){ve(this,Ah);ve(this,_h);ve(this,pi,void 0);ve(this,no,void 0);ve(this,Z0,void 0);ve(this,$a,void 0);ve(this,J0,void 0);ve(this,tl,void 0);he(this,pi,e),he(this,no,null),he(this,Z0,Me(this,Ah,x2).bind(this)),he(this,$a,!1),he(this,J0,null),he(this,tl,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){W(this,$a)||(he(this,$a,!0),Me(this,Ah,x2).call(this,-2))}stop(){W(this,$a)&&(he(this,$a,!1),he(this,tl,!0),Me(this,_h,p2).call(this),W(this,pi).off("block",W(this,Z0)))}pause(e){e&&Me(this,_h,p2).call(this),W(this,pi).off("block",W(this,Z0))}resume(){this.start()}}pi=new WeakMap,no=new WeakMap,Z0=new WeakMap,$a=new WeakMap,J0=new WeakMap,tl=new WeakMap,Ah=new WeakSet,x2=async function(e){try{W(this,no)==null&&he(this,no,this._subscribe(W(this,pi)));let t=null;try{t=await W(this,no)}catch(s){if(!Kn(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(t==null){he(this,no,null),W(this,pi)._recoverSubscriber(this,this._recover(W(this,pi)));return}const n=await W(this,pi).getNetwork();if(W(this,J0)||he(this,J0,n),W(this,J0).chainId!==n.chainId)throw new Error("chaid changed");if(W(this,tl))return;const i=await W(this,pi).send("eth_getFilterChanges",[t]);await this._emitResults(W(this,pi),i)}catch(t){console.log("@TODO",t)}W(this,pi).once("block",W(this,Z0))},_h=new WeakSet,p2=function(){const e=W(this,no);e&&(he(this,no,null),e.then(t=>{W(this,pi).send("eth_uninstallFilter",[t])}))};var ec;class uD extends FE{constructor(t,n){super(t);ve(this,ec,void 0);he(this,ec,lD(n))}_recover(t){return new jb(t,W(this,ec))}async _subscribe(t){return await t.send("eth_newFilter",[W(this,ec)])}async _emitResults(t,n){for(const i of n)t.emit(W(this,ec),t._wrapLog(i,t._network))}}ec=new WeakMap;class hD extends FE{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const dD="bigint,boolean,function,number,string,symbol".split(/,/g);function Pd(r){if(r==null||dD.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(Pd);if(typeof r=="object")return Object.keys(r).reduce((e,t)=>(e[t]=r[t],e),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function xD(r){return new Promise(e=>{setTimeout(e,r)})}function Pc(r){return r&&r.toLowerCase()}function y3(r){return r&&typeof r.pollingInterval=="number"}const pD={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Jx extends Gb{constructor(t,n){super(t);me(this,"address");n=or(n),xt(this,{address:n})}connect(t){Te(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const n=Pd(t),i=[];if(n.from){const c=n.from;i.push((async()=>{const l=await Nn(c,this.provider);pe(l!=null&&l.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=l})())}else n.from=this.address;if(n.gasLimit==null&&i.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const c=n.to;i.push((async()=>{n.to=await Nn(c,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(t){const n=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(t);return await new Promise((s,c)=>{const l=[1e3,100];let h=0;const u=async()=>{try{const p=await this.provider.getTransaction(i);if(p!=null){s(p.replaceableTransaction(n));return}}catch(p){if(Kn(p,"CANCELLED")||Kn(p,"BAD_DATA")||Kn(p,"NETWORK_ERROR")){p.info==null&&(p.info={}),p.info.sendTransactionHash=i,c(p);return}if(Kn(p,"INVALID_ARGUMENT")&&(h++,p.info==null&&(p.info={}),p.info.sendTransactionHash=i,h>10)){c(p);return}this.provider.emit("error",ln("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:p}))}this.provider._setTimeout(()=>{u()},l.pop()||4e3)};u()})}async signTransaction(t){const n=Pd(t);if(n.from){const s=await Nn(n.from,this.provider);pe(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=s}else n.from=this.address;const i=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[i])}async signMessage(t){const n=typeof t=="string"?oi(t):t;return await this.provider.send("personal_sign",[ze(n),this.address.toLowerCase()])}async signTypedData(t,n,i){const s=Pd(i),c=await dl.resolveNames(t,n,s,async l=>{const h=await Nn(l);return pe(h!=null,"TypedData does not support null address","value",l),h});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(dl.getPayload(c.domain,n,c.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const n=typeof t=="string"?oi(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),ze(n)])}}var tc,rl,Jo,io,Is,es,gi,Ch,g2;class gD extends iD{constructor(t,n){super(t,n);ve(this,Ch);ve(this,tc,void 0);ve(this,rl,void 0);ve(this,Jo,void 0);ve(this,io,void 0);ve(this,Is,void 0);ve(this,es,void 0);ve(this,gi,void 0);he(this,rl,1),he(this,tc,Object.assign({},pD,n||{})),he(this,Jo,[]),he(this,io,null),he(this,es,null),he(this,gi,null);{let s=null;const c=new Promise(l=>{s=l});he(this,Is,{promise:c,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(pe(!i||t!=="any","staticNetwork cannot be used on special network 'any'","options",n),i&&t!=null&&he(this,es,fo.from(t))):i&&(pe(t==null||i.matches(t),"staticNetwork MUST match network object","options",n),he(this,es,i))}_getOption(t){return W(this,tc)[t]}get _network(){return Te(W(this,es),"network is not available yet","NETWORK_ERROR"),W(this,es)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let i=t.transaction;if(i&&i.type!=null&&Et(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},i,{type:void 0})}))}}const n=this.getRpcRequest(t);return n!=null?await this.send(n.method,n.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(W(this,es))return W(this,es)}else return t;return W(this,gi)?await W(this,gi):this.ready?(he(this,gi,(async()=>{try{const n=fo.from(Et(await this.send("eth_chainId",[])));return he(this,gi,null),n}catch(n){throw he(this,gi,null),n}})()),await W(this,gi)):(he(this,gi,(async()=>{const n={id:Zl(this,rl)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let i;try{i=(await this._send(n))[0],he(this,gi,null)}catch(s){throw he(this,gi,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return fo.from(Et(i.result));throw this.getRpcError(n,i)})()),await W(this,gi))}_start(){W(this,Is)==null||W(this,Is).resolve==null||(W(this,Is).resolve(),he(this,Is,null),(async()=>{for(;W(this,es)==null&&!this.destroyed;)try{he(this,es,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",ln("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await xD(1e3)}Me(this,Ch,g2).call(this)})())}async _waitUntilReady(){if(W(this,Is)!=null)return await W(this,Is).promise}_getSubscriber(t){return t.type==="pending"?new hD(this):t.type==="event"?this._getOption("polling")?new jb(this,t.filter):new uD(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new PE("orphan"):super._getSubscriber(t)}get ready(){return W(this,Is)==null}getRpcTransaction(t){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(t[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),n[s]=Yc(Et(t[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{t[i]!=null&&(n[i]=ze(t[i]))}),t.accessList&&(n.accessList=bc(t.accessList)),n}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Pc(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Pc(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[Pc(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Pc(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(Pc):t.filter.address=Pc(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,n){const{method:i}=t,{error:s}=n;if(i==="eth_estimateGas"&&s.message){const h=s.message;if(!h.match(/revert/i)&&h.match(/insufficient funds/i))return ln("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const h=b2(s),u=qu.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",t.params[0],h?h.data:null);return u.info={error:s,payload:t},u}const c=JSON.stringify(yD(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return ln("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:t,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const h=t.params[0];if(c.match(/insufficient funds|base fee exceeds gas limit/i))return ln("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:h,info:{error:s}});if(c.match(/nonce/i)&&c.match(/too low/i))return ln("nonce has already been used","NONCE_EXPIRED",{transaction:h,info:{error:s}});if(c.match(/replacement transaction/i)&&c.match(/underpriced/i))return ln("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:h,info:{error:s}});if(c.match(/only replay-protected/i))return ln("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:h,info:{error:s}}})}let l=!!c.match(/the method .* does not exist/i);return l||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(l=!0),l?ln("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:s,payload:t}}):ln("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:t})}send(t,n){if(this.destroyed)return Promise.reject(ln("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const i=Zl(this,rl)._++,s=new Promise((c,l)=>{W(this,Jo).push({resolve:c,reject:l,payload:{method:t,params:n,id:i,jsonrpc:"2.0"}})});return Me(this,Ch,g2).call(this),s}async getSigner(t){t==null&&(t=0);const n=this.send("eth_accounts",[]);if(typeof t=="number"){const s=await n;if(t>=s.length)throw new Error("no such account");return new Jx(this,s[t])}const{accounts:i}=await Gn({network:this.getNetwork(),accounts:n});t=or(t);for(const s of i)if(or(s)===t)return new Jx(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new Jx(this,n))}destroy(){W(this,io)&&(clearTimeout(W(this,io)),he(this,io,null));for(const{payload:t,reject:n}of W(this,Jo))n(ln("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));he(this,Jo,[]),super.destroy()}}tc=new WeakMap,rl=new WeakMap,Jo=new WeakMap,io=new WeakMap,Is=new WeakMap,es=new WeakMap,gi=new WeakMap,Ch=new WeakSet,g2=function(){if(W(this,io))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");he(this,io,setTimeout(()=>{he(this,io,null);const n=W(this,Jo);for(he(this,Jo,[]);n.length;){const i=[n.shift()];for(;n.length&&i.length!==W(this,tc).batchMaxCount;)if(i.push(n.shift()),JSON.stringify(i.map(c=>c.payload)).length>W(this,tc).batchMaxSize){n.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(c=>c.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const c=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:c});for(const{resolve:l,reject:h,payload:u}of i){if(this.destroyed){h(ln("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const p=c.filter(b=>b.id===u.id)[0];if(p==null){const b=ln("missing response for request","BAD_DATA",{value:c,info:{payload:u}});this.emit("error",b),h(b);continue}if("error"in p){h(this.getRpcError(u,p));continue}l(p.result)}}catch(c){this.emit("debug",{action:"receiveRpcError",error:c});for(const{reject:l}of i)l(c)}})()}},t))};var Ka;class bD extends gD{constructor(t,n){super(t,n);ve(this,Ka,void 0);he(this,Ka,4e3)}_getSubscriber(t){const n=super._getSubscriber(t);return y3(n)&&(n.pollingInterval=W(this,Ka)),n}get pollingInterval(){return W(this,Ka)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");he(this,Ka,t),this._forEachSubscriber(n=>{y3(n)&&(n.pollingInterval=W(this,Ka))})}}Ka=new WeakMap;var nl,o6;let mD=(o6=class extends bD{constructor(t,n,i){t==null&&(t="http://localhost:8545");super(n,i);ve(this,nl,void 0);typeof t=="string"?he(this,nl,new fa(t)):he(this,nl,t.clone())}_getConnection(){return W(this,nl).clone()}async send(t,n){return await this._start(),await super.send(t,n)}async _send(t){const n=this._getConnection();n.body=JSON.stringify(t),n.setHeader("content-type","application/json");const i=await n.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}},nl=new WeakMap,o6);function b2(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&Kr(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const e in r){const t=b2(r[e]);if(t)return t}return null}if(typeof r=="string")try{return b2(JSON.parse(r))}catch{}return null}function m2(r,e){if(r!=null){if(typeof r.message=="string"&&e.push(r.message),typeof r=="object")for(const t in r)m2(r[t],e);if(typeof r=="string")try{return m2(JSON.parse(r),e)}catch{}}}function yD(r){const e=[];return m2(r,e),e}var il;const qm=class qm extends Gb{constructor(t,n){super(n);me(this,"address");ve(this,il,void 0);pe(t&&typeof t.sign=="function","invalid private key","privateKey","[ REDACTED ]"),he(this,il,t);const i=Rh(this.signingKey.publicKey);xt(this,{address:i})}get signingKey(){return W(this,il)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(t){return new qm(W(this,il),t)}async signTransaction(t){const{to:n,from:i}=await Gn({to:t.to?Nn(t.to,this.provider):void 0,from:t.from?Nn(t.from,this.provider):void 0});n!=null&&(t.to=n),i!=null&&(t.from=i),t.from!=null&&(pe(or(t.from)===this.address,"transaction from address mismatch","tx.from",t.from),delete t.from);const s=Gu.from(t);return s.signature=this.signingKey.sign(s.unsignedHash),s.serialized}async signMessage(t){return this.signMessageSync(t)}signMessageSync(t){return this.signingKey.sign(ZS(t)).serialized}async signTypedData(t,n,i){const s=await dl.resolveNames(t,n,i,async c=>{Te(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:c}});const l=await this.provider.resolveName(c);return Te(l!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:c}),l});return this.signingKey.sign(dl.hash(s.domain,n,s.value)).serialized}};il=new WeakMap;let s1=qm;const o1=" !#$%&'()*+,-./<=>?@[]^_`{|}~",wD=/^[a-z]*$/i;function w3(r,e){let t=97;return r.reduce((n,i)=>(i===e?t++:i.match(wD)?n.push(String.fromCharCode(t)+i):(t=97,n.push(i)),n),[])}function vD(r,e){for(let i=o1.length-1;i>=0;i--)r=r.split(o1[i]).join(e.substring(2*i,2*i+2));const t=[],n=r.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(i,s,c,l)=>{if(c)for(let h=parseInt(c);h>=0;h--)t.push(";");else t.push(s.toLowerCase());return""});if(n)throw new Error(`leftovers: ${JSON.stringify(n)}`);return w3(w3(t,";"),":")}function ED(r){return pe(r[0]==="0","unsupported auwl data","data",r),vD(r.substring(1+2*o1.length),r.substring(1,1+2*o1.length))}class AD{constructor(e){me(this,"locale");xt(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var sl,Sh,rc,Ih,y2;class _D extends AD{constructor(t,n,i){super(t);ve(this,Ih);ve(this,sl,void 0);ve(this,Sh,void 0);ve(this,rc,void 0);he(this,sl,n),he(this,Sh,i),he(this,rc,null)}get _data(){return W(this,sl)}_decodeWords(){return ED(W(this,sl))}getWord(t){const n=Me(this,Ih,y2).call(this);return pe(t>=0&&t<n.length,`invalid word index: ${t}`,"index",t),n[t]}getWordIndex(t){return Me(this,Ih,y2).call(this).indexOf(t)}}sl=new WeakMap,Sh=new WeakMap,rc=new WeakMap,Ih=new WeakSet,y2=function(){if(W(this,rc)==null){const t=this._decodeWords();if(ua(t.join(`
`)+`
`)!==W(this,Sh))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);he(this,rc,t)}return W(this,rc)};const CD="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",SD="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let ep=null;class dc extends _D{constructor(){super("en",CD,SD)}static wordlist(){return ep==null&&(ep=new dc),ep}}function LE(r){return(1<<r)-1<<8-r&255}function ID(r){return(1<<r)-1&255}function tp(r,e){w6("NFKD"),e==null&&(e=dc.wordlist());const t=e.split(r);pe(t.length%3===0&&t.length>=12&&t.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const n=new Uint8Array(Math.ceil(11*t.length/8));let i=0;for(let u=0;u<t.length;u++){let p=e.getWordIndex(t[u].normalize("NFKD"));pe(p>=0,`invalid mnemonic word at index ${u}`,"mnemonic","[ REDACTED ]");for(let b=0;b<11;b++)p&1<<10-b&&(n[i>>3]|=1<<7-i%8),i++}const s=32*t.length/3,c=t.length/3,l=LE(c),h=at(Ms(n.slice(0,s/8)))[0]&l;return pe(h===(n[n.length-1]&l),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),ze(n.slice(0,s/8))}function rp(r,e){pe(r.length%4===0&&r.length>=16&&r.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=dc.wordlist());const t=[0];let n=11;for(let c=0;c<r.length;c++)n>8?(t[t.length-1]<<=8,t[t.length-1]|=r[c],n-=8):(t[t.length-1]<<=n,t[t.length-1]|=r[c]>>8-n,t.push(r[c]&ID(8-n)),n+=3);const i=r.length/4,s=parseInt(Ms(r).substring(2,4),16)&LE(i);return t[t.length-1]<<=i,t[t.length-1]|=s>>8-i,e.join(t.map(c=>e.getWord(c)))}const np={};class pl{constructor(e,t,n,i,s){me(this,"phrase");me(this,"password");me(this,"wordlist");me(this,"entropy");i==null&&(i=""),s==null&&(s=dc.wordlist()),s0(e,np,"Mnemonic"),xt(this,{phrase:n,password:i,wordlist:s,entropy:t})}computeSeed(){const e=oi("mnemonic"+this.password,"NFKD");return o0(oi(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,n){const i=tp(e,n);return e=rp(at(i),n),new pl(np,i,e,t,n)}static fromEntropy(e,t,n){const i=at(e,"entropy"),s=rp(i,n);return new pl(np,ze(i),s,t,n)}static entropyToPhrase(e,t){const n=at(e,"entropy");return rp(n,t)}static phraseToEntropy(e,t){return tp(e,t)}static isValidMnemonic(e,t){try{return tp(e,t),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Cn=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},ip=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Fd,$i,Ws;const DD={16:10,24:12,32:14},TD=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Vi=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],hd=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],ND=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],OD=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],RD=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],MD=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],BD=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],PD=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],FD=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],LD=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],kD=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],UD=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],HD=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],zD=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function sp(r){const e=[];for(let t=0;t<r.length;t+=4)e.push(r[t]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3]);return e}class Vb{get key(){return Cn(this,Fd,"f").slice()}constructor(e){if(Fd.set(this,void 0),$i.set(this,void 0),Ws.set(this,void 0),!(this instanceof Vb))throw Error("AES must be instanitated with `new`");ip(this,Fd,new Uint8Array(e),"f");const t=DD[this.key.length];if(t==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");ip(this,Ws,[],"f"),ip(this,$i,[],"f");for(let p=0;p<=t;p++)Cn(this,Ws,"f").push([0,0,0,0]),Cn(this,$i,"f").push([0,0,0,0]);const n=(t+1)*4,i=this.key.length/4,s=sp(this.key);let c;for(let p=0;p<i;p++)c=p>>2,Cn(this,Ws,"f")[c][p%4]=s[p],Cn(this,$i,"f")[t-c][p%4]=s[p];let l=0,h=i,u;for(;h<n;){if(u=s[i-1],s[0]^=Vi[u>>16&255]<<24^Vi[u>>8&255]<<16^Vi[u&255]<<8^Vi[u>>24&255]^TD[l]<<24,l+=1,i!=8)for(let w=1;w<i;w++)s[w]^=s[w-1];else{for(let w=1;w<i/2;w++)s[w]^=s[w-1];u=s[i/2-1],s[i/2]^=Vi[u&255]^Vi[u>>8&255]<<8^Vi[u>>16&255]<<16^Vi[u>>24&255]<<24;for(let w=i/2+1;w<i;w++)s[w]^=s[w-1]}let p=0,b,y;for(;p<i&&h<n;)b=h>>2,y=h%4,Cn(this,Ws,"f")[b][y]=s[p],Cn(this,$i,"f")[t-b][y]=s[p++],h++}for(let p=1;p<t;p++)for(let b=0;b<4;b++)u=Cn(this,$i,"f")[p][b],Cn(this,$i,"f")[p][b]=kD[u>>24&255]^UD[u>>16&255]^HD[u>>8&255]^zD[u&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const t=Cn(this,Ws,"f").length-1,n=[0,0,0,0];let i=sp(e);for(let l=0;l<4;l++)i[l]^=Cn(this,Ws,"f")[0][l];for(let l=1;l<t;l++){for(let h=0;h<4;h++)n[h]=ND[i[h]>>24&255]^OD[i[(h+1)%4]>>16&255]^RD[i[(h+2)%4]>>8&255]^MD[i[(h+3)%4]&255]^Cn(this,Ws,"f")[l][h];i=n.slice()}const s=new Uint8Array(16);let c=0;for(let l=0;l<4;l++)c=Cn(this,Ws,"f")[t][l],s[4*l]=(Vi[i[l]>>24&255]^c>>24)&255,s[4*l+1]=(Vi[i[(l+1)%4]>>16&255]^c>>16)&255,s[4*l+2]=(Vi[i[(l+2)%4]>>8&255]^c>>8)&255,s[4*l+3]=(Vi[i[(l+3)%4]&255]^c)&255;return s}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const t=Cn(this,$i,"f").length-1,n=[0,0,0,0];let i=sp(e);for(let l=0;l<4;l++)i[l]^=Cn(this,$i,"f")[0][l];for(let l=1;l<t;l++){for(let h=0;h<4;h++)n[h]=BD[i[h]>>24&255]^PD[i[(h+3)%4]>>16&255]^FD[i[(h+2)%4]>>8&255]^LD[i[(h+1)%4]&255]^Cn(this,$i,"f")[l][h];i=n.slice()}const s=new Uint8Array(16);let c=0;for(let l=0;l<4;l++)c=Cn(this,$i,"f")[t][l],s[4*l]=(hd[i[l]>>24&255]^c>>24)&255,s[4*l+1]=(hd[i[(l+3)%4]>>16&255]^c>>16)&255,s[4*l+2]=(hd[i[(l+2)%4]>>8&255]^c>>8)&255,s[4*l+3]=(hd[i[(l+1)%4]&255]^c)&255;return s}}Fd=new WeakMap,$i=new WeakMap,Ws=new WeakMap;class kE{constructor(e,t,n){if(n&&!(this instanceof n))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new Vb(t)},name:{enumerable:!0,value:e}})}}var dd=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Fc=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},yu,Po;class qb extends kE{constructor(e,t){if(super("ECC",e,qb),yu.set(this,void 0),Po.set(this,void 0),t){if(t.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");dd(this,yu,new Uint8Array(t),"f")}else dd(this,yu,new Uint8Array(16),"f");dd(this,Po,this.iv,"f")}get iv(){return new Uint8Array(Fc(this,yu,"f"))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const t=new Uint8Array(e.length);for(let n=0;n<e.length;n+=16){for(let i=0;i<16;i++)Fc(this,Po,"f")[i]^=e[n+i];dd(this,Po,this.aes.encrypt(Fc(this,Po,"f")),"f"),t.set(Fc(this,Po,"f"),n)}return t}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const t=new Uint8Array(e.length);for(let n=0;n<e.length;n+=16){const i=this.aes.decrypt(e.subarray(n,n+16));for(let s=0;s<16;s++)t[n+s]=i[s]^Fc(this,Po,"f")[s],Fc(this,Po,"f")[s]=e[n+s]}return t}}yu=new WeakMap,Po=new WeakMap;var Lc=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},qi=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},wu,_0,Ki;class gl extends kE{constructor(e,t){super("CTR",e,gl),wu.set(this,void 0),_0.set(this,void 0),Ki.set(this,void 0),Lc(this,Ki,new Uint8Array(16),"f"),qi(this,Ki,"f").fill(0),Lc(this,wu,qi(this,Ki,"f"),"f"),Lc(this,_0,16,"f"),t==null&&(t=1),typeof t=="number"?this.setCounterValue(t):this.setCounterBytes(t)}get counter(){return new Uint8Array(qi(this,Ki,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let t=15;t>=0;--t)qi(this,Ki,"f")[t]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");qi(this,Ki,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(qi(this,Ki,"f")[e]===255)qi(this,Ki,"f")[e]=0;else{qi(this,Ki,"f")[e]++;break}}encrypt(e){var t,n;const i=new Uint8Array(e);for(let s=0;s<i.length;s++)qi(this,_0,"f")===16&&(Lc(this,wu,this.aes.encrypt(qi(this,Ki,"f")),"f"),Lc(this,_0,0,"f"),this.increment()),i[s]^=qi(this,wu,"f")[Lc(this,_0,(n=qi(this,_0,"f"),t=n++,n),"f"),t];return i}decrypt(e){return this.encrypt(e)}}wu=new WeakMap,_0=new WeakMap,Ki=new WeakMap;function jD(r){if(r.length<16)throw new TypeError("PKCS#7 invalid length");const e=r[r.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const t=r.length-e;for(let n=0;n<e;n++)if(r[t+n]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(r.subarray(0,t))}function UE(r){return typeof r=="string"&&!r.startsWith("0x")&&(r="0x"+r),Tn(r)}function ru(r,e){for(r=String(r);r.length<e;)r="0"+r;return r}function Fh(r){return typeof r=="string"?oi(r,"NFKC"):Tn(r)}function nn(r,e){const t=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);pe(t!=null,"invalid path","path",e);const n=t[1],i=t[3],s=t[4]==="!";let c=r;for(const l of n.toLowerCase().split(".")){if(Array.isArray(c)){if(!l.match(/^[0-9]+$/))break;c=c[parseInt(l)]}else if(typeof c=="object"){let h=null;for(const u in c)if(u.toLowerCase()===l){h=c[u];break}c=h}else c=null;if(c==null)break}if(pe(!s||c!=null,"missing required value","path",n),i&&c!=null){if(i==="int"){if(typeof c=="string"&&c.match(/^-?[0-9]+$/))return parseInt(c);if(Number.isSafeInteger(c))return c}if(i==="number"&&typeof c=="string"&&c.match(/^-?[0-9.]*$/))return parseFloat(c);if(i==="data"&&typeof c=="string")return UE(c);if(i==="array"&&Array.isArray(c)||i===typeof c)return c;pe(!1,`wrong type found for ${i} `,"path",n)}return c}const HE="m/44'/60'/0'/0/0";function v3(r){try{const e=JSON.parse(r);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function GD(r,e,t){if(nn(r,"crypto.cipher:string")==="aes-128-ctr"){const i=nn(r,"crypto.cipherparams.iv:data!"),s=new gl(e,i);return ze(s.decrypt(t))}Te(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function a1(r,e){const t=at(e),n=nn(r,"crypto.ciphertext:data!"),i=ze(Or(Rr([t.slice(16,32),n]))).substring(2);pe(i===nn(r,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=GD(r,t.slice(0,16),n),c=Rh(s);if(r.address){let u=r.address.toLowerCase();u.startsWith("0x")||(u="0x"+u),pe(or(u)===c,"keystore address/privateKey mismatch","address",r.address)}const l={address:c,privateKey:s};if(nn(r,"x-ethers.version:string")==="0.1"){const u=t.slice(32,64),p=nn(r,"x-ethers.mnemonicCiphertext:data!"),b=nn(r,"x-ethers.mnemonicCounter:data!"),y=new gl(u,b);l.mnemonic={path:nn(r,"x-ethers.path:string")||HE,locale:nn(r,"x-ethers.locale:string")||"en",entropy:ze(at(y.decrypt(p)))}}return l}function zE(r){const e=nn(r,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){const t=nn(r,"crypto.kdfparams.salt:data!"),n=nn(r,"crypto.kdfparams.n:int!"),i=nn(r,"crypto.kdfparams.r:int!"),s=nn(r,"crypto.kdfparams.p:int!");pe(n>0&&(n&n-1)===0,"invalid kdf.N","kdf.N",n),pe(i>0&&s>0,"invalid kdf","kdf",e);const c=nn(r,"crypto.kdfparams.dklen:int!");return pe(c===32,"invalid kdf.dklen","kdf.dflen",c),{name:"scrypt",salt:t,N:n,r:i,p:s,dkLen:64}}else if(e.toLowerCase()==="pbkdf2"){const t=nn(r,"crypto.kdfparams.salt:data!"),n=nn(r,"crypto.kdfparams.prf:string!"),i=n.split("-").pop();pe(i==="sha256"||i==="sha512","invalid kdf.pdf","kdf.pdf",n);const s=nn(r,"crypto.kdfparams.c:int!"),c=nn(r,"crypto.kdfparams.dklen:int!");return pe(c===32,"invalid kdf.dklen","kdf.dklen",c),{name:"pbkdf2",salt:t,count:s,dkLen:c,algorithm:i}}}pe(!1,"unsupported key-derivation function","kdf",e)}function VD(r,e){const t=JSON.parse(r),n=Fh(e),i=zE(t);if(i.name==="pbkdf2"){const{salt:b,count:y,dkLen:w,algorithm:_}=i,S=o0(n,b,y,w,_);return a1(t,S)}Te(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:s,N:c,r:l,p:h,dkLen:u}=i,p=Ol(n,s,c,l,h,u);return a1(t,p)}function E3(r){return new Promise(e=>{setTimeout(()=>{e()},r)})}async function qD(r,e,t){const n=JSON.parse(r),i=Fh(e),s=zE(n);if(s.name==="pbkdf2"){t&&(t(0),await E3(0));const{salt:y,count:w,dkLen:_,algorithm:S}=s,T=o0(i,y,w,_,S);return t&&(t(1),await E3(0)),a1(n,T)}Te(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:c,N:l,r:h,p:u,dkLen:p}=s,b=await Nl(i,c,l,h,u,p,t);return a1(n,b)}function jE(r){const e=r.salt!=null?at(r.salt,"options.salt"):ia(32);let t=1<<17,n=8,i=1;return r.scrypt&&(r.scrypt.N&&(t=r.scrypt.N),r.scrypt.r&&(n=r.scrypt.r),r.scrypt.p&&(i=r.scrypt.p)),pe(typeof t=="number"&&t>0&&Number.isSafeInteger(t)&&(BigInt(t)&BigInt(t-1))===BigInt(0),"invalid scrypt N parameter","options.N",t),pe(typeof n=="number"&&n>0&&Number.isSafeInteger(n),"invalid scrypt r parameter","options.r",n),pe(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:e,N:t,r:n,p:i}}function GE(r,e,t,n){const i=at(t.privateKey,"privateKey"),s=n.iv!=null?at(n.iv,"options.iv"):ia(16);pe(s.length===16,"invalid options.iv length","options.iv",n.iv);const c=n.uuid!=null?at(n.uuid,"options.uuid"):ia(16);pe(c.length===16,"invalid options.uuid length","options.uuid",n.iv);const l=r.slice(0,16),h=r.slice(16,32),u=new gl(l,s),p=at(u.encrypt(i)),b=Or(Rr([h,p])),y={address:t.address.substring(2).toLowerCase(),id:r7(c),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:ze(s).substring(2)},ciphertext:ze(p).substring(2),kdf:"scrypt",kdfparams:{salt:ze(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:b.substring(2)}};if(t.mnemonic){const w=n.client!=null?n.client:`ethers/${m6}`,_=t.mnemonic.path||HE,S=t.mnemonic.locale||"en",T=r.slice(32,64),F=at(t.mnemonic.entropy,"account.mnemonic.entropy"),N=ia(16),O=new gl(T,N),M=at(O.encrypt(F)),L=new Date,v="UTC--"+(L.getUTCFullYear()+"-"+ru(L.getUTCMonth()+1,2)+"-"+ru(L.getUTCDate(),2)+"T"+ru(L.getUTCHours(),2)+"-"+ru(L.getUTCMinutes(),2)+"-"+ru(L.getUTCSeconds(),2)+".0Z")+"--"+y.address;y["x-ethers"]={client:w,gethFilename:v,path:_,locale:S,mnemonicCounter:ze(N).substring(2),mnemonicCiphertext:ze(M).substring(2),version:"0.1"}}return JSON.stringify(y)}function VE(r,e,t){t==null&&(t={});const n=Fh(e),i=jE(t),s=Ol(n,i.salt,i.N,i.r,i.p,64);return GE(at(s),i,r,t)}async function qE(r,e,t){t==null&&(t={});const n=Fh(e),i=jE(t),s=await Nl(n,i.salt,i.N,i.r,i.p,64,t.progressCallback);return GE(at(s),i,r,t)}const op="m/44'/60'/0'/0/0",$D=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),e0=2147483648,KD=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),WD="0123456789abcdef";function c1(r,e){let t="";for(;r;)t=WD[r%16]+t,r=Math.trunc(r/16);for(;t.length<e*2;)t="0"+t;return"0x"+t}function w2(r){const e=at(r),t=Ur(Ms(Ms(e)),0,4),n=Rr([e,t]);return C6(n)}const Xs={};function $E(r,e,t,n){const i=new Uint8Array(37);r&e0?(Te(n!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),i.set(at(n),1)):i.set(at(t));for(let c=24;c>=0;c-=8)i[33+(c>>3)]=r>>24-c&255;const s=at(Dl("sha512",e,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function KE(r,e){const t=e.split("/");pe(t.length>0&&(t[0]==="m"||r.depth>0),"invalid path","path",e),t[0]==="m"&&t.shift();let n=r;for(let i=0;i<t.length;i++){const s=t[i];if(s.match(/^[0-9]+'$/)){const c=parseInt(s.substring(0,s.length-1));pe(c<e0,"invalid path index",`path[${i}]`,s),n=n.deriveChild(e0+c)}else if(s.match(/^[0-9]+$/)){const c=parseInt(s);pe(c<e0,"invalid path index",`path[${i}]`,s),n=n.deriveChild(c)}else pe(!1,"invalid path component",`path[${i}]`,s)}return n}var Dh,v2,nc,vu;const ms=class ms extends s1{constructor(t,n,i,s,c,l,h,u,p){super(n,p);ve(this,Dh);me(this,"publicKey");me(this,"fingerprint");me(this,"parentFingerprint");me(this,"mnemonic");me(this,"chainCode");me(this,"path");me(this,"index");me(this,"depth");s0(t,Xs,"HDNodeWallet"),xt(this,{publicKey:n.compressedPublicKey});const b=Ur(Tl(Ms(this.publicKey)),0,4);xt(this,{parentFingerprint:i,fingerprint:b,chainCode:s,path:c,index:l,depth:h}),xt(this,{mnemonic:u})}connect(t){return new ms(Xs,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,t)}async encrypt(t,n){return await qE(Me(this,Dh,v2).call(this),t,{progressCallback:n})}encryptSync(t){return VE(Me(this,Dh,v2).call(this),t)}get extendedKey(){return Te(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),w2(Rr(["0x0488ADE4",c1(this.depth,1),this.parentFingerprint,c1(this.index,4),this.chainCode,Rr(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new Ku(Xs,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(t){const n=Vt(t,"index");pe(n<=4294967295,"invalid index","index",n);let i=this.path;i&&(i+="/"+(n&~e0),n&e0&&(i+="'"));const{IR:s,IL:c}=$E(n,this.chainCode,this.publicKey,this.privateKey),l=new Ja(ca((Nh(c)+BigInt(this.privateKey))%KD,32));return new ms(Xs,l,this.fingerprint,ze(s),i,n,this.depth+1,this.mnemonic,this.provider)}derivePath(t){return KE(this,t)}static fromExtendedKey(t){const n=vi(BC(t));pe(n.length===82||w2(n.slice(0,78))===t,"invalid extended key","extendedKey","[ REDACTED ]");const i=n[4],s=ze(n.slice(5,9)),c=parseInt(ze(n.slice(9,13)).substring(2),16),l=ze(n.slice(13,45)),h=n.slice(45,78);switch(ze(n.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const u=ze(h);return new Ku(Xs,Rh(u),u,s,l,null,c,i,null)}case"0x0488ade4":case"0x04358394 ":if(h[0]!==0)break;return new ms(Xs,new Ja(h.slice(1)),s,l,null,c,i,null,null)}pe(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(t,n,i){var c;t==null&&(t=""),n==null&&(n=op),i==null&&(i=dc.wordlist());const s=pl.fromEntropy(ia(16),t,i);return Me(c=ms,nc,vu).call(c,s.computeSeed(),s).derivePath(n)}static fromMnemonic(t,n){var i;return n||(n=op),Me(i=ms,nc,vu).call(i,t.computeSeed(),t).derivePath(n)}static fromPhrase(t,n,i,s){var l;n==null&&(n=""),i==null&&(i=op),s==null&&(s=dc.wordlist());const c=pl.fromPhrase(t,n,s);return Me(l=ms,nc,vu).call(l,c.computeSeed(),c).derivePath(i)}static fromSeed(t){var n;return Me(n=ms,nc,vu).call(n,t,null)}};Dh=new WeakSet,v2=function(){const t={address:this.address,privateKey:this.privateKey},n=this.mnemonic;return this.path&&n&&n.wordlist.locale==="en"&&n.password===""&&(t.mnemonic={path:this.path,locale:"en",entropy:n.entropy}),t},nc=new WeakSet,vu=function(t,n){pe(E6(t),"invalid seed","seed","[REDACTED]");const i=at(t,"seed");pe(i.length>=16&&i.length<=64,"invalid seed","seed","[REDACTED]");const s=at(Dl("sha512",$D,i)),c=new Ja(ze(s.slice(0,32)));return new ms(Xs,c,"0x00000000",ze(s.slice(32)),"m",0,0,n,null)},ve(ms,nc);let Tu=ms;class Ku extends d2{constructor(t,n,i,s,c,l,h,u,p){super(n,p);me(this,"publicKey");me(this,"fingerprint");me(this,"parentFingerprint");me(this,"chainCode");me(this,"path");me(this,"index");me(this,"depth");s0(t,Xs,"HDNodeVoidWallet"),xt(this,{publicKey:i});const b=Ur(Tl(Ms(i)),0,4);xt(this,{publicKey:i,fingerprint:b,parentFingerprint:s,chainCode:c,path:l,index:h,depth:u})}connect(t){return new Ku(Xs,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,t)}get extendedKey(){return Te(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),w2(Rr(["0x0488B21E",c1(this.depth,1),this.parentFingerprint,c1(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(t){const n=Vt(t,"index");pe(n<=4294967295,"invalid index","index",n);let i=this.path;i&&(i+="/"+(n&~e0),n&e0&&(i+="'"));const{IR:s,IL:c}=$E(n,this.chainCode,this.publicKey,null),l=Ja.addPoints(c,this.publicKey,!0),h=Rh(l);return new Ku(Xs,h,l,this.fingerprint,ze(s),i,n,this.depth+1,this.provider)}derivePath(t){return KE(this,t)}}function A3(r){try{if(JSON.parse(r).encseed)return!0}catch{}return!1}function _3(r,e){const t=JSON.parse(r),n=Fh(e),i=or(nn(t,"ethaddr:string!")),s=UE(nn(t,"encseed:string!"));pe(s&&s.length%16===0,"invalid encseed","json",r);const c=at(o0(n,n,2e3,32,"sha256")).slice(0,16),l=s.slice(0,16),h=s.slice(16),u=new qb(c,l),p=jD(at(u.decrypt(h)));let b="";for(let y=0;y<p.length;y++)b+=String.fromCharCode(p[y]);return{address:i,privateKey:ua(b)}}function C3(r){return new Promise(e=>{setTimeout(()=>{e()},r)})}var Th,A2;const I0=class I0 extends s1{constructor(e,t){typeof e=="string"&&!e.startsWith("0x")&&(e="0x"+e);let n=typeof e=="string"?new Ja(e):e;super(n,t)}connect(e){return new I0(this.signingKey,e)}async encrypt(e,t){const n={address:this.address,privateKey:this.privateKey};return await qE(n,e,{progressCallback:t})}encryptSync(e){const t={address:this.address,privateKey:this.privateKey};return VE(t,e)}static async fromEncryptedJson(e,t,n){var s;let i=null;return v3(e)?i=await qD(e,t,n):A3(e)&&(n&&(n(0),await C3(0)),i=_3(e,t),n&&(n(1),await C3(0))),Me(s=I0,Th,A2).call(s,i)}static fromEncryptedJsonSync(e,t){var i;let n=null;return v3(e)?n=VD(e,t):A3(e)?n=_3(e,t):pe(!1,"invalid JSON wallet","json","[ REDACTED ]"),Me(i=I0,Th,A2).call(i,n)}static createRandom(e){const t=Tu.createRandom();return e?t.connect(e):t}static fromPhrase(e,t){const n=Tu.fromPhrase(e);return t?n.connect(t):n}};Th=new WeakSet,A2=function(e){if(pe(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const n=pl.fromEntropy(e.mnemonic.entropy),i=Tu.fromMnemonic(n,e.mnemonic.path);if(i.address===e.address&&i.privateKey===e.privateKey)return i;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const t=new I0(e.privateKey);return pe(t.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),t},ve(I0,Th);let E2=I0;var At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ba(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function mc(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var bl={},YD=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},WE={},Fi={};let $b;const XD=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Fi.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Fi.getSymbolTotalCodewords=function(e){return XD[e]};Fi.getBCHDigit=function(r){let e=0;for(;r!==0;)e++,r>>>=1;return e};Fi.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');$b=e};Fi.isKanjiModeEnabled=function(){return typeof $b<"u"};Fi.toSJIS=function(e){return $b(e)};var Q1={};(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,i){if(r.isValid(n))return n;try{return e(n)}catch{return i}}})(Q1);function YE(){this.buffer=[],this.length=0}YE.prototype={get:function(r){const e=Math.floor(r/8);return(this.buffer[e]>>>7-r%8&1)===1},put:function(r,e){for(let t=0;t<e;t++)this.putBit((r>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),r&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var QD=YE;function Lh(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}Lh.prototype.set=function(r,e,t,n){const i=r*this.size+e;this.data[i]=t,n&&(this.reservedBit[i]=!0)};Lh.prototype.get=function(r,e){return this.data[r*this.size+e]};Lh.prototype.xor=function(r,e,t){this.data[r*this.size+e]^=t};Lh.prototype.isReserved=function(r,e){return this.reservedBit[r*this.size+e]};var ZD=Lh,XE={};(function(r){const e=Fi.getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),c=s===145?26:Math.ceil((s-13)/(2*i-2))*2,l=[s-7];for(let h=1;h<i-1;h++)l[h]=l[h-1]-c;return l.push(6),l.reverse()},r.getPositions=function(n){const i=[],s=r.getRowColCoords(n),c=s.length;for(let l=0;l<c;l++)for(let h=0;h<c;h++)l===0&&h===0||l===0&&h===c-1||l===c-1&&h===0||i.push([s[l],s[h]]);return i}})(XE);var QE={};const JD=Fi.getSymbolSize,S3=7;QE.getPositions=function(e){const t=JD(e);return[[0,0],[t-S3,0],[0,t-S3]]};var ZE={};(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},r.from=function(i){return r.isValid(i)?parseInt(i,10):void 0},r.getPenaltyN1=function(i){const s=i.size;let c=0,l=0,h=0,u=null,p=null;for(let b=0;b<s;b++){l=h=0,u=p=null;for(let y=0;y<s;y++){let w=i.get(b,y);w===u?l++:(l>=5&&(c+=e.N1+(l-5)),u=w,l=1),w=i.get(y,b),w===p?h++:(h>=5&&(c+=e.N1+(h-5)),p=w,h=1)}l>=5&&(c+=e.N1+(l-5)),h>=5&&(c+=e.N1+(h-5))}return c},r.getPenaltyN2=function(i){const s=i.size;let c=0;for(let l=0;l<s-1;l++)for(let h=0;h<s-1;h++){const u=i.get(l,h)+i.get(l,h+1)+i.get(l+1,h)+i.get(l+1,h+1);(u===4||u===0)&&c++}return c*e.N2},r.getPenaltyN3=function(i){const s=i.size;let c=0,l=0,h=0;for(let u=0;u<s;u++){l=h=0;for(let p=0;p<s;p++)l=l<<1&2047|i.get(u,p),p>=10&&(l===1488||l===93)&&c++,h=h<<1&2047|i.get(p,u),p>=10&&(h===1488||h===93)&&c++}return c*e.N3},r.getPenaltyN4=function(i){let s=0;const c=i.data.length;for(let h=0;h<c;h++)s+=i.data[h];return Math.abs(Math.ceil(s*100/c/5)-10)*e.N4};function t(n,i,s){switch(n){case r.Patterns.PATTERN000:return(i+s)%2===0;case r.Patterns.PATTERN001:return i%2===0;case r.Patterns.PATTERN010:return s%3===0;case r.Patterns.PATTERN011:return(i+s)%3===0;case r.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case r.Patterns.PATTERN101:return i*s%2+i*s%3===0;case r.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case r.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(i,s){const c=s.size;for(let l=0;l<c;l++)for(let h=0;h<c;h++)s.isReserved(h,l)||s.xor(h,l,t(i,h,l))},r.getBestMask=function(i,s){const c=Object.keys(r.Patterns).length;let l=0,h=1/0;for(let u=0;u<c;u++){s(u),r.applyMask(u,i);const p=r.getPenaltyN1(i)+r.getPenaltyN2(i)+r.getPenaltyN3(i)+r.getPenaltyN4(i);r.applyMask(u,i),p<h&&(h=p,l=u)}return l}})(ZE);var Z1={};const Wa=Q1,xd=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],pd=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Z1.getBlocksCount=function(e,t){switch(t){case Wa.L:return xd[(e-1)*4+0];case Wa.M:return xd[(e-1)*4+1];case Wa.Q:return xd[(e-1)*4+2];case Wa.H:return xd[(e-1)*4+3];default:return}};Z1.getTotalCodewordsCount=function(e,t){switch(t){case Wa.L:return pd[(e-1)*4+0];case Wa.M:return pd[(e-1)*4+1];case Wa.Q:return pd[(e-1)*4+2];case Wa.H:return pd[(e-1)*4+3];default:return}};var JE={},J1={};const Nu=new Uint8Array(512),f1=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Nu[t]=e,f1[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Nu[t]=Nu[t-255]})();J1.log=function(e){if(e<1)throw new Error("log("+e+")");return f1[e]};J1.exp=function(e){return Nu[e]};J1.mul=function(e,t){return e===0||t===0?0:Nu[f1[e]+f1[t]]};(function(r){const e=J1;r.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let c=0;c<n.length;c++)for(let l=0;l<i.length;l++)s[c+l]^=e.mul(n[c],i[l]);return s},r.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const c=s[0];for(let h=0;h<i.length;h++)s[h]^=e.mul(i[h],c);let l=0;for(;l<s.length&&s[l]===0;)l++;s=s.slice(l)}return s},r.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=r.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(JE);const eA=JE;function Kb(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}Kb.prototype.initialize=function(e){this.degree=e,this.genPoly=eA.generateECPolynomial(this.degree)};Kb.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=eA.mod(t,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var eT=Kb,tA={},c0={},Wb={};Wb.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var yo={};const rA="[0-9]+",tT="[A-Z $%*+\\-./:]+";let Wu="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Wu=Wu.replace(/u/g,"\\u");const rT="(?:(?![A-Z0-9 $%*+\\-./:]|"+Wu+`)(?:.|[\r
]))+`;yo.KANJI=new RegExp(Wu,"g");yo.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");yo.BYTE=new RegExp(rT,"g");yo.NUMERIC=new RegExp(rA,"g");yo.ALPHANUMERIC=new RegExp(tT,"g");const nT=new RegExp("^"+Wu+"$"),iT=new RegExp("^"+rA+"$"),sT=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");yo.testKanji=function(e){return nT.test(e)};yo.testNumeric=function(e){return iT.test(e)};yo.testAlphanumeric=function(e){return sT.test(e)};(function(r){const e=Wb,t=yo;r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(s,c){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?s.ccBits[0]:c<27?s.ccBits[1]:s.ccBits[2]},r.getBestModeForData=function(s){return t.testNumeric(s)?r.NUMERIC:t.testAlphanumeric(s)?r.ALPHANUMERIC:t.testKanji(s)?r.KANJI:r.BYTE},r.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},r.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+i)}}r.from=function(s,c){if(r.isValid(s))return s;try{return n(s)}catch{return c}}})(c0);(function(r){const e=Fi,t=Z1,n=Q1,i=c0,s=Wb,c=7973,l=e.getBCHDigit(c);function h(y,w,_){for(let S=1;S<=40;S++)if(w<=r.getCapacity(S,_,y))return S}function u(y,w){return i.getCharCountIndicator(y,w)+4}function p(y,w){let _=0;return y.forEach(function(S){const T=u(S.mode,w);_+=T+S.getBitsLength()}),_}function b(y,w){for(let _=1;_<=40;_++)if(p(y,_)<=r.getCapacity(_,w,i.MIXED))return _}r.from=function(w,_){return s.isValid(w)?parseInt(w,10):_},r.getCapacity=function(w,_,S){if(!s.isValid(w))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const T=e.getSymbolTotalCodewords(w),F=t.getTotalCodewordsCount(w,_),N=(T-F)*8;if(S===i.MIXED)return N;const O=N-u(S,w);switch(S){case i.NUMERIC:return Math.floor(O/10*3);case i.ALPHANUMERIC:return Math.floor(O/11*2);case i.KANJI:return Math.floor(O/13);case i.BYTE:default:return Math.floor(O/8)}},r.getBestVersionForData=function(w,_){let S;const T=n.from(_,n.M);if(Array.isArray(w)){if(w.length>1)return b(w,T);if(w.length===0)return 1;S=w[0]}else S=w;return h(S.mode,S.getLength(),T)},r.getEncodedBits=function(w){if(!s.isValid(w)||w<7)throw new Error("Invalid QR Code version");let _=w<<12;for(;e.getBCHDigit(_)-l>=0;)_^=c<<e.getBCHDigit(_)-l;return w<<12|_}})(tA);var nA={};const _2=Fi,iA=1335,oT=21522,I3=_2.getBCHDigit(iA);nA.getEncodedBits=function(e,t){const n=e.bit<<3|t;let i=n<<10;for(;_2.getBCHDigit(i)-I3>=0;)i^=iA<<_2.getBCHDigit(i)-I3;return(n<<10|i)^oT};var sA={};const aT=c0;function ml(r){this.mode=aT.NUMERIC,this.data=r.toString()}ml.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};ml.prototype.getLength=function(){return this.data.length};ml.prototype.getBitsLength=function(){return ml.getBitsLength(this.data.length)};ml.prototype.write=function(e){let t,n,i;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-t;s>0&&(n=this.data.substr(t),i=parseInt(n,10),e.put(i,s*3+1))};var cT=ml;const fT=c0,ap=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function yl(r){this.mode=fT.ALPHANUMERIC,this.data=r}yl.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};yl.prototype.getLength=function(){return this.data.length};yl.prototype.getBitsLength=function(){return yl.getBitsLength(this.data.length)};yl.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=ap.indexOf(this.data[t])*45;n+=ap.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(ap.indexOf(this.data[t]),6)};var lT=yl,uT=function(e){for(var t=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var c=e.charCodeAt(i+1);c>=56320&&c<=57343&&(s=(s-55296)*1024+c-56320+65536,i+=1)}if(s<128){t.push(s);continue}if(s<2048){t.push(s>>6|192),t.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128);continue}if(s>=65536&&s<=1114111){t.push(s>>18|240),t.push(s>>12&63|128),t.push(s>>6&63|128),t.push(s&63|128);continue}t.push(239,191,189)}return new Uint8Array(t).buffer};const hT=uT,dT=c0;function wl(r){this.mode=dT.BYTE,typeof r=="string"&&(r=hT(r)),this.data=new Uint8Array(r)}wl.getBitsLength=function(e){return e*8};wl.prototype.getLength=function(){return this.data.length};wl.prototype.getBitsLength=function(){return wl.getBitsLength(this.data.length)};wl.prototype.write=function(r){for(let e=0,t=this.data.length;e<t;e++)r.put(this.data[e],8)};var xT=wl;const pT=c0,gT=Fi;function vl(r){this.mode=pT.KANJI,this.data=r}vl.getBitsLength=function(e){return e*13};vl.prototype.getLength=function(){return this.data.length};vl.prototype.getBitsLength=function(){return vl.getBitsLength(this.data.length)};vl.prototype.write=function(r){let e;for(e=0;e<this.data.length;e++){let t=gT.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),r.put(t,13)}};var bT=vl,oA={exports:{}};(function(r){var e={single_source_shortest_paths:function(t,n,i){var s={},c={};c[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var h,u,p,b,y,w,_,S,T;!l.empty();){h=l.pop(),u=h.value,b=h.cost,y=t[u]||{};for(p in y)y.hasOwnProperty(p)&&(w=y[p],_=b+w,S=c[p],T=typeof c[p]>"u",(T||S>_)&&(c[p]=_,l.push(p,_),s[p]=u))}if(typeof i<"u"&&typeof c[i]>"u"){var F=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(F)}return s},extract_shortest_path_from_predecessor_list:function(t,n){for(var i=[],s=n;s;)i.push(s),t[s],s=t[s];return i.reverse(),i},find_path:function(t,n,i){var s=e.single_source_shortest_paths(t,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,i={},s;t=t||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=t.sorter||n.default_sorter,i},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var i={value:t,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(oA);var mT=oA.exports;(function(r){const e=c0,t=cT,n=lT,i=xT,s=bT,c=yo,l=Fi,h=mT;function u(F){return unescape(encodeURIComponent(F)).length}function p(F,N,O){const M=[];let L;for(;(L=F.exec(O))!==null;)M.push({data:L[0],index:L.index,mode:N,length:L[0].length});return M}function b(F){const N=p(c.NUMERIC,e.NUMERIC,F),O=p(c.ALPHANUMERIC,e.ALPHANUMERIC,F);let M,L;return l.isKanjiModeEnabled()?(M=p(c.BYTE,e.BYTE,F),L=p(c.KANJI,e.KANJI,F)):(M=p(c.BYTE_KANJI,e.BYTE,F),L=[]),N.concat(O,M,L).sort(function(v,P){return v.index-P.index}).map(function(v){return{data:v.data,mode:v.mode,length:v.length}})}function y(F,N){switch(N){case e.NUMERIC:return t.getBitsLength(F);case e.ALPHANUMERIC:return n.getBitsLength(F);case e.KANJI:return s.getBitsLength(F);case e.BYTE:return i.getBitsLength(F)}}function w(F){return F.reduce(function(N,O){const M=N.length-1>=0?N[N.length-1]:null;return M&&M.mode===O.mode?(N[N.length-1].data+=O.data,N):(N.push(O),N)},[])}function _(F){const N=[];for(let O=0;O<F.length;O++){const M=F[O];switch(M.mode){case e.NUMERIC:N.push([M,{data:M.data,mode:e.ALPHANUMERIC,length:M.length},{data:M.data,mode:e.BYTE,length:M.length}]);break;case e.ALPHANUMERIC:N.push([M,{data:M.data,mode:e.BYTE,length:M.length}]);break;case e.KANJI:N.push([M,{data:M.data,mode:e.BYTE,length:u(M.data)}]);break;case e.BYTE:N.push([{data:M.data,mode:e.BYTE,length:u(M.data)}])}}return N}function S(F,N){const O={},M={start:{}};let L=["start"];for(let R=0;R<F.length;R++){const v=F[R],P=[];for(let Y=0;Y<v.length;Y++){const J=v[Y],ne=""+R+Y;P.push(ne),O[ne]={node:J,lastCount:0},M[ne]={};for(let le=0;le<L.length;le++){const V=L[le];O[V]&&O[V].node.mode===J.mode?(M[V][ne]=y(O[V].lastCount+J.length,J.mode)-y(O[V].lastCount,J.mode),O[V].lastCount+=J.length):(O[V]&&(O[V].lastCount=J.length),M[V][ne]=y(J.length,J.mode)+4+e.getCharCountIndicator(J.mode,N))}}L=P}for(let R=0;R<L.length;R++)M[L[R]].end=0;return{map:M,table:O}}function T(F,N){let O;const M=e.getBestModeForData(F);if(O=e.from(N,M),O!==e.BYTE&&O.bit<M.bit)throw new Error('"'+F+'" cannot be encoded with mode '+e.toString(O)+`.
 Suggested mode is: `+e.toString(M));switch(O===e.KANJI&&!l.isKanjiModeEnabled()&&(O=e.BYTE),O){case e.NUMERIC:return new t(F);case e.ALPHANUMERIC:return new n(F);case e.KANJI:return new s(F);case e.BYTE:return new i(F)}}r.fromArray=function(N){return N.reduce(function(O,M){return typeof M=="string"?O.push(T(M,null)):M.data&&O.push(T(M.data,M.mode)),O},[])},r.fromString=function(N,O){const M=b(N,l.isKanjiModeEnabled()),L=_(M),R=S(L,O),v=h.find_path(R.map,"start","end"),P=[];for(let Y=1;Y<v.length-1;Y++)P.push(R.table[v[Y]].node);return r.fromArray(w(P))},r.rawSplit=function(N){return r.fromArray(b(N,l.isKanjiModeEnabled()))}})(sA);const ex=Fi,cp=Q1,yT=QD,wT=ZD,vT=XE,ET=QE,C2=ZE,S2=Z1,AT=eT,l1=tA,_T=nA,CT=c0,fp=sA;function ST(r,e){const t=r.size,n=ET.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],c=n[i][1];for(let l=-1;l<=7;l++)if(!(s+l<=-1||t<=s+l))for(let h=-1;h<=7;h++)c+h<=-1||t<=c+h||(l>=0&&l<=6&&(h===0||h===6)||h>=0&&h<=6&&(l===0||l===6)||l>=2&&l<=4&&h>=2&&h<=4?r.set(s+l,c+h,!0,!0):r.set(s+l,c+h,!1,!0))}}function IT(r){const e=r.size;for(let t=8;t<e-8;t++){const n=t%2===0;r.set(t,6,n,!0),r.set(6,t,n,!0)}}function DT(r,e){const t=vT.getPositions(e);for(let n=0;n<t.length;n++){const i=t[n][0],s=t[n][1];for(let c=-2;c<=2;c++)for(let l=-2;l<=2;l++)c===-2||c===2||l===-2||l===2||c===0&&l===0?r.set(i+c,s+l,!0,!0):r.set(i+c,s+l,!1,!0)}}function TT(r,e){const t=r.size,n=l1.getEncodedBits(e);let i,s,c;for(let l=0;l<18;l++)i=Math.floor(l/3),s=l%3+t-8-3,c=(n>>l&1)===1,r.set(i,s,c,!0),r.set(s,i,c,!0)}function lp(r,e,t){const n=r.size,i=_T.getEncodedBits(e,t);let s,c;for(s=0;s<15;s++)c=(i>>s&1)===1,s<6?r.set(s,8,c,!0):s<8?r.set(s+1,8,c,!0):r.set(n-15+s,8,c,!0),s<8?r.set(8,n-s-1,c,!0):s<9?r.set(8,15-s-1+1,c,!0):r.set(8,15-s-1,c,!0);r.set(n-8,8,1,!0)}function NT(r,e){const t=r.size;let n=-1,i=t-1,s=7,c=0;for(let l=t-1;l>0;l-=2)for(l===6&&l--;;){for(let h=0;h<2;h++)if(!r.isReserved(i,l-h)){let u=!1;c<e.length&&(u=(e[c]>>>s&1)===1),r.set(i,l-h,u),s--,s===-1&&(c++,s=7)}if(i+=n,i<0||t<=i){i-=n,n=-n;break}}}function OT(r,e,t){const n=new yT;t.forEach(function(h){n.put(h.mode.bit,4),n.put(h.getLength(),CT.getCharCountIndicator(h.mode,r)),h.write(n)});const i=ex.getSymbolTotalCodewords(r),s=S2.getTotalCodewordsCount(r,e),c=(i-s)*8;for(n.getLengthInBits()+4<=c&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(c-n.getLengthInBits())/8;for(let h=0;h<l;h++)n.put(h%2?17:236,8);return RT(n,r,e)}function RT(r,e,t){const n=ex.getSymbolTotalCodewords(e),i=S2.getTotalCodewordsCount(e,t),s=n-i,c=S2.getBlocksCount(e,t),l=n%c,h=c-l,u=Math.floor(n/c),p=Math.floor(s/c),b=p+1,y=u-p,w=new AT(y);let _=0;const S=new Array(c),T=new Array(c);let F=0;const N=new Uint8Array(r.buffer);for(let v=0;v<c;v++){const P=v<h?p:b;S[v]=N.slice(_,_+P),T[v]=w.encode(S[v]),_+=P,F=Math.max(F,P)}const O=new Uint8Array(n);let M=0,L,R;for(L=0;L<F;L++)for(R=0;R<c;R++)L<S[R].length&&(O[M++]=S[R][L]);for(L=0;L<y;L++)for(R=0;R<c;R++)O[M++]=T[R][L];return O}function MT(r,e,t,n){let i;if(Array.isArray(r))i=fp.fromArray(r);else if(typeof r=="string"){let u=e;if(!u){const p=fp.rawSplit(r);u=l1.getBestVersionForData(p,t)}i=fp.fromString(r,u||40)}else throw new Error("Invalid data");const s=l1.getBestVersionForData(i,t);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const c=OT(e,t,i),l=ex.getSymbolSize(e),h=new wT(l);return ST(h,e),IT(h),DT(h,e),lp(h,t,0),e>=7&&TT(h,e),NT(h,c),isNaN(n)&&(n=C2.getBestMask(h,lp.bind(null,h,t))),C2.applyMask(n,h),lp(h,t,n),{modules:h,version:e,errorCorrectionLevel:t,maskPattern:n,segments:i}}WE.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let n=cp.M,i,s;return typeof t<"u"&&(n=cp.from(t.errorCorrectionLevel,cp.M),i=l1.from(t.version),s=C2.from(t.maskPattern),t.toSJISFunc&&ex.setToSJISFunction(t.toSJISFunc)),MT(e,i,n,s)};var aA={},Yb={};(function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,c=n.scale||4;return{width:s,scale:s?4:c,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},r.getImageWidth=function(n,i){const s=r.getScale(n,i);return Math.floor((n+i.margin*2)*s)},r.qrToImageData=function(n,i,s){const c=i.modules.size,l=i.modules.data,h=r.getScale(c,s),u=Math.floor((c+s.margin*2)*h),p=s.margin*h,b=[s.color.light,s.color.dark];for(let y=0;y<u;y++)for(let w=0;w<u;w++){let _=(y*u+w)*4,S=s.color.light;if(y>=p&&w>=p&&y<u-p&&w<u-p){const T=Math.floor((y-p)/h),F=Math.floor((w-p)/h);S=b[l[T*c+F]?1:0]}n[_++]=S.r,n[_++]=S.g,n[_++]=S.b,n[_]=S.a}}})(Yb);(function(r){const e=Yb;function t(i,s,c){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=c,s.width=c,s.style.height=c+"px",s.style.width=c+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(s,c,l){let h=l,u=c;typeof h>"u"&&(!c||!c.getContext)&&(h=c,c=void 0),c||(u=n()),h=e.getOptions(h);const p=e.getImageWidth(s.modules.size,h),b=u.getContext("2d"),y=b.createImageData(p,p);return e.qrToImageData(y.data,s,h),t(b,u,p),b.putImageData(y,0,0),u},r.renderToDataURL=function(s,c,l){let h=l;typeof h>"u"&&(!c||!c.getContext)&&(h=c,c=void 0),h||(h={});const u=r.render(s,c,h),p=h.type||"image/png",b=h.rendererOpts||{};return u.toDataURL(p,b.quality)}})(aA);var cA={};const BT=Yb;function D3(r,e){const t=r.a/255,n=e+'="'+r.hex+'"';return t<1?n+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':n}function up(r,e,t){let n=r+e;return typeof t<"u"&&(n+=" "+t),n}function PT(r,e,t){let n="",i=0,s=!1,c=0;for(let l=0;l<r.length;l++){const h=Math.floor(l%e),u=Math.floor(l/e);!h&&!s&&(s=!0),r[l]?(c++,l>0&&h>0&&r[l-1]||(n+=s?up("M",h+t,.5+u+t):up("m",i,0),i=0,s=!1),h+1<e&&r[l+1]||(n+=up("h",c),c=0)):i++}return n}cA.render=function(e,t,n){const i=BT.getOptions(t),s=e.modules.size,c=e.modules.data,l=s+i.margin*2,h=i.color.light.a?"<path "+D3(i.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+D3(i.color.dark,"stroke")+' d="'+PT(c,s,i.margin)+'"/>',p='viewBox="0 0 '+l+" "+l+'"',y='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+p+' shape-rendering="crispEdges">'+h+u+`</svg>
`;return typeof n=="function"&&n(null,y),y};const FT=YD,I2=WE,fA=aA,LT=cA;function Xb(r,e,t,n,i){const s=[].slice.call(arguments,1),c=s.length,l=typeof s[c-1]=="function";if(!l&&!FT())throw new Error("Callback required as last argument");if(l){if(c<2)throw new Error("Too few arguments provided");c===2?(i=t,t=e,e=n=void 0):c===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=t,t=e,e=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(t=e,e=n=void 0):c===2&&!e.getContext&&(n=t,t=e,e=void 0),new Promise(function(h,u){try{const p=I2.create(t,n);h(r(p,e,n))}catch(p){u(p)}})}try{const h=I2.create(t,n);i(null,r(h,e,n))}catch(h){i(h)}}bl.create=I2.create;bl.toCanvas=Xb.bind(null,fA.render);bl.toDataURL=Xb.bind(null,fA.renderToDataURL);bl.toString=Xb.bind(null,function(r,e,t){return LT.render(r,t)});var lA={exports:{}};function uA(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hp={exports:{}};const kT={},UT=Object.freeze(Object.defineProperty({__proto__:null,default:kT},Symbol.toStringTag,{value:"Module"})),Qb=mc(UT);var T3;function ar(){return T3||(T3=1,function(r,e){(function(t,n){r.exports=n()})(At,function(){var t=t||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof At<"u"&&At.crypto&&(s=At.crypto),!s&&typeof uA=="function")try{s=Qb}catch{}var c=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},l=Object.create||function(){function N(){}return function(O){var M;return N.prototype=O,M=new N,N.prototype=null,M}}(),h={},u=h.lib={},p=u.Base=function(){return{extend:function(N){var O=l(this);return N&&O.mixIn(N),(!O.hasOwnProperty("init")||this.init===O.init)&&(O.init=function(){O.$super.init.apply(this,arguments)}),O.init.prototype=O,O.$super=this,O},create:function(){var N=this.extend();return N.init.apply(N,arguments),N},init:function(){},mixIn:function(N){for(var O in N)N.hasOwnProperty(O)&&(this[O]=N[O]);N.hasOwnProperty("toString")&&(this.toString=N.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),b=u.WordArray=p.extend({init:function(N,O){N=this.words=N||[],O!=i?this.sigBytes=O:this.sigBytes=N.length*4},toString:function(N){return(N||w).stringify(this)},concat:function(N){var O=this.words,M=N.words,L=this.sigBytes,R=N.sigBytes;if(this.clamp(),L%4)for(var v=0;v<R;v++){var P=M[v>>>2]>>>24-v%4*8&255;O[L+v>>>2]|=P<<24-(L+v)%4*8}else for(var Y=0;Y<R;Y+=4)O[L+Y>>>2]=M[Y>>>2];return this.sigBytes+=R,this},clamp:function(){var N=this.words,O=this.sigBytes;N[O>>>2]&=4294967295<<32-O%4*8,N.length=n.ceil(O/4)},clone:function(){var N=p.clone.call(this);return N.words=this.words.slice(0),N},random:function(N){for(var O=[],M=0;M<N;M+=4)O.push(c());return new b.init(O,N)}}),y=h.enc={},w=y.Hex={stringify:function(N){for(var O=N.words,M=N.sigBytes,L=[],R=0;R<M;R++){var v=O[R>>>2]>>>24-R%4*8&255;L.push((v>>>4).toString(16)),L.push((v&15).toString(16))}return L.join("")},parse:function(N){for(var O=N.length,M=[],L=0;L<O;L+=2)M[L>>>3]|=parseInt(N.substr(L,2),16)<<24-L%8*4;return new b.init(M,O/2)}},_=y.Latin1={stringify:function(N){for(var O=N.words,M=N.sigBytes,L=[],R=0;R<M;R++){var v=O[R>>>2]>>>24-R%4*8&255;L.push(String.fromCharCode(v))}return L.join("")},parse:function(N){for(var O=N.length,M=[],L=0;L<O;L++)M[L>>>2]|=(N.charCodeAt(L)&255)<<24-L%4*8;return new b.init(M,O)}},S=y.Utf8={stringify:function(N){try{return decodeURIComponent(escape(_.stringify(N)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(N){return _.parse(unescape(encodeURIComponent(N)))}},T=u.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new b.init,this._nDataBytes=0},_append:function(N){typeof N=="string"&&(N=S.parse(N)),this._data.concat(N),this._nDataBytes+=N.sigBytes},_process:function(N){var O,M=this._data,L=M.words,R=M.sigBytes,v=this.blockSize,P=v*4,Y=R/P;N?Y=n.ceil(Y):Y=n.max((Y|0)-this._minBufferSize,0);var J=Y*v,ne=n.min(J*4,R);if(J){for(var le=0;le<J;le+=v)this._doProcessBlock(L,le);O=L.splice(0,J),M.sigBytes-=ne}return new b.init(O,ne)},clone:function(){var N=p.clone.call(this);return N._data=this._data.clone(),N},_minBufferSize:0});u.Hasher=T.extend({cfg:p.extend(),init:function(N){this.cfg=this.cfg.extend(N),this.reset()},reset:function(){T.reset.call(this),this._doReset()},update:function(N){return this._append(N),this._process(),this},finalize:function(N){N&&this._append(N);var O=this._doFinalize();return O},blockSize:16,_createHelper:function(N){return function(O,M){return new N.init(M).finalize(O)}},_createHmacHelper:function(N){return function(O,M){return new F.HMAC.init(N,M).finalize(O)}}});var F=h.algo={};return h}(Math);return t})}(hp)),hp.exports}var dp={exports:{}},N3;function tx(){return N3||(N3=1,function(r,e){(function(t,n){r.exports=n(ar())})(At,function(t){return function(n){var i=t,s=i.lib,c=s.Base,l=s.WordArray,h=i.x64={};h.Word=c.extend({init:function(u,p){this.high=u,this.low=p}}),h.WordArray=c.extend({init:function(u,p){u=this.words=u||[],p!=n?this.sigBytes=p:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,p=u.length,b=[],y=0;y<p;y++){var w=u[y];b.push(w.high),b.push(w.low)}return l.create(b,this.sigBytes)},clone:function(){for(var u=c.clone.call(this),p=u.words=this.words.slice(0),b=p.length,y=0;y<b;y++)p[y]=p[y].clone();return u}})}(),t})}(dp)),dp.exports}var xp={exports:{}},O3;function HT(){return O3||(O3=1,function(r,e){(function(t,n){r.exports=n(ar())})(At,function(t){return function(){if(typeof ArrayBuffer=="function"){var n=t,i=n.lib,s=i.WordArray,c=s.init,l=s.init=function(h){if(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),(h instanceof Int8Array||typeof Uint8ClampedArray<"u"&&h instanceof Uint8ClampedArray||h instanceof Int16Array||h instanceof Uint16Array||h instanceof Int32Array||h instanceof Uint32Array||h instanceof Float32Array||h instanceof Float64Array)&&(h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength)),h instanceof Uint8Array){for(var u=h.byteLength,p=[],b=0;b<u;b++)p[b>>>2]|=h[b]<<24-b%4*8;c.call(this,p,u)}else c.apply(this,arguments)};l.prototype=s}}(),t.lib.WordArray})}(xp)),xp.exports}var pp={exports:{}},R3;function zT(){return R3||(R3=1,function(r,e){(function(t,n){r.exports=n(ar())})(At,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,c=n.enc;c.Utf16=c.Utf16BE={stringify:function(h){for(var u=h.words,p=h.sigBytes,b=[],y=0;y<p;y+=2){var w=u[y>>>2]>>>16-y%4*8&65535;b.push(String.fromCharCode(w))}return b.join("")},parse:function(h){for(var u=h.length,p=[],b=0;b<u;b++)p[b>>>1]|=h.charCodeAt(b)<<16-b%2*16;return s.create(p,u*2)}},c.Utf16LE={stringify:function(h){for(var u=h.words,p=h.sigBytes,b=[],y=0;y<p;y+=2){var w=l(u[y>>>2]>>>16-y%4*8&65535);b.push(String.fromCharCode(w))}return b.join("")},parse:function(h){for(var u=h.length,p=[],b=0;b<u;b++)p[b>>>1]|=l(h.charCodeAt(b)<<16-b%2*16);return s.create(p,u*2)}};function l(h){return h<<8&4278255360|h>>>8&16711935}}(),t.enc.Utf16})}(pp)),pp.exports}var gp={exports:{}},M3;function yc(){return M3||(M3=1,function(r,e){(function(t,n){r.exports=n(ar())})(At,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,c=n.enc;c.Base64={stringify:function(h){var u=h.words,p=h.sigBytes,b=this._map;h.clamp();for(var y=[],w=0;w<p;w+=3)for(var _=u[w>>>2]>>>24-w%4*8&255,S=u[w+1>>>2]>>>24-(w+1)%4*8&255,T=u[w+2>>>2]>>>24-(w+2)%4*8&255,F=_<<16|S<<8|T,N=0;N<4&&w+N*.75<p;N++)y.push(b.charAt(F>>>6*(3-N)&63));var O=b.charAt(64);if(O)for(;y.length%4;)y.push(O);return y.join("")},parse:function(h){var u=h.length,p=this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var y=0;y<p.length;y++)b[p.charCodeAt(y)]=y}var w=p.charAt(64);if(w){var _=h.indexOf(w);_!==-1&&(u=_)}return l(h,u,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function l(h,u,p){for(var b=[],y=0,w=0;w<u;w++)if(w%4){var _=p[h.charCodeAt(w-1)]<<w%4*2,S=p[h.charCodeAt(w)]>>>6-w%4*2,T=_|S;b[y>>>2]|=T<<24-y%4*8,y++}return s.create(b,y)}}(),t.enc.Base64})}(gp)),gp.exports}var bp={exports:{}},B3;function jT(){return B3||(B3=1,function(r,e){(function(t,n){r.exports=n(ar())})(At,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,c=n.enc;c.Base64url={stringify:function(h,u){u===void 0&&(u=!0);var p=h.words,b=h.sigBytes,y=u?this._safe_map:this._map;h.clamp();for(var w=[],_=0;_<b;_+=3)for(var S=p[_>>>2]>>>24-_%4*8&255,T=p[_+1>>>2]>>>24-(_+1)%4*8&255,F=p[_+2>>>2]>>>24-(_+2)%4*8&255,N=S<<16|T<<8|F,O=0;O<4&&_+O*.75<b;O++)w.push(y.charAt(N>>>6*(3-O)&63));var M=y.charAt(64);if(M)for(;w.length%4;)w.push(M);return w.join("")},parse:function(h,u){u===void 0&&(u=!0);var p=h.length,b=u?this._safe_map:this._map,y=this._reverseMap;if(!y){y=this._reverseMap=[];for(var w=0;w<b.length;w++)y[b.charCodeAt(w)]=w}var _=b.charAt(64);if(_){var S=h.indexOf(_);S!==-1&&(p=S)}return l(h,p,y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function l(h,u,p){for(var b=[],y=0,w=0;w<u;w++)if(w%4){var _=p[h.charCodeAt(w-1)]<<w%4*2,S=p[h.charCodeAt(w)]>>>6-w%4*2,T=_|S;b[y>>>2]|=T<<24-y%4*8,y++}return s.create(b,y)}}(),t.enc.Base64url})}(bp)),bp.exports}var mp={exports:{}},P3;function wc(){return P3||(P3=1,function(r,e){(function(t,n){r.exports=n(ar())})(At,function(t){return function(n){var i=t,s=i.lib,c=s.WordArray,l=s.Hasher,h=i.algo,u=[];(function(){for(var S=0;S<64;S++)u[S]=n.abs(n.sin(S+1))*4294967296|0})();var p=h.MD5=l.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(S,T){for(var F=0;F<16;F++){var N=T+F,O=S[N];S[N]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}var M=this._hash.words,L=S[T+0],R=S[T+1],v=S[T+2],P=S[T+3],Y=S[T+4],J=S[T+5],ne=S[T+6],le=S[T+7],V=S[T+8],E=S[T+9],C=S[T+10],U=S[T+11],j=S[T+12],K=S[T+13],X=S[T+14],te=S[T+15],z=M[0],D=M[1],G=M[2],ue=M[3];z=b(z,D,G,ue,L,7,u[0]),ue=b(ue,z,D,G,R,12,u[1]),G=b(G,ue,z,D,v,17,u[2]),D=b(D,G,ue,z,P,22,u[3]),z=b(z,D,G,ue,Y,7,u[4]),ue=b(ue,z,D,G,J,12,u[5]),G=b(G,ue,z,D,ne,17,u[6]),D=b(D,G,ue,z,le,22,u[7]),z=b(z,D,G,ue,V,7,u[8]),ue=b(ue,z,D,G,E,12,u[9]),G=b(G,ue,z,D,C,17,u[10]),D=b(D,G,ue,z,U,22,u[11]),z=b(z,D,G,ue,j,7,u[12]),ue=b(ue,z,D,G,K,12,u[13]),G=b(G,ue,z,D,X,17,u[14]),D=b(D,G,ue,z,te,22,u[15]),z=y(z,D,G,ue,R,5,u[16]),ue=y(ue,z,D,G,ne,9,u[17]),G=y(G,ue,z,D,U,14,u[18]),D=y(D,G,ue,z,L,20,u[19]),z=y(z,D,G,ue,J,5,u[20]),ue=y(ue,z,D,G,C,9,u[21]),G=y(G,ue,z,D,te,14,u[22]),D=y(D,G,ue,z,Y,20,u[23]),z=y(z,D,G,ue,E,5,u[24]),ue=y(ue,z,D,G,X,9,u[25]),G=y(G,ue,z,D,P,14,u[26]),D=y(D,G,ue,z,V,20,u[27]),z=y(z,D,G,ue,K,5,u[28]),ue=y(ue,z,D,G,v,9,u[29]),G=y(G,ue,z,D,le,14,u[30]),D=y(D,G,ue,z,j,20,u[31]),z=w(z,D,G,ue,J,4,u[32]),ue=w(ue,z,D,G,V,11,u[33]),G=w(G,ue,z,D,U,16,u[34]),D=w(D,G,ue,z,X,23,u[35]),z=w(z,D,G,ue,R,4,u[36]),ue=w(ue,z,D,G,Y,11,u[37]),G=w(G,ue,z,D,le,16,u[38]),D=w(D,G,ue,z,C,23,u[39]),z=w(z,D,G,ue,K,4,u[40]),ue=w(ue,z,D,G,L,11,u[41]),G=w(G,ue,z,D,P,16,u[42]),D=w(D,G,ue,z,ne,23,u[43]),z=w(z,D,G,ue,E,4,u[44]),ue=w(ue,z,D,G,j,11,u[45]),G=w(G,ue,z,D,te,16,u[46]),D=w(D,G,ue,z,v,23,u[47]),z=_(z,D,G,ue,L,6,u[48]),ue=_(ue,z,D,G,le,10,u[49]),G=_(G,ue,z,D,X,15,u[50]),D=_(D,G,ue,z,J,21,u[51]),z=_(z,D,G,ue,j,6,u[52]),ue=_(ue,z,D,G,P,10,u[53]),G=_(G,ue,z,D,C,15,u[54]),D=_(D,G,ue,z,R,21,u[55]),z=_(z,D,G,ue,V,6,u[56]),ue=_(ue,z,D,G,te,10,u[57]),G=_(G,ue,z,D,ne,15,u[58]),D=_(D,G,ue,z,K,21,u[59]),z=_(z,D,G,ue,Y,6,u[60]),ue=_(ue,z,D,G,U,10,u[61]),G=_(G,ue,z,D,v,15,u[62]),D=_(D,G,ue,z,E,21,u[63]),M[0]=M[0]+z|0,M[1]=M[1]+D|0,M[2]=M[2]+G|0,M[3]=M[3]+ue|0},_doFinalize:function(){var S=this._data,T=S.words,F=this._nDataBytes*8,N=S.sigBytes*8;T[N>>>5]|=128<<24-N%32;var O=n.floor(F/4294967296),M=F;T[(N+64>>>9<<4)+15]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,T[(N+64>>>9<<4)+14]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,S.sigBytes=(T.length+1)*4,this._process();for(var L=this._hash,R=L.words,v=0;v<4;v++){var P=R[v];R[v]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return L},clone:function(){var S=l.clone.call(this);return S._hash=this._hash.clone(),S}});function b(S,T,F,N,O,M,L){var R=S+(T&F|~T&N)+O+L;return(R<<M|R>>>32-M)+T}function y(S,T,F,N,O,M,L){var R=S+(T&N|F&~N)+O+L;return(R<<M|R>>>32-M)+T}function w(S,T,F,N,O,M,L){var R=S+(T^F^N)+O+L;return(R<<M|R>>>32-M)+T}function _(S,T,F,N,O,M,L){var R=S+(F^(T|~N))+O+L;return(R<<M|R>>>32-M)+T}i.MD5=l._createHelper(p),i.HmacMD5=l._createHmacHelper(p)}(Math),t.MD5})}(mp)),mp.exports}var yp={exports:{}},F3;function hA(){return F3||(F3=1,function(r,e){(function(t,n){r.exports=n(ar())})(At,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,c=i.Hasher,l=n.algo,h=[],u=l.SHA1=c.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(p,b){for(var y=this._hash.words,w=y[0],_=y[1],S=y[2],T=y[3],F=y[4],N=0;N<80;N++){if(N<16)h[N]=p[b+N]|0;else{var O=h[N-3]^h[N-8]^h[N-14]^h[N-16];h[N]=O<<1|O>>>31}var M=(w<<5|w>>>27)+F+h[N];N<20?M+=(_&S|~_&T)+1518500249:N<40?M+=(_^S^T)+1859775393:N<60?M+=(_&S|_&T|S&T)-1894007588:M+=(_^S^T)-899497514,F=T,T=S,S=_<<30|_>>>2,_=w,w=M}y[0]=y[0]+w|0,y[1]=y[1]+_|0,y[2]=y[2]+S|0,y[3]=y[3]+T|0,y[4]=y[4]+F|0},_doFinalize:function(){var p=this._data,b=p.words,y=this._nDataBytes*8,w=p.sigBytes*8;return b[w>>>5]|=128<<24-w%32,b[(w+64>>>9<<4)+14]=Math.floor(y/4294967296),b[(w+64>>>9<<4)+15]=y,p.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var p=c.clone.call(this);return p._hash=this._hash.clone(),p}});n.SHA1=c._createHelper(u),n.HmacSHA1=c._createHmacHelper(u)}(),t.SHA1})}(yp)),yp.exports}var wp={exports:{}},L3;function Zb(){return L3||(L3=1,function(r,e){(function(t,n){r.exports=n(ar())})(At,function(t){return function(n){var i=t,s=i.lib,c=s.WordArray,l=s.Hasher,h=i.algo,u=[],p=[];(function(){function w(F){for(var N=n.sqrt(F),O=2;O<=N;O++)if(!(F%O))return!1;return!0}function _(F){return(F-(F|0))*4294967296|0}for(var S=2,T=0;T<64;)w(S)&&(T<8&&(u[T]=_(n.pow(S,1/2))),p[T]=_(n.pow(S,1/3)),T++),S++})();var b=[],y=h.SHA256=l.extend({_doReset:function(){this._hash=new c.init(u.slice(0))},_doProcessBlock:function(w,_){for(var S=this._hash.words,T=S[0],F=S[1],N=S[2],O=S[3],M=S[4],L=S[5],R=S[6],v=S[7],P=0;P<64;P++){if(P<16)b[P]=w[_+P]|0;else{var Y=b[P-15],J=(Y<<25|Y>>>7)^(Y<<14|Y>>>18)^Y>>>3,ne=b[P-2],le=(ne<<15|ne>>>17)^(ne<<13|ne>>>19)^ne>>>10;b[P]=J+b[P-7]+le+b[P-16]}var V=M&L^~M&R,E=T&F^T&N^F&N,C=(T<<30|T>>>2)^(T<<19|T>>>13)^(T<<10|T>>>22),U=(M<<26|M>>>6)^(M<<21|M>>>11)^(M<<7|M>>>25),j=v+U+V+p[P]+b[P],K=C+E;v=R,R=L,L=M,M=O+j|0,O=N,N=F,F=T,T=j+K|0}S[0]=S[0]+T|0,S[1]=S[1]+F|0,S[2]=S[2]+N|0,S[3]=S[3]+O|0,S[4]=S[4]+M|0,S[5]=S[5]+L|0,S[6]=S[6]+R|0,S[7]=S[7]+v|0},_doFinalize:function(){var w=this._data,_=w.words,S=this._nDataBytes*8,T=w.sigBytes*8;return _[T>>>5]|=128<<24-T%32,_[(T+64>>>9<<4)+14]=n.floor(S/4294967296),_[(T+64>>>9<<4)+15]=S,w.sigBytes=_.length*4,this._process(),this._hash},clone:function(){var w=l.clone.call(this);return w._hash=this._hash.clone(),w}});i.SHA256=l._createHelper(y),i.HmacSHA256=l._createHmacHelper(y)}(Math),t.SHA256})}(wp)),wp.exports}var vp={exports:{}},k3;function GT(){return k3||(k3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),Zb())})(At,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,c=n.algo,l=c.SHA256,h=c.SHA224=l.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=4,u}});n.SHA224=l._createHelper(h),n.HmacSHA224=l._createHmacHelper(h)}(),t.SHA224})}(vp)),vp.exports}var Ep={exports:{}},U3;function dA(){return U3||(U3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),tx())})(At,function(t){return function(){var n=t,i=n.lib,s=i.Hasher,c=n.x64,l=c.Word,h=c.WordArray,u=n.algo;function p(){return l.create.apply(l,arguments)}var b=[p(1116352408,3609767458),p(1899447441,602891725),p(3049323471,3964484399),p(3921009573,2173295548),p(961987163,4081628472),p(1508970993,3053834265),p(2453635748,2937671579),p(2870763221,3664609560),p(3624381080,2734883394),p(310598401,1164996542),p(607225278,1323610764),p(1426881987,3590304994),p(1925078388,4068182383),p(2162078206,991336113),p(2614888103,633803317),p(3248222580,3479774868),p(3835390401,2666613458),p(4022224774,944711139),p(264347078,2341262773),p(604807628,2007800933),p(770255983,1495990901),p(1249150122,1856431235),p(1555081692,3175218132),p(1996064986,2198950837),p(2554220882,3999719339),p(2821834349,766784016),p(2952996808,2566594879),p(3210313671,3203337956),p(3336571891,1034457026),p(3584528711,2466948901),p(113926993,3758326383),p(338241895,168717936),p(666307205,1188179964),p(773529912,1546045734),p(1294757372,1522805485),p(1396182291,2643833823),p(1695183700,2343527390),p(1986661051,1014477480),p(2177026350,1206759142),p(2456956037,344077627),p(2730485921,1290863460),p(2820302411,3158454273),p(3259730800,3505952657),p(3345764771,106217008),p(3516065817,3606008344),p(3600352804,1432725776),p(4094571909,1467031594),p(275423344,851169720),p(430227734,3100823752),p(506948616,1363258195),p(659060556,3750685593),p(883997877,3785050280),p(958139571,3318307427),p(1322822218,3812723403),p(1537002063,2003034995),p(1747873779,3602036899),p(1955562222,1575990012),p(2024104815,1125592928),p(2227730452,2716904306),p(2361852424,442776044),p(2428436474,593698344),p(2756734187,3733110249),p(3204031479,2999351573),p(3329325298,3815920427),p(3391569614,3928383900),p(3515267271,566280711),p(3940187606,3454069534),p(4118630271,4000239992),p(116418474,1914138554),p(174292421,2731055270),p(289380356,3203993006),p(460393269,320620315),p(685471733,587496836),p(852142971,1086792851),p(1017036298,365543100),p(1126000580,2618297676),p(1288033470,3409855158),p(1501505948,4234509866),p(1607167915,987167468),p(1816402316,1246189591)],y=[];(function(){for(var _=0;_<80;_++)y[_]=p()})();var w=u.SHA512=s.extend({_doReset:function(){this._hash=new h.init([new l.init(1779033703,4089235720),new l.init(3144134277,2227873595),new l.init(1013904242,4271175723),new l.init(2773480762,1595750129),new l.init(1359893119,2917565137),new l.init(2600822924,725511199),new l.init(528734635,4215389547),new l.init(1541459225,327033209)])},_doProcessBlock:function(_,S){for(var T=this._hash.words,F=T[0],N=T[1],O=T[2],M=T[3],L=T[4],R=T[5],v=T[6],P=T[7],Y=F.high,J=F.low,ne=N.high,le=N.low,V=O.high,E=O.low,C=M.high,U=M.low,j=L.high,K=L.low,X=R.high,te=R.low,z=v.high,D=v.low,G=P.high,ue=P.low,H=Y,fe=J,ie=ne,re=le,se=V,B=E,ee=C,de=U,Ae=j,Se=K,Pe=X,pt=te,je=z,Ge=D,Je=G,Ze=ue,Ce=0;Ce<80;Ce++){var ut,Ye,$e=y[Ce];if(Ce<16)Ye=$e.high=_[S+Ce*2]|0,ut=$e.low=_[S+Ce*2+1]|0;else{var _t=y[Ce-15],He=_t.high,We=_t.low,wt=(He>>>1|We<<31)^(He>>>8|We<<24)^He>>>7,Ve=(We>>>1|He<<31)^(We>>>8|He<<24)^(We>>>7|He<<25),Xe=y[Ce-2],Ct=Xe.high,nt=Xe.low,Ke=(Ct>>>19|nt<<13)^(Ct<<3|nt>>>29)^Ct>>>6,Ie=(nt>>>19|Ct<<13)^(nt<<3|Ct>>>29)^(nt>>>6|Ct<<26),qe=y[Ce-7],rt=qe.high,Pt=qe.low,Ft=y[Ce-16],Rt=Ft.high,Qr=Ft.low;ut=Ve+Pt,Ye=wt+rt+(ut>>>0<Ve>>>0?1:0),ut=ut+Ie,Ye=Ye+Ke+(ut>>>0<Ie>>>0?1:0),ut=ut+Qr,Ye=Ye+Rt+(ut>>>0<Qr>>>0?1:0),$e.high=Ye,$e.low=ut}var st=Ae&Pe^~Ae&je,$t=Se&pt^~Se&Ge,fr=H&ie^H&se^ie&se,St=fe&re^fe&B^re&B,dt=(H>>>28|fe<<4)^(H<<30|fe>>>2)^(H<<25|fe>>>7),sr=(fe>>>28|H<<4)^(fe<<30|H>>>2)^(fe<<25|H>>>7),ot=(Ae>>>14|Se<<18)^(Ae>>>18|Se<<14)^(Ae<<23|Se>>>9),bt=(Se>>>14|Ae<<18)^(Se>>>18|Ae<<14)^(Se<<23|Ae>>>9),cr=b[Ce],mt=cr.high,Nt=cr.low,Ot=Ze+bt,yt=Je+ot+(Ot>>>0<Ze>>>0?1:0),Ot=Ot+$t,yt=yt+st+(Ot>>>0<$t>>>0?1:0),Ot=Ot+Nt,yt=yt+mt+(Ot>>>0<Nt>>>0?1:0),Ot=Ot+ut,yt=yt+Ye+(Ot>>>0<ut>>>0?1:0),ct=sr+St,Qt=dt+fr+(ct>>>0<sr>>>0?1:0);Je=je,Ze=Ge,je=Pe,Ge=pt,Pe=Ae,pt=Se,Se=de+Ot|0,Ae=ee+yt+(Se>>>0<de>>>0?1:0)|0,ee=se,de=B,se=ie,B=re,ie=H,re=fe,fe=Ot+ct|0,H=yt+Qt+(fe>>>0<Ot>>>0?1:0)|0}J=F.low=J+fe,F.high=Y+H+(J>>>0<fe>>>0?1:0),le=N.low=le+re,N.high=ne+ie+(le>>>0<re>>>0?1:0),E=O.low=E+B,O.high=V+se+(E>>>0<B>>>0?1:0),U=M.low=U+de,M.high=C+ee+(U>>>0<de>>>0?1:0),K=L.low=K+Se,L.high=j+Ae+(K>>>0<Se>>>0?1:0),te=R.low=te+pt,R.high=X+Pe+(te>>>0<pt>>>0?1:0),D=v.low=D+Ge,v.high=z+je+(D>>>0<Ge>>>0?1:0),ue=P.low=ue+Ze,P.high=G+Je+(ue>>>0<Ze>>>0?1:0)},_doFinalize:function(){var _=this._data,S=_.words,T=this._nDataBytes*8,F=_.sigBytes*8;S[F>>>5]|=128<<24-F%32,S[(F+128>>>10<<5)+30]=Math.floor(T/4294967296),S[(F+128>>>10<<5)+31]=T,_.sigBytes=S.length*4,this._process();var N=this._hash.toX32();return N},clone:function(){var _=s.clone.call(this);return _._hash=this._hash.clone(),_},blockSize:1024/32});n.SHA512=s._createHelper(w),n.HmacSHA512=s._createHmacHelper(w)}(),t.SHA512})}(Ep)),Ep.exports}var Ap={exports:{}},H3;function VT(){return H3||(H3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),tx(),dA())})(At,function(t){return function(){var n=t,i=n.x64,s=i.Word,c=i.WordArray,l=n.algo,h=l.SHA512,u=l.SHA384=h.extend({_doReset:function(){this._hash=new c.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var p=h._doFinalize.call(this);return p.sigBytes-=16,p}});n.SHA384=h._createHelper(u),n.HmacSHA384=h._createHmacHelper(u)}(),t.SHA384})}(Ap)),Ap.exports}var _p={exports:{}},z3;function qT(){return z3||(z3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),tx())})(At,function(t){return function(n){var i=t,s=i.lib,c=s.WordArray,l=s.Hasher,h=i.x64,u=h.Word,p=i.algo,b=[],y=[],w=[];(function(){for(var T=1,F=0,N=0;N<24;N++){b[T+5*F]=(N+1)*(N+2)/2%64;var O=F%5,M=(2*T+3*F)%5;T=O,F=M}for(var T=0;T<5;T++)for(var F=0;F<5;F++)y[T+5*F]=F+(2*T+3*F)%5*5;for(var L=1,R=0;R<24;R++){for(var v=0,P=0,Y=0;Y<7;Y++){if(L&1){var J=(1<<Y)-1;J<32?P^=1<<J:v^=1<<J-32}L&128?L=L<<1^113:L<<=1}w[R]=u.create(v,P)}})();var _=[];(function(){for(var T=0;T<25;T++)_[T]=u.create()})();var S=p.SHA3=l.extend({cfg:l.cfg.extend({outputLength:512}),_doReset:function(){for(var T=this._state=[],F=0;F<25;F++)T[F]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(T,F){for(var N=this._state,O=this.blockSize/2,M=0;M<O;M++){var L=T[F+2*M],R=T[F+2*M+1];L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360;var v=N[M];v.high^=R,v.low^=L}for(var P=0;P<24;P++){for(var Y=0;Y<5;Y++){for(var J=0,ne=0,le=0;le<5;le++){var v=N[Y+5*le];J^=v.high,ne^=v.low}var V=_[Y];V.high=J,V.low=ne}for(var Y=0;Y<5;Y++)for(var E=_[(Y+4)%5],C=_[(Y+1)%5],U=C.high,j=C.low,J=E.high^(U<<1|j>>>31),ne=E.low^(j<<1|U>>>31),le=0;le<5;le++){var v=N[Y+5*le];v.high^=J,v.low^=ne}for(var K=1;K<25;K++){var J,ne,v=N[K],X=v.high,te=v.low,z=b[K];z<32?(J=X<<z|te>>>32-z,ne=te<<z|X>>>32-z):(J=te<<z-32|X>>>64-z,ne=X<<z-32|te>>>64-z);var D=_[y[K]];D.high=J,D.low=ne}var G=_[0],ue=N[0];G.high=ue.high,G.low=ue.low;for(var Y=0;Y<5;Y++)for(var le=0;le<5;le++){var K=Y+5*le,v=N[K],H=_[K],fe=_[(Y+1)%5+5*le],ie=_[(Y+2)%5+5*le];v.high=H.high^~fe.high&ie.high,v.low=H.low^~fe.low&ie.low}var v=N[0],re=w[P];v.high^=re.high,v.low^=re.low}},_doFinalize:function(){var T=this._data,F=T.words;this._nDataBytes*8;var N=T.sigBytes*8,O=this.blockSize*32;F[N>>>5]|=1<<24-N%32,F[(n.ceil((N+1)/O)*O>>>5)-1]|=128,T.sigBytes=F.length*4,this._process();for(var M=this._state,L=this.cfg.outputLength/8,R=L/8,v=[],P=0;P<R;P++){var Y=M[P],J=Y.high,ne=Y.low;J=(J<<8|J>>>24)&16711935|(J<<24|J>>>8)&4278255360,ne=(ne<<8|ne>>>24)&16711935|(ne<<24|ne>>>8)&4278255360,v.push(ne),v.push(J)}return new c.init(v,L)},clone:function(){for(var T=l.clone.call(this),F=T._state=this._state.slice(0),N=0;N<25;N++)F[N]=F[N].clone();return T}});i.SHA3=l._createHelper(S),i.HmacSHA3=l._createHmacHelper(S)}(Math),t.SHA3})}(_p)),_p.exports}var Cp={exports:{}},j3;function $T(){return j3||(j3=1,function(r,e){(function(t,n){r.exports=n(ar())})(At,function(t){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var i=t,s=i.lib,c=s.WordArray,l=s.Hasher,h=i.algo,u=c.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=c.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),b=c.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),y=c.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),w=c.create([0,1518500249,1859775393,2400959708,2840853838]),_=c.create([1352829926,1548603684,1836072691,2053994217,0]),S=h.RIPEMD160=l.extend({_doReset:function(){this._hash=c.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(R,v){for(var P=0;P<16;P++){var Y=v+P,J=R[Y];R[Y]=(J<<8|J>>>24)&16711935|(J<<24|J>>>8)&4278255360}var ne=this._hash.words,le=w.words,V=_.words,E=u.words,C=p.words,U=b.words,j=y.words,K,X,te,z,D,G,ue,H,fe,ie;G=K=ne[0],ue=X=ne[1],H=te=ne[2],fe=z=ne[3],ie=D=ne[4];for(var re,P=0;P<80;P+=1)re=K+R[v+E[P]]|0,P<16?re+=T(X,te,z)+le[0]:P<32?re+=F(X,te,z)+le[1]:P<48?re+=N(X,te,z)+le[2]:P<64?re+=O(X,te,z)+le[3]:re+=M(X,te,z)+le[4],re=re|0,re=L(re,U[P]),re=re+D|0,K=D,D=z,z=L(te,10),te=X,X=re,re=G+R[v+C[P]]|0,P<16?re+=M(ue,H,fe)+V[0]:P<32?re+=O(ue,H,fe)+V[1]:P<48?re+=N(ue,H,fe)+V[2]:P<64?re+=F(ue,H,fe)+V[3]:re+=T(ue,H,fe)+V[4],re=re|0,re=L(re,j[P]),re=re+ie|0,G=ie,ie=fe,fe=L(H,10),H=ue,ue=re;re=ne[1]+te+fe|0,ne[1]=ne[2]+z+ie|0,ne[2]=ne[3]+D+G|0,ne[3]=ne[4]+K+ue|0,ne[4]=ne[0]+X+H|0,ne[0]=re},_doFinalize:function(){var R=this._data,v=R.words,P=this._nDataBytes*8,Y=R.sigBytes*8;v[Y>>>5]|=128<<24-Y%32,v[(Y+64>>>9<<4)+14]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,R.sigBytes=(v.length+1)*4,this._process();for(var J=this._hash,ne=J.words,le=0;le<5;le++){var V=ne[le];ne[le]=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360}return J},clone:function(){var R=l.clone.call(this);return R._hash=this._hash.clone(),R}});function T(R,v,P){return R^v^P}function F(R,v,P){return R&v|~R&P}function N(R,v,P){return(R|~v)^P}function O(R,v,P){return R&P|v&~P}function M(R,v,P){return R^(v|~P)}function L(R,v){return R<<v|R>>>32-v}i.RIPEMD160=l._createHelper(S),i.HmacRIPEMD160=l._createHmacHelper(S)}(),t.RIPEMD160})}(Cp)),Cp.exports}var Sp={exports:{}},G3;function Jb(){return G3||(G3=1,function(r,e){(function(t,n){r.exports=n(ar())})(At,function(t){(function(){var n=t,i=n.lib,s=i.Base,c=n.enc,l=c.Utf8,h=n.algo;h.HMAC=s.extend({init:function(u,p){u=this._hasher=new u.init,typeof p=="string"&&(p=l.parse(p));var b=u.blockSize,y=b*4;p.sigBytes>y&&(p=u.finalize(p)),p.clamp();for(var w=this._oKey=p.clone(),_=this._iKey=p.clone(),S=w.words,T=_.words,F=0;F<b;F++)S[F]^=1549556828,T[F]^=909522486;w.sigBytes=_.sigBytes=y,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var p=this._hasher,b=p.finalize(u);p.reset();var y=p.finalize(this._oKey.clone().concat(b));return y}})})()})}(Sp)),Sp.exports}var Ip={exports:{}},V3;function KT(){return V3||(V3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),Zb(),Jb())})(At,function(t){return function(){var n=t,i=n.lib,s=i.Base,c=i.WordArray,l=n.algo,h=l.SHA256,u=l.HMAC,p=l.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:h,iterations:25e4}),init:function(b){this.cfg=this.cfg.extend(b)},compute:function(b,y){for(var w=this.cfg,_=u.create(w.hasher,b),S=c.create(),T=c.create([1]),F=S.words,N=T.words,O=w.keySize,M=w.iterations;F.length<O;){var L=_.update(y).finalize(T);_.reset();for(var R=L.words,v=R.length,P=L,Y=1;Y<M;Y++){P=_.finalize(P),_.reset();for(var J=P.words,ne=0;ne<v;ne++)R[ne]^=J[ne]}S.concat(L),N[0]++}return S.sigBytes=O*4,S}});n.PBKDF2=function(b,y,w){return p.create(w).compute(b,y)}}(),t.PBKDF2})}(Ip)),Ip.exports}var Dp={exports:{}},q3;function f0(){return q3||(q3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),hA(),Jb())})(At,function(t){return function(){var n=t,i=n.lib,s=i.Base,c=i.WordArray,l=n.algo,h=l.MD5,u=l.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:h,iterations:1}),init:function(p){this.cfg=this.cfg.extend(p)},compute:function(p,b){for(var y,w=this.cfg,_=w.hasher.create(),S=c.create(),T=S.words,F=w.keySize,N=w.iterations;T.length<F;){y&&_.update(y),y=_.update(p).finalize(b),_.reset();for(var O=1;O<N;O++)y=_.finalize(y),_.reset();S.concat(y)}return S.sigBytes=F*4,S}});n.EvpKDF=function(p,b,y){return u.create(y).compute(p,b)}}(),t.EvpKDF})}(Dp)),Dp.exports}var Tp={exports:{}},$3;function yn(){return $3||($3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),f0())})(At,function(t){t.lib.Cipher||function(n){var i=t,s=i.lib,c=s.Base,l=s.WordArray,h=s.BufferedBlockAlgorithm,u=i.enc;u.Utf8;var p=u.Base64,b=i.algo,y=b.EvpKDF,w=s.Cipher=h.extend({cfg:c.extend(),createEncryptor:function(J,ne){return this.create(this._ENC_XFORM_MODE,J,ne)},createDecryptor:function(J,ne){return this.create(this._DEC_XFORM_MODE,J,ne)},init:function(J,ne,le){this.cfg=this.cfg.extend(le),this._xformMode=J,this._key=ne,this.reset()},reset:function(){h.reset.call(this),this._doReset()},process:function(J){return this._append(J),this._process()},finalize:function(J){J&&this._append(J);var ne=this._doFinalize();return ne},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function J(ne){return typeof ne=="string"?Y:R}return function(ne){return{encrypt:function(le,V,E){return J(V).encrypt(ne,le,V,E)},decrypt:function(le,V,E){return J(V).decrypt(ne,le,V,E)}}}}()});s.StreamCipher=w.extend({_doFinalize:function(){var J=this._process(!0);return J},blockSize:1});var _=i.mode={},S=s.BlockCipherMode=c.extend({createEncryptor:function(J,ne){return this.Encryptor.create(J,ne)},createDecryptor:function(J,ne){return this.Decryptor.create(J,ne)},init:function(J,ne){this._cipher=J,this._iv=ne}}),T=_.CBC=function(){var J=S.extend();J.Encryptor=J.extend({processBlock:function(le,V){var E=this._cipher,C=E.blockSize;ne.call(this,le,V,C),E.encryptBlock(le,V),this._prevBlock=le.slice(V,V+C)}}),J.Decryptor=J.extend({processBlock:function(le,V){var E=this._cipher,C=E.blockSize,U=le.slice(V,V+C);E.decryptBlock(le,V),ne.call(this,le,V,C),this._prevBlock=U}});function ne(le,V,E){var C,U=this._iv;U?(C=U,this._iv=n):C=this._prevBlock;for(var j=0;j<E;j++)le[V+j]^=C[j]}return J}(),F=i.pad={},N=F.Pkcs7={pad:function(J,ne){for(var le=ne*4,V=le-J.sigBytes%le,E=V<<24|V<<16|V<<8|V,C=[],U=0;U<V;U+=4)C.push(E);var j=l.create(C,V);J.concat(j)},unpad:function(J){var ne=J.words[J.sigBytes-1>>>2]&255;J.sigBytes-=ne}};s.BlockCipher=w.extend({cfg:w.cfg.extend({mode:T,padding:N}),reset:function(){var J;w.reset.call(this);var ne=this.cfg,le=ne.iv,V=ne.mode;this._xformMode==this._ENC_XFORM_MODE?J=V.createEncryptor:(J=V.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==J?this._mode.init(this,le&&le.words):(this._mode=J.call(V,this,le&&le.words),this._mode.__creator=J)},_doProcessBlock:function(J,ne){this._mode.processBlock(J,ne)},_doFinalize:function(){var J,ne=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(ne.pad(this._data,this.blockSize),J=this._process(!0)):(J=this._process(!0),ne.unpad(J)),J},blockSize:128/32});var O=s.CipherParams=c.extend({init:function(J){this.mixIn(J)},toString:function(J){return(J||this.formatter).stringify(this)}}),M=i.format={},L=M.OpenSSL={stringify:function(J){var ne,le=J.ciphertext,V=J.salt;return V?ne=l.create([1398893684,1701076831]).concat(V).concat(le):ne=le,ne.toString(p)},parse:function(J){var ne,le=p.parse(J),V=le.words;return V[0]==1398893684&&V[1]==1701076831&&(ne=l.create(V.slice(2,4)),V.splice(0,4),le.sigBytes-=16),O.create({ciphertext:le,salt:ne})}},R=s.SerializableCipher=c.extend({cfg:c.extend({format:L}),encrypt:function(J,ne,le,V){V=this.cfg.extend(V);var E=J.createEncryptor(le,V),C=E.finalize(ne),U=E.cfg;return O.create({ciphertext:C,key:le,iv:U.iv,algorithm:J,mode:U.mode,padding:U.padding,blockSize:J.blockSize,formatter:V.format})},decrypt:function(J,ne,le,V){V=this.cfg.extend(V),ne=this._parse(ne,V.format);var E=J.createDecryptor(le,V).finalize(ne.ciphertext);return E},_parse:function(J,ne){return typeof J=="string"?ne.parse(J,this):J}}),v=i.kdf={},P=v.OpenSSL={execute:function(J,ne,le,V,E){if(V||(V=l.random(64/8)),E)var C=y.create({keySize:ne+le,hasher:E}).compute(J,V);else var C=y.create({keySize:ne+le}).compute(J,V);var U=l.create(C.words.slice(ne),le*4);return C.sigBytes=ne*4,O.create({key:C,iv:U,salt:V})}},Y=s.PasswordBasedCipher=R.extend({cfg:R.cfg.extend({kdf:P}),encrypt:function(J,ne,le,V){V=this.cfg.extend(V);var E=V.kdf.execute(le,J.keySize,J.ivSize,V.salt,V.hasher);V.iv=E.iv;var C=R.encrypt.call(this,J,ne,E.key,V);return C.mixIn(E),C},decrypt:function(J,ne,le,V){V=this.cfg.extend(V),ne=this._parse(ne,V.format);var E=V.kdf.execute(le,J.keySize,J.ivSize,ne.salt,V.hasher);V.iv=E.iv;var C=R.decrypt.call(this,J,ne,E.key,V);return C}})}()})}(Tp)),Tp.exports}var Np={exports:{}},K3;function WT(){return K3||(K3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yn())})(At,function(t){return t.mode.CFB=function(){var n=t.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,c){var l=this._cipher,h=l.blockSize;i.call(this,s,c,h,l),this._prevBlock=s.slice(c,c+h)}}),n.Decryptor=n.extend({processBlock:function(s,c){var l=this._cipher,h=l.blockSize,u=s.slice(c,c+h);i.call(this,s,c,h,l),this._prevBlock=u}});function i(s,c,l,h){var u,p=this._iv;p?(u=p.slice(0),this._iv=void 0):u=this._prevBlock,h.encryptBlock(u,0);for(var b=0;b<l;b++)s[c+b]^=u[b]}return n}(),t.mode.CFB})}(Np)),Np.exports}var Op={exports:{}},W3;function YT(){return W3||(W3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yn())})(At,function(t){return t.mode.CTR=function(){var n=t.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,c){var l=this._cipher,h=l.blockSize,u=this._iv,p=this._counter;u&&(p=this._counter=u.slice(0),this._iv=void 0);var b=p.slice(0);l.encryptBlock(b,0),p[h-1]=p[h-1]+1|0;for(var y=0;y<h;y++)s[c+y]^=b[y]}});return n.Decryptor=i,n}(),t.mode.CTR})}(Op)),Op.exports}var Rp={exports:{}},Y3;function XT(){return Y3||(Y3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yn())})(At,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var n=t.lib.BlockCipherMode.extend();function i(l){if((l>>24&255)===255){var h=l>>16&255,u=l>>8&255,p=l&255;h===255?(h=0,u===255?(u=0,p===255?p=0:++p):++u):++h,l=0,l+=h<<16,l+=u<<8,l+=p}else l+=1<<24;return l}function s(l){return(l[0]=i(l[0]))===0&&(l[1]=i(l[1])),l}var c=n.Encryptor=n.extend({processBlock:function(l,h){var u=this._cipher,p=u.blockSize,b=this._iv,y=this._counter;b&&(y=this._counter=b.slice(0),this._iv=void 0),s(y);var w=y.slice(0);u.encryptBlock(w,0);for(var _=0;_<p;_++)l[h+_]^=w[_]}});return n.Decryptor=c,n}(),t.mode.CTRGladman})}(Rp)),Rp.exports}var Mp={exports:{}},X3;function QT(){return X3||(X3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yn())})(At,function(t){return t.mode.OFB=function(){var n=t.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,c){var l=this._cipher,h=l.blockSize,u=this._iv,p=this._keystream;u&&(p=this._keystream=u.slice(0),this._iv=void 0),l.encryptBlock(p,0);for(var b=0;b<h;b++)s[c+b]^=p[b]}});return n.Decryptor=i,n}(),t.mode.OFB})}(Mp)),Mp.exports}var Bp={exports:{}},Q3;function ZT(){return Q3||(Q3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yn())})(At,function(t){return t.mode.ECB=function(){var n=t.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),n.Decryptor=n.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),n}(),t.mode.ECB})}(Bp)),Bp.exports}var Pp={exports:{}},Z3;function JT(){return Z3||(Z3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yn())})(At,function(t){return t.pad.AnsiX923={pad:function(n,i){var s=n.sigBytes,c=i*4,l=c-s%c,h=s+l-1;n.clamp(),n.words[h>>>2]|=l<<24-h%4*8,n.sigBytes+=l},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},t.pad.Ansix923})}(Pp)),Pp.exports}var Fp={exports:{}},J3;function eN(){return J3||(J3=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yn())})(At,function(t){return t.pad.Iso10126={pad:function(n,i){var s=i*4,c=s-n.sigBytes%s;n.concat(t.lib.WordArray.random(c-1)).concat(t.lib.WordArray.create([c<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},t.pad.Iso10126})}(Fp)),Fp.exports}var Lp={exports:{}},ew;function tN(){return ew||(ew=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yn())})(At,function(t){return t.pad.Iso97971={pad:function(n,i){n.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(n,i)},unpad:function(n){t.pad.ZeroPadding.unpad(n),n.sigBytes--}},t.pad.Iso97971})}(Lp)),Lp.exports}var kp={exports:{}},tw;function rN(){return tw||(tw=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yn())})(At,function(t){return t.pad.ZeroPadding={pad:function(n,i){var s=i*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var i=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},t.pad.ZeroPadding})}(kp)),kp.exports}var Up={exports:{}},rw;function nN(){return rw||(rw=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yn())})(At,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}(Up)),Up.exports}var Hp={exports:{}},nw;function iN(){return nw||(nw=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yn())})(At,function(t){return function(n){var i=t,s=i.lib,c=s.CipherParams,l=i.enc,h=l.Hex,u=i.format;u.Hex={stringify:function(p){return p.ciphertext.toString(h)},parse:function(p){var b=h.parse(p);return c.create({ciphertext:b})}}}(),t.format.Hex})}(Hp)),Hp.exports}var zp={exports:{}},iw;function sN(){return iw||(iw=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yc(),wc(),f0(),yn())})(At,function(t){return function(){var n=t,i=n.lib,s=i.BlockCipher,c=n.algo,l=[],h=[],u=[],p=[],b=[],y=[],w=[],_=[],S=[],T=[];(function(){for(var O=[],M=0;M<256;M++)M<128?O[M]=M<<1:O[M]=M<<1^283;for(var L=0,R=0,M=0;M<256;M++){var v=R^R<<1^R<<2^R<<3^R<<4;v=v>>>8^v&255^99,l[L]=v,h[v]=L;var P=O[L],Y=O[P],J=O[Y],ne=O[v]*257^v*16843008;u[L]=ne<<24|ne>>>8,p[L]=ne<<16|ne>>>16,b[L]=ne<<8|ne>>>24,y[L]=ne;var ne=J*16843009^Y*65537^P*257^L*16843008;w[v]=ne<<24|ne>>>8,_[v]=ne<<16|ne>>>16,S[v]=ne<<8|ne>>>24,T[v]=ne,L?(L=P^O[O[O[J^P]]],R^=O[O[R]]):L=R=1}})();var F=[0,1,2,4,8,16,32,64,128,27,54],N=c.AES=s.extend({_doReset:function(){var O;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var M=this._keyPriorReset=this._key,L=M.words,R=M.sigBytes/4,v=this._nRounds=R+6,P=(v+1)*4,Y=this._keySchedule=[],J=0;J<P;J++)J<R?Y[J]=L[J]:(O=Y[J-1],J%R?R>6&&J%R==4&&(O=l[O>>>24]<<24|l[O>>>16&255]<<16|l[O>>>8&255]<<8|l[O&255]):(O=O<<8|O>>>24,O=l[O>>>24]<<24|l[O>>>16&255]<<16|l[O>>>8&255]<<8|l[O&255],O^=F[J/R|0]<<24),Y[J]=Y[J-R]^O);for(var ne=this._invKeySchedule=[],le=0;le<P;le++){var J=P-le;if(le%4)var O=Y[J];else var O=Y[J-4];le<4||J<=4?ne[le]=O:ne[le]=w[l[O>>>24]]^_[l[O>>>16&255]]^S[l[O>>>8&255]]^T[l[O&255]]}}},encryptBlock:function(O,M){this._doCryptBlock(O,M,this._keySchedule,u,p,b,y,l)},decryptBlock:function(O,M){var L=O[M+1];O[M+1]=O[M+3],O[M+3]=L,this._doCryptBlock(O,M,this._invKeySchedule,w,_,S,T,h);var L=O[M+1];O[M+1]=O[M+3],O[M+3]=L},_doCryptBlock:function(O,M,L,R,v,P,Y,J){for(var ne=this._nRounds,le=O[M]^L[0],V=O[M+1]^L[1],E=O[M+2]^L[2],C=O[M+3]^L[3],U=4,j=1;j<ne;j++){var K=R[le>>>24]^v[V>>>16&255]^P[E>>>8&255]^Y[C&255]^L[U++],X=R[V>>>24]^v[E>>>16&255]^P[C>>>8&255]^Y[le&255]^L[U++],te=R[E>>>24]^v[C>>>16&255]^P[le>>>8&255]^Y[V&255]^L[U++],z=R[C>>>24]^v[le>>>16&255]^P[V>>>8&255]^Y[E&255]^L[U++];le=K,V=X,E=te,C=z}var K=(J[le>>>24]<<24|J[V>>>16&255]<<16|J[E>>>8&255]<<8|J[C&255])^L[U++],X=(J[V>>>24]<<24|J[E>>>16&255]<<16|J[C>>>8&255]<<8|J[le&255])^L[U++],te=(J[E>>>24]<<24|J[C>>>16&255]<<16|J[le>>>8&255]<<8|J[V&255])^L[U++],z=(J[C>>>24]<<24|J[le>>>16&255]<<16|J[V>>>8&255]<<8|J[E&255])^L[U++];O[M]=K,O[M+1]=X,O[M+2]=te,O[M+3]=z},keySize:256/32});n.AES=s._createHelper(N)}(),t.AES})}(zp)),zp.exports}var jp={exports:{}},sw;function oN(){return sw||(sw=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yc(),wc(),f0(),yn())})(At,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,c=i.BlockCipher,l=n.algo,h=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],p=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],b=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],y=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],w=l.DES=c.extend({_doReset:function(){for(var F=this._key,N=F.words,O=[],M=0;M<56;M++){var L=h[M]-1;O[M]=N[L>>>5]>>>31-L%32&1}for(var R=this._subKeys=[],v=0;v<16;v++){for(var P=R[v]=[],Y=p[v],M=0;M<24;M++)P[M/6|0]|=O[(u[M]-1+Y)%28]<<31-M%6,P[4+(M/6|0)]|=O[28+(u[M+24]-1+Y)%28]<<31-M%6;P[0]=P[0]<<1|P[0]>>>31;for(var M=1;M<7;M++)P[M]=P[M]>>>(M-1)*4+3;P[7]=P[7]<<5|P[7]>>>27}for(var J=this._invSubKeys=[],M=0;M<16;M++)J[M]=R[15-M]},encryptBlock:function(F,N){this._doCryptBlock(F,N,this._subKeys)},decryptBlock:function(F,N){this._doCryptBlock(F,N,this._invSubKeys)},_doCryptBlock:function(F,N,O){this._lBlock=F[N],this._rBlock=F[N+1],_.call(this,4,252645135),_.call(this,16,65535),S.call(this,2,858993459),S.call(this,8,16711935),_.call(this,1,1431655765);for(var M=0;M<16;M++){for(var L=O[M],R=this._lBlock,v=this._rBlock,P=0,Y=0;Y<8;Y++)P|=b[Y][((v^L[Y])&y[Y])>>>0];this._lBlock=v,this._rBlock=R^P}var J=this._lBlock;this._lBlock=this._rBlock,this._rBlock=J,_.call(this,1,1431655765),S.call(this,8,16711935),S.call(this,2,858993459),_.call(this,16,65535),_.call(this,4,252645135),F[N]=this._lBlock,F[N+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function _(F,N){var O=(this._lBlock>>>F^this._rBlock)&N;this._rBlock^=O,this._lBlock^=O<<F}function S(F,N){var O=(this._rBlock>>>F^this._lBlock)&N;this._lBlock^=O,this._rBlock^=O<<F}n.DES=c._createHelper(w);var T=l.TripleDES=c.extend({_doReset:function(){var F=this._key,N=F.words;if(N.length!==2&&N.length!==4&&N.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var O=N.slice(0,2),M=N.length<4?N.slice(0,2):N.slice(2,4),L=N.length<6?N.slice(0,2):N.slice(4,6);this._des1=w.createEncryptor(s.create(O)),this._des2=w.createEncryptor(s.create(M)),this._des3=w.createEncryptor(s.create(L))},encryptBlock:function(F,N){this._des1.encryptBlock(F,N),this._des2.decryptBlock(F,N),this._des3.encryptBlock(F,N)},decryptBlock:function(F,N){this._des3.decryptBlock(F,N),this._des2.encryptBlock(F,N),this._des1.decryptBlock(F,N)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=c._createHelper(T)}(),t.TripleDES})}(jp)),jp.exports}var Gp={exports:{}},ow;function aN(){return ow||(ow=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yc(),wc(),f0(),yn())})(At,function(t){return function(){var n=t,i=n.lib,s=i.StreamCipher,c=n.algo,l=c.RC4=s.extend({_doReset:function(){for(var p=this._key,b=p.words,y=p.sigBytes,w=this._S=[],_=0;_<256;_++)w[_]=_;for(var _=0,S=0;_<256;_++){var T=_%y,F=b[T>>>2]>>>24-T%4*8&255;S=(S+w[_]+F)%256;var N=w[_];w[_]=w[S],w[S]=N}this._i=this._j=0},_doProcessBlock:function(p,b){p[b]^=h.call(this)},keySize:256/32,ivSize:0});function h(){for(var p=this._S,b=this._i,y=this._j,w=0,_=0;_<4;_++){b=(b+1)%256,y=(y+p[b])%256;var S=p[b];p[b]=p[y],p[y]=S,w|=p[(p[b]+p[y])%256]<<24-_*8}return this._i=b,this._j=y,w}n.RC4=s._createHelper(l);var u=c.RC4Drop=l.extend({cfg:l.cfg.extend({drop:192}),_doReset:function(){l._doReset.call(this);for(var p=this.cfg.drop;p>0;p--)h.call(this)}});n.RC4Drop=s._createHelper(u)}(),t.RC4})}(Gp)),Gp.exports}var Vp={exports:{}},aw;function cN(){return aw||(aw=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yc(),wc(),f0(),yn())})(At,function(t){return function(){var n=t,i=n.lib,s=i.StreamCipher,c=n.algo,l=[],h=[],u=[],p=c.Rabbit=s.extend({_doReset:function(){for(var y=this._key.words,w=this.cfg.iv,_=0;_<4;_++)y[_]=(y[_]<<8|y[_]>>>24)&16711935|(y[_]<<24|y[_]>>>8)&4278255360;var S=this._X=[y[0],y[3]<<16|y[2]>>>16,y[1],y[0]<<16|y[3]>>>16,y[2],y[1]<<16|y[0]>>>16,y[3],y[2]<<16|y[1]>>>16],T=this._C=[y[2]<<16|y[2]>>>16,y[0]&4294901760|y[1]&65535,y[3]<<16|y[3]>>>16,y[1]&4294901760|y[2]&65535,y[0]<<16|y[0]>>>16,y[2]&4294901760|y[3]&65535,y[1]<<16|y[1]>>>16,y[3]&4294901760|y[0]&65535];this._b=0;for(var _=0;_<4;_++)b.call(this);for(var _=0;_<8;_++)T[_]^=S[_+4&7];if(w){var F=w.words,N=F[0],O=F[1],M=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,L=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,R=M>>>16|L&4294901760,v=L<<16|M&65535;T[0]^=M,T[1]^=R,T[2]^=L,T[3]^=v,T[4]^=M,T[5]^=R,T[6]^=L,T[7]^=v;for(var _=0;_<4;_++)b.call(this)}},_doProcessBlock:function(y,w){var _=this._X;b.call(this),l[0]=_[0]^_[5]>>>16^_[3]<<16,l[1]=_[2]^_[7]>>>16^_[5]<<16,l[2]=_[4]^_[1]>>>16^_[7]<<16,l[3]=_[6]^_[3]>>>16^_[1]<<16;for(var S=0;S<4;S++)l[S]=(l[S]<<8|l[S]>>>24)&16711935|(l[S]<<24|l[S]>>>8)&4278255360,y[w+S]^=l[S]},blockSize:128/32,ivSize:64/32});function b(){for(var y=this._X,w=this._C,_=0;_<8;_++)h[_]=w[_];w[0]=w[0]+1295307597+this._b|0,w[1]=w[1]+3545052371+(w[0]>>>0<h[0]>>>0?1:0)|0,w[2]=w[2]+886263092+(w[1]>>>0<h[1]>>>0?1:0)|0,w[3]=w[3]+1295307597+(w[2]>>>0<h[2]>>>0?1:0)|0,w[4]=w[4]+3545052371+(w[3]>>>0<h[3]>>>0?1:0)|0,w[5]=w[5]+886263092+(w[4]>>>0<h[4]>>>0?1:0)|0,w[6]=w[6]+1295307597+(w[5]>>>0<h[5]>>>0?1:0)|0,w[7]=w[7]+3545052371+(w[6]>>>0<h[6]>>>0?1:0)|0,this._b=w[7]>>>0<h[7]>>>0?1:0;for(var _=0;_<8;_++){var S=y[_]+w[_],T=S&65535,F=S>>>16,N=((T*T>>>17)+T*F>>>15)+F*F,O=((S&4294901760)*S|0)+((S&65535)*S|0);u[_]=N^O}y[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,y[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,y[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,y[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,y[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,y[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,y[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,y[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.Rabbit=s._createHelper(p)}(),t.Rabbit})}(Vp)),Vp.exports}var qp={exports:{}},cw;function fN(){return cw||(cw=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yc(),wc(),f0(),yn())})(At,function(t){return function(){var n=t,i=n.lib,s=i.StreamCipher,c=n.algo,l=[],h=[],u=[],p=c.RabbitLegacy=s.extend({_doReset:function(){var y=this._key.words,w=this.cfg.iv,_=this._X=[y[0],y[3]<<16|y[2]>>>16,y[1],y[0]<<16|y[3]>>>16,y[2],y[1]<<16|y[0]>>>16,y[3],y[2]<<16|y[1]>>>16],S=this._C=[y[2]<<16|y[2]>>>16,y[0]&4294901760|y[1]&65535,y[3]<<16|y[3]>>>16,y[1]&4294901760|y[2]&65535,y[0]<<16|y[0]>>>16,y[2]&4294901760|y[3]&65535,y[1]<<16|y[1]>>>16,y[3]&4294901760|y[0]&65535];this._b=0;for(var T=0;T<4;T++)b.call(this);for(var T=0;T<8;T++)S[T]^=_[T+4&7];if(w){var F=w.words,N=F[0],O=F[1],M=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,L=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,R=M>>>16|L&4294901760,v=L<<16|M&65535;S[0]^=M,S[1]^=R,S[2]^=L,S[3]^=v,S[4]^=M,S[5]^=R,S[6]^=L,S[7]^=v;for(var T=0;T<4;T++)b.call(this)}},_doProcessBlock:function(y,w){var _=this._X;b.call(this),l[0]=_[0]^_[5]>>>16^_[3]<<16,l[1]=_[2]^_[7]>>>16^_[5]<<16,l[2]=_[4]^_[1]>>>16^_[7]<<16,l[3]=_[6]^_[3]>>>16^_[1]<<16;for(var S=0;S<4;S++)l[S]=(l[S]<<8|l[S]>>>24)&16711935|(l[S]<<24|l[S]>>>8)&4278255360,y[w+S]^=l[S]},blockSize:128/32,ivSize:64/32});function b(){for(var y=this._X,w=this._C,_=0;_<8;_++)h[_]=w[_];w[0]=w[0]+1295307597+this._b|0,w[1]=w[1]+3545052371+(w[0]>>>0<h[0]>>>0?1:0)|0,w[2]=w[2]+886263092+(w[1]>>>0<h[1]>>>0?1:0)|0,w[3]=w[3]+1295307597+(w[2]>>>0<h[2]>>>0?1:0)|0,w[4]=w[4]+3545052371+(w[3]>>>0<h[3]>>>0?1:0)|0,w[5]=w[5]+886263092+(w[4]>>>0<h[4]>>>0?1:0)|0,w[6]=w[6]+1295307597+(w[5]>>>0<h[5]>>>0?1:0)|0,w[7]=w[7]+3545052371+(w[6]>>>0<h[6]>>>0?1:0)|0,this._b=w[7]>>>0<h[7]>>>0?1:0;for(var _=0;_<8;_++){var S=y[_]+w[_],T=S&65535,F=S>>>16,N=((T*T>>>17)+T*F>>>15)+F*F,O=((S&4294901760)*S|0)+((S&65535)*S|0);u[_]=N^O}y[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,y[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,y[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,y[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,y[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,y[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,y[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,y[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.RabbitLegacy=s._createHelper(p)}(),t.RabbitLegacy})}(qp)),qp.exports}var $p={exports:{}},fw;function lN(){return fw||(fw=1,function(r,e){(function(t,n,i){r.exports=n(ar(),yc(),wc(),f0(),yn())})(At,function(t){return function(){var n=t,i=n.lib,s=i.BlockCipher,c=n.algo;const l=16,h=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var p={pbox:[],sbox:[]};function b(T,F){let N=F>>24&255,O=F>>16&255,M=F>>8&255,L=F&255,R=T.sbox[0][N]+T.sbox[1][O];return R=R^T.sbox[2][M],R=R+T.sbox[3][L],R}function y(T,F,N){let O=F,M=N,L;for(let R=0;R<l;++R)O=O^T.pbox[R],M=b(T,O)^M,L=O,O=M,M=L;return L=O,O=M,M=L,M=M^T.pbox[l],O=O^T.pbox[l+1],{left:O,right:M}}function w(T,F,N){let O=F,M=N,L;for(let R=l+1;R>1;--R)O=O^T.pbox[R],M=b(T,O)^M,L=O,O=M,M=L;return L=O,O=M,M=L,M=M^T.pbox[1],O=O^T.pbox[0],{left:O,right:M}}function _(T,F,N){for(let v=0;v<4;v++){T.sbox[v]=[];for(let P=0;P<256;P++)T.sbox[v][P]=u[v][P]}let O=0;for(let v=0;v<l+2;v++)T.pbox[v]=h[v]^F[O],O++,O>=N&&(O=0);let M=0,L=0,R=0;for(let v=0;v<l+2;v+=2)R=y(T,M,L),M=R.left,L=R.right,T.pbox[v]=M,T.pbox[v+1]=L;for(let v=0;v<4;v++)for(let P=0;P<256;P+=2)R=y(T,M,L),M=R.left,L=R.right,T.sbox[v][P]=M,T.sbox[v][P+1]=L;return!0}var S=c.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var T=this._keyPriorReset=this._key,F=T.words,N=T.sigBytes/4;_(p,F,N)}},encryptBlock:function(T,F){var N=y(p,T[F],T[F+1]);T[F]=N.left,T[F+1]=N.right},decryptBlock:function(T,F){var N=w(p,T[F],T[F+1]);T[F]=N.left,T[F+1]=N.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=s._createHelper(S)}(),t.Blowfish})}($p)),$p.exports}(function(r,e){(function(t,n,i){r.exports=n(ar(),tx(),HT(),zT(),yc(),jT(),wc(),hA(),Zb(),GT(),dA(),VT(),qT(),$T(),Jb(),KT(),f0(),yn(),WT(),YT(),XT(),QT(),ZT(),JT(),eN(),tN(),rN(),nN(),iN(),sN(),oN(),aN(),cN(),fN(),lN())})(At,function(t){return t})})(lA);var uN=lA.exports;const Kp=ba(uN),kc=[];function hN(r,e=mn){let t;const n=new Set;function i(l){if(pb(r,l)&&(r=l,t)){const h=!kc.length;for(const u of n)u[1](),kc.push(u,r);if(h){for(let u=0;u<kc.length;u+=2)kc[u][0](kc[u+1]);kc.length=0}}}function s(l){i(l(r))}function c(l,h=mn){const u=[l,h];return n.add(u),n.size===1&&(t=e(i,s)||mn),l(r),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:c}}var Wp={local:{},session:{}};function dN(r){return r==="local"?localStorage:sessionStorage}function xA(r,e,t){var n,i,s,c;const l=(n=t==null?void 0:t.serializer)!=null?n:JSON,h=(i=t==null?void 0:t.storage)!=null?i:"local",u=(s=t==null?void 0:t.syncTabs)!=null?s:!0,p=(c=t==null?void 0:t.onError)!=null?c:S=>console.error(`Error when writing value from persisted store "${r}" to ${h}`,S),b=typeof window<"u"&&typeof document<"u",y=b?dN(h):null;function w(S,T){try{y==null||y.setItem(S,l.stringify(T))}catch(F){p(F)}}function _(){const S=y==null?void 0:y.getItem(r);return S?l.parse(S):e}if(!Wp[h][r]){const S=_(),T=hN(S,O=>{if(b&&h=="local"&&u){const M=L=>{L.key===r&&O(L.newValue?l.parse(L.newValue):null)};return window.addEventListener("storage",M),()=>window.removeEventListener("storage",M)}}),{subscribe:F,set:N}=T;Wp[h][r]={set(O){N(O),w(r,O)},update(O){return T.update(M=>{const L=O(M);return w(r,L),L})},subscribe:F}}return Wp[h][r]}const Uc=xA("payTo",null),Yp=xA("history",{});var oa={DEBUG:!1,LIB_VERSION:"2.49.0"},nr;if(typeof window>"u"){var lw={hostname:""};nr={navigator:{userAgent:""},document:{location:lw,referrer:""},screen:{width:0,height:0},location:lw}}else nr=window;var rx=Array.prototype,xN=Function.prototype,pA=Object.prototype,Ya=rx.slice,kh=pA.toString,nx=pA.hasOwnProperty,fn=nr.console,Xa=nr.navigator,Tr=nr.document,gd=nr.opera,u1=nr.screen,so=Xa.userAgent,Xp=xN.bind,uw=rx.forEach,hw=rx.indexOf,dw=rx.map,pN=Array.isArray,D2={},Z={trim:function(r){return r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},vr={log:function(){if(oa.DEBUG&&!Z.isUndefined(fn)&&fn)try{fn.log.apply(fn,arguments)}catch{Z.each(arguments,function(e){fn.log(e)})}},warn:function(){if(oa.DEBUG&&!Z.isUndefined(fn)&&fn){var r=["Mixpanel warning:"].concat(Z.toArray(arguments));try{fn.warn.apply(fn,r)}catch{Z.each(r,function(t){fn.warn(t)})}}},error:function(){if(oa.DEBUG&&!Z.isUndefined(fn)&&fn){var r=["Mixpanel error:"].concat(Z.toArray(arguments));try{fn.error.apply(fn,r)}catch{Z.each(r,function(t){fn.error(t)})}}},critical:function(){if(!Z.isUndefined(fn)&&fn){var r=["Mixpanel error:"].concat(Z.toArray(arguments));try{fn.error.apply(fn,r)}catch{Z.each(r,function(t){fn.error(t)})}}}},Qp=function(r,e){return function(){return arguments[0]="["+e+"] "+arguments[0],r.apply(vr,arguments)}},em=function(r){return{log:Qp(vr.log,r),error:Qp(vr.error,r),critical:Qp(vr.critical,r)}};Z.bind=function(r,e){var t,n;if(Xp&&r.bind===Xp)return Xp.apply(r,Ya.call(arguments,1));if(!Z.isFunction(r))throw new TypeError;return t=Ya.call(arguments,2),n=function(){if(!(this instanceof n))return r.apply(e,t.concat(Ya.call(arguments)));var i={};i.prototype=r.prototype;var s=new i;i.prototype=null;var c=r.apply(s,t.concat(Ya.call(arguments)));return Object(c)===c?c:s},n};Z.each=function(r,e,t){if(r!=null){if(uw&&r.forEach===uw)r.forEach(e,t);else if(r.length===+r.length){for(var n=0,i=r.length;n<i;n++)if(n in r&&e.call(t,r[n],n,r)===D2)return}else for(var s in r)if(nx.call(r,s)&&e.call(t,r[s],s,r)===D2)return}};Z.extend=function(r){return Z.each(Ya.call(arguments,1),function(e){for(var t in e)e[t]!==void 0&&(r[t]=e[t])}),r};Z.isArray=pN||function(r){return kh.call(r)==="[object Array]"};Z.isFunction=function(r){try{return/^\s*\bfunction\b/.test(r)}catch{return!1}};Z.isArguments=function(r){return!!(r&&nx.call(r,"callee"))};Z.toArray=function(r){return r?r.toArray?r.toArray():Z.isArray(r)||Z.isArguments(r)?Ya.call(r):Z.values(r):[]};Z.map=function(r,e,t){if(dw&&r.map===dw)return r.map(e,t);var n=[];return Z.each(r,function(i){n.push(e.call(t,i))}),n};Z.keys=function(r){var e=[];return r===null||Z.each(r,function(t,n){e[e.length]=n}),e};Z.values=function(r){var e=[];return r===null||Z.each(r,function(t){e[e.length]=t}),e};Z.include=function(r,e){var t=!1;return r===null?t:hw&&r.indexOf===hw?r.indexOf(e)!=-1:(Z.each(r,function(n){if(t||(t=n===e))return D2}),t)};Z.includes=function(r,e){return r.indexOf(e)!==-1};Z.inherit=function(r,e){return r.prototype=new e,r.prototype.constructor=r,r.superclass=e.prototype,r};Z.isObject=function(r){return r===Object(r)&&!Z.isArray(r)};Z.isEmptyObject=function(r){if(Z.isObject(r)){for(var e in r)if(nx.call(r,e))return!1;return!0}return!1};Z.isUndefined=function(r){return r===void 0};Z.isString=function(r){return kh.call(r)=="[object String]"};Z.isDate=function(r){return kh.call(r)=="[object Date]"};Z.isNumber=function(r){return kh.call(r)=="[object Number]"};Z.isElement=function(r){return!!(r&&r.nodeType===1)};Z.encodeDates=function(r){return Z.each(r,function(e,t){Z.isDate(e)?r[t]=Z.formatDate(e):Z.isObject(e)&&(r[t]=Z.encodeDates(e))}),r};Z.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()};Z.formatDate=function(r){function e(t){return t<10?"0"+t:t}return r.getUTCFullYear()+"-"+e(r.getUTCMonth()+1)+"-"+e(r.getUTCDate())+"T"+e(r.getUTCHours())+":"+e(r.getUTCMinutes())+":"+e(r.getUTCSeconds())};Z.strip_empty_properties=function(r){var e={};return Z.each(r,function(t,n){Z.isString(t)&&t.length>0&&(e[n]=t)}),e};Z.truncate=function(r,e){var t;return typeof r=="string"?t=r.slice(0,e):Z.isArray(r)?(t=[],Z.each(r,function(n){t.push(Z.truncate(n,e))})):Z.isObject(r)?(t={},Z.each(r,function(n,i){t[i]=Z.truncate(n,e)})):t=r,t};Z.JSONEncode=function(){return function(r){var e=r,t=function(i){var s=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return s.lastIndex=0,s.test(i)?'"'+i.replace(s,function(l){var h=c[l];return typeof h=="string"?h:"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+i+'"'},n=function(i,s){var c="",l="    ",h=0,u="",p="",b=0,y=c,w=[],_=s[i];switch(_&&typeof _=="object"&&typeof _.toJSON=="function"&&(_=_.toJSON(i)),typeof _){case"string":return t(_);case"number":return isFinite(_)?String(_):"null";case"boolean":case"null":return String(_);case"object":if(!_)return"null";if(c+=l,w=[],kh.apply(_)==="[object Array]"){for(b=_.length,h=0;h<b;h+=1)w[h]=n(h,_)||"null";return p=w.length===0?"[]":c?`[
`+c+w.join(`,
`+c)+`
`+y+"]":"["+w.join(",")+"]",c=y,p}for(u in _)nx.call(_,u)&&(p=n(u,_),p&&w.push(t(u)+(c?": ":":")+p));return p=w.length===0?"{}":c?"{"+w.join(",")+y+"}":"{"+w.join(",")+"}",c=y,p}};return n("",{"":e})}}();Z.JSONDecode=function(){var r,e,t={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},n,i=function(w){var _=new SyntaxError(w);throw _.at=r,_.text=n,_},s=function(w){return w&&w!==e&&i("Expected '"+w+"' instead of '"+e+"'"),e=n.charAt(r),r+=1,e},c=function(){var w,_="";for(e==="-"&&(_="-",s("-"));e>="0"&&e<="9";)_+=e,s();if(e===".")for(_+=".";s()&&e>="0"&&e<="9";)_+=e;if(e==="e"||e==="E")for(_+=e,s(),(e==="-"||e==="+")&&(_+=e,s());e>="0"&&e<="9";)_+=e,s();if(w=+_,!isFinite(w))i("Bad number");else return w},l=function(){var w,_,S="",T;if(e==='"')for(;s();){if(e==='"')return s(),S;if(e==="\\")if(s(),e==="u"){for(T=0,_=0;_<4&&(w=parseInt(s(),16),!!isFinite(w));_+=1)T=T*16+w;S+=String.fromCharCode(T)}else if(typeof t[e]=="string")S+=t[e];else break;else S+=e}i("Bad string")},h=function(){for(;e&&e<=" ";)s()},u=function(){switch(e){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}i('Unexpected "'+e+'"')},p,b=function(){var w=[];if(e==="["){if(s("["),h(),e==="]")return s("]"),w;for(;e;){if(w.push(p()),h(),e==="]")return s("]"),w;s(","),h()}}i("Bad array")},y=function(){var w,_={};if(e==="{"){if(s("{"),h(),e==="}")return s("}"),_;for(;e;){if(w=l(),h(),s(":"),Object.hasOwnProperty.call(_,w)&&i('Duplicate key "'+w+'"'),_[w]=p(),h(),e==="}")return s("}"),_;s(","),h()}}i("Bad object")};return p=function(){switch(h(),e){case"{":return y();case"[":return b();case'"':return l();case"-":return c();default:return e>="0"&&e<="9"?c():u()}},function(w){var _;return n=w,r=0,e=" ",_=p(),h(),e&&i("Syntax error"),_}}();Z.base64Encode=function(r){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t,n,i,s,c,l,h,u,p=0,b=0,y="",w=[];if(!r)return r;r=Z.utf8Encode(r);do t=r.charCodeAt(p++),n=r.charCodeAt(p++),i=r.charCodeAt(p++),u=t<<16|n<<8|i,s=u>>18&63,c=u>>12&63,l=u>>6&63,h=u&63,w[b++]=e.charAt(s)+e.charAt(c)+e.charAt(l)+e.charAt(h);while(p<r.length);switch(y=w.join(""),r.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"=";break}return y};Z.utf8Encode=function(r){r=(r+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`);var e="",t,n,i=0,s;for(t=n=0,i=r.length,s=0;s<i;s++){var c=r.charCodeAt(s),l=null;c<128?n++:c>127&&c<2048?l=String.fromCharCode(c>>6|192,c&63|128):l=String.fromCharCode(c>>12|224,c>>6&63|128,c&63|128),l!==null&&(n>t&&(e+=r.substring(t,n)),e+=l,t=n=s+1)}return n>t&&(e+=r.substring(t,r.length)),e};Z.UUID=function(){var r=function(){var n=1*new Date,i;if(nr.performance&&nr.performance.now)i=nr.performance.now();else for(i=0;n==1*new Date;)i++;return n.toString(16)+Math.floor(i).toString(16)},e=function(){return Math.random().toString(16).replace(".","")},t=function(){var n=so,i,s,c=[],l=0;function h(u,p){var b,y=0;for(b=0;b<p.length;b++)y|=c[b]<<b*8;return u^y}for(i=0;i<n.length;i++)s=n.charCodeAt(i),c.unshift(s&255),c.length>=4&&(l=h(l,c),c=[]);return c.length>0&&(l=h(l,c)),l.toString(16)};return function(){var n=(u1.height*u1.width).toString(16);return r()+"-"+e()+"-"+t()+"-"+n+"-"+r()}}();var xw=["ahrefsbot","ahrefssiteaudit","baiduspider","bingbot","bingpreview","chrome-lighthouse","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];Z.isBlockedUA=function(r){var e;for(r=r.toLowerCase(),e=0;e<xw.length;e++)if(r.indexOf(xw[e])!==-1)return!0;return!1};Z.HTTPBuildQuery=function(r,e){var t,n,i=[];return Z.isUndefined(e)&&(e="&"),Z.each(r,function(s,c){t=encodeURIComponent(s.toString()),n=encodeURIComponent(c),i[i.length]=n+"="+t}),i.join(e)};Z.getQueryParam=function(r,e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),i=n.exec(r);if(i===null||i&&typeof i[1]!="string"&&i[1].length)return"";var s=i[1];try{s=decodeURIComponent(s)}catch{vr.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")};Z.cookie={get:function(r){for(var e=r+"=",t=Tr.cookie.split(";"),n=0;n<t.length;n++){for(var i=t[n];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}return null},parse:function(r){var e;try{e=Z.JSONDecode(Z.cookie.get(r))||{}}catch{}return e},set_seconds:function(r,e,t,n,i,s,c){var l="",h="",u="";if(c)l="; domain="+c;else if(n){var p=pw(Tr.location.hostname);l=p?"; domain=."+p:""}if(t){var b=new Date;b.setTime(b.getTime()+t*1e3),h="; expires="+b.toGMTString()}s&&(i=!0,u="; SameSite=None"),i&&(u+="; secure"),Tr.cookie=r+"="+encodeURIComponent(e)+h+"; path=/"+l+u},set:function(r,e,t,n,i,s,c){var l="",h="",u="";if(c)l="; domain="+c;else if(n){var p=pw(Tr.location.hostname);l=p?"; domain=."+p:""}if(t){var b=new Date;b.setTime(b.getTime()+t*24*60*60*1e3),h="; expires="+b.toGMTString()}s&&(i=!0,u="; SameSite=None"),i&&(u+="; secure");var y=r+"="+encodeURIComponent(e)+h+"; path=/"+l+u;return Tr.cookie=y,y},remove:function(r,e,t){Z.cookie.set(r,"",-1,e,!1,!1,t)}};var Zp=null,h1=function(r,e){if(Zp!==null&&!e)return Zp;var t=!0;try{r=r||window.localStorage;var n="__mplss_"+tm(8),i="xyz";r.setItem(n,i),r.getItem(n)!==i&&(t=!1),r.removeItem(n)}catch{t=!1}return Zp=t,t};Z.localStorage={is_supported:function(r){var e=h1(null,r);return e||vr.error("localStorage unsupported; falling back to cookie store"),e},error:function(r){vr.error("localStorage error: "+r)},get:function(r){try{return window.localStorage.getItem(r)}catch(e){Z.localStorage.error(e)}return null},parse:function(r){try{return Z.JSONDecode(Z.localStorage.get(r))||{}}catch{}return null},set:function(r,e){try{window.localStorage.setItem(r,e)}catch(t){Z.localStorage.error(t)}},remove:function(r){try{window.localStorage.removeItem(r)}catch(e){Z.localStorage.error(e)}}};Z.register_event=function(){var r=function(n,i,s,c,l){if(!n){vr.error("No valid element provided to register_event");return}if(n.addEventListener&&!c)n.addEventListener(i,s,!!l);else{var h="on"+i,u=n[h];n[h]=e(n,s,u)}};function e(n,i,s){var c=function(l){if(l=l||t(window.event),!!l){var h=!0,u,p;return Z.isFunction(s)&&(u=s(l)),p=i.call(n,l),(u===!1||p===!1)&&(h=!1),h}};return c}function t(n){return n&&(n.preventDefault=t.preventDefault,n.stopPropagation=t.stopPropagation),n}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},r}();var gN=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');Z.dom_query=function(){function r(i){return i.all?i.all:i.getElementsByTagName("*")}var e=/[\t\r\n]/g;function t(i,s){var c=" "+s+" ";return(" "+i.className+" ").replace(e," ").indexOf(c)>=0}function n(i){if(!Tr.getElementsByTagName)return[];var s=i.split(" "),c,l,h,u,p,b,y,w,_,S,T=[Tr];for(b=0;b<s.length;b++){if(c=s[b].replace(/^\s+/,"").replace(/\s+$/,""),c.indexOf("#")>-1){l=c.split("#"),h=l[0];var F=l[1],N=Tr.getElementById(F);if(!N||h&&N.nodeName.toLowerCase()!=h)return[];T=[N];continue}if(c.indexOf(".")>-1){l=c.split("."),h=l[0];var O=l[1];for(h||(h="*"),u=[],p=0,y=0;y<T.length;y++)for(h=="*"?_=r(T[y]):_=T[y].getElementsByTagName(h),w=0;w<_.length;w++)u[p++]=_[w];for(T=[],S=0,y=0;y<u.length;y++)u[y].className&&Z.isString(u[y].className)&&t(u[y],O)&&(T[S++]=u[y]);continue}var M=c.match(gN);if(M){h=M[1];var L=M[2],R=M[3],v=M[4];for(h||(h="*"),u=[],p=0,y=0;y<T.length;y++)for(h=="*"?_=r(T[y]):_=T[y].getElementsByTagName(h),w=0;w<_.length;w++)u[p++]=_[w];T=[],S=0;var P;switch(R){case"=":P=function(Y){return Y.getAttribute(L)==v};break;case"~":P=function(Y){return Y.getAttribute(L).match(new RegExp("\\b"+v+"\\b"))};break;case"|":P=function(Y){return Y.getAttribute(L).match(new RegExp("^"+v+"-?"))};break;case"^":P=function(Y){return Y.getAttribute(L).indexOf(v)===0};break;case"$":P=function(Y){return Y.getAttribute(L).lastIndexOf(v)==Y.getAttribute(L).length-v.length};break;case"*":P=function(Y){return Y.getAttribute(L).indexOf(v)>-1};break;default:P=function(Y){return Y.getAttribute(L)}}for(T=[],S=0,y=0;y<u.length;y++)P(u[y])&&(T[S++]=u[y]);continue}for(h=c,u=[],p=0,y=0;y<T.length;y++)for(_=T[y].getElementsByTagName(h),w=0;w<_.length;w++)u[p++]=_[w];T=u}return T}return function(i){return Z.isElement(i)?[i]:Z.isObject(i)&&!Z.isUndefined(i.length)?i:n.call(this,i)}}();var bN=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],mN=["dclid","fbclid","gclid","ko_click_id","li_fat_id","msclkid","ttclid","twclid","wbraid"];Z.info={campaignParams:function(r){var e="",t={};return Z.each(bN,function(n){e=Z.getQueryParam(Tr.URL,n),e.length?t[n]=e:r!==void 0&&(t[n]=r)}),t},clickParams:function(){var r="",e={};return Z.each(mN,function(t){r=Z.getQueryParam(Tr.URL,t),r.length&&(e[t]=r)}),e},marketingParams:function(){return Z.extend(Z.info.campaignParams(),Z.info.clickParams())},searchEngine:function(r){return r.search("https?://(.*)google.([^/?]*)")===0?"google":r.search("https?://(.*)bing.com")===0?"bing":r.search("https?://(.*)yahoo.com")===0?"yahoo":r.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(r){var e=Z.info.searchEngine(r),t=e!="yahoo"?"q":"p",n={};if(e!==null){n.$search_engine=e;var i=Z.getQueryParam(r,t);i.length&&(n.mp_keyword=i)}return n},browser:function(r,e,t){return e=e||"",t||Z.includes(r," OPR/")?Z.includes(r,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(r)?"BlackBerry":Z.includes(r,"IEMobile")||Z.includes(r,"WPDesktop")?"Internet Explorer Mobile":Z.includes(r,"SamsungBrowser/")?"Samsung Internet":Z.includes(r,"Edge")||Z.includes(r,"Edg/")?"Microsoft Edge":Z.includes(r,"FBIOS")?"Facebook Mobile":Z.includes(r,"Chrome")?"Chrome":Z.includes(r,"CriOS")?"Chrome iOS":Z.includes(r,"UCWEB")||Z.includes(r,"UCBrowser")?"UC Browser":Z.includes(r,"FxiOS")?"Firefox iOS":Z.includes(e,"Apple")?Z.includes(r,"Mobile")?"Mobile Safari":"Safari":Z.includes(r,"Android")?"Android Mobile":Z.includes(r,"Konqueror")?"Konqueror":Z.includes(r,"Firefox")?"Firefox":Z.includes(r,"MSIE")||Z.includes(r,"Trident/")?"Internet Explorer":Z.includes(r,"Gecko")?"Mozilla":""},browserVersion:function(r,e,t){var n=Z.info.browser(r,e,t),i={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/},s=i[n];if(s===void 0)return null;var c=r.match(s);return c?parseFloat(c[c.length-2]):null},os:function(){var r=so;return/Windows/i.test(r)?/Phone/.test(r)||/WPDesktop/.test(r)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(r)?"iOS":/Android/.test(r)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(r)?"BlackBerry":/Mac/i.test(r)?"Mac OS X":/Linux/.test(r)?"Linux":/CrOS/.test(r)?"Chrome OS":""},device:function(r){return/Windows Phone/i.test(r)||/WPDesktop/.test(r)?"Windows Phone":/iPad/.test(r)?"iPad":/iPod/.test(r)?"iPod Touch":/iPhone/.test(r)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(r)?"BlackBerry":/Android/.test(r)?"Android":""},referringDomain:function(r){var e=r.split("/");return e.length>=3?e[2]:""},currentUrl:function(){return nr.location.href},properties:function(r){return typeof r!="object"&&(r={}),Z.extend(Z.strip_empty_properties({$os:Z.info.os(),$browser:Z.info.browser(so,Xa.vendor,gd),$referrer:Tr.referrer,$referring_domain:Z.info.referringDomain(Tr.referrer),$device:Z.info.device(so)}),{$current_url:Z.info.currentUrl(),$browser_version:Z.info.browserVersion(so,Xa.vendor,gd),$screen_height:u1.height,$screen_width:u1.width,mp_lib:"web",$lib_version:oa.LIB_VERSION,$insert_id:tm(),time:Z.timestamp()/1e3},Z.strip_empty_properties(r))},people_properties:function(){return Z.extend(Z.strip_empty_properties({$os:Z.info.os(),$browser:Z.info.browser(so,Xa.vendor,gd)}),{$browser_version:Z.info.browserVersion(so,Xa.vendor,gd)})},mpPageViewProperties:function(){return Z.strip_empty_properties({current_page_title:Tr.title,current_domain:nr.location.hostname,current_url_path:nr.location.pathname,current_url_protocol:nr.location.protocol,current_url_search:nr.location.search})}};var tm=function(r){var e=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return r?e.substring(0,r):e},yN=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,wN=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,pw=function(r){var e=wN,t=r.split("."),n=t[t.length-1];(n.length>4||n==="com"||n==="org")&&(e=yN);var i=r.match(e);return i?i[0]:""},d1=null,x1=null;typeof JSON<"u"&&(d1=JSON.stringify,x1=JSON.parse);d1=d1||Z.JSONEncode;x1=x1||Z.JSONDecode;Z.toArray=Z.toArray;Z.isObject=Z.isObject;Z.JSONEncode=Z.JSONEncode;Z.JSONDecode=Z.JSONDecode;Z.isBlockedUA=Z.isBlockedUA;Z.isEmptyObject=Z.isEmptyObject;Z.info=Z.info;Z.info.device=Z.info.device;Z.info.browser=Z.info.browser;Z.info.browserVersion=Z.info.browserVersion;Z.info.properties=Z.info.properties;var ma=function(){};ma.prototype.create_properties=function(){};ma.prototype.event_handler=function(){};ma.prototype.after_track_handler=function(){};ma.prototype.init=function(r){return this.mp=r,this};ma.prototype.track=function(r,e,t,n){var i=this,s=Z.dom_query(r);if(s.length===0){vr.error("The DOM query ("+r+") returned 0 elements");return}return Z.each(s,function(c){Z.register_event(c,this.override_event,function(l){var h={},u=i.create_properties(t,this),p=i.mp.get_config("track_links_timeout");i.event_handler(l,this,h),window.setTimeout(i.track_callback(n,u,h,!0),p),i.mp.track(e,u,i.track_callback(n,u,h))})},this),!0};ma.prototype.track_callback=function(r,e,t,n){n=n||!1;var i=this;return function(){t.callback_fired||(t.callback_fired=!0,!(r&&r(n,e)===!1)&&i.after_track_handler(e,t,n))}};ma.prototype.create_properties=function(r,e){var t;return typeof r=="function"?t=r(e):t=Z.extend({},r),t};var El=function(){this.override_event="click"};Z.inherit(El,ma);El.prototype.create_properties=function(r,e){var t=El.superclass.create_properties.apply(this,arguments);return e.href&&(t.url=e.href),t};El.prototype.event_handler=function(r,e,t){t.new_tab=r.which===2||r.metaKey||r.ctrlKey||e.target==="_blank",t.href=e.href,t.new_tab||r.preventDefault()};El.prototype.after_track_handler=function(r,e){e.new_tab||setTimeout(function(){window.location=e.href},0)};var ix=function(){this.override_event="submit"};Z.inherit(ix,ma);ix.prototype.event_handler=function(r,e,t){t.element=e,r.preventDefault()};ix.prototype.after_track_handler=function(r,e){setTimeout(function(){e.element.submit()},0)};var vN=em("lock"),gA=function(r,e){e=e||{},this.storageKey=r,this.storage=e.storage||window.localStorage,this.pollIntervalMS=e.pollIntervalMS||100,this.timeoutMS=e.timeoutMS||2e3};gA.prototype.withLock=function(r,e,t){!t&&typeof e!="function"&&(t=e,e=null);var n=t||new Date().getTime()+"|"+Math.random(),i=new Date().getTime(),s=this.storageKey,c=this.pollIntervalMS,l=this.timeoutMS,h=this.storage,u=s+":X",p=s+":Y",b=s+":Z",y=function(N){e&&e(N)},w=function(N){if(new Date().getTime()-i>l){vN.error("Timeout waiting for mutex on "+s+"; clearing lock. ["+n+"]"),h.removeItem(b),h.removeItem(p),T();return}setTimeout(function(){try{N()}catch(O){y(O)}},c*(Math.random()+.1))},_=function(N,O){N()?O():w(function(){_(N,O)})},S=function(){var N=h.getItem(p);if(N&&N!==n)return!1;if(h.setItem(p,n),h.getItem(p)===n)return!0;if(!h1(h,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},T=function(){h.setItem(u,n),_(S,function(){if(h.getItem(u)===n){F();return}w(function(){if(h.getItem(p)!==n){T();return}_(function(){return!h.getItem(b)},F)})})},F=function(){h.setItem(b,"1");try{r()}finally{h.removeItem(b),h.getItem(p)===n&&h.removeItem(p),h.getItem(u)===n&&h.removeItem(u)}};try{if(h1(h,!0))T();else throw new Error("localStorage support check failed")}catch(N){y(N)}};var gw=em("batch"),l0=function(r,e){e=e||{},this.storageKey=r,this.storage=e.storage||window.localStorage,this.reportError=e.errorReporter||Z.bind(gw.error,gw),this.lock=new gA(r,{storage:this.storage}),this.pid=e.pid||null,this.memQueue=[]};l0.prototype.enqueue=function(r,e,t){var n={id:tm(),flushAfter:new Date().getTime()+e*2,payload:r};this.lock.withLock(Z.bind(function(){var s;try{var c=this.readFromStorage();c.push(n),s=this.saveToStorage(c),s&&this.memQueue.push(n)}catch{this.reportError("Error enqueueing item",r),s=!1}t&&t(s)},this),Z.bind(function(s){this.reportError("Error acquiring storage lock",s),t&&t(!1)},this),this.pid)};l0.prototype.fillBatch=function(r){var e=this.memQueue.slice(0,r);if(e.length<r){var t=this.readFromStorage();if(t.length){var n={};Z.each(e,function(c){n[c.id]=!0});for(var i=0;i<t.length;i++){var s=t[i];if(new Date().getTime()>s.flushAfter&&!n[s.id]&&(s.orphaned=!0,e.push(s),e.length>=r))break}}}return e};var bw=function(r,e){var t=[];return Z.each(r,function(n){n.id&&!e[n.id]&&t.push(n)}),t};l0.prototype.removeItemsByID=function(r,e){var t={};Z.each(r,function(i){t[i]=!0}),this.memQueue=bw(this.memQueue,t);var n=Z.bind(function(){var i;try{var s=this.readFromStorage();if(s=bw(s,t),i=this.saveToStorage(s),i){s=this.readFromStorage();for(var c=0;c<s.length;c++){var l=s[c];if(l.id&&t[l.id])return this.reportError("Item not removed from storage"),!1}}}catch{this.reportError("Error removing items",r),i=!1}return i},this);this.lock.withLock(function(){var s=n();e&&e(s)},Z.bind(function(s){var c=!1;if(this.reportError("Error acquiring storage lock",s),!h1(this.storage,!0)&&(c=n(),!c))try{this.storage.removeItem(this.storageKey)}catch(l){this.reportError("Error clearing queue",l)}e&&e(c)},this),this.pid)};var mw=function(r,e){var t=[];return Z.each(r,function(n){var i=n.id;if(i in e){var s=e[i];s!==null&&(n.payload=s,t.push(n))}else t.push(n)}),t};l0.prototype.updatePayloads=function(r,e){this.memQueue=mw(this.memQueue,r),this.lock.withLock(Z.bind(function(){var n;try{var i=this.readFromStorage();i=mw(i,r),n=this.saveToStorage(i)}catch{this.reportError("Error updating items",r),n=!1}e&&e(n)},this),Z.bind(function(n){this.reportError("Error acquiring storage lock",n),e&&e(!1)},this),this.pid)};l0.prototype.readFromStorage=function(){var r;try{r=this.storage.getItem(this.storageKey),r&&(r=x1(r),Z.isArray(r)||(this.reportError("Invalid storage entry:",r),r=null))}catch(e){this.reportError("Error retrieving queue",e),r=null}return r||[]};l0.prototype.saveToStorage=function(r){try{return this.storage.setItem(this.storageKey,d1(r)),!0}catch(e){return this.reportError("Error saving queue",e),!1}};l0.prototype.clear=function(){this.memQueue=[],this.storage.removeItem(this.storageKey)};var EN=10*60*1e3,Ou=em("batch"),wo=function(r,e){this.errorReporter=e.errorReporter,this.queue=new l0(r,{errorReporter:Z.bind(this.reportError,this),storage:e.storage}),this.libConfig=e.libConfig,this.sendRequest=e.sendRequestFunc,this.beforeSendHook=e.beforeSendHook,this.stopAllBatching=e.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0,this.itemIdsSentSuccessfully={}};wo.prototype.enqueue=function(r,e){this.queue.enqueue(r,this.flushInterval,e)};wo.prototype.start=function(){this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()};wo.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)};wo.prototype.clear=function(){this.queue.clear()};wo.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size};wo.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)};wo.prototype.scheduleFlush=function(r){this.flushInterval=r,this.stopped||(this.timeoutID=setTimeout(Z.bind(this.flush,this),this.flushInterval))};wo.prototype.flush=function(r){try{if(this.requestInProgress){Ou.log("Flush: Request already in progress");return}r=r||{};var e=this.libConfig.batch_request_timeout_ms,t=new Date().getTime(),n=this.batchSize,i=this.queue.fillBatch(n),s=[],c={};if(Z.each(i,function(u){var p=u.payload;if(this.beforeSendHook&&!u.orphaned&&(p=this.beforeSendHook(p)),p){p.event&&p.properties&&(p.properties=Z.extend({},p.properties,{mp_sent_by_lib_version:oa.LIB_VERSION}));var b=!0,y=u.id;y?(this.itemIdsSentSuccessfully[y]||0)>5&&(this.reportError("[dupe] item ID sent too many times, not sending",{item:u,batchSize:i.length,timesSent:this.itemIdsSentSuccessfully[y]}),b=!1):this.reportError("[dupe] found item with no ID",{item:u}),b&&s.push(p)}c[u.id]=p},this),s.length<1){this.resetFlush();return}this.requestInProgress=!0;var l=Z.bind(function(u){this.requestInProgress=!1;try{var p=!1;if(r.unloading)this.queue.updatePayloads(c);else if(Z.isObject(u)&&u.error==="timeout"&&new Date().getTime()-t>=e)this.reportError("Network timeout; retrying"),this.flush();else if(Z.isObject(u)&&u.xhr_req&&(u.xhr_req.status>=500||u.xhr_req.status===429||u.error==="timeout")){var b=this.flushInterval*2,y=u.xhr_req.responseHeaders;if(y){var w=y["Retry-After"];w&&(b=parseInt(w,10)*1e3||b)}b=Math.min(EN,b),this.reportError("Error; retry in "+b+" ms"),this.scheduleFlush(b)}else if(Z.isObject(u)&&u.xhr_req&&u.xhr_req.status===413)if(i.length>1){var _=Math.max(1,Math.floor(n/2));this.batchSize=Math.min(this.batchSize,_,i.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else this.reportError("Single-event request too large; dropping",i),this.resetBatchSize(),p=!0;else p=!0;p&&(this.queue.removeItemsByID(Z.map(i,function(S){return S.id}),Z.bind(function(S){S?(this.consecutiveRemovalFailures=0,this.flush()):(this.reportError("Failed to remove items from queue"),++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush())},this)),Z.each(i,Z.bind(function(S){var T=S.id;T?(this.itemIdsSentSuccessfully[T]=this.itemIdsSentSuccessfully[T]||0,this.itemIdsSentSuccessfully[T]++,this.itemIdsSentSuccessfully[T]>5&&this.reportError("[dupe] item ID sent too many times",{item:S,batchSize:i.length,timesSent:this.itemIdsSentSuccessfully[T]})):this.reportError("[dupe] found item with no ID while removing",{item:S})},this)))}catch(S){this.reportError("Error handling API response",S),this.resetFlush()}},this),h={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:e};r.unloading&&(h.transport="sendBeacon"),Ou.log("MIXPANEL REQUEST:",s),this.sendRequest(s,h,l)}catch(u){this.reportError("Error flushing request queue",u),this.resetFlush()}};wo.prototype.reportError=function(r,e){if(Ou.error.apply(Ou.error,arguments),this.errorReporter)try{e instanceof Error||(e=new Error(r)),this.errorReporter(r,e)}catch(t){Ou.error(t)}};var AN="__mp_opt_in_out_";function _N(r,e){yA(!0,r,e)}function CN(r,e){yA(!1,r,e)}function SN(r,e){return mA(r,e)==="1"}function bA(r,e){if(DN(e))return vr.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var t=mA(r,e)==="0";return t&&vr.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),t}function Rl(r){return im(r,function(e){return this.get_config(e)})}function u0(r){return im(r,function(e){return this._get_config(e)})}function Ml(r){return im(r,function(e){return this._get_config(e)})}function IN(r,e){e=e||{},rm(e).remove(nm(r,e),!!e.crossSubdomainCookie,e.cookieDomain)}function rm(r){return r=r||{},r.persistenceType==="localStorage"?Z.localStorage:Z.cookie}function nm(r,e){return e=e||{},(e.persistencePrefix||AN)+r}function mA(r,e){return rm(e).get(nm(r,e))}function DN(r){if(r&&r.ignoreDnt)return!1;var e=r&&r.window||nr,t=e.navigator||{},n=!1;return Z.each([t.doNotTrack,t.msDoNotTrack,e.doNotTrack],function(i){Z.includes([!0,1,"1","yes"],i)&&(n=!0)}),n}function yA(r,e,t){if(!Z.isString(e)||!e.length){vr.error("gdpr."+(r?"optIn":"optOut")+" called with an invalid token");return}t=t||{},rm(t).set(nm(e,t),r?1:0,Z.isNumber(t.cookieExpiration)?t.cookieExpiration:null,!!t.crossSubdomainCookie,!!t.secureCookie,!!t.crossSiteCookie,t.cookieDomain),t.track&&r&&t.track(t.trackEventName||"$opt_in",t.trackProperties,{send_immediately:!0})}function im(r,e){return function(){var t=!1;try{var n=e.call(this,"token"),i=e.call(this,"ignore_dnt"),s=e.call(this,"opt_out_tracking_persistence_type"),c=e.call(this,"opt_out_tracking_cookie_prefix"),l=e.call(this,"window");n&&(t=bA(n,{ignoreDnt:i,persistenceType:s,persistencePrefix:c,window:l}))}catch(u){vr.error("Unexpected error when checking tracking opt-out status: "+u)}if(!t)return r.apply(this,arguments);var h=arguments[arguments.length-1];typeof h=="function"&&h(0)}}var t0="$set",Al="$set_once",Ts="$unset",xc="$add",lo="$append",pc="$union",aa="$remove",TN="$delete",wA={set_action:function(r,e){var t={},n={};return Z.isObject(r)?Z.each(r,function(i,s){this._is_reserved_property(s)||(n[s]=i)},this):n[r]=e,t[t0]=n,t},unset_action:function(r){var e={},t=[];return Z.isArray(r)||(r=[r]),Z.each(r,function(n){this._is_reserved_property(n)||t.push(n)},this),e[Ts]=t,e},set_once_action:function(r,e){var t={},n={};return Z.isObject(r)?Z.each(r,function(i,s){this._is_reserved_property(s)||(n[s]=i)},this):n[r]=e,t[Al]=n,t},union_action:function(r,e){var t={},n={};return Z.isObject(r)?Z.each(r,function(i,s){this._is_reserved_property(s)||(n[s]=Z.isArray(i)?i:[i])},this):n[r]=Z.isArray(e)?e:[e],t[pc]=n,t},append_action:function(r,e){var t={},n={};return Z.isObject(r)?Z.each(r,function(i,s){this._is_reserved_property(s)||(n[s]=i)},this):n[r]=e,t[lo]=n,t},remove_action:function(r,e){var t={},n={};return Z.isObject(r)?Z.each(r,function(i,s){this._is_reserved_property(s)||(n[s]=i)},this):n[r]=e,t[aa]=n,t},delete_action:function(){var r={};return r[TN]="",r}},zr=function(){};Z.extend(zr.prototype,wA);zr.prototype._init=function(r,e,t){this._mixpanel=r,this._group_key=e,this._group_id=t};zr.prototype.set=Ml(function(r,e,t){var n=this.set_action(r,e);return Z.isObject(r)&&(t=e),this._send_request(n,t)});zr.prototype.set_once=Ml(function(r,e,t){var n=this.set_once_action(r,e);return Z.isObject(r)&&(t=e),this._send_request(n,t)});zr.prototype.unset=Ml(function(r,e){var t=this.unset_action(r);return this._send_request(t,e)});zr.prototype.union=Ml(function(r,e,t){Z.isObject(r)&&(t=e);var n=this.union_action(r,e);return this._send_request(n,t)});zr.prototype.delete=Ml(function(r){var e=this.delete_action();return this._send_request(e,r)});zr.prototype.remove=Ml(function(r,e,t){var n=this.remove_action(r,e);return this._send_request(n,t)});zr.prototype._send_request=function(r,e){r.$group_key=this._group_key,r.$group_id=this._group_id,r.$token=this._get_config("token");var t=Z.encodeDates(r);return this._mixpanel._track_or_batch({type:"groups",data:t,endpoint:this._get_config("api_host")+"/"+this._get_config("api_routes").groups,batcher:this._mixpanel.request_batchers.groups},e)};zr.prototype._is_reserved_property=function(r){return r==="$group_key"||r==="$group_id"};zr.prototype._get_config=function(r){return this._mixpanel.get_config(r)};zr.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id};zr.prototype.remove=zr.prototype.remove;zr.prototype.set=zr.prototype.set;zr.prototype.set_once=zr.prototype.set_once;zr.prototype.union=zr.prototype.union;zr.prototype.unset=zr.prototype.unset;zr.prototype.toString=zr.prototype.toString;var Ut=function(){};Z.extend(Ut.prototype,wA);Ut.prototype._init=function(r){this._mixpanel=r};Ut.prototype.set=u0(function(r,e,t){var n=this.set_action(r,e);return Z.isObject(r)&&(t=e),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),n[t0]=Z.extend({},Z.info.people_properties(),n[t0]),this._send_request(n,t)});Ut.prototype.set_once=u0(function(r,e,t){var n=this.set_once_action(r,e);return Z.isObject(r)&&(t=e),this._send_request(n,t)});Ut.prototype.unset=u0(function(r,e){var t=this.unset_action(r);return this._send_request(t,e)});Ut.prototype.increment=u0(function(r,e,t){var n={},i={};return Z.isObject(r)?(Z.each(r,function(s,c){if(!this._is_reserved_property(c))if(isNaN(parseFloat(s))){vr.error("Invalid increment value passed to mixpanel.people.increment - must be a number");return}else i[c]=s},this),t=e):(Z.isUndefined(e)&&(e=1),i[r]=e),n[xc]=i,this._send_request(n,t)});Ut.prototype.append=u0(function(r,e,t){Z.isObject(r)&&(t=e);var n=this.append_action(r,e);return this._send_request(n,t)});Ut.prototype.remove=u0(function(r,e,t){Z.isObject(r)&&(t=e);var n=this.remove_action(r,e);return this._send_request(n,t)});Ut.prototype.union=u0(function(r,e,t){Z.isObject(r)&&(t=e);var n=this.union_action(r,e);return this._send_request(n,t)});Ut.prototype.track_charge=u0(function(r,e,t){if(!Z.isNumber(r)&&(r=parseFloat(r),isNaN(r))){vr.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}return this.append("$transactions",Z.extend({$amount:r},e),t)});Ut.prototype.clear_charges=function(r){return this.set("$transactions",[],r)};Ut.prototype.delete_user=function(){if(!this._identify_called()){vr.error("mixpanel.people.delete_user() requires you to call identify() first");return}var r={$delete:this._mixpanel.get_distinct_id()};return this._send_request(r)};Ut.prototype.toString=function(){return this._mixpanel.toString()+".people"};Ut.prototype._send_request=function(r,e){r.$token=this._get_config("token"),r.$distinct_id=this._mixpanel.get_distinct_id();var t=this._mixpanel.get_property("$device_id"),n=this._mixpanel.get_property("$user_id"),i=this._mixpanel.get_property("$had_persisted_distinct_id");t&&(r.$device_id=t),n&&(r.$user_id=n),i&&(r.$had_persisted_distinct_id=i);var s=Z.encodeDates(r);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:s,endpoint:this._get_config("api_host")+"/"+this._get_config("api_routes").engage,batcher:this._mixpanel.request_batchers.people},e):(this._enqueue(r),Z.isUndefined(e)||(this._get_config("verbose")?e({status:-1,error:null}):e(-1)),Z.truncate(s,255))};Ut.prototype._get_config=function(r){return this._mixpanel.get_config(r)};Ut.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0};Ut.prototype._enqueue=function(r){t0 in r?this._mixpanel.persistence._add_to_people_queue(t0,r):Al in r?this._mixpanel.persistence._add_to_people_queue(Al,r):Ts in r?this._mixpanel.persistence._add_to_people_queue(Ts,r):xc in r?this._mixpanel.persistence._add_to_people_queue(xc,r):lo in r?this._mixpanel.persistence._add_to_people_queue(lo,r):aa in r?this._mixpanel.persistence._add_to_people_queue(aa,r):pc in r?this._mixpanel.persistence._add_to_people_queue(pc,r):vr.error("Invalid call to _enqueue():",r)};Ut.prototype._flush_one_queue=function(r,e,t,n){var i=this,s=Z.extend({},this._mixpanel.persistence.load_queue(r)),c=s;!Z.isUndefined(s)&&Z.isObject(s)&&!Z.isEmptyObject(s)&&(i._mixpanel.persistence._pop_from_people_queue(r,s),i._mixpanel.persistence.save(),n&&(c=n(s)),e.call(i,c,function(l,h){l===0&&i._mixpanel.persistence._add_to_people_queue(r,s),Z.isUndefined(t)||t(l,h)}))};Ut.prototype._flush=function(r,e,t,n,i,s,c){var l=this;this._flush_one_queue(t0,this.set,r),this._flush_one_queue(Al,this.set_once,n),this._flush_one_queue(Ts,this.unset,s,function(T){return Z.keys(T)}),this._flush_one_queue(xc,this.increment,e),this._flush_one_queue(pc,this.union,i);var h=this._mixpanel.persistence.load_queue(lo);if(!Z.isUndefined(h)&&Z.isArray(h)&&h.length)for(var u,p=function(T,F){T===0&&l._mixpanel.persistence._add_to_people_queue(lo,u),Z.isUndefined(t)||t(T,F)},b=h.length-1;b>=0;b--)h=this._mixpanel.persistence.load_queue(lo),u=h.pop(),l._mixpanel.persistence.save(),Z.isEmptyObject(u)||l.append(u,p);var y=this._mixpanel.persistence.load_queue(aa);if(!Z.isUndefined(y)&&Z.isArray(y)&&y.length)for(var w,_=function(T,F){T===0&&l._mixpanel.persistence._add_to_people_queue(aa,w),Z.isUndefined(c)||c(T,F)},S=y.length-1;S>=0;S--)y=this._mixpanel.persistence.load_queue(aa),w=y.pop(),l._mixpanel.persistence.save(),Z.isEmptyObject(w)||l.remove(w,_)};Ut.prototype._is_reserved_property=function(r){return r==="$distinct_id"||r==="$token"||r==="$device_id"||r==="$user_id"||r==="$had_persisted_distinct_id"};Ut.prototype.set=Ut.prototype.set;Ut.prototype.set_once=Ut.prototype.set_once;Ut.prototype.unset=Ut.prototype.unset;Ut.prototype.increment=Ut.prototype.increment;Ut.prototype.append=Ut.prototype.append;Ut.prototype.remove=Ut.prototype.remove;Ut.prototype.union=Ut.prototype.union;Ut.prototype.track_charge=Ut.prototype.track_charge;Ut.prototype.clear_charges=Ut.prototype.clear_charges;Ut.prototype.delete_user=Ut.prototype.delete_user;Ut.prototype.toString=Ut.prototype.toString;var sm="__mps",om="__mpso",am="__mpus",cm="__mpa",fm="__mpap",lm="__mpr",um="__mpu",vA="$people_distinct_id",p1="__alias",Yu="__timers",NN=[sm,om,am,cm,fm,lm,um,vA,p1,Yu],Jt=function(r){this.props={},this.campaign_params_saved=!1,r.persistence_name?this.name="mp_"+r.persistence_name:this.name="mp_"+r.token+"_mixpanel";var e=r.persistence;e!=="cookie"&&e!=="localStorage"&&(vr.critical("Unknown persistence type "+e+"; falling back to cookie"),e=r.persistence="cookie"),e==="localStorage"&&Z.localStorage.is_supported()?this.storage=Z.localStorage:this.storage=Z.cookie,this.load(),this.update_config(r),this.upgrade(r),this.save()};Jt.prototype.properties=function(){var r={};return this.load(),Z.each(this.props,function(e,t){Z.include(NN,t)||(r[t]=e)}),r};Jt.prototype.load=function(){if(!this.disabled){var r=this.storage.parse(this.name);r&&(this.props=Z.extend({},r))}};Jt.prototype.upgrade=function(r){var e=r.upgrade,t,n;e&&(t="mp_super_properties",typeof e=="string"&&(t=e),n=this.storage.parse(t),this.storage.remove(t),this.storage.remove(t,!0),n&&(this.props=Z.extend(this.props,n.all,n.events))),!r.cookie_name&&r.name!=="mixpanel"&&(t="mp_"+r.token+"_"+r.name,n=this.storage.parse(t),n&&(this.storage.remove(t),this.storage.remove(t,!0),this.register_once(n))),this.storage===Z.localStorage&&(n=Z.cookie.parse(this.name),Z.cookie.remove(this.name),Z.cookie.remove(this.name,!0),n&&this.register_once(n))};Jt.prototype.save=function(){this.disabled||this.storage.set(this.name,Z.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)};Jt.prototype.load_prop=function(r){return this.load(),this.props[r]};Jt.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)};Jt.prototype.clear=function(){this.remove(),this.props={}};Jt.prototype.register_once=function(r,e,t){return Z.isObject(r)?(typeof e>"u"&&(e="None"),this.expire_days=typeof t>"u"?this.default_expiry:t,this.load(),Z.each(r,function(n,i){(!this.props.hasOwnProperty(i)||this.props[i]===e)&&(this.props[i]=n)},this),this.save(),!0):!1};Jt.prototype.register=function(r,e){return Z.isObject(r)?(this.expire_days=typeof e>"u"?this.default_expiry:e,this.load(),Z.extend(this.props,r),this.save(),!0):!1};Jt.prototype.unregister=function(r){this.load(),r in this.props&&(delete this.props[r],this.save())};Jt.prototype.update_search_keyword=function(r){this.register(Z.info.searchInfo(r))};Jt.prototype.update_referrer_info=function(r){this.register_once({$initial_referrer:r||"$direct",$initial_referring_domain:Z.info.referringDomain(r)||"$direct"},"")};Jt.prototype.get_referrer_info=function(){return Z.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})};Jt.prototype.update_config=function(r){this.default_expiry=this.expire_days=r.cookie_expiration,this.set_disabled(r.disable_persistence),this.set_cookie_domain(r.cookie_domain),this.set_cross_site(r.cross_site_cookie),this.set_cross_subdomain(r.cross_subdomain_cookie),this.set_secure(r.secure_cookie)};Jt.prototype.set_disabled=function(r){this.disabled=r,this.disabled?this.remove():this.save()};Jt.prototype.set_cookie_domain=function(r){r!==this.cookie_domain&&(this.remove(),this.cookie_domain=r,this.save())};Jt.prototype.set_cross_site=function(r){r!==this.cross_site&&(this.cross_site=r,this.remove(),this.save())};Jt.prototype.set_cross_subdomain=function(r){r!==this.cross_subdomain&&(this.cross_subdomain=r,this.remove(),this.save())};Jt.prototype.get_cross_subdomain=function(){return this.cross_subdomain};Jt.prototype.set_secure=function(r){r!==this.secure&&(this.secure=!!r,this.remove(),this.save())};Jt.prototype._add_to_people_queue=function(r,e){var t=this._get_queue_key(r),n=e[r],i=this._get_or_create_queue(t0),s=this._get_or_create_queue(Al),c=this._get_or_create_queue(Ts),l=this._get_or_create_queue(xc),h=this._get_or_create_queue(pc),u=this._get_or_create_queue(aa,[]),p=this._get_or_create_queue(lo,[]);t===sm?(Z.extend(i,n),this._pop_from_people_queue(xc,n),this._pop_from_people_queue(pc,n),this._pop_from_people_queue(Ts,n)):t===om?(Z.each(n,function(b,y){y in s||(s[y]=b)}),this._pop_from_people_queue(Ts,n)):t===am?Z.each(n,function(b){Z.each([i,s,l,h],function(y){b in y&&delete y[b]}),Z.each(p,function(y){b in y&&delete y[b]}),c[b]=!0}):t===cm?(Z.each(n,function(b,y){y in i?i[y]+=b:(y in l||(l[y]=0),l[y]+=b)},this),this._pop_from_people_queue(Ts,n)):t===um?(Z.each(n,function(b,y){Z.isArray(b)&&(y in h||(h[y]=[]),h[y]=h[y].concat(b))}),this._pop_from_people_queue(Ts,n)):t===lm?(u.push(n),this._pop_from_people_queue(lo,n)):t===fm&&(p.push(n),this._pop_from_people_queue(Ts,n)),vr.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),vr.log(e),this.save()};Jt.prototype._pop_from_people_queue=function(r,e){var t=this.props[this._get_queue_key(r)];Z.isUndefined(t)||Z.each(e,function(n,i){r===lo||r===aa?Z.each(t,function(s){s[i]===n&&delete s[i]}):delete t[i]},this)};Jt.prototype.load_queue=function(r){return this.load_prop(this._get_queue_key(r))};Jt.prototype._get_queue_key=function(r){if(r===t0)return sm;if(r===Al)return om;if(r===Ts)return am;if(r===xc)return cm;if(r===lo)return fm;if(r===aa)return lm;if(r===pc)return um;vr.error("Invalid queue:",r)};Jt.prototype._get_or_create_queue=function(r,e){var t=this._get_queue_key(r);return e=Z.isUndefined(e)?{}:e,this.props[t]||(this.props[t]=e)};Jt.prototype.set_event_timer=function(r,e){var t=this.load_prop(Yu)||{};t[r]=e,this.props[Yu]=t,this.save()};Jt.prototype.remove_event_timer=function(r){var e=this.load_prop(Yu)||{},t=e[r];return Z.isUndefined(t)||(delete this.props[Yu][r],this.save()),t};var hm,Vn,EA=0,ON=1,RN=function(r){return r},Xu=function(){},ns="mixpanel",AA="base64",MN="json",dm="$device:",hf=nr.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,_A=!hf&&so.indexOf("MSIE")===-1&&so.indexOf("Mozilla")===-1,g1=null;Xa.sendBeacon&&(g1=function(){return Xa.sendBeacon.apply(Xa,arguments)});var CA={track:"track/",engage:"engage/",groups:"groups/"},yw={api_host:"https://api-js.mixpanel.com",api_routes:CA,api_method:"POST",api_transport:"XHR",api_payload_format:AA,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:Xu,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:Xu,mp_loader:null,track_marketing:!0,track_pageview:!1,skip_first_touch_marketing:!1,store_google:!0,stop_utm_persistence:!1,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{}},SA=!1,De=function(){},T2=function(r,e,t){var n,i=t===ns?Vn:Vn[t];if(i&&hm===EA)n=i;else{if(i&&!Z.isArray(i)){vr.error("You have already initialized "+t);return}n=new De}if(n._cached_groups={},n._init(r,e,t),n.people=new Ut,n.people._init(n),!n.get_config("skip_first_touch_marketing")){var s=Z.info.campaignParams(null),c={},l=!1;Z.each(s,function(h,u){c["initial_"+u]=h,h&&(l=!0)}),l&&n.people.set_once(c)}return oa.DEBUG=oa.DEBUG||n.get_config("debug"),!Z.isUndefined(i)&&Z.isArray(i)&&(n._execute_array.call(n.people,i.people),n._execute_array(i)),n};De.prototype.init=function(r,e,t){if(Z.isUndefined(t)){this.report_error("You must name your new library: init(token, config, name)");return}if(t===ns){this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");return}var n=T2(r,e,t);return Vn[t]=n,n._loaded(),n};De.prototype._init=function(r,e,t){e=e||{},this.__loaded=!0,this.config={};var n={};if(!("api_payload_format"in e)){var i=e.api_host||yw.api_host;i.match(/\.mixpanel\.com/)&&(n.api_payload_format=MN)}if(this.set_config(Z.extend({},yw,n,e,{name:t,token:r,callback_fn:(t===ns?t:ns+"."+t)+"._jsc"})),this._jsc=Xu,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests){if(!Z.localStorage.is_supported(!0)||!hf)this._batch_requests=!1,vr.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support"),Z.each(this.get_batcher_configs(),function(h){vr.log("Clearing batch queue "+h.queue_key),Z.localStorage.remove(h.queue_key)});else if(this.init_batchers(),g1&&nr.addEventListener){var s=Z.bind(function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})},this);nr.addEventListener("pagehide",function(h){h.persisted&&s()}),nr.addEventListener("visibilitychange",function(){Tr.visibilityState==="hidden"&&s()})}}this.persistence=this.cookie=new Jt(this.config),this.unpersisted_superprops={},this._gdpr_init();var c=Z.UUID();this.get_distinct_id()||this.register_once({distinct_id:dm+c,$device_id:c},"");var l=this.get_config("track_pageview");l&&this._init_url_change_tracking(l)};De.prototype._loaded=function(){if(this.get_config("loaded")(this),this._set_default_superprops(),this.people.set_once(this.persistence.get_referrer_info()),this.get_config("store_google")&&this.get_config("stop_utm_persistence")){var r=Z.info.campaignParams(null);Z.each(r,(function(e,t){this.unregister(t)}).bind(this))}};De.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(Tr.referrer),this.get_config("store_google")&&!this.get_config("stop_utm_persistence")&&this.register(Z.info.campaignParams()),this.get_config("save_referrer")&&this.persistence.update_referrer_info(Tr.referrer)};De.prototype._dom_loaded=function(){Z.each(this.__dom_loaded_queue,function(r){this._track_dom.apply(this,r)},this),this.has_opted_out_tracking()||Z.each(this.__request_queue,function(r){this._send_request.apply(this,r)},this),delete this.__dom_loaded_queue,delete this.__request_queue};De.prototype._track_dom=function(r,e){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!SA)return this.__dom_loaded_queue.push([r,e]),!1;var t=new r().init(this);return t.track.apply(t,e)};De.prototype._init_url_change_tracking=function(r){var e="",t=this.track_pageview();if(t&&(e=Z.info.currentUrl()),Z.include(["full-url","url-with-path-and-query-string","url-with-path"],r)){nr.addEventListener("popstate",function(){nr.dispatchEvent(new Event("mp_locationchange"))}),nr.addEventListener("hashchange",function(){nr.dispatchEvent(new Event("mp_locationchange"))});var n=nr.history.pushState;typeof n=="function"&&(nr.history.pushState=function(s,c,l){n.call(nr.history,s,c,l),nr.dispatchEvent(new Event("mp_locationchange"))});var i=nr.history.replaceState;typeof i=="function"&&(nr.history.replaceState=function(s,c,l){i.call(nr.history,s,c,l),nr.dispatchEvent(new Event("mp_locationchange"))}),nr.addEventListener("mp_locationchange",(function(){var s=Z.info.currentUrl(),c=!1;if(r==="full-url"?c=s!==e:r==="url-with-path-and-query-string"?c=s.split("#")[0]!==e.split("#")[0]:r==="url-with-path"&&(c=s.split("#")[0].split("?")[0]!==e.split("#")[0].split("?")[0]),c){var l=this.track_pageview();l&&(e=s)}}).bind(this))}};De.prototype._prepare_callback=function(r,e){if(Z.isUndefined(r))return null;if(hf){var t=function(c){r(c,e)};return t}else{var n=this._jsc,i=""+Math.floor(Math.random()*1e8),s=this.get_config("callback_fn")+"["+i+"]";return n[i]=function(c){delete n[i],r(c,e)},s}};De.prototype._send_request=function(r,e,t,n){var i=!0;if(_A)return this.__request_queue.push(arguments),i;var s={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},c=null;!n&&(Z.isFunction(t)||typeof t=="string")&&(n=t,t=null),t=Z.extend(s,t||{}),hf||(t.method="GET");var l=t.method==="POST",h=g1&&l&&t.transport.toLowerCase()==="sendbeacon",u=t.verbose;e.verbose&&(u=!0),this.get_config("test")&&(e.test=1),u&&(e.verbose=1),this.get_config("img")&&(e.img=1),hf||(n?e.callback=n:(u||this.get_config("test"))&&(e.callback="(function(){})")),e.ip=this.get_config("ip")?1:0,e._=new Date().getTime().toString(),l&&(c="data="+encodeURIComponent(e.data),delete e.data),r+="?"+Z.HTTPBuildQuery(e);var p=this;if("img"in e){var b=Tr.createElement("img");b.src=r,Tr.body.appendChild(b)}else if(h){try{i=g1(r,c)}catch(F){p.report_error(F),i=!1}try{n&&n(i?1:0)}catch(F){p.report_error(F)}}else if(hf)try{var y=new XMLHttpRequest;y.open(t.method,r,!0);var w=this.get_config("xhr_headers");if(l&&(w["Content-Type"]="application/x-www-form-urlencoded"),Z.each(w,function(F,N){y.setRequestHeader(N,F)}),t.timeout_ms&&typeof y.timeout<"u"){y.timeout=t.timeout_ms;var _=new Date().getTime()}y.withCredentials=!0,y.onreadystatechange=function(){if(y.readyState===4)if(y.status===200){if(n)if(u){var F;try{F=Z.JSONDecode(y.responseText)}catch(O){if(p.report_error(O),t.ignore_json_errors)F=y.responseText;else return}n(F)}else n(Number(y.responseText))}else{var N;y.timeout&&!y.status&&new Date().getTime()-_>=y.timeout?N="timeout":N="Bad HTTP status: "+y.status+" "+y.statusText,p.report_error(N),n&&n(u?{status:0,error:N,xhr_req:y}:0)}},y.send(c)}catch(F){p.report_error(F),i=!1}else{var S=Tr.createElement("script");S.type="text/javascript",S.async=!0,S.defer=!0,S.src=r;var T=Tr.getElementsByTagName("script")[0];T.parentNode.insertBefore(S,T)}return i};De.prototype._execute_array=function(r){var e,t=[],n=[],i=[];Z.each(r,function(c){c&&(e=c[0],Z.isArray(e)?i.push(c):typeof c=="function"?c.call(this):Z.isArray(c)&&e==="alias"?t.push(c):Z.isArray(c)&&e.indexOf("track")!==-1&&typeof this[e]=="function"?i.push(c):n.push(c))},this);var s=function(c,l){Z.each(c,function(h){if(Z.isArray(h[0])){var u=l;Z.each(h,function(p){u=u[p[0]].apply(u,p.slice(1))})}else this[h[0]].apply(this,h.slice(1))},l)};s(t,this),s(n,this),s(i,this)};De.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events};De.prototype.get_batcher_configs=function(){var r="__mpq_"+this.get_config("token"),e=this.get_config("api_routes");return this._batcher_configs=this._batcher_configs||{events:{type:"events",endpoint:"/"+e.track,queue_key:r+"_ev"},people:{type:"people",endpoint:"/"+e.engage,queue_key:r+"_pp"},groups:{type:"groups",endpoint:"/"+e.groups,queue_key:r+"_gr"}},this._batcher_configs};De.prototype.init_batchers=function(){if(!this.are_batchers_initialized()){var r=Z.bind(function(t){return new wo(t.queue_key,{libConfig:this.config,sendRequestFunc:Z.bind(function(n,i,s){this._send_request(this.get_config("api_host")+t.endpoint,this._encode_data_for_request(n),i,this._prepare_callback(s,n))},this),beforeSendHook:Z.bind(function(n){return this._run_hook("before_send_"+t.type,n)},this),errorReporter:this.get_config("error_reporter"),stopAllBatchingFunc:Z.bind(this.stop_batch_senders,this)})},this),e=this.get_batcher_configs();this.request_batchers={events:r(e.events),people:r(e.people),groups:r(e.groups)}}this.get_config("batch_autostart")&&this.start_batch_senders()};De.prototype.start_batch_senders=function(){this._batchers_were_started=!0,this.are_batchers_initialized()&&(this._batch_requests=!0,Z.each(this.request_batchers,function(r){r.start()}))};De.prototype.stop_batch_senders=function(){this._batch_requests=!1,Z.each(this.request_batchers,function(r){r.stop(),r.clear()})};De.prototype.push=function(r){this._execute_array([r])};De.prototype.disable=function(r){typeof r>"u"?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(r)};De.prototype._encode_data_for_request=function(r){var e=Z.JSONEncode(r);return this.get_config("api_payload_format")===AA&&(e=Z.base64Encode(e)),{data:e}};De.prototype._track_or_batch=function(r,e){var t=Z.truncate(r.data,255),n=r.endpoint,i=r.batcher,s=r.should_send_immediately,c=r.send_request_options||{};e=e||Xu;var l=!0,h=Z.bind(function(){return c.skip_hooks||(t=this._run_hook("before_send_"+r.type,t)),t?(vr.log("MIXPANEL REQUEST:"),vr.log(t),this._send_request(n,this._encode_data_for_request(t),c,this._prepare_callback(e,t))):null},this);return this._batch_requests&&!s?i.enqueue(t,function(u){u?e(1,t):h()}):l=h(),l&&t};De.prototype.track=Rl(function(r,e,t,n){!n&&typeof t=="function"&&(n=t,t=null),t=t||{};var i=t.transport;i&&(t.transport=i);var s=t.send_immediately;if(typeof n!="function"&&(n=Xu),Z.isUndefined(r)){this.report_error("No event name provided to mixpanel.track");return}if(this._event_is_disabled(r)){n(0);return}e=Z.extend({},e),e.token=this.get_config("token");var c=this.persistence.remove_event_timer(r);if(!Z.isUndefined(c)){var l=new Date().getTime()-c;e.$duration=parseFloat((l/1e3).toFixed(3))}this._set_default_superprops();var h=this.get_config("track_marketing")?Z.info.marketingParams():{};e=Z.extend({},Z.info.properties({mp_loader:this.get_config("mp_loader")}),h,this.persistence.properties(),this.unpersisted_superprops,e);var u=this.get_config("property_blacklist");Z.isArray(u)?Z.each(u,function(y){delete e[y]}):this.report_error("Invalid value for property_blacklist config: "+u);var p={event:r,properties:e},b=this._track_or_batch({type:"events",data:p,endpoint:this.get_config("api_host")+"/"+this.get_config("api_routes").track,batcher:this.request_batchers.events,should_send_immediately:s,send_request_options:t},n);return b});De.prototype.set_group=Rl(function(r,e,t){Z.isArray(e)||(e=[e]);var n={};return n[r]=e,this.register(n),this.people.set(r,e,t)});De.prototype.add_group=Rl(function(r,e,t){var n=this.get_property(r),i={};return n===void 0?(i[r]=[e],this.register(i)):n.indexOf(e)===-1&&(n.push(e),i[r]=n,this.register(i)),this.people.union(r,e,t)});De.prototype.remove_group=Rl(function(r,e,t){var n=this.get_property(r);if(n!==void 0){var i=n.indexOf(e);i>-1&&(n.splice(i,1),this.register({group_key:n})),n.length===0&&this.unregister(r)}return this.people.remove(r,e,t)});De.prototype.track_with_groups=Rl(function(r,e,t,n){var i=Z.extend({},e||{});return Z.each(t,function(s,c){s!=null&&(i[c]=s)}),this.track(r,i,n)});De.prototype._create_map_key=function(r,e){return r+"_"+JSON.stringify(e)};De.prototype._remove_group_from_cache=function(r,e){delete this._cached_groups[this._create_map_key(r,e)]};De.prototype.get_group=function(r,e){var t=this._create_map_key(r,e),n=this._cached_groups[t];return(n===void 0||n._group_key!==r||n._group_id!==e)&&(n=new zr,n._init(this,r,e),this._cached_groups[t]=n),n};De.prototype.track_pageview=Rl(function(r,e){typeof r!="object"&&(r={}),e=e||{};var t=e.event_name||"$mp_web_page_view",n=Z.extend(Z.info.mpPageViewProperties(),Z.info.campaignParams(),Z.info.clickParams()),i=Z.extend({},n,r);return this.track(t,i)});De.prototype.track_links=function(){return this._track_dom.call(this,El,arguments)};De.prototype.track_forms=function(){return this._track_dom.call(this,ix,arguments)};De.prototype.time_event=function(r){if(Z.isUndefined(r)){this.report_error("No event name provided to mixpanel.time_event");return}this._event_is_disabled(r)||this.persistence.set_event_timer(r,new Date().getTime())};var BN={persistent:!0},xm=function(r){var e;return Z.isObject(r)?e=r:Z.isUndefined(r)?e={}:e={days:r},Z.extend({},BN,e)};De.prototype.register=function(r,e){var t=xm(e);t.persistent?this.persistence.register(r,t.days):Z.extend(this.unpersisted_superprops,r)};De.prototype.register_once=function(r,e,t){var n=xm(t);n.persistent?this.persistence.register_once(r,e,n.days):(typeof e>"u"&&(e="None"),Z.each(r,function(i,s){(!this.unpersisted_superprops.hasOwnProperty(s)||this.unpersisted_superprops[s]===e)&&(this.unpersisted_superprops[s]=i)},this))};De.prototype.unregister=function(r,e){e=xm(e),e.persistent?this.persistence.unregister(r):delete this.unpersisted_superprops[r]};De.prototype._register_single=function(r,e){var t={};t[r]=e,this.register(t)};De.prototype.identify=function(r,e,t,n,i,s,c,l){var h=this.get_distinct_id();if(r&&h!==r){if(typeof r=="string"&&r.indexOf(dm)===0)return this.report_error("distinct_id cannot have $device: prefix"),-1;this.register({$user_id:r})}if(!this.get_property("$device_id")){var u=h;this.register_once({$had_persisted_distinct_id:!0,$device_id:u},"")}r!==h&&r!==this.get_property(p1)&&(this.unregister(p1),this.register({distinct_id:r})),this._flags.identify_called=!0,this.people._flush(e,t,n,i,s,c,l),r!==h&&this.track("$identify",{distinct_id:r,$anon_distinct_id:h},{skip_hooks:!0})};De.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var r=Z.UUID();this.register_once({distinct_id:dm+r,$device_id:r},"")};De.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};De.prototype.alias=function(r,e){if(r===this.get_property(vA))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var t=this;return Z.isUndefined(e)&&(e=this.get_distinct_id()),r!==e?(this._register_single(p1,r),this.track("$create_alias",{alias:r,distinct_id:e},{skip_hooks:!0},function(){t.identify(r)})):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(r),-1)};De.prototype.name_tag=function(r){this._register_single("mp_name_tag",r)};De.prototype.set_config=function(r){if(Z.isObject(r)){Z.extend(this.config,r);var e=r.batch_size;e&&Z.each(this.request_batchers,function(t){t.resetBatchSize()}),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),oa.DEBUG=oa.DEBUG||this.get_config("debug")}};De.prototype.get_config=function(r){return this.config[r]};De.prototype._run_hook=function(r){var e=(this.config.hooks[r]||RN).apply(this,Ya.call(arguments,1));return typeof e>"u"&&(this.report_error(r+" hook did not return a value"),e=null),e};De.prototype.get_property=function(r){return this.persistence.load_prop([r])};De.prototype.toString=function(){var r=this.get_config("name");return r!==ns&&(r=ns+"."+r),r};De.prototype._event_is_disabled=function(r){return Z.isBlockedUA(so)||this._flags.disable_all_events||Z.include(this.__disabled_events,r)};De.prototype._gdpr_init=function(){var r=this.get_config("opt_out_tracking_persistence_type")==="localStorage";r&&Z.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_tracking()&&(this.get_config("opt_out_tracking_by_default")||Z.cookie.get("mp_optout"))&&(Z.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))};De.prototype._gdpr_update_persistence=function(r){var e;if(r&&r.clear_persistence)e=!0;else if(r&&r.enable_persistence)e=!1;else return;!this.get_config("disable_persistence")&&this.persistence.disabled!==e&&this.persistence.set_disabled(e),e?this.stop_batch_senders():this._batchers_were_started&&this.start_batch_senders()};De.prototype._gdpr_call_func=function(r,e){return e=Z.extend({track:Z.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},e),Z.localStorage.is_supported()||(e.persistence_type="cookie"),r(this.get_config("token"),{track:e.track,trackEventName:e.track_event_name,trackProperties:e.track_properties,persistenceType:e.persistence_type,persistencePrefix:e.cookie_prefix,cookieDomain:e.cookie_domain,cookieExpiration:e.cookie_expiration,crossSiteCookie:e.cross_site_cookie,crossSubdomainCookie:e.cross_subdomain_cookie,secureCookie:e.secure_cookie,ignoreDnt:e.ignore_dnt})};De.prototype.opt_in_tracking=function(r){r=Z.extend({enable_persistence:!0},r),this._gdpr_call_func(_N,r),this._gdpr_update_persistence(r)};De.prototype.opt_out_tracking=function(r){r=Z.extend({clear_persistence:!0,delete_user:!0},r),r.delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(CN,r),this._gdpr_update_persistence(r)};De.prototype.has_opted_in_tracking=function(r){return this._gdpr_call_func(SN,r)};De.prototype.has_opted_out_tracking=function(r){return this._gdpr_call_func(bA,r)};De.prototype.clear_opt_in_out_tracking=function(r){r=Z.extend({enable_persistence:!0},r),this._gdpr_call_func(IN,r),this._gdpr_update_persistence(r)};De.prototype.report_error=function(r,e){vr.error.apply(vr.error,arguments);try{!e&&!(r instanceof Error)&&(r=new Error(r)),this.get_config("error_reporter")(r,e)}catch(t){vr.error(t)}};De.prototype.init=De.prototype.init;De.prototype.reset=De.prototype.reset;De.prototype.disable=De.prototype.disable;De.prototype.time_event=De.prototype.time_event;De.prototype.track=De.prototype.track;De.prototype.track_links=De.prototype.track_links;De.prototype.track_forms=De.prototype.track_forms;De.prototype.track_pageview=De.prototype.track_pageview;De.prototype.register=De.prototype.register;De.prototype.register_once=De.prototype.register_once;De.prototype.unregister=De.prototype.unregister;De.prototype.identify=De.prototype.identify;De.prototype.alias=De.prototype.alias;De.prototype.name_tag=De.prototype.name_tag;De.prototype.set_config=De.prototype.set_config;De.prototype.get_config=De.prototype.get_config;De.prototype.get_property=De.prototype.get_property;De.prototype.get_distinct_id=De.prototype.get_distinct_id;De.prototype.toString=De.prototype.toString;De.prototype.opt_out_tracking=De.prototype.opt_out_tracking;De.prototype.opt_in_tracking=De.prototype.opt_in_tracking;De.prototype.has_opted_out_tracking=De.prototype.has_opted_out_tracking;De.prototype.has_opted_in_tracking=De.prototype.has_opted_in_tracking;De.prototype.clear_opt_in_out_tracking=De.prototype.clear_opt_in_out_tracking;De.prototype.get_group=De.prototype.get_group;De.prototype.set_group=De.prototype.set_group;De.prototype.add_group=De.prototype.add_group;De.prototype.remove_group=De.prototype.remove_group;De.prototype.track_with_groups=De.prototype.track_with_groups;De.prototype.start_batch_senders=De.prototype.start_batch_senders;De.prototype.stop_batch_senders=De.prototype.stop_batch_senders;De.prototype.DEFAULT_API_ROUTES=CA;Jt.prototype.properties=Jt.prototype.properties;Jt.prototype.update_search_keyword=Jt.prototype.update_search_keyword;Jt.prototype.update_referrer_info=Jt.prototype.update_referrer_info;Jt.prototype.get_cross_subdomain=Jt.prototype.get_cross_subdomain;Jt.prototype.clear=Jt.prototype.clear;var Zc={},PN=function(){Z.each(Zc,function(r,e){e!==ns&&(Vn[e]=r)}),Vn._=Z},FN=function(){Vn.init=function(r,e,t){if(t)return Vn[t]||(Vn[t]=Zc[t]=T2(r,e,t),Vn[t]._loaded()),Vn[t];var n=Vn;Zc[ns]?n=Zc[ns]:r&&(n=T2(r,e,ns),n._loaded(),Zc[ns]=n),Vn=n,hm===ON&&(nr[ns]=Vn),PN()}},LN=function(){function r(){r.done||(r.done=!0,SA=!0,_A=!1,Z.each(Zc,function(n){n._dom_loaded()}))}function e(){try{Tr.documentElement.doScroll("left")}catch{setTimeout(e,1);return}r()}if(Tr.addEventListener)Tr.readyState==="complete"?r():Tr.addEventListener("DOMContentLoaded",r,!1);else if(Tr.attachEvent){Tr.attachEvent("onreadystatechange",r);var t=!1;try{t=nr.frameElement===null}catch{}Tr.documentElement.doScroll&&t&&e()}Z.register_event(nr,"load",r,!0)};function kN(){return hm=EA,Vn=new De,FN(),Vn.init(),LN(),Vn}var UN=kN(),HN=UN;const qs=ba(HN);var et;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(et||(et={}));var ww=new Map([[et.QR_CODE,"QR_CODE"],[et.AZTEC,"AZTEC"],[et.CODABAR,"CODABAR"],[et.CODE_39,"CODE_39"],[et.CODE_93,"CODE_93"],[et.CODE_128,"CODE_128"],[et.DATA_MATRIX,"DATA_MATRIX"],[et.MAXICODE,"MAXICODE"],[et.ITF,"ITF"],[et.EAN_13,"EAN_13"],[et.EAN_8,"EAN_8"],[et.PDF_417,"PDF_417"],[et.RSS_14,"RSS_14"],[et.RSS_EXPANDED,"RSS_EXPANDED"],[et.UPC_A,"UPC_A"],[et.UPC_E,"UPC_E"],[et.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),vw;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(vw||(vw={}));function zN(r){return Object.values(et).includes(r)}var da;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(da||(da={}));var Ds=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[da.SCAN_TYPE_CAMERA,da.SCAN_TYPE_FILE],r}(),IA=function(){function r(e,t){this.format=e,this.formatName=t}return r.prototype.toString=function(){return this.formatName},r.create=function(e){if(!ww.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new r(e,ww.get(e))},r}(),Ew=function(){function r(){}return r.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},r.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},r}(),N2;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(N2||(N2={}));var DA=function(){function r(){}return r.createFrom=function(e){return{errorMessage:e,type:N2.UNKWOWN_ERROR}},r}(),TA=function(){function r(e){this.verbose=e}return r.prototype.log=function(e){this.verbose&&console.log(e)},r.prototype.warn=function(e){this.verbose&&console.warn(e)},r.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},r.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},r}();function Ys(r){return typeof r>"u"||r===null}function jN(r,e,t){return r>t?t:r<e?e:r}var Jc=function(){function r(){}return r.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},r.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r.scannerPaused=function(){return"Scanner paused"},r}(),yr=function(){function r(){}return r.scanningStatus=function(){return"Scanning"},r.idleStatus=function(){return"Idle"},r.errorStatus=function(){return"Error"},r.permissionStatus=function(){return"Permission"},r.noCameraFoundErrorStatus=function(){return"No Cameras"},r.lastMatch=function(e){return"Last Match: ".concat(e)},r.codeScannerTitle=function(){return"Code Scanner"},r.cameraPermissionTitle=function(){return"Request Camera Permissions"},r.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},r.noCameraFound=function(){return"No camera found"},r.scanButtonStopScanningText=function(){return"Stop Scanning"},r.scanButtonStartScanningText=function(){return"Start Scanning"},r.torchOnButton=function(){return"Switch On Torch"},r.torchOffButton=function(){return"Switch Off Torch"},r.torchOnFailedMessage=function(){return"Failed to turn on torch"},r.torchOffFailedMessage=function(){return"Failed to turn off torch"},r.scanButtonScanningStarting=function(){return"Launching Camera..."},r.textIfCameraScanSelected=function(){return"Scan an Image File"},r.textIfFileScanSelected=function(){return"Scan using camera directly"},r.selectCamera=function(){return"Select Camera"},r.fileSelectionChooseImage=function(){return"Choose Image"},r.fileSelectionChooseAnother=function(){return"Choose Another"},r.fileSelectionNoImageSelected=function(){return"No image choosen"},r.anonymousCameraPrefix=function(){return"Anonymous Camera"},r.dragAndDropMessage=function(){return"Or drop an image to scan"},r.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},r.zoom=function(){return"zoom"},r.loadingImage=function(){return"Loading image..."},r.cameraScanAltText=function(){return"Camera based scan"},r.fileScanAltText=function(){return"Fule based scan"},r}(),Aw=function(){function r(){}return r.poweredBy=function(){return"Powered by "},r.reportIssues=function(){return"Report issues"},r}(),NA=function(){function r(){}return r.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(i),c=Object.keys(e),l=0,h=c;l<h.length;l++){var u=h[l];if(s.has(u))return t.logError("".concat(u," is not supported videoConstaints."),!0),!1}return!0},r}(),O2={exports:{}};(function(r,e){(function(t,n){n(e)})(At,function(t){function n(q){return q==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,o){q.__proto__=o}||function(q,o){for(var a in o)o.hasOwnProperty(a)&&(q[a]=o[a])};function s(q,o){i(q,o);function a(){this.constructor=q}q.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}function c(q,o){var a=Object.setPrototypeOf;a?a(q,o):q.__proto__=o}function l(q,o){o===void 0&&(o=q.constructor);var a=Error.captureStackTrace;a&&a(q,o)}var h=function(q){s(o,q);function o(a){var f=this.constructor,d=q.call(this,a)||this;return Object.defineProperty(d,"name",{value:f.name,enumerable:!1}),c(d,f.prototype),l(d),d}return o}(Error);class u extends h{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}u.kind="Exception";class p extends u{}p.kind="ArgumentException";class b extends u{}b.kind="IllegalArgumentException";class y{constructor(o){if(this.binarizer=o,o===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,a){return this.binarizer.getBlackRow(o,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,a,f,d){const x=this.binarizer.getLuminanceSource().crop(o,a,f,d);return new y(this.binarizer.createBinarizer(x))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new y(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new y(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class w extends u{static getChecksumInstance(){return new w}}w.kind="ChecksumException";class _{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class S{static arraycopy(o,a,f,d,x){for(;x--;)f[d++]=o[a++]}static currentTimeMillis(){return Date.now()}}class T extends u{}T.kind="IndexOutOfBoundsException";class F extends T{constructor(o=void 0,a=void 0){super(a),this.index=o,this.message=a}}F.kind="ArrayIndexOutOfBoundsException";class N{static fill(o,a){for(let f=0,d=o.length;f<d;f++)o[f]=a}static fillWithin(o,a,f,d){N.rangeCheck(o.length,a,f);for(let x=a;x<f;x++)o[x]=d}static rangeCheck(o,a,f){if(a>f)throw new b("fromIndex("+a+") > toIndex("+f+")");if(a<0)throw new F(a);if(f>o)throw new F(f)}static asList(...o){return o}static create(o,a,f){return Array.from({length:o}).map(x=>Array.from({length:a}).fill(f))}static createInt32Array(o,a,f){return Array.from({length:o}).map(x=>Int32Array.from({length:a}).fill(f))}static equals(o,a){if(!o||!a||!o.length||!a.length||o.length!==a.length)return!1;for(let f=0,d=o.length;f<d;f++)if(o[f]!==a[f])return!1;return!0}static hashCode(o){if(o===null)return 0;let a=1;for(const f of o)a=31*a+f;return a}static fillUint8Array(o,a){for(let f=0;f!==o.length;f++)o[f]=a}static copyOf(o,a){return o.slice(0,a)}static copyOfUint8Array(o,a){if(o.length<=a){const f=new Uint8Array(a);return f.set(o),f}return o.slice(0,a)}static copyOfRange(o,a,f){const d=f-a,x=new Int32Array(d);return S.arraycopy(o,a,x,0,d),x}static binarySearch(o,a,f){f===void 0&&(f=N.numberComparator);let d=0,x=o.length-1;for(;d<=x;){const g=x+d>>1,m=f(a,o[g]);if(m>0)d=g+1;else if(m<0)x=g-1;else return g}return-d-1}static numberComparator(o,a){return o-a}}class O{static numberOfTrailingZeros(o){let a;if(o===0)return 32;let f=31;return a=o<<16,a!==0&&(f-=16,o=a),a=o<<8,a!==0&&(f-=8,o=a),a=o<<4,a!==0&&(f-=4,o=a),a=o<<2,a!==0&&(f-=2,o=a),f-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let a=1;return o>>>16||(a+=16,o<<=16),o>>>24||(a+=8,o<<=8),o>>>28||(a+=4,o<<=4),o>>>30||(a+=2,o<<=2),a-=o>>>31,a}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,a){return Math.trunc(o/a)}static parseInt(o,a=void 0){return parseInt(o,a)}}O.MIN_VALUE_32_BITS=-2147483648,O.MAX_VALUE=Number.MAX_SAFE_INTEGER;class M{constructor(o,a){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,a==null?this.bits=M.makeArray(o):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const a=M.makeArray(o);S.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const a=this.size;if(o>=a)return a;const f=this.bits;let d=Math.floor(o/32),x=f[d];x&=~((1<<(o&31))-1);const g=f.length;for(;x===0;){if(++d===g)return a;x=f[d]}const m=d*32+O.numberOfTrailingZeros(x);return m>a?a:m}getNextUnset(o){const a=this.size;if(o>=a)return a;const f=this.bits;let d=Math.floor(o/32),x=~f[d];x&=~((1<<(o&31))-1);const g=f.length;for(;x===0;){if(++d===g)return a;x=~f[d]}const m=d*32+O.numberOfTrailingZeros(x);return m>a?a:m}setBulk(o,a){this.bits[Math.floor(o/32)]=a}setRange(o,a){if(a<o||o<0||a>this.size)throw new b;if(a===o)return;a--;const f=Math.floor(o/32),d=Math.floor(a/32),x=this.bits;for(let g=f;g<=d;g++){const m=g>f?0:o&31,I=(2<<(g<d?31:a&31))-(1<<m);x[g]|=I}}clear(){const o=this.bits.length,a=this.bits;for(let f=0;f<o;f++)a[f]=0}isRange(o,a,f){if(a<o||o<0||a>this.size)throw new b;if(a===o)return!0;a--;const d=Math.floor(o/32),x=Math.floor(a/32),g=this.bits;for(let m=d;m<=x;m++){const A=m>d?0:o&31,k=(2<<(m<x?31:a&31))-(1<<A)&4294967295;if((g[m]&k)!==(f?k:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,a){if(a<0||a>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let f=a;f>0;f--)this.appendBit((o>>f-1&1)===1)}appendBitArray(o){const a=o.size;this.ensureCapacity(this.size+a);for(let f=0;f<a;f++)this.appendBit(o.get(f))}xor(o){if(this.size!==o.size)throw new b("Sizes don't match");const a=this.bits;for(let f=0,d=a.length;f<d;f++)a[f]^=o.bits[f]}toBytes(o,a,f,d){for(let x=0;x<d;x++){let g=0;for(let m=0;m<8;m++)this.get(o)&&(g|=1<<7-m),o++;a[f+x]=g}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),f=a+1,d=this.bits;for(let x=0;x<f;x++){let g=d[x];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,o[a-x]=g}if(this.size!==f*32){const x=f*32-this.size;let g=o[0]>>>x;for(let m=1;m<f;m++){const A=o[m];g|=A<<32-x,o[m-1]=g,g=A>>>x}o[f-1]=g}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof M))return!1;const a=o;return this.size===a.size&&N.equals(this.bits,a.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let o="";for(let a=0,f=this.size;a<f;a++)a&7||(o+=" "),o+=this.get(a)?"X":".";return o}clone(){return new M(this.size,this.bits.slice())}}var L;(function(q){q[q.OTHER=0]="OTHER",q[q.PURE_BARCODE=1]="PURE_BARCODE",q[q.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",q[q.TRY_HARDER=3]="TRY_HARDER",q[q.CHARACTER_SET=4]="CHARACTER_SET",q[q.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",q[q.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",q[q.ASSUME_GS1=7]="ASSUME_GS1",q[q.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",q[q.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",q[q.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(L||(L={}));var R=L;class v extends u{static getFormatInstance(){return new v}}v.kind="FormatException";var P;(function(q){q[q.Cp437=0]="Cp437",q[q.ISO8859_1=1]="ISO8859_1",q[q.ISO8859_2=2]="ISO8859_2",q[q.ISO8859_3=3]="ISO8859_3",q[q.ISO8859_4=4]="ISO8859_4",q[q.ISO8859_5=5]="ISO8859_5",q[q.ISO8859_6=6]="ISO8859_6",q[q.ISO8859_7=7]="ISO8859_7",q[q.ISO8859_8=8]="ISO8859_8",q[q.ISO8859_9=9]="ISO8859_9",q[q.ISO8859_10=10]="ISO8859_10",q[q.ISO8859_11=11]="ISO8859_11",q[q.ISO8859_13=12]="ISO8859_13",q[q.ISO8859_14=13]="ISO8859_14",q[q.ISO8859_15=14]="ISO8859_15",q[q.ISO8859_16=15]="ISO8859_16",q[q.SJIS=16]="SJIS",q[q.Cp1250=17]="Cp1250",q[q.Cp1251=18]="Cp1251",q[q.Cp1252=19]="Cp1252",q[q.Cp1256=20]="Cp1256",q[q.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",q[q.UTF8=22]="UTF8",q[q.ASCII=23]="ASCII",q[q.Big5=24]="Big5",q[q.GB18030=25]="GB18030",q[q.EUC_KR=26]="EUC_KR"})(P||(P={}));class Y{constructor(o,a,f,...d){this.valueIdentifier=o,this.name=f,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=d,Y.VALUE_IDENTIFIER_TO_ECI.set(o,this),Y.NAME_TO_ECI.set(f,this);const x=this.values;for(let g=0,m=x.length;g!==m;g++){const A=x[g];Y.VALUES_TO_ECI.set(A,this)}for(const g of d)Y.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new v("incorect value");const a=Y.VALUES_TO_ECI.get(o);if(a===void 0)throw new v("incorect value");return a}static getCharacterSetECIByName(o){const a=Y.NAME_TO_ECI.get(o);if(a===void 0)throw new v("incorect value");return a}equals(o){if(!(o instanceof Y))return!1;const a=o;return this.getName()===a.getName()}}Y.VALUE_IDENTIFIER_TO_ECI=new Map,Y.VALUES_TO_ECI=new Map,Y.NAME_TO_ECI=new Map,Y.Cp437=new Y(P.Cp437,Int32Array.from([0,2]),"Cp437"),Y.ISO8859_1=new Y(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Y.ISO8859_2=new Y(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Y.ISO8859_3=new Y(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Y.ISO8859_4=new Y(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Y.ISO8859_5=new Y(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Y.ISO8859_6=new Y(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Y.ISO8859_7=new Y(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Y.ISO8859_8=new Y(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Y.ISO8859_9=new Y(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Y.ISO8859_10=new Y(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Y.ISO8859_11=new Y(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Y.ISO8859_13=new Y(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Y.ISO8859_14=new Y(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Y.ISO8859_15=new Y(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Y.ISO8859_16=new Y(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Y.SJIS=new Y(P.SJIS,20,"SJIS","Shift_JIS"),Y.Cp1250=new Y(P.Cp1250,21,"Cp1250","windows-1250"),Y.Cp1251=new Y(P.Cp1251,22,"Cp1251","windows-1251"),Y.Cp1252=new Y(P.Cp1252,23,"Cp1252","windows-1252"),Y.Cp1256=new Y(P.Cp1256,24,"Cp1256","windows-1256"),Y.UnicodeBigUnmarked=new Y(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Y.UTF8=new Y(P.UTF8,26,"UTF8","UTF-8"),Y.ASCII=new Y(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Y.Big5=new Y(P.Big5,28,"Big5"),Y.GB18030=new Y(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Y.EUC_KR=new Y(P.EUC_KR,30,"EUC_KR","EUC-KR");class J extends u{}J.kind="UnsupportedOperationException";class ne{static decode(o,a){const f=this.encodingName(a);return this.customDecoder?this.customDecoder(o,f):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(f)?this.decodeFallback(o,f):new TextDecoder(f).decode(o)}static shouldDecodeOnFallback(o){return!ne.isBrowser()&&o==="ISO-8859-1"}static encode(o,a){const f=this.encodingName(a);return this.customEncoder?this.customEncoder(o,f):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof Y?o:Y.getCharacterSetECIByName(o)}static decodeFallback(o,a){const f=this.encodingCharacterSet(a);if(ne.isDecodeFallbackSupported(f)){let d="";for(let x=0,g=o.length;x<g;x++){let m=o[x].toString(16);m.length<2&&(m="0"+m),d+="%"+m}return decodeURIComponent(d)}if(f.equals(Y.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new J(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(Y.UTF8)||o.equals(Y.ISO8859_1)||o.equals(Y.ASCII)}static encodeFallback(o){const f=btoa(unescape(encodeURIComponent(o))).split(""),d=[];for(let x=0;x<f.length;x++)d.push(f[x].charCodeAt(0));return new Uint8Array(d)}}class le{static castAsNonUtf8Char(o,a=null){const f=a?a.getName():this.ISO88591;return ne.decode(new Uint8Array([o]),f)}static guessEncoding(o,a){if(a!=null&&a.get(R.CHARACTER_SET)!==void 0)return a.get(R.CHARACTER_SET).toString();const f=o.length;let d=!0,x=!0,g=!0,m=0,A=0,I=0,k=0,$=0,Q=0,ce=0,xe=0,ge=0,ye=0,_e=0;const Fe=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let Le=0;Le<f&&(d||x||g);Le++){const Be=o[Le]&255;g&&(m>0?Be&128?m--:g=!1:Be&128&&(Be&64?(m++,Be&32?(m++,Be&16?(m++,Be&8?g=!1:k++):I++):A++):g=!1)),d&&(Be>127&&Be<160?d=!1:Be>159&&(Be<192||Be===215||Be===247)&&_e++),x&&($>0?Be<64||Be===127||Be>252?x=!1:$--:Be===128||Be===160||Be>239?x=!1:Be>160&&Be<224?(Q++,xe=0,ce++,ce>ge&&(ge=ce)):Be>127?($++,ce=0,xe++,xe>ye&&(ye=xe)):(ce=0,xe=0))}return g&&m>0&&(g=!1),x&&$>0&&(x=!1),g&&(Fe||A+I+k>0)?le.UTF8:x&&(le.ASSUME_SHIFT_JIS||ge>=3||ye>=3)?le.SHIFT_JIS:d&&x?ge===2&&Q===2||_e*10>=f?le.SHIFT_JIS:le.ISO88591:d?le.ISO88591:x?le.SHIFT_JIS:g?le.UTF8:le.PLATFORM_DEFAULT_ENCODING}static format(o,...a){let f=-1;function d(g,m,A,I,k,$){if(g==="%%")return"%";if(a[++f]===void 0)return;g=I?parseInt(I.substr(1)):void 0;let Q=k?parseInt(k.substr(1)):void 0,ce;switch($){case"s":ce=a[f];break;case"c":ce=a[f][0];break;case"f":ce=parseFloat(a[f]).toFixed(g);break;case"p":ce=parseFloat(a[f]).toPrecision(g);break;case"e":ce=parseFloat(a[f]).toExponential(g);break;case"x":ce=parseInt(a[f]).toString(Q||16);break;case"d":ce=parseFloat(parseInt(a[f],Q||10).toPrecision(g)).toFixed(0);break}ce=typeof ce=="object"?JSON.stringify(ce):(+ce).toString(Q);let xe=parseInt(A),ge=A&&A[0]+""=="0"?"0":" ";for(;ce.length<xe;)ce=m!==void 0?ce+ge:ge+ce;return ce}let x=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(x,d)}static getBytes(o,a){return ne.encode(o,a)}static getCharCode(o,a=0){return o.charCodeAt(a)}static getCharAt(o){return String.fromCharCode(o)}}le.SHIFT_JIS=Y.SJIS.getName(),le.GB2312="GB2312",le.ISO88591=Y.ISO8859_1.getName(),le.EUC_JP="EUC_JP",le.UTF8=Y.UTF8.getName(),le.PLATFORM_DEFAULT_ENCODING=le.UTF8,le.ASSUME_SHIFT_JIS=!1;class V{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=le.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,a,f){for(let d=a;a<a+f;d++)this.append(o[d]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,a){this.value=this.value.substr(0,o)+a+this.value.substr(o+1)}substring(o,a){return this.value.substring(o,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,a){this.value=this.value.substr(0,o)+a+this.value.substr(o+a.length)}}class E{constructor(o,a,f,d){if(this.width=o,this.height=a,this.rowSize=f,this.bits=d,a==null&&(a=o),this.height=a,o<1||a<1)throw new b("Both dimensions must be greater than 0");f==null&&(f=Math.floor((o+31)/32)),this.rowSize=f,d==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const a=o.length,f=o[0].length,d=new E(f,a);for(let x=0;x<a;x++){const g=o[x];for(let m=0;m<f;m++)g[m]&&d.set(m,x)}return d}static parseFromString(o,a,f){if(o===null)throw new b("stringRepresentation cannot be null");const d=new Array(o.length);let x=0,g=0,m=-1,A=0,I=0;for(;I<o.length;)if(o.charAt(I)===`
`||o.charAt(I)==="\r"){if(x>g){if(m===-1)m=x-g;else if(x-g!==m)throw new b("row lengths do not match");g=x,A++}I++}else if(o.substring(I,I+a.length)===a)I+=a.length,d[x]=!0,x++;else if(o.substring(I,I+f.length)===f)I+=f.length,d[x]=!1,x++;else throw new b("illegal character encountered: "+o.substring(I));if(x>g){if(m===-1)m=x-g;else if(x-g!==m)throw new b("row lengths do not match");A++}const k=new E(m,A);for(let $=0;$<x;$++)d[$]&&k.set(Math.floor($%m),Math.floor($/m));return k}get(o,a){const f=a*this.rowSize+Math.floor(o/32);return(this.bits[f]>>>(o&31)&1)!==0}set(o,a){const f=a*this.rowSize+Math.floor(o/32);this.bits[f]|=1<<(o&31)&4294967295}unset(o,a){const f=a*this.rowSize+Math.floor(o/32);this.bits[f]&=~(1<<(o&31)&4294967295)}flip(o,a){const f=a*this.rowSize+Math.floor(o/32);this.bits[f]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new b("input matrix dimensions do not match");const a=new M(Math.floor(this.width/32)+1),f=this.rowSize,d=this.bits;for(let x=0,g=this.height;x<g;x++){const m=x*f,A=o.getRow(x,a).getBitArray();for(let I=0;I<f;I++)d[m+I]^=A[I]}}clear(){const o=this.bits,a=o.length;for(let f=0;f<a;f++)o[f]=0}setRegion(o,a,f,d){if(a<0||o<0)throw new b("Left and top must be nonnegative");if(d<1||f<1)throw new b("Height and width must be at least 1");const x=o+f,g=a+d;if(g>this.height||x>this.width)throw new b("The region must fit inside the matrix");const m=this.rowSize,A=this.bits;for(let I=a;I<g;I++){const k=I*m;for(let $=o;$<x;$++)A[k+Math.floor($/32)]|=1<<($&31)&4294967295}}getRow(o,a){a==null||a.getSize()<this.width?a=new M(this.width):a.clear();const f=this.rowSize,d=this.bits,x=o*f;for(let g=0;g<f;g++)a.setBulk(g*32,d[x+g]);return a}setRow(o,a){S.arraycopy(a.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),a=this.getHeight();let f=new M(o),d=new M(o);for(let x=0,g=Math.floor((a+1)/2);x<g;x++)f=this.getRow(x,f),d=this.getRow(a-1-x,d),f.reverse(),d.reverse(),this.setRow(x,d),this.setRow(a-1-x,f)}getEnclosingRectangle(){const o=this.width,a=this.height,f=this.rowSize,d=this.bits;let x=o,g=a,m=-1,A=-1;for(let I=0;I<a;I++)for(let k=0;k<f;k++){const $=d[I*f+k];if($!==0){if(I<g&&(g=I),I>A&&(A=I),k*32<x){let Q=0;for(;!($<<31-Q&4294967295);)Q++;k*32+Q<x&&(x=k*32+Q)}if(k*32+31>m){let Q=31;for(;!($>>>Q);)Q--;k*32+Q>m&&(m=k*32+Q)}}}return m<x||A<g?null:Int32Array.from([x,g,m-x+1,A-g+1])}getTopLeftOnBit(){const o=this.rowSize,a=this.bits;let f=0;for(;f<a.length&&a[f]===0;)f++;if(f===a.length)return null;const d=f/o;let x=f%o*32;const g=a[f];let m=0;for(;!(g<<31-m&4294967295);)m++;return x+=m,Int32Array.from([x,d])}getBottomRightOnBit(){const o=this.rowSize,a=this.bits;let f=a.length-1;for(;f>=0&&a[f]===0;)f--;if(f<0)return null;const d=Math.floor(f/o);let x=Math.floor(f%o)*32;const g=a[f];let m=31;for(;!(g>>>m);)m--;return x+=m,Int32Array.from([x,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof E))return!1;const a=o;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&N.equals(this.bits,a.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+N.hashCode(this.bits),o}toString(o="X ",a="  ",f=`
`){return this.buildToString(o,a,f)}buildToString(o,a,f){let d=new V;for(let x=0,g=this.height;x<g;x++){for(let m=0,A=this.width;m<A;m++)d.append(this.get(m,x)?o:a);d.append(f)}return d.toString()}clone(){return new E(this.width,this.height,this.rowSize,this.bits.slice())}}class C extends u{static getNotFoundInstance(){return new C}}C.kind="NotFoundException";class U extends _{constructor(o){super(o),this.luminances=U.EMPTY,this.buckets=new Int32Array(U.LUMINANCE_BUCKETS)}getBlackRow(o,a){const f=this.getLuminanceSource(),d=f.getWidth();a==null||a.getSize()<d?a=new M(d):a.clear(),this.initArrays(d);const x=f.getRow(o,this.luminances),g=this.buckets;for(let A=0;A<d;A++)g[(x[A]&255)>>U.LUMINANCE_SHIFT]++;const m=U.estimateBlackPoint(g);if(d<3)for(let A=0;A<d;A++)(x[A]&255)<m&&a.set(A);else{let A=x[0]&255,I=x[1]&255;for(let k=1;k<d-1;k++){const $=x[k+1]&255;(I*4-A-$)/2<m&&a.set(k),A=I,I=$}}return a}getBlackMatrix(){const o=this.getLuminanceSource(),a=o.getWidth(),f=o.getHeight(),d=new E(a,f);this.initArrays(a);const x=this.buckets;for(let A=1;A<5;A++){const I=Math.floor(f*A/5),k=o.getRow(I,this.luminances),$=Math.floor(a*4/5);for(let Q=Math.floor(a/5);Q<$;Q++){const ce=k[Q]&255;x[ce>>U.LUMINANCE_SHIFT]++}}const g=U.estimateBlackPoint(x),m=o.getMatrix();for(let A=0;A<f;A++){const I=A*a;for(let k=0;k<a;k++)(m[I+k]&255)<g&&d.set(k,A)}return d}createBinarizer(o){return new U(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const a=this.buckets;for(let f=0;f<U.LUMINANCE_BUCKETS;f++)a[f]=0}static estimateBlackPoint(o){const a=o.length;let f=0,d=0,x=0;for(let k=0;k<a;k++)o[k]>x&&(d=k,x=o[k]),o[k]>f&&(f=o[k]);let g=0,m=0;for(let k=0;k<a;k++){const $=k-d,Q=o[k]*$*$;Q>m&&(g=k,m=Q)}if(d>g){const k=d;d=g,g=k}if(g-d<=a/16)throw new C;let A=g-1,I=-1;for(let k=g-1;k>d;k--){const $=k-d,Q=$*$*(g-k)*(f-o[k]);Q>I&&(A=k,I=Q)}return A<<U.LUMINANCE_SHIFT}}U.LUMINANCE_BITS=5,U.LUMINANCE_SHIFT=8-U.LUMINANCE_BITS,U.LUMINANCE_BUCKETS=1<<U.LUMINANCE_BITS,U.EMPTY=Uint8ClampedArray.from([0]);class j extends U{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),a=o.getWidth(),f=o.getHeight();if(a>=j.MINIMUM_DIMENSION&&f>=j.MINIMUM_DIMENSION){const d=o.getMatrix();let x=a>>j.BLOCK_SIZE_POWER;a&j.BLOCK_SIZE_MASK&&x++;let g=f>>j.BLOCK_SIZE_POWER;f&j.BLOCK_SIZE_MASK&&g++;const m=j.calculateBlackPoints(d,x,g,a,f),A=new E(a,f);j.calculateThresholdForBlock(d,x,g,a,f,m,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new j(o)}static calculateThresholdForBlock(o,a,f,d,x,g,m){const A=x-j.BLOCK_SIZE,I=d-j.BLOCK_SIZE;for(let k=0;k<f;k++){let $=k<<j.BLOCK_SIZE_POWER;$>A&&($=A);const Q=j.cap(k,2,f-3);for(let ce=0;ce<a;ce++){let xe=ce<<j.BLOCK_SIZE_POWER;xe>I&&(xe=I);const ge=j.cap(ce,2,a-3);let ye=0;for(let Fe=-2;Fe<=2;Fe++){const Le=g[Q+Fe];ye+=Le[ge-2]+Le[ge-1]+Le[ge]+Le[ge+1]+Le[ge+2]}const _e=ye/25;j.thresholdBlock(o,xe,$,_e,d,m)}}}static cap(o,a,f){return o<a?a:o>f?f:o}static thresholdBlock(o,a,f,d,x,g){for(let m=0,A=f*x+a;m<j.BLOCK_SIZE;m++,A+=x)for(let I=0;I<j.BLOCK_SIZE;I++)(o[A+I]&255)<=d&&g.set(a+I,f+m)}static calculateBlackPoints(o,a,f,d,x){const g=x-j.BLOCK_SIZE,m=d-j.BLOCK_SIZE,A=new Array(f);for(let I=0;I<f;I++){A[I]=new Int32Array(a);let k=I<<j.BLOCK_SIZE_POWER;k>g&&(k=g);for(let $=0;$<a;$++){let Q=$<<j.BLOCK_SIZE_POWER;Q>m&&(Q=m);let ce=0,xe=255,ge=0;for(let _e=0,Fe=k*d+Q;_e<j.BLOCK_SIZE;_e++,Fe+=d){for(let Le=0;Le<j.BLOCK_SIZE;Le++){const Be=o[Fe+Le]&255;ce+=Be,Be<xe&&(xe=Be),Be>ge&&(ge=Be)}if(ge-xe>j.MIN_DYNAMIC_RANGE)for(_e++,Fe+=d;_e<j.BLOCK_SIZE;_e++,Fe+=d)for(let Le=0;Le<j.BLOCK_SIZE;Le++)ce+=o[Fe+Le]&255}let ye=ce>>j.BLOCK_SIZE_POWER*2;if(ge-xe<=j.MIN_DYNAMIC_RANGE&&(ye=xe/2,I>0&&$>0)){const _e=(A[I-1][$]+2*A[I][$-1]+A[I-1][$-1])/4;xe<_e&&(ye=_e)}A[I][$]=ye}}return A}}j.BLOCK_SIZE_POWER=3,j.BLOCK_SIZE=1<<j.BLOCK_SIZE_POWER,j.BLOCK_SIZE_MASK=j.BLOCK_SIZE-1,j.MINIMUM_DIMENSION=j.BLOCK_SIZE*5,j.MIN_DYNAMIC_RANGE=24;class K{constructor(o,a){this.width=o,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,a,f,d){throw new J("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new J("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new J("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let a=new V;for(let f=0;f<this.height;f++){const d=this.getRow(f,o);for(let x=0;x<this.width;x++){const g=d[x]&255;let m;g<64?m="#":g<128?m="+":g<192?m=".":m=" ",a.append(m)}a.append(`
`)}return a.toString()}}class X extends K{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,a){const f=this.delegate.getRow(o,a),d=this.getWidth();for(let x=0;x<d;x++)f[x]=255-(f[x]&255);return f}getMatrix(){const o=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),f=new Uint8ClampedArray(a);for(let d=0;d<a;d++)f[d]=255-(o[d]&255);return f}isCropSupported(){return this.delegate.isCropSupported()}crop(o,a,f,d){return new X(this.delegate.crop(o,a,f,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new X(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new X(this.delegate.rotateCounterClockwise45())}}class te extends K{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=te.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const a=o.getContext("2d").getImageData(0,0,o.width,o.height);return te.toGrayscaleBuffer(a.data,o.width,o.height)}static toGrayscaleBuffer(o,a,f){const d=new Uint8ClampedArray(a*f);for(let x=0,g=0,m=o.length;x<m;x+=4,g++){let A;if(o[x+3]===0)A=255;else{const k=o[x],$=o[x+1],Q=o[x+2];A=306*k+601*$+117*Q+512>>10}d[g]=A}return d}getRow(o,a){if(o<0||o>=this.getHeight())throw new b("Requested row is outside the image: "+o);const f=this.getWidth(),d=o*f;return a===null?a=this.buffer.slice(d,d+f):(a.length<f&&(a=new Uint8ClampedArray(f)),a.set(this.buffer.slice(d,d+f))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,a,f,d){return super.crop(o,a,f,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const a=this.getTempCanvasElement(),f=a.getContext("2d"),d=o*te.DEGREE_TO_RADIANS,x=this.canvas.width,g=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(d))*x+Math.abs(Math.sin(d))*g),A=Math.ceil(Math.abs(Math.sin(d))*x+Math.abs(Math.cos(d))*g);return a.width=m,a.height=A,f.translate(m/2,A/2),f.rotate(d),f.drawImage(this.canvas,x/-2,g/-2),this.buffer=te.makeBufferFromCanvasImageData(a),this}invert(){return new X(this)}}te.DEGREE_TO_RADIANS=Math.PI/180;class z{constructor(o,a,f){this.deviceId=o,this.label=a,this.kind="videoinput",this.groupId=f||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var D=(globalThis||At||self||window||void 0)&&(globalThis||At||self||window||void 0).__awaiter||function(q,o,a,f){function d(x){return x instanceof a?x:new a(function(g){g(x)})}return new(a||(a=Promise))(function(x,g){function m(k){try{I(f.next(k))}catch($){g($)}}function A(k){try{I(f.throw(k))}catch($){g($)}}function I(k){k.done?x(k.value):d(k.value).then(m,A)}I((f=f.apply(q,o||[])).next())})};class G{constructor(o,a=500,f){this.reader=o,this.timeBetweenScansMillis=a,this._hints=f,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return D(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const f of o){const d=f.kind==="video"?"videoinput":f.kind;if(d!=="videoinput")continue;const x=f.deviceId||f.id,g=f.label||`Video device ${a.length+1}`,m=f.groupId,A={deviceId:x,label:g,kind:d,groupId:m};a.push(A)}return a})}getVideoInputDevices(){return D(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new z(a.deviceId,a.label))})}findDeviceById(o){return D(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(f=>f.deviceId===o):null})}decodeFromInputVideoDevice(o,a){return D(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,a)})}decodeOnceFromVideoDevice(o,a){return D(this,void 0,void 0,function*(){this.reset();let f;o?f={deviceId:{exact:o}}:f={facingMode:"environment"};const d={video:f};return yield this.decodeOnceFromConstraints(d,a)})}decodeOnceFromConstraints(o,a){return D(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(f,a)})}decodeOnceFromStream(o,a){return D(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(o,a);return yield this.decodeOnce(f)})}decodeFromInputVideoDeviceContinuously(o,a,f){return D(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,a,f)})}decodeFromVideoDevice(o,a,f){return D(this,void 0,void 0,function*(){let d;o?d={deviceId:{exact:o}}:d={facingMode:"environment"};const x={video:d};return yield this.decodeFromConstraints(x,a,f)})}decodeFromConstraints(o,a,f){return D(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(d,a,f)})}decodeFromStream(o,a,f){return D(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(o,a);return yield this.decodeContinuously(d,f)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,a){return D(this,void 0,void 0,function*(){const f=this.prepareVideoElement(a);return this.addVideoSource(f,o),this.videoElement=f,this.stream=o,yield this.playVideoOnLoadAsync(f),f})}playVideoOnLoadAsync(o){return new Promise((a,f)=>this.playVideoOnLoad(o,()=>a()))}playVideoOnLoad(o,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",a),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return D(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,a){const f=document.getElementById(o);if(!f)throw new p(`element with id '${o}' not found`);if(f.nodeName.toLowerCase()!==a.toLowerCase())throw new p(`element with id '${o}' must be an ${a} element`);return f}decodeFromImage(o,a){if(!o&&!a)throw new p("either imageElement with a src set or an url must be provided");return a&&!o?this.decodeFromImageUrl(a):this.decodeFromImageElement(o)}decodeFromVideo(o,a){if(!o&&!a)throw new p("Either an element with a src set or an URL must be provided");return a&&!o?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,a,f){if(o===void 0&&a===void 0)throw new p("Either an element with a src set or an URL must be provided");return a&&!o?this.decodeFromVideoUrlContinuously(a,f):this.decodeFromVideoElementContinuously(o,f)}decodeFromImageElement(o){if(!o)throw new p("An image element must be provided.");this.reset();const a=this.prepareImageElement(o);this.imageElement=a;let f;return this.isImageLoaded(a)?f=this.decodeOnce(a,!1,!0):f=this._decodeOnLoadImage(a),f}decodeFromVideoElement(o){const a=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(o,a){const f=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(f,a)}_decodeFromVideoElementSetup(o){if(!o)throw new p("A video element must be provided.");this.reset();const a=this.prepareVideoElement(o);return this.videoElement=a,a}decodeFromImageUrl(o){if(!o)throw new p("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const f=this._decodeOnLoadImage(a);return a.src=o,f}decodeFromVideoUrl(o){if(!o)throw new p("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),f=this.decodeFromVideoElement(a);return a.src=o,f}decodeFromVideoUrlContinuously(o,a){if(!o)throw new p("An URL must be provided.");this.reset();const f=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(f,a);return f.src=o,d}_decodeOnLoadImage(o){return new Promise((a,f)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(a,f),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return D(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,a){return D(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,a)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let a;return typeof o>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof o=="string"&&(a=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(a=o),a}prepareVideoElement(o){let a;return!o&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof o=="string"&&(a=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(a=o),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(o,a=!0,f=!0){this._stopAsyncDecode=!1;const d=(x,g)=>{if(this._stopAsyncDecode){g(new C("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(o);x(m)}catch(m){const A=a&&m instanceof C,k=(m instanceof w||m instanceof v)&&f;if(A||k)return setTimeout(d,this._timeBetweenDecodingAttempts,x,g);g(m)}};return new Promise((x,g)=>d(x,g))}decodeContinuously(o,a){this._stopContinuousDecode=!1;const f=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const d=this.decode(o);a(d,null),setTimeout(f,this.timeBetweenScansMillis)}catch(d){a(null,d);const x=d instanceof w||d instanceof v,g=d instanceof C;(x||g)&&setTimeout(f,this._timeBetweenDecodingAttempts)}};f()}decode(o){const a=this.createBinaryBitmap(o);return this.decodeBitmap(a)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,a,f){a||(a={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),f||(f=this.captureCanvasContext),f.drawImage(o,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(o,a,f=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),f||(f=this.captureCanvasContext),f.drawImage(o,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const a=this.getCaptureCanvas(o),f=new te(a),d=new j(f);return new y(d)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const f=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=f}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const a=this.createCaptureCanvas(o);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let f,d;return typeof o<"u"&&(o instanceof HTMLVideoElement?(f=o.videoWidth,d=o.videoHeight):o instanceof HTMLImageElement&&(f=o.naturalWidth||o.width,d=o.naturalHeight||o.height)),a.style.width=f+"px",a.style.height=d+"px",a.width=f,a.height=d,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,a){try{o.srcObject=a}catch{o.src=URL.createObjectURL(a)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class ue{constructor(o,a,f=a==null?0:8*a.length,d,x,g=S.currentTimeMillis()){this.text=o,this.rawBytes=a,this.numBits=f,this.resultPoints=d,this.format=x,this.timestamp=g,this.text=o,this.rawBytes=a,f==null?this.numBits=a==null?0:8*a.length:this.numBits=f,this.resultPoints=d,this.format=x,this.resultMetadata=null,g==null?this.timestamp=S.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,a)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const a=this.resultPoints;if(a===null)this.resultPoints=o;else if(o!==null&&o.length>0){const f=new Array(a.length+o.length);S.arraycopy(a,0,f,0,a.length),S.arraycopy(o,0,f,a.length,o.length),this.resultPoints=f}}getTimestamp(){return this.timestamp}toString(){return this.text}}var H;(function(q){q[q.AZTEC=0]="AZTEC",q[q.CODABAR=1]="CODABAR",q[q.CODE_39=2]="CODE_39",q[q.CODE_93=3]="CODE_93",q[q.CODE_128=4]="CODE_128",q[q.DATA_MATRIX=5]="DATA_MATRIX",q[q.EAN_8=6]="EAN_8",q[q.EAN_13=7]="EAN_13",q[q.ITF=8]="ITF",q[q.MAXICODE=9]="MAXICODE",q[q.PDF_417=10]="PDF_417",q[q.QR_CODE=11]="QR_CODE",q[q.RSS_14=12]="RSS_14",q[q.RSS_EXPANDED=13]="RSS_EXPANDED",q[q.UPC_A=14]="UPC_A",q[q.UPC_E=15]="UPC_E",q[q.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(H||(H={}));var fe=H,ie;(function(q){q[q.OTHER=0]="OTHER",q[q.ORIENTATION=1]="ORIENTATION",q[q.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",q[q.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",q[q.ISSUE_NUMBER=4]="ISSUE_NUMBER",q[q.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",q[q.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",q[q.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",q[q.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",q[q.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",q[q.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ie||(ie={}));var re=ie;class se{constructor(o,a,f,d,x=-1,g=-1){this.rawBytes=o,this.text=a,this.byteSegments=f,this.ecLevel=d,this.structuredAppendSequenceNumber=x,this.structuredAppendParity=g,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class B{exp(o){return this.expTable[o]}log(o){if(o===0)throw new b;return this.logTable[o]}static addOrSubtract(o,a){return o^a}}class ee{constructor(o,a){if(a.length===0)throw new b;this.field=o;const f=a.length;if(f>1&&a[0]===0){let d=1;for(;d<f&&a[d]===0;)d++;d===f?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(f-d),S.arraycopy(a,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const a=this.coefficients;let f;if(o===1){f=0;for(let g=0,m=a.length;g!==m;g++){const A=a[g];f=B.addOrSubtract(f,A)}return f}f=a[0];const d=a.length,x=this.field;for(let g=1;g<d;g++)f=B.addOrSubtract(x.multiply(o,f),a[g]);return f}addOrSubtract(o){if(!this.field.equals(o.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let a=this.coefficients,f=o.coefficients;if(a.length>f.length){const g=a;a=f,f=g}let d=new Int32Array(f.length);const x=f.length-a.length;S.arraycopy(f,0,d,0,x);for(let g=x;g<f.length;g++)d[g]=B.addOrSubtract(a[g-x],f[g]);return new ee(this.field,d)}multiply(o){if(!this.field.equals(o.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const a=this.coefficients,f=a.length,d=o.coefficients,x=d.length,g=new Int32Array(f+x-1),m=this.field;for(let A=0;A<f;A++){const I=a[A];for(let k=0;k<x;k++)g[A+k]=B.addOrSubtract(g[A+k],m.multiply(I,d[k]))}return new ee(m,g)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const a=this.coefficients.length,f=this.field,d=new Int32Array(a),x=this.coefficients;for(let g=0;g<a;g++)d[g]=f.multiply(x[g],o);return new ee(f,d)}multiplyByMonomial(o,a){if(o<0)throw new b;if(a===0)return this.field.getZero();const f=this.coefficients,d=f.length,x=new Int32Array(d+o),g=this.field;for(let m=0;m<d;m++)x[m]=g.multiply(f[m],a);return new ee(g,x)}divide(o){if(!this.field.equals(o.field))throw new b("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new b("Divide by 0");const a=this.field;let f=a.getZero(),d=this;const x=o.getCoefficient(o.getDegree()),g=a.inverse(x);for(;d.getDegree()>=o.getDegree()&&!d.isZero();){const m=d.getDegree()-o.getDegree(),A=a.multiply(d.getCoefficient(d.getDegree()),g),I=o.multiplyByMonomial(m,A),k=a.buildMonomial(m,A);f=f.addOrSubtract(k),d=d.addOrSubtract(I)}return[f,d]}toString(){let o="";for(let a=this.getDegree();a>=0;a--){let f=this.getCoefficient(a);if(f!==0){if(f<0?(o+=" - ",f=-f):o.length>0&&(o+=" + "),a===0||f!==1){const d=this.field.log(f);d===0?o+="1":d===1?o+="a":(o+="a^",o+=d)}a!==0&&(a===1?o+="x":(o+="x^",o+=a))}}return o}}class de extends u{}de.kind="ArithmeticException";class Ae extends B{constructor(o,a,f){super(),this.primitive=o,this.size=a,this.generatorBase=f;const d=new Int32Array(a);let x=1;for(let m=0;m<a;m++)d[m]=x,x*=2,x>=a&&(x^=o,x&=a-1);this.expTable=d;const g=new Int32Array(a);for(let m=0;m<a-1;m++)g[d[m]]=m;this.logTable=g,this.zero=new ee(this,Int32Array.from([0])),this.one=new ee(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,a){if(o<0)throw new b;if(a===0)return this.zero;const f=new Int32Array(o+1);return f[0]=a,new ee(this,f)}inverse(o){if(o===0)throw new de;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,a){return o===0||a===0?0:this.expTable[(this.logTable[o]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+O.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}Ae.AZTEC_DATA_12=new Ae(4201,4096,1),Ae.AZTEC_DATA_10=new Ae(1033,1024,1),Ae.AZTEC_DATA_6=new Ae(67,64,1),Ae.AZTEC_PARAM=new Ae(19,16,1),Ae.QR_CODE_FIELD_256=new Ae(285,256,0),Ae.DATA_MATRIX_FIELD_256=new Ae(301,256,1),Ae.AZTEC_DATA_8=Ae.DATA_MATRIX_FIELD_256,Ae.MAXICODE_FIELD_64=Ae.AZTEC_DATA_6;class Se extends u{}Se.kind="ReedSolomonException";class Pe extends u{}Pe.kind="IllegalStateException";class pt{constructor(o){this.field=o}decode(o,a){const f=this.field,d=new ee(f,o),x=new Int32Array(a);let g=!0;for(let ce=0;ce<a;ce++){const xe=d.evaluateAt(f.exp(ce+f.getGeneratorBase()));x[x.length-1-ce]=xe,xe!==0&&(g=!1)}if(g)return;const m=new ee(f,x),A=this.runEuclideanAlgorithm(f.buildMonomial(a,1),m,a),I=A[0],k=A[1],$=this.findErrorLocations(I),Q=this.findErrorMagnitudes(k,$);for(let ce=0;ce<$.length;ce++){const xe=o.length-1-f.log($[ce]);if(xe<0)throw new Se("Bad error location");o[xe]=Ae.addOrSubtract(o[xe],Q[ce])}}runEuclideanAlgorithm(o,a,f){if(o.getDegree()<a.getDegree()){const ce=o;o=a,a=ce}const d=this.field;let x=o,g=a,m=d.getZero(),A=d.getOne();for(;g.getDegree()>=(f/2|0);){let ce=x,xe=m;if(x=g,m=A,x.isZero())throw new Se("r_{i-1} was zero");g=ce;let ge=d.getZero();const ye=x.getCoefficient(x.getDegree()),_e=d.inverse(ye);for(;g.getDegree()>=x.getDegree()&&!g.isZero();){const Fe=g.getDegree()-x.getDegree(),Le=d.multiply(g.getCoefficient(g.getDegree()),_e);ge=ge.addOrSubtract(d.buildMonomial(Fe,Le)),g=g.addOrSubtract(x.multiplyByMonomial(Fe,Le))}if(A=ge.multiply(m).addOrSubtract(xe),g.getDegree()>=x.getDegree())throw new Pe("Division algorithm failed to reduce polynomial?")}const I=A.getCoefficient(0);if(I===0)throw new Se("sigmaTilde(0) was zero");const k=d.inverse(I),$=A.multiplyScalar(k),Q=g.multiplyScalar(k);return[$,Q]}findErrorLocations(o){const a=o.getDegree();if(a===1)return Int32Array.from([o.getCoefficient(1)]);const f=new Int32Array(a);let d=0;const x=this.field;for(let g=1;g<x.getSize()&&d<a;g++)o.evaluateAt(g)===0&&(f[d]=x.inverse(g),d++);if(d!==a)throw new Se("Error locator degree does not match number of roots");return f}findErrorMagnitudes(o,a){const f=a.length,d=new Int32Array(f),x=this.field;for(let g=0;g<f;g++){const m=x.inverse(a[g]);let A=1;for(let I=0;I<f;I++)if(g!==I){const k=x.multiply(a[I],m),$=k&1?k&-2:k|1;A=x.multiply(A,$)}d[g]=x.multiply(o.evaluateAt(m),x.inverse(A)),x.getGeneratorBase()!==0&&(d[g]=x.multiply(d[g],m))}return d}}var je;(function(q){q[q.UPPER=0]="UPPER",q[q.LOWER=1]="LOWER",q[q.MIXED=2]="MIXED",q[q.DIGIT=3]="DIGIT",q[q.PUNCT=4]="PUNCT",q[q.BINARY=5]="BINARY"})(je||(je={}));class Ge{decode(o){this.ddata=o;let a=o.getBits(),f=this.extractBits(a),d=this.correctBits(f),x=Ge.convertBoolArrayToByteArray(d),g=Ge.getEncodedData(d),m=new se(x,g,null,null);return m.setNumBits(d.length),m}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let a=o.length,f=je.UPPER,d=je.UPPER,x="",g=0;for(;g<a;)if(d===je.BINARY){if(a-g<5)break;let m=Ge.readCode(o,g,5);if(g+=5,m===0){if(a-g<11)break;m=Ge.readCode(o,g,11)+31,g+=11}for(let A=0;A<m;A++){if(a-g<8){g=a;break}const I=Ge.readCode(o,g,8);x+=le.castAsNonUtf8Char(I),g+=8}d=f}else{let m=d===je.DIGIT?4:5;if(a-g<m)break;let A=Ge.readCode(o,g,m);g+=m;let I=Ge.getCharacter(d,A);I.startsWith("CTRL_")?(f=d,d=Ge.getTable(I.charAt(5)),I.charAt(6)==="L"&&(f=d)):(x+=I,d=f)}return x}static getTable(o){switch(o){case"L":return je.LOWER;case"P":return je.PUNCT;case"M":return je.MIXED;case"D":return je.DIGIT;case"B":return je.BINARY;case"U":default:return je.UPPER}}static getCharacter(o,a){switch(o){case je.UPPER:return Ge.UPPER_TABLE[a];case je.LOWER:return Ge.LOWER_TABLE[a];case je.MIXED:return Ge.MIXED_TABLE[a];case je.PUNCT:return Ge.PUNCT_TABLE[a];case je.DIGIT:return Ge.DIGIT_TABLE[a];default:throw new Pe("Bad table")}}correctBits(o){let a,f;this.ddata.getNbLayers()<=2?(f=6,a=Ae.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(f=8,a=Ae.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(f=10,a=Ae.AZTEC_DATA_10):(f=12,a=Ae.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),x=o.length/f;if(x<d)throw new v;let g=o.length%f,m=new Int32Array(x);for(let Q=0;Q<x;Q++,g+=f)m[Q]=Ge.readCode(o,g,f);try{new pt(a).decode(m,x-d)}catch(Q){throw new v(Q)}let A=(1<<f)-1,I=0;for(let Q=0;Q<d;Q++){let ce=m[Q];if(ce===0||ce===A)throw new v;(ce===1||ce===A-1)&&I++}let k=new Array(d*f-I),$=0;for(let Q=0;Q<d;Q++){let ce=m[Q];if(ce===1||ce===A-1)k.fill(ce>1,$,$+f-1),$+=f-1;else for(let xe=f-1;xe>=0;--xe)k[$++]=(ce&1<<xe)!==0}return k}extractBits(o){let a=this.ddata.isCompact(),f=this.ddata.getNbLayers(),d=(a?11:14)+f*4,x=new Int32Array(d),g=new Array(this.totalBitsInLayer(f,a));if(a)for(let m=0;m<x.length;m++)x[m]=m;else{let m=d+1+2*O.truncDivision(O.truncDivision(d,2)-1,15),A=d/2,I=O.truncDivision(m,2);for(let k=0;k<A;k++){let $=k+O.truncDivision(k,15);x[A-k-1]=I-$-1,x[A+k]=I+$+1}}for(let m=0,A=0;m<f;m++){let I=(f-m)*4+(a?9:12),k=m*2,$=d-1-k;for(let Q=0;Q<I;Q++){let ce=Q*2;for(let xe=0;xe<2;xe++)g[A+ce+xe]=o.get(x[k+xe],x[k+Q]),g[A+2*I+ce+xe]=o.get(x[k+Q],x[$-xe]),g[A+4*I+ce+xe]=o.get(x[$-xe],x[$-Q]),g[A+6*I+ce+xe]=o.get(x[$-Q],x[k+xe])}A+=I*8}return g}static readCode(o,a,f){let d=0;for(let x=a;x<a+f;x++)d<<=1,o[x]&&(d|=1);return d}static readByte(o,a){let f=o.length-a;return f>=8?Ge.readCode(o,a,8):Ge.readCode(o,a,f)<<8-f}static convertBoolArrayToByteArray(o){let a=new Uint8Array((o.length+7)/8);for(let f=0;f<a.length;f++)a[f]=Ge.readByte(o,8*f);return a}totalBitsInLayer(o,a){return((a?88:112)+16*o)*o}}Ge.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ge.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ge.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ge.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ge.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Je{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,a,f,d){const x=o-f,g=a-d;return Math.sqrt(x*x+g*g)}static sum(o){let a=0;for(let f=0,d=o.length;f!==d;f++){const x=o[f];a+=x}return a}}class Ze{static floatToIntBits(o){return o}}Ze.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ce{constructor(o,a){this.x=o,this.y=a}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof Ce){const a=o;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*Ze.floatToIntBits(this.x)+Ze.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const a=this.distance(o[0],o[1]),f=this.distance(o[1],o[2]),d=this.distance(o[0],o[2]);let x,g,m;if(f>=a&&f>=d?(g=o[0],x=o[1],m=o[2]):d>=f&&d>=a?(g=o[1],x=o[0],m=o[2]):(g=o[2],x=o[0],m=o[1]),this.crossProductZ(x,g,m)<0){const A=x;x=m,m=A}o[0]=x,o[1]=g,o[2]=m}static distance(o,a){return Je.distance(o.x,o.y,a.x,a.y)}static crossProductZ(o,a,f){const d=a.x,x=a.y;return(f.x-d)*(o.y-x)-(f.y-x)*(o.x-d)}}class ut{constructor(o,a){this.bits=o,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Ye extends ut{constructor(o,a,f,d,x){super(o,a),this.compact=f,this.nbDatablocks=d,this.nbLayers=x}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class $e{constructor(o,a,f,d){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),a==null&&(a=$e.INIT_SIZE),f==null&&(f=o.getWidth()/2|0),d==null&&(d=o.getHeight()/2|0);const x=a/2|0;if(this.leftInit=f-x,this.rightInit=f+x,this.upInit=d-x,this.downInit=d+x,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new C}detect(){let o=this.leftInit,a=this.rightInit,f=this.upInit,d=this.downInit,x=!1,g=!0,m=!1,A=!1,I=!1,k=!1,$=!1;const Q=this.width,ce=this.height;for(;g;){g=!1;let xe=!0;for(;(xe||!A)&&a<Q;)xe=this.containsBlackPoint(f,d,a,!1),xe?(a++,g=!0,A=!0):A||a++;if(a>=Q){x=!0;break}let ge=!0;for(;(ge||!I)&&d<ce;)ge=this.containsBlackPoint(o,a,d,!0),ge?(d++,g=!0,I=!0):I||d++;if(d>=ce){x=!0;break}let ye=!0;for(;(ye||!k)&&o>=0;)ye=this.containsBlackPoint(f,d,o,!1),ye?(o--,g=!0,k=!0):k||o--;if(o<0){x=!0;break}let _e=!0;for(;(_e||!$)&&f>=0;)_e=this.containsBlackPoint(o,a,f,!0),_e?(f--,g=!0,$=!0):$||f--;if(f<0){x=!0;break}g&&(m=!0)}if(!x&&m){const xe=a-o;let ge=null;for(let Le=1;ge===null&&Le<xe;Le++)ge=this.getBlackPointOnSegment(o,d-Le,o+Le,d);if(ge==null)throw new C;let ye=null;for(let Le=1;ye===null&&Le<xe;Le++)ye=this.getBlackPointOnSegment(o,f+Le,o+Le,f);if(ye==null)throw new C;let _e=null;for(let Le=1;_e===null&&Le<xe;Le++)_e=this.getBlackPointOnSegment(a,f+Le,a-Le,f);if(_e==null)throw new C;let Fe=null;for(let Le=1;Fe===null&&Le<xe;Le++)Fe=this.getBlackPointOnSegment(a,d-Le,a-Le,d);if(Fe==null)throw new C;return this.centerEdges(Fe,ge,_e,ye)}else throw new C}getBlackPointOnSegment(o,a,f,d){const x=Je.round(Je.distance(o,a,f,d)),g=(f-o)/x,m=(d-a)/x,A=this.image;for(let I=0;I<x;I++){const k=Je.round(o+I*g),$=Je.round(a+I*m);if(A.get(k,$))return new Ce(k,$)}return null}centerEdges(o,a,f,d){const x=o.getX(),g=o.getY(),m=a.getX(),A=a.getY(),I=f.getX(),k=f.getY(),$=d.getX(),Q=d.getY(),ce=$e.CORR;return x<this.width/2?[new Ce($-ce,Q+ce),new Ce(m+ce,A+ce),new Ce(I-ce,k-ce),new Ce(x+ce,g-ce)]:[new Ce($+ce,Q+ce),new Ce(m+ce,A-ce),new Ce(I-ce,k+ce),new Ce(x-ce,g-ce)]}containsBlackPoint(o,a,f,d){const x=this.image;if(d){for(let g=o;g<=a;g++)if(x.get(g,f))return!0}else for(let g=o;g<=a;g++)if(x.get(f,g))return!0;return!1}}$e.INIT_SIZE=10,$e.CORR=1;class _t{static checkAndNudgePoints(o,a){const f=o.getWidth(),d=o.getHeight();let x=!0;for(let g=0;g<a.length&&x;g+=2){const m=Math.floor(a[g]),A=Math.floor(a[g+1]);if(m<-1||m>f||A<-1||A>d)throw new C;x=!1,m===-1?(a[g]=0,x=!0):m===f&&(a[g]=f-1,x=!0),A===-1?(a[g+1]=0,x=!0):A===d&&(a[g+1]=d-1,x=!0)}x=!0;for(let g=a.length-2;g>=0&&x;g-=2){const m=Math.floor(a[g]),A=Math.floor(a[g+1]);if(m<-1||m>f||A<-1||A>d)throw new C;x=!1,m===-1?(a[g]=0,x=!0):m===f&&(a[g]=f-1,x=!0),A===-1?(a[g+1]=0,x=!0):A===d&&(a[g+1]=d-1,x=!0)}}}class He{constructor(o,a,f,d,x,g,m,A,I){this.a11=o,this.a21=a,this.a31=f,this.a12=d,this.a22=x,this.a32=g,this.a13=m,this.a23=A,this.a33=I}static quadrilateralToQuadrilateral(o,a,f,d,x,g,m,A,I,k,$,Q,ce,xe,ge,ye){const _e=He.quadrilateralToSquare(o,a,f,d,x,g,m,A);return He.squareToQuadrilateral(I,k,$,Q,ce,xe,ge,ye).times(_e)}transformPoints(o){const a=o.length,f=this.a11,d=this.a12,x=this.a13,g=this.a21,m=this.a22,A=this.a23,I=this.a31,k=this.a32,$=this.a33;for(let Q=0;Q<a;Q+=2){const ce=o[Q],xe=o[Q+1],ge=x*ce+A*xe+$;o[Q]=(f*ce+g*xe+I)/ge,o[Q+1]=(d*ce+m*xe+k)/ge}}transformPointsWithValues(o,a){const f=this.a11,d=this.a12,x=this.a13,g=this.a21,m=this.a22,A=this.a23,I=this.a31,k=this.a32,$=this.a33,Q=o.length;for(let ce=0;ce<Q;ce++){const xe=o[ce],ge=a[ce],ye=x*xe+A*ge+$;o[ce]=(f*xe+g*ge+I)/ye,a[ce]=(d*xe+m*ge+k)/ye}}static squareToQuadrilateral(o,a,f,d,x,g,m,A){const I=o-f+x-m,k=a-d+g-A;if(I===0&&k===0)return new He(f-o,x-f,o,d-a,g-d,a,0,0,1);{const $=f-x,Q=m-x,ce=d-g,xe=A-g,ge=$*xe-Q*ce,ye=(I*xe-Q*k)/ge,_e=($*k-I*ce)/ge;return new He(f-o+ye*f,m-o+_e*m,o,d-a+ye*d,A-a+_e*A,a,ye,_e,1)}}static quadrilateralToSquare(o,a,f,d,x,g,m,A){return He.squareToQuadrilateral(o,a,f,d,x,g,m,A).buildAdjoint()}buildAdjoint(){return new He(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new He(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class We extends _t{sampleGrid(o,a,f,d,x,g,m,A,I,k,$,Q,ce,xe,ge,ye,_e,Fe,Le){const Be=He.quadrilateralToQuadrilateral(d,x,g,m,A,I,k,$,Q,ce,xe,ge,ye,_e,Fe,Le);return this.sampleGridWithTransform(o,a,f,Be)}sampleGridWithTransform(o,a,f,d){if(a<=0||f<=0)throw new C;const x=new E(a,f),g=new Float32Array(2*a);for(let m=0;m<f;m++){const A=g.length,I=m+.5;for(let k=0;k<A;k+=2)g[k]=k/2+.5,g[k+1]=I;d.transformPoints(g),_t.checkAndNudgePoints(o,g);try{for(let k=0;k<A;k+=2)o.get(Math.floor(g[k]),Math.floor(g[k+1]))&&x.set(k/2,m)}catch{throw new C}}return x}}class wt{static setGridSampler(o){wt.gridSampler=o}static getInstance(){return wt.gridSampler}}wt.gridSampler=new We;class Ve{constructor(o,a){this.x=o,this.y=a}toResultPoint(){return new Ce(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Xe{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let a=this.getMatrixCenter(),f=this.getBullsEyeCorners(a);if(o){let g=f[0];f[0]=f[2],f[2]=g}this.extractParameters(f);let d=this.sampleGrid(this.image,f[this.shift%4],f[(this.shift+1)%4],f[(this.shift+2)%4],f[(this.shift+3)%4]),x=this.getMatrixCornerPoints(f);return new Ye(d,x,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new C;let a=2*this.nbCenterLayers,f=new Int32Array([this.sampleLine(o[0],o[1],a),this.sampleLine(o[1],o[2],a),this.sampleLine(o[2],o[3],a),this.sampleLine(o[3],o[0],a)]);this.shift=this.getRotation(f,a);let d=0;for(let g=0;g<4;g++){let m=f[(this.shift+g)%4];this.compact?(d<<=7,d+=m>>1&127):(d<<=10,d+=(m>>2&992)+(m>>1&31))}let x=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(x>>6)+1,this.nbDataBlocks=(x&63)+1):(this.nbLayers=(x>>11)+1,this.nbDataBlocks=(x&2047)+1)}getRotation(o,a){let f=0;o.forEach((d,x,g)=>{let m=(d>>a-2<<1)+(d&1);f=(f<<3)+m}),f=((f&1)<<11)+(f>>1);for(let d=0;d<4;d++)if(O.bitCount(f^this.EXPECTED_CORNER_BITS[d])<=2)return d;throw new C}getCorrectedParameterData(o,a){let f,d;a?(f=7,d=2):(f=10,d=4);let x=f-d,g=new Int32Array(f);for(let A=f-1;A>=0;--A)g[A]=o&15,o>>=4;try{new pt(Ae.AZTEC_PARAM).decode(g,x)}catch{throw new C}let m=0;for(let A=0;A<d;A++)m=(m<<4)+g[A];return m}getBullsEyeCorners(o){let a=o,f=o,d=o,x=o,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let $=this.getFirstDifferent(a,g,1,-1),Q=this.getFirstDifferent(f,g,1,1),ce=this.getFirstDifferent(d,g,-1,1),xe=this.getFirstDifferent(x,g,-1,-1);if(this.nbCenterLayers>2){let ge=this.distancePoint(xe,$)*this.nbCenterLayers/(this.distancePoint(x,a)*(this.nbCenterLayers+2));if(ge<.75||ge>1.25||!this.isWhiteOrBlackRectangle($,Q,ce,xe))break}a=$,f=Q,d=ce,x=xe,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new C;this.compact=this.nbCenterLayers===5;let m=new Ce(a.getX()+.5,a.getY()-.5),A=new Ce(f.getX()+.5,f.getY()+.5),I=new Ce(d.getX()-.5,d.getY()+.5),k=new Ce(x.getX()-.5,x.getY()-.5);return this.expandSquare([m,A,I,k],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,a,f,d;try{let m=new $e(this.image).detect();o=m[0],a=m[1],f=m[2],d=m[3]}catch{let A=this.image.getWidth()/2,I=this.image.getHeight()/2;o=this.getFirstDifferent(new Ve(A+7,I-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Ve(A+7,I+7),!1,1,1).toResultPoint(),f=this.getFirstDifferent(new Ve(A-7,I+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new Ve(A-7,I-7),!1,-1,-1).toResultPoint()}let x=Je.round((o.getX()+d.getX()+a.getX()+f.getX())/4),g=Je.round((o.getY()+d.getY()+a.getY()+f.getY())/4);try{let m=new $e(this.image,15,x,g).detect();o=m[0],a=m[1],f=m[2],d=m[3]}catch{o=this.getFirstDifferent(new Ve(x+7,g-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Ve(x+7,g+7),!1,1,1).toResultPoint(),f=this.getFirstDifferent(new Ve(x-7,g+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new Ve(x-7,g-7),!1,-1,-1).toResultPoint()}return x=Je.round((o.getX()+d.getX()+a.getX()+f.getX())/4),g=Je.round((o.getY()+d.getY()+a.getY()+f.getY())/4),new Ve(x,g)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,a,f,d,x){let g=wt.getInstance(),m=this.getDimension(),A=m/2-this.nbCenterLayers,I=m/2+this.nbCenterLayers;return g.sampleGrid(o,m,m,A,A,I,A,I,I,A,I,a.getX(),a.getY(),f.getX(),f.getY(),d.getX(),d.getY(),x.getX(),x.getY())}sampleLine(o,a,f){let d=0,x=this.distanceResultPoint(o,a),g=x/f,m=o.getX(),A=o.getY(),I=g*(a.getX()-o.getX())/x,k=g*(a.getY()-o.getY())/x;for(let $=0;$<f;$++)this.image.get(Je.round(m+$*I),Je.round(A+$*k))&&(d|=1<<f-$-1);return d}isWhiteOrBlackRectangle(o,a,f,d){let x=3;o=new Ve(o.getX()-x,o.getY()+x),a=new Ve(a.getX()-x,a.getY()-x),f=new Ve(f.getX()+x,f.getY()-x),d=new Ve(d.getX()+x,d.getY()+x);let g=this.getColor(d,o);if(g===0)return!1;let m=this.getColor(o,a);return m!==g||(m=this.getColor(a,f),m!==g)?!1:(m=this.getColor(f,d),m===g)}getColor(o,a){let f=this.distancePoint(o,a),d=(a.getX()-o.getX())/f,x=(a.getY()-o.getY())/f,g=0,m=o.getX(),A=o.getY(),I=this.image.get(o.getX(),o.getY()),k=Math.ceil(f);for(let Q=0;Q<k;Q++)m+=d,A+=x,this.image.get(Je.round(m),Je.round(A))!==I&&g++;let $=g/f;return $>.1&&$<.9?0:$<=.1===I?1:-1}getFirstDifferent(o,a,f,d){let x=o.getX()+f,g=o.getY()+d;for(;this.isValid(x,g)&&this.image.get(x,g)===a;)x+=f,g+=d;for(x-=f,g-=d;this.isValid(x,g)&&this.image.get(x,g)===a;)x+=f;for(x-=f;this.isValid(x,g)&&this.image.get(x,g)===a;)g+=d;return g-=d,new Ve(x,g)}expandSquare(o,a,f){let d=f/(2*a),x=o[0].getX()-o[2].getX(),g=o[0].getY()-o[2].getY(),m=(o[0].getX()+o[2].getX())/2,A=(o[0].getY()+o[2].getY())/2,I=new Ce(m+d*x,A+d*g),k=new Ce(m-d*x,A-d*g);x=o[1].getX()-o[3].getX(),g=o[1].getY()-o[3].getY(),m=(o[1].getX()+o[3].getX())/2,A=(o[1].getY()+o[3].getY())/2;let $=new Ce(m+d*x,A+d*g),Q=new Ce(m-d*x,A-d*g);return[I,$,k,Q]}isValid(o,a){return o>=0&&o<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(o){let a=Je.round(o.getX()),f=Je.round(o.getY());return this.isValid(a,f)}distancePoint(o,a){return Je.distance(o.getX(),o.getY(),a.getX(),a.getY())}distanceResultPoint(o,a){return Je.distance(o.getX(),o.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(O.truncDivision(this.nbLayers-4,8)+1)+15}}class Ct{decode(o,a=null){let f=null,d=new Xe(o.getBlackMatrix()),x=null,g=null;try{let k=d.detectMirror(!1);x=k.getPoints(),this.reportFoundResultPoints(a,x),g=new Ge().decode(k)}catch(k){f=k}if(g==null)try{let k=d.detectMirror(!0);x=k.getPoints(),this.reportFoundResultPoints(a,x),g=new Ge().decode(k)}catch(k){throw f??k}let m=new ue(g.getText(),g.getRawBytes(),g.getNumBits(),x,fe.AZTEC,S.currentTimeMillis()),A=g.getByteSegments();A!=null&&m.putMetadata(re.BYTE_SEGMENTS,A);let I=g.getECLevel();return I!=null&&m.putMetadata(re.ERROR_CORRECTION_LEVEL,I),m}reportFoundResultPoints(o,a){if(o!=null){let f=o.get(R.NEED_RESULT_POINT_CALLBACK);f!=null&&a.forEach((d,x,g)=>{f.foundPossibleResultPoint(d)})}}reset(){}}class nt extends G{constructor(o=500){super(new Ct,o)}}class Ke{decode(o,a){try{return this.doDecode(o,a)}catch{if(a&&a.get(R.TRY_HARDER)===!0&&o.isRotateSupported()){const x=o.rotateCounterClockwise(),g=this.doDecode(x,a),m=g.getResultMetadata();let A=270;m!==null&&m.get(re.ORIENTATION)===!0&&(A=A+m.get(re.ORIENTATION)%360),g.putMetadata(re.ORIENTATION,A);const I=g.getResultPoints();if(I!==null){const k=x.getHeight();for(let $=0;$<I.length;$++)I[$]=new Ce(k-I[$].getY()-1,I[$].getX())}return g}else throw new C}}reset(){}doDecode(o,a){const f=o.getWidth(),d=o.getHeight();let x=new M(f);const g=a&&a.get(R.TRY_HARDER)===!0,m=Math.max(1,d>>(g?8:5));let A;g?A=d:A=15;const I=Math.trunc(d/2);for(let k=0;k<A;k++){const $=Math.trunc((k+1)/2),Q=(k&1)===0,ce=I+m*(Q?$:-$);if(ce<0||ce>=d)break;try{x=o.getBlackRow(ce,x)}catch{continue}for(let xe=0;xe<2;xe++){if(xe===1&&(x.reverse(),a&&a.get(R.NEED_RESULT_POINT_CALLBACK)===!0)){const ge=new Map;a.forEach((ye,_e)=>ge.set(_e,ye)),ge.delete(R.NEED_RESULT_POINT_CALLBACK),a=ge}try{const ge=this.decodeRow(ce,x,a);if(xe===1){ge.putMetadata(re.ORIENTATION,180);const ye=ge.getResultPoints();ye!==null&&(ye[0]=new Ce(f-ye[0].getX()-1,ye[0].getY()),ye[1]=new Ce(f-ye[1].getX()-1,ye[1].getY()))}return ge}catch{}}}throw new C}static recordPattern(o,a,f){const d=f.length;for(let I=0;I<d;I++)f[I]=0;const x=o.getSize();if(a>=x)throw new C;let g=!o.get(a),m=0,A=a;for(;A<x;){if(o.get(A)!==g)f[m]++;else{if(++m===d)break;f[m]=1,g=!g}A++}if(!(m===d||m===d-1&&A===x))throw new C}static recordPatternInReverse(o,a,f){let d=f.length,x=o.get(a);for(;a>0&&d>=0;)o.get(--a)!==x&&(d--,x=!x);if(d>=0)throw new C;Ke.recordPattern(o,a+1,f)}static patternMatchVariance(o,a,f){const d=o.length;let x=0,g=0;for(let I=0;I<d;I++)x+=o[I],g+=a[I];if(x<g)return Number.POSITIVE_INFINITY;const m=x/g;f*=m;let A=0;for(let I=0;I<d;I++){const k=o[I],$=a[I]*m,Q=k>$?k-$:$-k;if(Q>f)return Number.POSITIVE_INFINITY;A+=Q}return A/x}}class Ie extends Ke{static findStartPattern(o){const a=o.getSize(),f=o.getNextSet(0);let d=0,x=Int32Array.from([0,0,0,0,0,0]),g=f,m=!1;const A=6;for(let I=f;I<a;I++)if(o.get(I)!==m)x[d]++;else{if(d===A-1){let k=Ie.MAX_AVG_VARIANCE,$=-1;for(let Q=Ie.CODE_START_A;Q<=Ie.CODE_START_C;Q++){const ce=Ke.patternMatchVariance(x,Ie.CODE_PATTERNS[Q],Ie.MAX_INDIVIDUAL_VARIANCE);ce<k&&(k=ce,$=Q)}if($>=0&&o.isRange(Math.max(0,g-(I-g)/2),g,!1))return Int32Array.from([g,I,$]);g+=x[0]+x[1],x=x.slice(2,x.length-1),x[d-1]=0,x[d]=0,d--}else d++;x[d]=1,m=!m}throw new C}static decodeCode(o,a,f){Ke.recordPattern(o,f,a);let d=Ie.MAX_AVG_VARIANCE,x=-1;for(let g=0;g<Ie.CODE_PATTERNS.length;g++){const m=Ie.CODE_PATTERNS[g],A=this.patternMatchVariance(a,m,Ie.MAX_INDIVIDUAL_VARIANCE);A<d&&(d=A,x=g)}if(x>=0)return x;throw new C}decodeRow(o,a,f){const d=f&&f.get(R.ASSUME_GS1)===!0,x=Ie.findStartPattern(a),g=x[2];let m=0;const A=new Uint8Array(20);A[m++]=g;let I;switch(g){case Ie.CODE_START_A:I=Ie.CODE_CODE_A;break;case Ie.CODE_START_B:I=Ie.CODE_CODE_B;break;case Ie.CODE_START_C:I=Ie.CODE_CODE_C;break;default:throw new v}let k=!1,$=!1,Q="",ce=x[0],xe=x[1];const ge=Int32Array.from([0,0,0,0,0,0]);let ye=0,_e=0,Fe=g,Le=0,Be=!0,rr=!1,jt=!1;for(;!k;){const Nc=$;switch($=!1,ye=_e,_e=Ie.decodeCode(a,ge,xe),A[m++]=_e,_e!==Ie.CODE_STOP&&(Be=!0),_e!==Ie.CODE_STOP&&(Le++,Fe+=Le*_e),ce=xe,xe+=ge.reduce((hC,dC)=>hC+dC,0),_e){case Ie.CODE_START_A:case Ie.CODE_START_B:case Ie.CODE_START_C:throw new v}switch(I){case Ie.CODE_CODE_A:if(_e<64)jt===rr?Q+=String.fromCharCode(32+_e):Q+=String.fromCharCode(32+_e+128),jt=!1;else if(_e<96)jt===rr?Q+=String.fromCharCode(_e-64):Q+=String.fromCharCode(_e+64),jt=!1;else switch(_e!==Ie.CODE_STOP&&(Be=!1),_e){case Ie.CODE_FNC_1:d&&(Q.length===0?Q+="]C1":Q+="");break;case Ie.CODE_FNC_2:case Ie.CODE_FNC_3:break;case Ie.CODE_FNC_4_A:!rr&&jt?(rr=!0,jt=!1):rr&&jt?(rr=!1,jt=!1):jt=!0;break;case Ie.CODE_SHIFT:$=!0,I=Ie.CODE_CODE_B;break;case Ie.CODE_CODE_B:I=Ie.CODE_CODE_B;break;case Ie.CODE_CODE_C:I=Ie.CODE_CODE_C;break;case Ie.CODE_STOP:k=!0;break}break;case Ie.CODE_CODE_B:if(_e<96)jt===rr?Q+=String.fromCharCode(32+_e):Q+=String.fromCharCode(32+_e+128),jt=!1;else switch(_e!==Ie.CODE_STOP&&(Be=!1),_e){case Ie.CODE_FNC_1:d&&(Q.length===0?Q+="]C1":Q+="");break;case Ie.CODE_FNC_2:case Ie.CODE_FNC_3:break;case Ie.CODE_FNC_4_B:!rr&&jt?(rr=!0,jt=!1):rr&&jt?(rr=!1,jt=!1):jt=!0;break;case Ie.CODE_SHIFT:$=!0,I=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_A:I=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_C:I=Ie.CODE_CODE_C;break;case Ie.CODE_STOP:k=!0;break}break;case Ie.CODE_CODE_C:if(_e<100)_e<10&&(Q+="0"),Q+=_e;else switch(_e!==Ie.CODE_STOP&&(Be=!1),_e){case Ie.CODE_FNC_1:d&&(Q.length===0?Q+="]C1":Q+="");break;case Ie.CODE_CODE_A:I=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_B:I=Ie.CODE_CODE_B;break;case Ie.CODE_STOP:k=!0;break}break}Nc&&(I=I===Ie.CODE_CODE_A?Ie.CODE_CODE_B:Ie.CODE_CODE_A)}const ui=xe-ce;if(xe=a.getNextUnset(xe),!a.isRange(xe,Math.min(a.getSize(),xe+(xe-ce)/2),!1))throw new C;if(Fe-=Le*ye,Fe%103!==ye)throw new w;const xs=Q.length;if(xs===0)throw new C;xs>0&&Be&&(I===Ie.CODE_CODE_C?Q=Q.substring(0,xs-2):Q=Q.substring(0,xs-1));const hi=(x[1]+x[0])/2,Dr=ce+ui/2,_n=A.length,Ci=new Uint8Array(_n);for(let Nc=0;Nc<_n;Nc++)Ci[Nc]=A[Nc];const Tc=[new Ce(hi,o),new Ce(Dr,o)];return new ue(Q,Ci,0,Tc,fe.CODE_128,new Date().getTime())}}Ie.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ie.MAX_AVG_VARIANCE=.25,Ie.MAX_INDIVIDUAL_VARIANCE=.7,Ie.CODE_SHIFT=98,Ie.CODE_CODE_C=99,Ie.CODE_CODE_B=100,Ie.CODE_CODE_A=101,Ie.CODE_FNC_1=102,Ie.CODE_FNC_2=97,Ie.CODE_FNC_3=96,Ie.CODE_FNC_4_A=101,Ie.CODE_FNC_4_B=100,Ie.CODE_START_A=103,Ie.CODE_START_B=104,Ie.CODE_START_C=105,Ie.CODE_STOP=106;class qe extends Ke{constructor(o=!1,a=!1){super(),this.usingCheckDigit=o,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,a,f){let d=this.counters;d.fill(0),this.decodeRowResult="";let x=qe.findAsteriskPattern(a,d),g=a.getNextSet(x[1]),m=a.getSize(),A,I;do{qe.recordPattern(a,g,d);let ge=qe.toNarrowWidePattern(d);if(ge<0)throw new C;A=qe.patternToChar(ge),this.decodeRowResult+=A,I=g;for(let ye of d)g+=ye;g=a.getNextSet(g)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let k=0;for(let ge of d)k+=ge;let $=g-I-k;if(g!==m&&$*2<k)throw new C;if(this.usingCheckDigit){let ge=this.decodeRowResult.length-1,ye=0;for(let _e=0;_e<ge;_e++)ye+=qe.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(_e));if(this.decodeRowResult.charAt(ge)!==qe.ALPHABET_STRING.charAt(ye%43))throw new w;this.decodeRowResult=this.decodeRowResult.substring(0,ge)}if(this.decodeRowResult.length===0)throw new C;let Q;this.extendedMode?Q=qe.decodeExtended(this.decodeRowResult):Q=this.decodeRowResult;let ce=(x[1]+x[0])/2,xe=I+k/2;return new ue(Q,null,0,[new Ce(ce,o),new Ce(xe,o)],fe.CODE_39,new Date().getTime())}static findAsteriskPattern(o,a){let f=o.getSize(),d=o.getNextSet(0),x=0,g=d,m=!1,A=a.length;for(let I=d;I<f;I++)if(o.get(I)!==m)a[x]++;else{if(x===A-1){if(this.toNarrowWidePattern(a)===qe.ASTERISK_ENCODING&&o.isRange(Math.max(0,g-Math.floor((I-g)/2)),g,!1))return[g,I];g+=a[0]+a[1],a.copyWithin(0,2,2+x-1),a[x-1]=0,a[x]=0,x--}else x++;a[x]=1,m=!m}throw new C}static toNarrowWidePattern(o){let a=o.length,f=0,d;do{let x=2147483647;for(let A of o)A<x&&A>f&&(x=A);f=x,d=0;let g=0,m=0;for(let A=0;A<a;A++){let I=o[A];I>f&&(m|=1<<a-1-A,d++,g+=I)}if(d===3){for(let A=0;A<a&&d>0;A++){let I=o[A];if(I>f&&(d--,I*2>=g))return-1}return m}}while(d>3);return-1}static patternToChar(o){for(let a=0;a<qe.CHARACTER_ENCODINGS.length;a++)if(qe.CHARACTER_ENCODINGS[a]===o)return qe.ALPHABET_STRING.charAt(a);if(o===qe.ASTERISK_ENCODING)return"*";throw new C}static decodeExtended(o){let a=o.length,f="";for(let d=0;d<a;d++){let x=o.charAt(d);if(x==="+"||x==="$"||x==="%"||x==="/"){let g=o.charAt(d+1),m="\0";switch(x){case"+":if(g>="A"&&g<="Z")m=String.fromCharCode(g.charCodeAt(0)+32);else throw new v;break;case"$":if(g>="A"&&g<="Z")m=String.fromCharCode(g.charCodeAt(0)-64);else throw new v;break;case"%":if(g>="A"&&g<="E")m=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")m=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")m=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")m=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")m="\0";else if(g==="V")m="@";else if(g==="W")m="`";else if(g==="X"||g==="Y"||g==="Z")m="";else throw new v;break;case"/":if(g>="A"&&g<="O")m=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")m=":";else throw new v;break}f+=m,d++}else f+=x}return f}}qe.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",qe.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],qe.ASTERISK_ENCODING=148;class rt extends Ke{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,a,f){let d=this.decodeStart(a),x=this.decodeEnd(a),g=new V;rt.decodeMiddle(a,d[1],x[0],g);let m=g.toString(),A=null;f!=null&&(A=f.get(R.ALLOWED_LENGTHS)),A==null&&(A=rt.DEFAULT_ALLOWED_LENGTHS);let I=m.length,k=!1,$=0;for(let xe of A){if(I===xe){k=!0;break}xe>$&&($=xe)}if(!k&&I>$&&(k=!0),!k)throw new v;const Q=[new Ce(d[1],o),new Ce(x[0],o)];return new ue(m,null,0,Q,fe.ITF,new Date().getTime())}static decodeMiddle(o,a,f,d){let x=new Int32Array(10),g=new Int32Array(5),m=new Int32Array(5);for(x.fill(0),g.fill(0),m.fill(0);a<f;){Ke.recordPattern(o,a,x);for(let I=0;I<5;I++){let k=2*I;g[I]=x[k],m[I]=x[k+1]}let A=rt.decodeDigit(g);d.append(A.toString()),A=this.decodeDigit(m),d.append(A.toString()),x.forEach(function(I){a+=I})}}decodeStart(o){let a=rt.skipWhiteSpace(o),f=rt.findGuardPattern(o,a,rt.START_PATTERN);return this.narrowLineWidth=(f[1]-f[0])/4,this.validateQuietZone(o,f[0]),f}validateQuietZone(o,a){let f=this.narrowLineWidth*10;f=f<a?f:a;for(let d=a-1;f>0&&d>=0&&!o.get(d);d--)f--;if(f!==0)throw new C}static skipWhiteSpace(o){const a=o.getSize(),f=o.getNextSet(0);if(f===a)throw new C;return f}decodeEnd(o){o.reverse();try{let a=rt.skipWhiteSpace(o),f;try{f=rt.findGuardPattern(o,a,rt.END_PATTERN_REVERSED[0])}catch(x){x instanceof C&&(f=rt.findGuardPattern(o,a,rt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,f[0]);let d=f[0];return f[0]=o.getSize()-f[1],f[1]=o.getSize()-d,f}finally{o.reverse()}}static findGuardPattern(o,a,f){let d=f.length,x=new Int32Array(d),g=o.getSize(),m=!1,A=0,I=a;x.fill(0);for(let k=a;k<g;k++)if(o.get(k)!==m)x[A]++;else{if(A===d-1){if(Ke.patternMatchVariance(x,f,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return[I,k];I+=x[0]+x[1],S.arraycopy(x,2,x,0,A-1),x[A-1]=0,x[A]=0,A--}else A++;x[A]=1,m=!m}throw new C}static decodeDigit(o){let a=rt.MAX_AVG_VARIANCE,f=-1,d=rt.PATTERNS.length;for(let x=0;x<d;x++){let g=rt.PATTERNS[x],m=Ke.patternMatchVariance(o,g,rt.MAX_INDIVIDUAL_VARIANCE);m<a?(a=m,f=x):m===a&&(f=-1)}if(f>=0)return f%10;throw new C}}rt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],rt.MAX_AVG_VARIANCE=.38,rt.MAX_INDIVIDUAL_VARIANCE=.5,rt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],rt.START_PATTERN=Int32Array.from([1,1,1,1]),rt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Pt extends Ke{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let a=!1,f,d=0,x=Int32Array.from([0,0,0]);for(;!a;){x=Int32Array.from([0,0,0]),f=Pt.findGuardPattern(o,d,!1,this.START_END_PATTERN,x);let g=f[0];d=f[1];let m=g-(d-g);m>=0&&(a=o.isRange(m,g,!1))}return f}static checkChecksum(o){return Pt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let a=o.length;if(a===0)return!1;let f=parseInt(o.charAt(a-1),10);return Pt.getStandardUPCEANChecksum(o.substring(0,a-1))===f}static getStandardUPCEANChecksum(o){let a=o.length,f=0;for(let d=a-1;d>=0;d-=2){let x=o.charAt(d).charCodeAt(0)-48;if(x<0||x>9)throw new v;f+=x}f*=3;for(let d=a-2;d>=0;d-=2){let x=o.charAt(d).charCodeAt(0)-48;if(x<0||x>9)throw new v;f+=x}return(1e3-f)%10}static decodeEnd(o,a){return Pt.findGuardPattern(o,a,!1,Pt.START_END_PATTERN,new Int32Array(Pt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,a,f,d){return this.findGuardPattern(o,a,f,d,new Int32Array(d.length))}static findGuardPattern(o,a,f,d,x){let g=o.getSize();a=f?o.getNextUnset(a):o.getNextSet(a);let m=0,A=a,I=d.length,k=f;for(let $=a;$<g;$++)if(o.get($)!==k)x[m]++;else{if(m===I-1){if(Ke.patternMatchVariance(x,d,Pt.MAX_INDIVIDUAL_VARIANCE)<Pt.MAX_AVG_VARIANCE)return Int32Array.from([A,$]);A+=x[0]+x[1];let Q=x.slice(2,x.length-1);for(let ce=0;ce<m-1;ce++)x[ce]=Q[ce];x[m-1]=0,x[m]=0,m--}else m++;x[m]=1,k=!k}throw new C}static decodeDigit(o,a,f,d){this.recordPattern(o,f,a);let x=this.MAX_AVG_VARIANCE,g=-1,m=d.length;for(let A=0;A<m;A++){let I=d[A],k=Ke.patternMatchVariance(a,I,Pt.MAX_INDIVIDUAL_VARIANCE);k<x&&(x=k,g=A)}if(g>=0)return g;throw new C}}Pt.MAX_AVG_VARIANCE=.48,Pt.MAX_INDIVIDUAL_VARIANCE=.7,Pt.START_END_PATTERN=Int32Array.from([1,1,1]),Pt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Pt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ft{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,a,f){let d=this.decodeRowStringBuffer,x=this.decodeMiddle(a,f,d),g=d.toString(),m=Ft.parseExtensionString(g),A=[new Ce((f[0]+f[1])/2,o),new Ce(x,o)],I=new ue(g,null,0,A,fe.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&I.putAllMetadata(m),I}decodeMiddle(o,a,f){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let x=o.getSize(),g=a[1],m=0;for(let I=0;I<5&&g<x;I++){let k=Pt.decodeDigit(o,d,g,Pt.L_AND_G_PATTERNS);f+=String.fromCharCode(48+k%10);for(let $ of d)g+=$;k>=10&&(m|=1<<4-I),I!==4&&(g=o.getNextSet(g),g=o.getNextUnset(g))}if(f.length!==5)throw new C;let A=this.determineCheckDigit(m);if(Ft.extensionChecksum(f.toString())!==A)throw new C;return g}static extensionChecksum(o){let a=o.length,f=0;for(let d=a-2;d>=0;d-=2)f+=o.charAt(d).charCodeAt(0)-48;f*=3;for(let d=a-1;d>=0;d-=2)f+=o.charAt(d).charCodeAt(0)-48;return f*=3,f%10}determineCheckDigit(o){for(let a=0;a<10;a++)if(o===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new C}static parseExtensionString(o){if(o.length!==5)return null;let a=Ft.parseExtension5String(o);return a==null?null:new Map([[re.SUGGESTED_PRICE,a]])}static parseExtension5String(o){let a;switch(o.charAt(0)){case"0":a="£";break;case"5":a="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let f=parseInt(o.substring(1)),d=(f/100).toString(),x=f%100,g=x<10?"0"+x:x.toString();return a+d+"."+g}}class Rt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,a,f){let d=this.decodeRowStringBuffer,x=this.decodeMiddle(a,f,d),g=d.toString(),m=Rt.parseExtensionString(g),A=[new Ce((f[0]+f[1])/2,o),new Ce(x,o)],I=new ue(g,null,0,A,fe.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&I.putAllMetadata(m),I}decodeMiddle(o,a,f){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let x=o.getSize(),g=a[1],m=0;for(let A=0;A<2&&g<x;A++){let I=Pt.decodeDigit(o,d,g,Pt.L_AND_G_PATTERNS);f+=String.fromCharCode(48+I%10);for(let k of d)g+=k;I>=10&&(m|=1<<1-A),A!==1&&(g=o.getNextSet(g),g=o.getNextUnset(g))}if(f.length!==2)throw new C;if(parseInt(f.toString())%4!==m)throw new C;return g}static parseExtensionString(o){return o.length!==2?null:new Map([[re.ISSUE_NUMBER,parseInt(o)]])}}class Qr{static decodeRow(o,a,f){let d=Pt.findGuardPattern(a,f,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ft().decodeRow(o,a,d)}catch{return new Rt().decodeRow(o,a,d)}}}Qr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class st extends Pt{constructor(){super(),this.decodeRowStringBuffer="",st.L_AND_G_PATTERNS=st.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let a=st.L_PATTERNS[o-10],f=new Int32Array(a.length);for(let d=0;d<a.length;d++)f[d]=a[a.length-d-1];st.L_AND_G_PATTERNS[o]=f}}decodeRow(o,a,f){let d=st.findStartGuardPattern(a),x=f==null?null:f.get(R.NEED_RESULT_POINT_CALLBACK);if(x!=null){const Be=new Ce((d[0]+d[1])/2,o);x.foundPossibleResultPoint(Be)}let g=this.decodeMiddle(a,d,this.decodeRowStringBuffer),m=g.rowOffset,A=g.resultString;if(x!=null){const Be=new Ce(m,o);x.foundPossibleResultPoint(Be)}let I=this.decodeEnd(a,m);if(x!=null){const Be=new Ce((I[0]+I[1])/2,o);x.foundPossibleResultPoint(Be)}let k=I[1],$=k+(k-I[0]);if($>=a.getSize()||!a.isRange(k,$,!1))throw new C;let Q=A.toString();if(Q.length<8)throw new v;if(!st.checkChecksum(Q))throw new w;let ce=(d[1]+d[0])/2,xe=(I[1]+I[0])/2,ge=this.getBarcodeFormat(),ye=[new Ce(ce,o),new Ce(xe,o)],_e=new ue(Q,null,0,ye,ge,new Date().getTime()),Fe=0;try{let Be=Qr.decodeRow(o,a,I[1]);_e.putMetadata(re.UPC_EAN_EXTENSION,Be.getText()),_e.putAllMetadata(Be.getResultMetadata()),_e.addResultPoints(Be.getResultPoints()),Fe=Be.getText().length}catch{}let Le=f==null?null:f.get(R.ALLOWED_EAN_EXTENSIONS);if(Le!=null){let Be=!1;for(let rr in Le)if(Fe.toString()===rr){Be=!0;break}if(!Be)throw new C}return _e}decodeEnd(o,a){return st.findGuardPattern(o,a,!1,st.START_END_PATTERN,new Int32Array(st.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return st.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let a=o.length;if(a===0)return!1;let f=parseInt(o.charAt(a-1),10);return st.getStandardUPCEANChecksum(o.substring(0,a-1))===f}static getStandardUPCEANChecksum(o){let a=o.length,f=0;for(let d=a-1;d>=0;d-=2){let x=o.charAt(d).charCodeAt(0)-48;if(x<0||x>9)throw new v;f+=x}f*=3;for(let d=a-2;d>=0;d-=2){let x=o.charAt(d).charCodeAt(0)-48;if(x<0||x>9)throw new v;f+=x}return(1e3-f)%10}}class $t extends st{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,a,f){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let x=o.getSize(),g=a[1],m=0;for(let I=0;I<6&&g<x;I++){let k=st.decodeDigit(o,d,g,st.L_AND_G_PATTERNS);f+=String.fromCharCode(48+k%10);for(let $ of d)g+=$;k>=10&&(m|=1<<5-I)}f=$t.determineFirstDigit(f,m),g=st.findGuardPattern(o,g,!0,st.MIDDLE_PATTERN,new Int32Array(st.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<6&&g<x;I++){let k=st.decodeDigit(o,d,g,st.L_PATTERNS);f+=String.fromCharCode(48+k);for(let $ of d)g+=$}return{rowOffset:g,resultString:f}}getBarcodeFormat(){return fe.EAN_13}static determineFirstDigit(o,a){for(let f=0;f<10;f++)if(a===this.FIRST_DIGIT_ENCODINGS[f])return o=String.fromCharCode(48+f)+o,o;throw new C}}$t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class fr extends st{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,a,f){const d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let x=o.getSize(),g=a[1];for(let A=0;A<4&&g<x;A++){let I=st.decodeDigit(o,d,g,st.L_PATTERNS);f+=String.fromCharCode(48+I);for(let k of d)g+=k}g=st.findGuardPattern(o,g,!0,st.MIDDLE_PATTERN,new Int32Array(st.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&g<x;A++){let I=st.decodeDigit(o,d,g,st.L_PATTERNS);f+=String.fromCharCode(48+I);for(let k of d)g+=k}return{rowOffset:g,resultString:f}}getBarcodeFormat(){return fe.EAN_8}}class St extends st{constructor(){super(...arguments),this.ean13Reader=new $t}getBarcodeFormat(){return fe.UPC_A}decode(o,a){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,a,f){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,a,f))}decodeMiddle(o,a,f){return this.ean13Reader.decodeMiddle(o,a,f)}maybeReturnResult(o){let a=o.getText();if(a.charAt(0)==="0"){let f=new ue(a.substring(1),null,null,o.getResultPoints(),fe.UPC_A);return o.getResultMetadata()!=null&&f.putAllMetadata(o.getResultMetadata()),f}else throw new C}reset(){this.ean13Reader.reset()}}class dt extends st{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,a,f){const d=this.decodeMiddleCounters.map(I=>I);d[0]=0,d[1]=0,d[2]=0,d[3]=0;const x=o.getSize();let g=a[1],m=0;for(let I=0;I<6&&g<x;I++){const k=dt.decodeDigit(o,d,g,dt.L_AND_G_PATTERNS);f+=String.fromCharCode(48+k%10);for(let $ of d)g+=$;k>=10&&(m|=1<<5-I)}let A=dt.determineNumSysAndCheckDigit(f,m);return{rowOffset:g,resultString:A}}decodeEnd(o,a){return dt.findGuardPatternWithoutCounters(o,a,!0,dt.MIDDLE_END_PATTERN)}checkChecksum(o){return st.checkChecksum(dt.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,a){for(let f=0;f<=1;f++)for(let d=0;d<10;d++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[f][d]){let x=String.fromCharCode(48+f),g=String.fromCharCode(48+d);return x+o+g}throw C.getNotFoundInstance()}getBarcodeFormat(){return fe.UPC_E}static convertUPCEtoUPCA(o){const a=o.slice(1,7).split("").map(x=>x.charCodeAt(0)),f=new V;f.append(o.charAt(0));let d=a[5];switch(d){case 0:case 1:case 2:f.appendChars(a,0,2),f.append(d),f.append("0000"),f.appendChars(a,2,3);break;case 3:f.appendChars(a,0,3),f.append("00000"),f.appendChars(a,3,2);break;case 4:f.appendChars(a,0,4),f.append("00000"),f.append(a[4]);break;default:f.appendChars(a,0,5),f.append("0000"),f.append(d);break}return o.length>=8&&f.append(o.charAt(7)),f.toString()}}dt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),dt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class sr extends Ke{constructor(o){super();let a=o==null?null:o.get(R.POSSIBLE_FORMATS),f=[];n(a)?(f.push(new $t),f.push(new St),f.push(new fr),f.push(new dt)):(a.indexOf(fe.EAN_13)>-1&&f.push(new $t),a.indexOf(fe.UPC_A)>-1&&f.push(new St),a.indexOf(fe.EAN_8)>-1&&f.push(new fr),a.indexOf(fe.UPC_E)>-1&&f.push(new dt)),this.readers=f}decodeRow(o,a,f){for(let d of this.readers)try{const x=d.decodeRow(o,a,f),g=x.getBarcodeFormat()===fe.EAN_13&&x.getText().charAt(0)==="0",m=f==null?null:f.get(R.POSSIBLE_FORMATS),A=m==null||m.includes(fe.UPC_A);if(g&&A){const I=x.getRawBytes(),k=new ue(x.getText().substring(1),I,I?I.length:null,x.getResultPoints(),fe.UPC_A);return k.putAllMetadata(x.getResultMetadata()),k}return x}catch{}throw new C}reset(){for(let o of this.readers)o.reset()}}class ot extends Ke{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,a){for(let f=0;f<a.length;f++)if(Ke.patternMatchVariance(o,a[f],ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE)return f;throw new C}static count(o){return Je.sum(new Int32Array(o))}static increment(o,a){let f=0,d=a[0];for(let x=1;x<o.length;x++)a[x]>d&&(d=a[x],f=x);o[f]++}static decrement(o,a){let f=0,d=a[0];for(let x=1;x<o.length;x++)a[x]<d&&(d=a[x],f=x);o[f]--}static isFinderPattern(o){let a=o[0]+o[1],f=a+o[2]+o[3],d=a/f;if(d>=ot.MIN_FINDER_PATTERN_RATIO&&d<=ot.MAX_FINDER_PATTERN_RATIO){let x=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let m of o)m>g&&(g=m),m<x&&(x=m);return g<10*x}return!1}}ot.MAX_AVG_VARIANCE=.2,ot.MAX_INDIVIDUAL_VARIANCE=.45,ot.MIN_FINDER_PATTERN_RATIO=9.5/12,ot.MAX_FINDER_PATTERN_RATIO=12.5/14;class bt{constructor(o,a){this.value=o,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof bt))return!1;const a=o;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class cr{constructor(o,a,f,d,x){this.value=o,this.startEnd=a,this.value=o,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Ce(f,x)),this.resultPoints.push(new Ce(d,x))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof cr))return!1;const a=o;return this.value===a.value}hashCode(){return this.value}}class mt{constructor(){}static getRSSvalue(o,a,f){let d=0;for(let A of o)d+=A;let x=0,g=0,m=o.length;for(let A=0;A<m-1;A++){let I;for(I=1,g|=1<<A;I<o[A];I++,g&=~(1<<A)){let k=mt.combins(d-I-1,m-A-2);if(f&&g===0&&d-I-(m-A-1)>=m-A-1&&(k-=mt.combins(d-I-(m-A),m-A-2)),m-A-1>1){let $=0;for(let Q=d-I-(m-A-2);Q>a;Q--)$+=mt.combins(d-I-Q-1,m-A-3);k-=$*(m-1-A)}else d-I>a&&k--;x+=k}d-=I}return x}static combins(o,a){let f,d;o-a>a?(d=a,f=o-a):(d=o-a,f=a);let x=1,g=1;for(let m=o;m>f;m--)x*=m,g<=d&&(x/=g,g++);for(;g<=d;)x/=g,g++;return x}}class Nt{static buildBitArray(o){let a=o.length*2-1;o[o.length-1].getRightChar()==null&&(a-=1);let f=12*a,d=new M(f),x=0,m=o[0].getRightChar().getValue();for(let A=11;A>=0;--A)m&1<<A&&d.set(x),x++;for(let A=1;A<o.length;++A){let I=o[A],k=I.getLeftChar().getValue();for(let $=11;$>=0;--$)k&1<<$&&d.set(x),x++;if(I.getRightChar()!=null){let $=I.getRightChar().getValue();for(let Q=11;Q>=0;--Q)$&1<<Q&&d.set(x),x++}}return d}}class Ot{constructor(o,a){a?this.decodedInformation=null:(this.finished=o,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class yt{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class ct extends yt{constructor(o,a){super(o),this.value=a}getValue(){return this.value}isFNC1(){return this.value===ct.FNC1}}ct.FNC1="$";class Qt extends yt{constructor(o,a,f){super(o),f?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ft extends yt{constructor(o,a,f){if(super(o),a<0||a>10||f<0||f>10)throw new v;this.firstDigit=a,this.secondDigit=f}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ft.FNC1}isSecondDigitFNC1(){return this.secondDigit===ft.FNC1}isAnyFNC1(){return this.firstDigit===ft.FNC1||this.secondDigit===ft.FNC1}}ft.FNC1=10;class Ne{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new C;let a=o.substring(0,2);for(let x of Ne.TWO_DIGIT_DATA_LENGTH)if(x[0]===a)return x[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(2,x[2],o):Ne.processFixedAI(2,x[1],o);if(o.length<3)throw new C;let f=o.substring(0,3);for(let x of Ne.THREE_DIGIT_DATA_LENGTH)if(x[0]===f)return x[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(3,x[2],o):Ne.processFixedAI(3,x[1],o);for(let x of Ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(x[0]===f)return x[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(4,x[2],o):Ne.processFixedAI(4,x[1],o);if(o.length<4)throw new C;let d=o.substring(0,4);for(let x of Ne.FOUR_DIGIT_DATA_LENGTH)if(x[0]===d)return x[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(4,x[2],o):Ne.processFixedAI(4,x[1],o);throw new C}static processFixedAI(o,a,f){if(f.length<o)throw new C;let d=f.substring(0,o);if(f.length<o+a)throw new C;let x=f.substring(o,o+a),g=f.substring(o+a),m="("+d+")"+x,A=Ne.parseFieldsInGeneralPurpose(g);return A==null?m:m+A}static processVariableAI(o,a,f){let d=f.substring(0,o),x;f.length<o+a?x=f.length:x=o+a;let g=f.substring(o,x),m=f.substring(x),A="("+d+")"+g,I=Ne.parseFieldsInGeneralPurpose(m);return I==null?A:A+I}}Ne.VARIABLE_LENGTH=[],Ne.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ne.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ne.VARIABLE_LENGTH,20],["22",Ne.VARIABLE_LENGTH,29],["30",Ne.VARIABLE_LENGTH,8],["37",Ne.VARIABLE_LENGTH,8],["90",Ne.VARIABLE_LENGTH,30],["91",Ne.VARIABLE_LENGTH,30],["92",Ne.VARIABLE_LENGTH,30],["93",Ne.VARIABLE_LENGTH,30],["94",Ne.VARIABLE_LENGTH,30],["95",Ne.VARIABLE_LENGTH,30],["96",Ne.VARIABLE_LENGTH,30],["97",Ne.VARIABLE_LENGTH,3],["98",Ne.VARIABLE_LENGTH,30],["99",Ne.VARIABLE_LENGTH,30]],Ne.THREE_DIGIT_DATA_LENGTH=[["240",Ne.VARIABLE_LENGTH,30],["241",Ne.VARIABLE_LENGTH,30],["242",Ne.VARIABLE_LENGTH,6],["250",Ne.VARIABLE_LENGTH,30],["251",Ne.VARIABLE_LENGTH,30],["253",Ne.VARIABLE_LENGTH,17],["254",Ne.VARIABLE_LENGTH,20],["400",Ne.VARIABLE_LENGTH,30],["401",Ne.VARIABLE_LENGTH,30],["402",17],["403",Ne.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ne.VARIABLE_LENGTH,20],["421",Ne.VARIABLE_LENGTH,15],["422",3],["423",Ne.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ne.VARIABLE_LENGTH,15],["391",Ne.VARIABLE_LENGTH,18],["392",Ne.VARIABLE_LENGTH,15],["393",Ne.VARIABLE_LENGTH,18],["703",Ne.VARIABLE_LENGTH,30]],Ne.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ne.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ne.VARIABLE_LENGTH,20],["8003",Ne.VARIABLE_LENGTH,30],["8004",Ne.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ne.VARIABLE_LENGTH,30],["8008",Ne.VARIABLE_LENGTH,12],["8018",18],["8020",Ne.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ne.VARIABLE_LENGTH,70],["8200",Ne.VARIABLE_LENGTH,70]];class lr{constructor(o){this.buffer=new V,this.information=o}decodeAllCodes(o,a){let f=a,d=null;do{let x=this.decodeGeneralPurposeField(f,d),g=Ne.parseFieldsInGeneralPurpose(x.getNewString());if(g!=null&&o.append(g),x.isRemaining()?d=""+x.getRemainingValue():d=null,f===x.getNewPosition())break;f=x.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let a=o;a<o+3;++a)if(this.information.get(a))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let x=this.extractNumericValueFromBitArray(o,4);return x===0?new ft(this.information.getSize(),ft.FNC1,ft.FNC1):new ft(this.information.getSize(),x-1,ft.FNC1)}let a=this.extractNumericValueFromBitArray(o,7),f=(a-8)/11,d=(a-8)%11;return new ft(o+7,f,d)}extractNumericValueFromBitArray(o,a){return lr.extractNumericValueFromBitArray(this.information,o,a)}static extractNumericValueFromBitArray(o,a,f){let d=0;for(let x=0;x<f;++x)o.get(a+x)&&(d|=1<<f-x-1);return d}decodeGeneralPurposeField(o,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(o);let f=this.parseBlocks();return f!=null&&f.isRemaining()?new Qt(this.current.getPosition(),this.buffer.toString(),f.getRemainingValue()):new Qt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,a;do{let f=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),o=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),o=a.isFinished()):(a=this.parseNumericBlock(),o=a.isFinished()),!(f!==this.current.getPosition())&&!o)break}while(!o);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let a;return o.isSecondDigitFNC1()?a=new Qt(this.current.getPosition(),this.buffer.toString()):a=new Qt(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new Ot(!0,a)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let a=new Qt(this.current.getPosition(),this.buffer.toString());return new Ot(!0,a)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ot(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let a=new Qt(this.current.getPosition(),this.buffer.toString());return new Ot(!0,a)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ot(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let a=new Qt(this.current.getPosition(),this.buffer.toString());return new Ot(!0,a)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ot(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(o,5);if(a>=5&&a<16)return!0;if(o+7>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(o,7);if(f>=64&&f<116)return!0;if(o+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(o,8);return d>=232&&d<253}decodeIsoIec646(o){let a=this.extractNumericValueFromBitArray(o,5);if(a===15)return new ct(o+5,ct.FNC1);if(a>=5&&a<15)return new ct(o+5,"0"+(a-5));let f=this.extractNumericValueFromBitArray(o,7);if(f>=64&&f<90)return new ct(o+7,""+(f+1));if(f>=90&&f<116)return new ct(o+7,""+(f+7));let d=this.extractNumericValueFromBitArray(o,8),x;switch(d){case 232:x="!";break;case 233:x='"';break;case 234:x="%";break;case 235:x="&";break;case 236:x="'";break;case 237:x="(";break;case 238:x=")";break;case 239:x="*";break;case 240:x="+";break;case 241:x=",";break;case 242:x="-";break;case 243:x=".";break;case 244:x="/";break;case 245:x=":";break;case 246:x=";";break;case 247:x="<";break;case 248:x="=";break;case 249:x=">";break;case 250:x="?";break;case 251:x="_";break;case 252:x=" ";break;default:throw new v}return new ct(o+8,x)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(o,5);if(a>=5&&a<16)return!0;if(o+6>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(o,6);return f>=16&&f<63}decodeAlphanumeric(o){let a=this.extractNumericValueFromBitArray(o,5);if(a===15)return new ct(o+5,ct.FNC1);if(a>=5&&a<15)return new ct(o+5,"0"+(a-5));let f=this.extractNumericValueFromBitArray(o,6);if(f>=32&&f<58)return new ct(o+6,""+(f+33));let d;switch(f){case 58:d="*";break;case 59:d=",";break;case 60:d="-";break;case 61:d=".";break;case 62:d="/";break;default:throw new Pe("Decoding invalid alphanumeric value: "+f)}return new ct(o+6,d)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let a=0;a<5&&a+o<this.information.getSize();++a)if(a===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+a))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let a=o;a<o+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let a=0;a<4&&a+o<this.information.getSize();++a)if(this.information.get(o+a))return!1;return!0}}class gr{constructor(o){this.information=o,this.generalDecoder=new lr(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ht extends gr{constructor(o){super(o)}encodeCompressedGtin(o,a){o.append("(01)");let f=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,a,f)}encodeCompressedGtinWithoutAI(o,a,f){for(let d=0;d<4;++d){let x=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*d,10);x/100===0&&o.append("0"),x/10===0&&o.append("0"),o.append(x)}Ht.appendCheckDigit(o,f)}static appendCheckDigit(o,a){let f=0;for(let d=0;d<13;d++){let x=o.charAt(d+a).charCodeAt(0)-48;f+=d&1?x:3*x}f=10-f%10,f===10&&(f=0),o.append(f)}}Ht.GTIN_SIZE=40;class Ln extends Ht{constructor(o){super(o)}parseInformation(){let o=new V;o.append("(01)");let a=o.length(),f=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE,4);return o.append(f),this.encodeCompressedGtinWithoutAI(o,Ln.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(o,Ln.HEADER_SIZE+44)}}Ln.HEADER_SIZE=4;class Wt extends gr{constructor(o){super(o)}parseInformation(){let o=new V;return this.getGeneralDecoder().decodeAllCodes(o,Wt.HEADER_SIZE)}}Wt.HEADER_SIZE=5;class hr extends Ht{constructor(o){super(o)}encodeCompressedWeight(o,a,f){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(a,f);this.addWeightCode(o,d);let x=this.checkWeight(d),g=1e5;for(let m=0;m<5;++m)x/g===0&&o.append("0"),g/=10;o.append(x)}}class Zr extends hr{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=Zr.HEADER_SIZE+hr.GTIN_SIZE+Zr.WEIGHT_SIZE)throw new C;let o=new V;return this.encodeCompressedGtin(o,Zr.HEADER_SIZE),this.encodeCompressedWeight(o,Zr.HEADER_SIZE+hr.GTIN_SIZE,Zr.WEIGHT_SIZE),o.toString()}}Zr.HEADER_SIZE=5,Zr.WEIGHT_SIZE=15;class Ui extends Zr{constructor(o){super(o)}addWeightCode(o,a){o.append("(3103)")}checkWeight(o){return o}}class Hi extends Zr{constructor(o){super(o)}addWeightCode(o,a){a<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class Jr extends Ht{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Jr.HEADER_SIZE+Ht.GTIN_SIZE)throw new C;let o=new V;this.encodeCompressedGtin(o,Jr.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Jr.HEADER_SIZE+Ht.GTIN_SIZE,Jr.LAST_DIGIT_SIZE);o.append("(392"),o.append(a),o.append(")");let f=this.getGeneralDecoder().decodeGeneralPurposeField(Jr.HEADER_SIZE+Ht.GTIN_SIZE+Jr.LAST_DIGIT_SIZE,null);return o.append(f.getNewString()),o.toString()}}Jr.HEADER_SIZE=8,Jr.LAST_DIGIT_SIZE=2;class dr extends Ht{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<dr.HEADER_SIZE+Ht.GTIN_SIZE)throw new C;let o=new V;this.encodeCompressedGtin(o,dr.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(dr.HEADER_SIZE+Ht.GTIN_SIZE,dr.LAST_DIGIT_SIZE);o.append("(393"),o.append(a),o.append(")");let f=this.getGeneralDecoder().extractNumericValueFromBitArray(dr.HEADER_SIZE+Ht.GTIN_SIZE+dr.LAST_DIGIT_SIZE,dr.FIRST_THREE_DIGITS_SIZE);f/100==0&&o.append("0"),f/10==0&&o.append("0"),o.append(f);let d=this.getGeneralDecoder().decodeGeneralPurposeField(dr.HEADER_SIZE+Ht.GTIN_SIZE+dr.LAST_DIGIT_SIZE+dr.FIRST_THREE_DIGITS_SIZE,null);return o.append(d.getNewString()),o.toString()}}dr.HEADER_SIZE=8,dr.LAST_DIGIT_SIZE=2,dr.FIRST_THREE_DIGITS_SIZE=10;class mr extends hr{constructor(o,a,f){super(o),this.dateCode=f,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=mr.HEADER_SIZE+mr.GTIN_SIZE+mr.WEIGHT_SIZE+mr.DATE_SIZE)throw new C;let o=new V;return this.encodeCompressedGtin(o,mr.HEADER_SIZE),this.encodeCompressedWeight(o,mr.HEADER_SIZE+mr.GTIN_SIZE,mr.WEIGHT_SIZE),this.encodeCompressedDate(o,mr.HEADER_SIZE+mr.GTIN_SIZE+mr.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,a){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(a,mr.DATE_SIZE);if(f==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let d=f%32;f/=32;let x=f%12+1;f/=12;let g=f;g/10==0&&o.append("0"),o.append(g),x/10==0&&o.append("0"),o.append(x),d/10==0&&o.append("0"),o.append(d)}addWeightCode(o,a){o.append("("),o.append(this.firstAIdigits),o.append(a/1e5),o.append(")")}checkWeight(o){return o%1e5}}mr.HEADER_SIZE=8,mr.WEIGHT_SIZE=20,mr.DATE_SIZE=16;function ya(q){try{if(q.get(1))return new Ln(q);if(!q.get(2))return new Wt(q);switch(lr.extractNumericValueFromBitArray(q,1,4)){case 4:return new Ui(q);case 5:return new Hi(q)}switch(lr.extractNumericValueFromBitArray(q,1,5)){case 12:return new Jr(q);case 13:return new dr(q)}switch(lr.extractNumericValueFromBitArray(q,1,7)){case 56:return new mr(q,"310","11");case 57:return new mr(q,"320","11");case 58:return new mr(q,"310","13");case 59:return new mr(q,"320","13");case 60:return new mr(q,"310","15");case 61:return new mr(q,"320","15");case 62:return new mr(q,"310","17");case 63:return new mr(q,"320","17")}}catch(o){throw console.log(o),new Pe("unknown decoder: "+q)}}class ci{constructor(o,a,f,d){this.leftchar=o,this.rightchar=a,this.finderpattern=f,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,a){return o instanceof ci?ci.equalsOrNull(o.leftchar,a.leftchar)&&ci.equalsOrNull(o.rightchar,a.rightchar)&&ci.equalsOrNull(o.finderpattern,a.finderpattern):!1}static equalsOrNull(o,a){return o===null?a===null:ci.equals(o,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Eo{constructor(o,a,f){this.pairs=o,this.rowNumber=a,this.wasReversed=f}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,a){return o instanceof Eo?this.checkEqualitity(o,a)&&o.wasReversed===a.wasReversed:!1}checkEqualitity(o,a){if(!o||!a)return;let f;return o.forEach((d,x)=>{a.forEach(g=>{d.getLeftChar().getValue()===g.getLeftChar().getValue()&&d.getRightChar().getValue()===g.getRightChar().getValue()&&d.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(f=!0)})}),f}}class Oe extends ot{constructor(o){super(...arguments),this.pairs=new Array(Oe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,a,f){this.pairs.length=0,this.startFromEven=!1;try{return Oe.constructResult(this.decodeRow2pairs(o,a))}catch(d){this.verbose&&console.log(d)}return this.pairs.length=0,this.startFromEven=!0,Oe.constructResult(this.decodeRow2pairs(o,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,a){let f=!1;for(;!f;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,o))}catch(x){if(x instanceof C){if(!this.pairs.length)throw new C;f=!0}}if(this.checkChecksum())return this.pairs;let d;if(this.rows.length?d=!0:d=!1,this.storeRow(o,!1),d){let x=this.checkRowsBoolean(!1);if(x!=null||(x=this.checkRowsBoolean(!0),x!=null))return x}throw new C}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(f){this.verbose&&console.log(f)}return o&&(this.rows=this.rows.reverse()),a}checkRows(o,a){for(let f=a;f<this.rows.length;f++){let d=this.rows[f];this.pairs.length=0;for(let g of o)this.pairs.push(g.getPairs());if(this.pairs.push(d.getPairs()),!Oe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let x=new Array(o);x.push(d);try{return this.checkRows(x,f+1)}catch(g){this.verbose&&console.log(g)}}throw new C}static isValidSequence(o){for(let a of Oe.FINDER_PATTERN_SEQUENCES){if(o.length>a.length)continue;let f=!0;for(let d=0;d<o.length;d++)if(o[d].getFinderPattern().getValue()!=a[d]){f=!1;break}if(f)return!0}return!1}storeRow(o,a){let f=0,d=!1,x=!1;for(;f<this.rows.length;){let g=this.rows[f];if(g.getRowNumber()>o){x=g.isEquivalent(this.pairs);break}d=g.isEquivalent(this.pairs),f++}x||d||Oe.isPartialRow(this.pairs,this.rows)||(this.rows.push(f,new Eo(this.pairs,o,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,a){for(let f of a)if(f.getPairs().length!==o.length){for(let d of f.getPairs())for(let x of o)if(ci.equals(d,x))break}}static isPartialRow(o,a){for(let f of a){let d=!0;for(let x of o){let g=!1;for(let m of f.getPairs())if(x.equals(m)){g=!0;break}if(!g){d=!1;break}}if(d)return!0}return!1}getRows(){return this.rows}static constructResult(o){let a=Nt.buildBitArray(o),d=ya(a).parseInformation(),x=o[0].getFinderPattern().getResultPoints(),g=o[o.length-1].getFinderPattern().getResultPoints(),m=[x[0],x[1],g[0],g[1]];return new ue(d,null,null,m,fe.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),a=o.getLeftChar(),f=o.getRightChar();if(f==null)return!1;let d=f.getChecksumPortion(),x=2;for(let m=1;m<this.pairs.size();++m){let A=this.pairs.get(m);d+=A.getLeftChar().getChecksumPortion(),x++;let I=A.getRightChar();I!=null&&(d+=I.getChecksumPortion(),x++)}return d%=211,211*(x-4)+d==a.getValue()}static getNextSecondBar(o,a){let f;return o.get(a)?(f=o.getNextUnset(a),f=o.getNextSet(f)):(f=o.getNextSet(a),f=o.getNextUnset(f)),f}retrieveNextPair(o,a,f){let d=a.length%2==0;this.startFromEven&&(d=!d);let x,g=!0,m=-1;do this.findNextPair(o,a,m),x=this.parseFoundFinderPattern(o,f,d),x==null?m=Oe.getNextSecondBar(o,this.startEnd[0]):g=!1;while(g);let A=this.decodeDataCharacter(o,x,d,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new C;let I;try{I=this.decodeDataCharacter(o,x,d,!1)}catch(k){I=null,this.verbose&&console.log(k)}return new ci(A,I,x,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,a,f){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let x=o.getSize(),g;f>=0?g=f:this.isEmptyPair(a)?g=0:g=a[a.length-1].getFinderPattern().getStartEnd()[1];let m=a.length%2!=0;this.startFromEven&&(m=!m);let A=!1;for(;g<x&&(A=!o.get(g),!!A);)g++;let I=0,k=g;for(let $=g;$<x;$++)if(o.get($)!=A)d[I]++;else{if(I==3){if(m&&Oe.reverseCounters(d),Oe.isFinderPattern(d)){this.startEnd[0]=k,this.startEnd[1]=$;return}m&&Oe.reverseCounters(d),k+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,I--}else I++;d[I]=1,A=!A}throw new C}static reverseCounters(o){let a=o.length;for(let f=0;f<a/2;++f){let d=o[f];o[f]=o[a-f-1],o[a-f-1]=d}}parseFoundFinderPattern(o,a,f){let d,x,g;if(f){let I=this.startEnd[0]-1;for(;I>=0&&!o.get(I);)I--;I++,d=this.startEnd[0]-I,x=I,g=this.startEnd[1]}else x=this.startEnd[0],g=o.getNextUnset(this.startEnd[1]+1),d=g-this.startEnd[1];let m=this.getDecodeFinderCounters();S.arraycopy(m,0,m,1,m.length-1),m[0]=d;let A;try{A=this.parseFinderValue(m,Oe.FINDER_PATTERNS)}catch{return null}return new cr(A,[x,g],x,g,a)}decodeDataCharacter(o,a,f,d){let x=this.getDataCharacterCounters();for(let Dr=0;Dr<x.length;Dr++)x[Dr]=0;if(d)Oe.recordPatternInReverse(o,a.getStartEnd()[0],x);else{Oe.recordPattern(o,a.getStartEnd()[1],x);for(let Dr=0,_n=x.length-1;Dr<_n;Dr++,_n--){let Ci=x[Dr];x[Dr]=x[_n],x[_n]=Ci}}let g=17,m=Je.sum(new Int32Array(x))/g,A=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(m-A)/A>.3)throw new C;let I=this.getOddCounts(),k=this.getEvenCounts(),$=this.getOddRoundingErrors(),Q=this.getEvenRoundingErrors();for(let Dr=0;Dr<x.length;Dr++){let _n=1*x[Dr]/m,Ci=_n+.5;if(Ci<1){if(_n<.3)throw new C;Ci=1}else if(Ci>8){if(_n>8.7)throw new C;Ci=8}let Tc=Dr/2;Dr&1?(k[Tc]=Ci,Q[Tc]=_n-Ci):(I[Tc]=Ci,$[Tc]=_n-Ci)}this.adjustOddEvenCounts(g);let ce=4*a.getValue()+(f?0:2)+(d?0:1)-1,xe=0,ge=0;for(let Dr=I.length-1;Dr>=0;Dr--){if(Oe.isNotA1left(a,f,d)){let _n=Oe.WEIGHTS[ce][2*Dr];ge+=I[Dr]*_n}xe+=I[Dr]}let ye=0;for(let Dr=k.length-1;Dr>=0;Dr--)if(Oe.isNotA1left(a,f,d)){let _n=Oe.WEIGHTS[ce][2*Dr+1];ye+=k[Dr]*_n}let _e=ge+ye;if(xe&1||xe>13||xe<4)throw new C;let Fe=(13-xe)/2,Le=Oe.SYMBOL_WIDEST[Fe],Be=9-Le,rr=mt.getRSSvalue(I,Le,!0),jt=mt.getRSSvalue(k,Be,!1),ui=Oe.EVEN_TOTAL_SUBSET[Fe],xs=Oe.GSUM[Fe],hi=rr*ui+jt+xs;return new bt(hi,_e)}static isNotA1left(o,a,f){return!(o.getValue()==0&&a&&f)}adjustOddEvenCounts(o){let a=Je.sum(new Int32Array(this.getOddCounts())),f=Je.sum(new Int32Array(this.getEvenCounts())),d=!1,x=!1;a>13?x=!0:a<4&&(d=!0);let g=!1,m=!1;f>13?m=!0:f<4&&(g=!0);let A=a+f-o,I=(a&1)==1,k=(f&1)==0;if(A==1)if(I){if(k)throw new C;x=!0}else{if(!k)throw new C;m=!0}else if(A==-1)if(I){if(k)throw new C;d=!0}else{if(!k)throw new C;g=!0}else if(A==0){if(I){if(!k)throw new C;a<f?(d=!0,m=!0):(x=!0,g=!0)}else if(k)throw new C}else throw new C;if(d){if(x)throw new C;Oe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&Oe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(m)throw new C;Oe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&Oe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Oe.SYMBOL_WIDEST=[7,5,4,3,1],Oe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Oe.GSUM=[0,348,1388,2948,3988],Oe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Oe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Oe.FINDER_PAT_A=0,Oe.FINDER_PAT_B=1,Oe.FINDER_PAT_C=2,Oe.FINDER_PAT_D=3,Oe.FINDER_PAT_E=4,Oe.FINDER_PAT_F=5,Oe.FINDER_PATTERN_SEQUENCES=[[Oe.FINDER_PAT_A,Oe.FINDER_PAT_A],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_B,Oe.FINDER_PAT_B],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_C,Oe.FINDER_PAT_B,Oe.FINDER_PAT_D],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_E,Oe.FINDER_PAT_B,Oe.FINDER_PAT_D,Oe.FINDER_PAT_C],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_E,Oe.FINDER_PAT_B,Oe.FINDER_PAT_D,Oe.FINDER_PAT_D,Oe.FINDER_PAT_F],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_E,Oe.FINDER_PAT_B,Oe.FINDER_PAT_D,Oe.FINDER_PAT_E,Oe.FINDER_PAT_F,Oe.FINDER_PAT_F],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_A,Oe.FINDER_PAT_B,Oe.FINDER_PAT_B,Oe.FINDER_PAT_C,Oe.FINDER_PAT_C,Oe.FINDER_PAT_D,Oe.FINDER_PAT_D],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_A,Oe.FINDER_PAT_B,Oe.FINDER_PAT_B,Oe.FINDER_PAT_C,Oe.FINDER_PAT_C,Oe.FINDER_PAT_D,Oe.FINDER_PAT_E,Oe.FINDER_PAT_E],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_A,Oe.FINDER_PAT_B,Oe.FINDER_PAT_B,Oe.FINDER_PAT_C,Oe.FINDER_PAT_C,Oe.FINDER_PAT_D,Oe.FINDER_PAT_E,Oe.FINDER_PAT_F,Oe.FINDER_PAT_F],[Oe.FINDER_PAT_A,Oe.FINDER_PAT_A,Oe.FINDER_PAT_B,Oe.FINDER_PAT_B,Oe.FINDER_PAT_C,Oe.FINDER_PAT_D,Oe.FINDER_PAT_D,Oe.FINDER_PAT_E,Oe.FINDER_PAT_E,Oe.FINDER_PAT_F,Oe.FINDER_PAT_F]],Oe.MAX_PAIRS=11;class Ls extends bt{constructor(o,a,f){super(o,a),this.count=0,this.finderPattern=f}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Er extends ot{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,a,f){const d=this.decodePair(a,!1,o,f);Er.addOrTally(this.possibleLeftPairs,d),a.reverse();let x=this.decodePair(a,!0,o,f);Er.addOrTally(this.possibleRightPairs,x),a.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&Er.checkChecksum(g,m))return Er.constructResult(g,m)}throw new C}static addOrTally(o,a){if(a==null)return;let f=!1;for(let d of o)if(d.getValue()===a.getValue()){d.incrementCount(),f=!0;break}f||o.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,a){let f=4537077*o.getValue()+a.getValue(),d=new String(f).toString(),x=new V;for(let I=13-d.length;I>0;I--)x.append("0");x.append(d);let g=0;for(let I=0;I<13;I++){let k=x.charAt(I).charCodeAt(0)-48;g+=I&1?k:3*k}g=10-g%10,g===10&&(g=0),x.append(g.toString());let m=o.getFinderPattern().getResultPoints(),A=a.getFinderPattern().getResultPoints();return new ue(x.toString(),null,0,[m[0],m[1],A[0],A[1]],fe.RSS_14,new Date().getTime())}static checkChecksum(o,a){let f=(o.getChecksumPortion()+16*a.getChecksumPortion())%79,d=9*o.getFinderPattern().getValue()+a.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,f===d}decodePair(o,a,f,d){try{let x=this.findFinderPattern(o,a),g=this.parseFoundFinderPattern(o,f,a,x),m=d==null?null:d.get(R.NEED_RESULT_POINT_CALLBACK);if(m!=null){let k=(x[0]+x[1])/2;a&&(k=o.getSize()-1-k),m.foundPossibleResultPoint(new Ce(k,f))}let A=this.decodeDataCharacter(o,g,!0),I=this.decodeDataCharacter(o,g,!1);return new Ls(1597*A.getValue()+I.getValue(),A.getChecksumPortion()+4*I.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(o,a,f){let d=this.getDataCharacterCounters();for(let ye=0;ye<d.length;ye++)d[ye]=0;if(f)Ke.recordPatternInReverse(o,a.getStartEnd()[0],d);else{Ke.recordPattern(o,a.getStartEnd()[1]+1,d);for(let ye=0,_e=d.length-1;ye<_e;ye++,_e--){let Fe=d[ye];d[ye]=d[_e],d[_e]=Fe}}let x=f?16:15,g=Je.sum(new Int32Array(d))/x,m=this.getOddCounts(),A=this.getEvenCounts(),I=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let ye=0;ye<d.length;ye++){let _e=d[ye]/g,Fe=Math.floor(_e+.5);Fe<1?Fe=1:Fe>8&&(Fe=8);let Le=Math.floor(ye/2);ye&1?(A[Le]=Fe,k[Le]=_e-Fe):(m[Le]=Fe,I[Le]=_e-Fe)}this.adjustOddEvenCounts(f,x);let $=0,Q=0;for(let ye=m.length-1;ye>=0;ye--)Q*=9,Q+=m[ye],$+=m[ye];let ce=0,xe=0;for(let ye=A.length-1;ye>=0;ye--)ce*=9,ce+=A[ye],xe+=A[ye];let ge=Q+3*ce;if(f){if($&1||$>12||$<4)throw new C;let ye=(12-$)/2,_e=Er.OUTSIDE_ODD_WIDEST[ye],Fe=9-_e,Le=mt.getRSSvalue(m,_e,!1),Be=mt.getRSSvalue(A,Fe,!0),rr=Er.OUTSIDE_EVEN_TOTAL_SUBSET[ye],jt=Er.OUTSIDE_GSUM[ye];return new bt(Le*rr+Be+jt,ge)}else{if(xe&1||xe>10||xe<4)throw new C;let ye=(10-xe)/2,_e=Er.INSIDE_ODD_WIDEST[ye],Fe=9-_e,Le=mt.getRSSvalue(m,_e,!0),Be=mt.getRSSvalue(A,Fe,!1),rr=Er.INSIDE_ODD_TOTAL_SUBSET[ye],jt=Er.INSIDE_GSUM[ye];return new bt(Be*rr+Le+jt,ge)}}findFinderPattern(o,a){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=o.getSize(),x=!1,g=0;for(;g<d&&(x=!o.get(g),a!==x);)g++;let m=0,A=g;for(let I=g;I<d;I++)if(o.get(I)!==x)f[m]++;else{if(m===3){if(ot.isFinderPattern(f))return[A,I];A+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,m--}else m++;f[m]=1,x=!x}throw new C}parseFoundFinderPattern(o,a,f,d){let x=o.get(d[0]),g=d[0]-1;for(;g>=0&&x!==o.get(g);)g--;g++;const m=d[0]-g,A=this.getDecodeFinderCounters(),I=new Int32Array(A.length);S.arraycopy(A,0,I,1,A.length-1),I[0]=m;const k=this.parseFinderValue(I,Er.FINDER_PATTERNS);let $=g,Q=d[1];return f&&($=o.getSize()-1-$,Q=o.getSize()-1-Q),new cr(k,[g,d[1]],$,Q,a)}adjustOddEvenCounts(o,a){let f=Je.sum(new Int32Array(this.getOddCounts())),d=Je.sum(new Int32Array(this.getEvenCounts())),x=!1,g=!1,m=!1,A=!1;o?(f>12?g=!0:f<4&&(x=!0),d>12?A=!0:d<4&&(m=!0)):(f>11?g=!0:f<5&&(x=!0),d>10?A=!0:d<4&&(m=!0));let I=f+d-a,k=(f&1)===(o?1:0),$=(d&1)===1;if(I===1)if(k){if($)throw new C;g=!0}else{if(!$)throw new C;A=!0}else if(I===-1)if(k){if($)throw new C;x=!0}else{if(!$)throw new C;m=!0}else if(I===0){if(k){if(!$)throw new C;f<d?(x=!0,A=!0):(g=!0,m=!0)}else if($)throw new C}else throw new C;if(x){if(g)throw new C;ot.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&ot.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(A)throw new C;ot.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&ot.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Er.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Er.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Er.OUTSIDE_GSUM=[0,161,961,2015,2715],Er.INSIDE_GSUM=[0,336,1036,1516],Er.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Er.INSIDE_ODD_WIDEST=[2,4,6,8],Er.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class zi extends Ke{constructor(o,a){super(),this.readers=[],this.verbose=a===!0;const f=o?o.get(R.POSSIBLE_FORMATS):null,d=o&&o.get(R.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;f?((f.includes(fe.EAN_13)||f.includes(fe.UPC_A)||f.includes(fe.EAN_8)||f.includes(fe.UPC_E))&&this.readers.push(new sr(o)),f.includes(fe.CODE_39)&&this.readers.push(new qe(d)),f.includes(fe.CODE_128)&&this.readers.push(new Ie),f.includes(fe.ITF)&&this.readers.push(new rt),f.includes(fe.RSS_14)&&this.readers.push(new Er),f.includes(fe.RSS_EXPANDED)&&this.readers.push(new Oe(this.verbose))):(this.readers.push(new sr(o)),this.readers.push(new qe),this.readers.push(new sr(o)),this.readers.push(new Ie),this.readers.push(new rt),this.readers.push(new Er),this.readers.push(new Oe(this.verbose)))}decodeRow(o,a,f){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(o,a,f)}catch{}throw new C}reset(){this.readers.forEach(o=>o.reset())}}class fi extends G{constructor(o=500,a){super(new zi(a),o,a)}}class tr{constructor(o,a,f){this.ecCodewords=o,this.ecBlocks=[a],f&&this.ecBlocks.push(f)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class er{constructor(o,a){this.count=o,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Kt{constructor(o,a,f,d,x,g){this.versionNumber=o,this.symbolSizeRows=a,this.symbolSizeColumns=f,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=x,this.ecBlocks=g;let m=0;const A=g.getECCodewords(),I=g.getECBlocks();for(let k of I)m+=k.getCount()*(k.getDataCodewords()+A);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,a){if(o&1||a&1)throw new v;for(let f of Kt.VERSIONS)if(f.symbolSizeRows===o&&f.symbolSizeColumns===a)return f;throw new v}toString(){return""+this.versionNumber}static buildVersions(){return[new Kt(1,10,10,8,8,new tr(5,new er(1,3))),new Kt(2,12,12,10,10,new tr(7,new er(1,5))),new Kt(3,14,14,12,12,new tr(10,new er(1,8))),new Kt(4,16,16,14,14,new tr(12,new er(1,12))),new Kt(5,18,18,16,16,new tr(14,new er(1,18))),new Kt(6,20,20,18,18,new tr(18,new er(1,22))),new Kt(7,22,22,20,20,new tr(20,new er(1,30))),new Kt(8,24,24,22,22,new tr(24,new er(1,36))),new Kt(9,26,26,24,24,new tr(28,new er(1,44))),new Kt(10,32,32,14,14,new tr(36,new er(1,62))),new Kt(11,36,36,16,16,new tr(42,new er(1,86))),new Kt(12,40,40,18,18,new tr(48,new er(1,114))),new Kt(13,44,44,20,20,new tr(56,new er(1,144))),new Kt(14,48,48,22,22,new tr(68,new er(1,174))),new Kt(15,52,52,24,24,new tr(42,new er(2,102))),new Kt(16,64,64,14,14,new tr(56,new er(2,140))),new Kt(17,72,72,16,16,new tr(36,new er(4,92))),new Kt(18,80,80,18,18,new tr(48,new er(4,114))),new Kt(19,88,88,20,20,new tr(56,new er(4,144))),new Kt(20,96,96,22,22,new tr(68,new er(4,174))),new Kt(21,104,104,24,24,new tr(56,new er(6,136))),new Kt(22,120,120,18,18,new tr(68,new er(6,175))),new Kt(23,132,132,20,20,new tr(62,new er(8,163))),new Kt(24,144,144,22,22,new tr(62,new er(8,156),new er(2,155))),new Kt(25,8,18,6,16,new tr(7,new er(1,5))),new Kt(26,8,32,6,14,new tr(11,new er(1,10))),new Kt(27,12,26,10,24,new tr(14,new er(1,16))),new Kt(28,12,36,10,16,new tr(18,new er(1,22))),new Kt(29,16,36,14,16,new tr(24,new er(1,32))),new Kt(30,16,48,14,22,new tr(28,new er(1,49)))]}}Kt.VERSIONS=Kt.buildVersions();class Ao{constructor(o){const a=o.getHeight();if(a<8||a>144||a&1)throw new v;this.version=Ao.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new E(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const a=o.getHeight(),f=o.getWidth();return Kt.getVersionForDimensions(a,f)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let a=0,f=4,d=0;const x=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let m=!1,A=!1,I=!1,k=!1;do if(f===x&&d===0&&!m)o[a++]=this.readCorner1(x,g)&255,f-=2,d+=2,m=!0;else if(f===x-2&&d===0&&g&3&&!A)o[a++]=this.readCorner2(x,g)&255,f-=2,d+=2,A=!0;else if(f===x+4&&d===2&&!(g&7)&&!I)o[a++]=this.readCorner3(x,g)&255,f-=2,d+=2,I=!0;else if(f===x-2&&d===0&&(g&7)===4&&!k)o[a++]=this.readCorner4(x,g)&255,f-=2,d+=2,k=!0;else{do f<x&&d>=0&&!this.readMappingMatrix.get(d,f)&&(o[a++]=this.readUtah(f,d,x,g)&255),f-=2,d+=2;while(f>=0&&d<g);f+=1,d+=3;do f>=0&&d<g&&!this.readMappingMatrix.get(d,f)&&(o[a++]=this.readUtah(f,d,x,g)&255),f+=2,d-=2;while(f<x&&d>=0);f+=3,d+=1}while(f<x||d<g);if(a!==this.version.getTotalCodewords())throw new v;return o}readModule(o,a,f,d){return o<0&&(o+=f,a+=4-(f+4&7)),a<0&&(a+=d,o+=4-(d+4&7)),this.readMappingMatrix.set(a,o),this.mappingBitMatrix.get(a,o)}readUtah(o,a,f,d){let x=0;return this.readModule(o-2,a-2,f,d)&&(x|=1),x<<=1,this.readModule(o-2,a-1,f,d)&&(x|=1),x<<=1,this.readModule(o-1,a-2,f,d)&&(x|=1),x<<=1,this.readModule(o-1,a-1,f,d)&&(x|=1),x<<=1,this.readModule(o-1,a,f,d)&&(x|=1),x<<=1,this.readModule(o,a-2,f,d)&&(x|=1),x<<=1,this.readModule(o,a-1,f,d)&&(x|=1),x<<=1,this.readModule(o,a,f,d)&&(x|=1),x}readCorner1(o,a){let f=0;return this.readModule(o-1,0,o,a)&&(f|=1),f<<=1,this.readModule(o-1,1,o,a)&&(f|=1),f<<=1,this.readModule(o-1,2,o,a)&&(f|=1),f<<=1,this.readModule(0,a-2,o,a)&&(f|=1),f<<=1,this.readModule(0,a-1,o,a)&&(f|=1),f<<=1,this.readModule(1,a-1,o,a)&&(f|=1),f<<=1,this.readModule(2,a-1,o,a)&&(f|=1),f<<=1,this.readModule(3,a-1,o,a)&&(f|=1),f}readCorner2(o,a){let f=0;return this.readModule(o-3,0,o,a)&&(f|=1),f<<=1,this.readModule(o-2,0,o,a)&&(f|=1),f<<=1,this.readModule(o-1,0,o,a)&&(f|=1),f<<=1,this.readModule(0,a-4,o,a)&&(f|=1),f<<=1,this.readModule(0,a-3,o,a)&&(f|=1),f<<=1,this.readModule(0,a-2,o,a)&&(f|=1),f<<=1,this.readModule(0,a-1,o,a)&&(f|=1),f<<=1,this.readModule(1,a-1,o,a)&&(f|=1),f}readCorner3(o,a){let f=0;return this.readModule(o-1,0,o,a)&&(f|=1),f<<=1,this.readModule(o-1,a-1,o,a)&&(f|=1),f<<=1,this.readModule(0,a-3,o,a)&&(f|=1),f<<=1,this.readModule(0,a-2,o,a)&&(f|=1),f<<=1,this.readModule(0,a-1,o,a)&&(f|=1),f<<=1,this.readModule(1,a-3,o,a)&&(f|=1),f<<=1,this.readModule(1,a-2,o,a)&&(f|=1),f<<=1,this.readModule(1,a-1,o,a)&&(f|=1),f}readCorner4(o,a){let f=0;return this.readModule(o-3,0,o,a)&&(f|=1),f<<=1,this.readModule(o-2,0,o,a)&&(f|=1),f<<=1,this.readModule(o-1,0,o,a)&&(f|=1),f<<=1,this.readModule(0,a-2,o,a)&&(f|=1),f<<=1,this.readModule(0,a-1,o,a)&&(f|=1),f<<=1,this.readModule(1,a-1,o,a)&&(f|=1),f<<=1,this.readModule(2,a-1,o,a)&&(f|=1),f<<=1,this.readModule(3,a-1,o,a)&&(f|=1),f}extractDataRegion(o){const a=this.version.getSymbolSizeRows(),f=this.version.getSymbolSizeColumns();if(o.getHeight()!==a)throw new b("Dimension of bitMatrix must match the version size");const d=this.version.getDataRegionSizeRows(),x=this.version.getDataRegionSizeColumns(),g=a/d|0,m=f/x|0,A=g*d,I=m*x,k=new E(I,A);for(let $=0;$<g;++$){const Q=$*d;for(let ce=0;ce<m;++ce){const xe=ce*x;for(let ge=0;ge<d;++ge){const ye=$*(d+2)+1+ge,_e=Q+ge;for(let Fe=0;Fe<x;++Fe){const Le=ce*(x+2)+1+Fe;if(o.get(Le,ye)){const Be=xe+Fe;k.set(Be,_e)}}}}}return k}}class _o{constructor(o,a){this.numDataCodewords=o,this.codewords=a}static getDataBlocks(o,a){const f=a.getECBlocks();let d=0;const x=f.getECBlocks();for(let ge of x)d+=ge.getCount();const g=new Array(d);let m=0;for(let ge of x)for(let ye=0;ye<ge.getCount();ye++){const _e=ge.getDataCodewords(),Fe=f.getECCodewords()+_e;g[m++]=new _o(_e,new Uint8Array(Fe))}const I=g[0].codewords.length-f.getECCodewords(),k=I-1;let $=0;for(let ge=0;ge<k;ge++)for(let ye=0;ye<m;ye++)g[ye].codewords[ge]=o[$++];const Q=a.getVersionNumber()===24,ce=Q?8:m;for(let ge=0;ge<ce;ge++)g[ge].codewords[I-1]=o[$++];const xe=g[0].codewords.length;for(let ge=I;ge<xe;ge++)for(let ye=0;ye<m;ye++){const _e=Q?(ye+8)%m:ye,Fe=Q&&_e>7?ge-1:ge;g[_e].codewords[Fe]=o[$++]}if($!==o.length)throw new b;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class $l{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new b(""+o);let a=0,f=this.bitOffset,d=this.byteOffset;const x=this.bytes;if(f>0){const g=8-f,m=o<g?o:g,A=g-m,I=255>>8-m<<A;a=(x[d]&I)>>A,o-=m,f+=m,f===8&&(f=0,d++)}if(o>0){for(;o>=8;)a=a<<8|x[d]&255,d++,o-=8;if(o>0){const g=8-o,m=255>>g<<g;a=a<<o|(x[d]&m)>>g,f+=o}}return this.bitOffset=f,this.byteOffset=d,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var jr;(function(q){q[q.PAD_ENCODE=0]="PAD_ENCODE",q[q.ASCII_ENCODE=1]="ASCII_ENCODE",q[q.C40_ENCODE=2]="C40_ENCODE",q[q.TEXT_ENCODE=3]="TEXT_ENCODE",q[q.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",q[q.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",q[q.BASE256_ENCODE=6]="BASE256_ENCODE"})(jr||(jr={}));class ks{static decode(o){const a=new $l(o),f=new V,d=new V,x=new Array;let g=jr.ASCII_ENCODE;do if(g===jr.ASCII_ENCODE)g=this.decodeAsciiSegment(a,f,d);else{switch(g){case jr.C40_ENCODE:this.decodeC40Segment(a,f);break;case jr.TEXT_ENCODE:this.decodeTextSegment(a,f);break;case jr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,f);break;case jr.EDIFACT_ENCODE:this.decodeEdifactSegment(a,f);break;case jr.BASE256_ENCODE:this.decodeBase256Segment(a,f,x);break;default:throw new v}g=jr.ASCII_ENCODE}while(g!==jr.PAD_ENCODE&&a.available()>0);return d.length()>0&&f.append(d.toString()),new se(o,f.toString(),x.length===0?null:x,null)}static decodeAsciiSegment(o,a,f){let d=!1;do{let x=o.readBits(8);if(x===0)throw new v;if(x<=128)return d&&(x+=128),a.append(String.fromCharCode(x-1)),jr.ASCII_ENCODE;if(x===129)return jr.PAD_ENCODE;if(x<=229){const g=x-130;g<10&&a.append("0"),a.append(""+g)}else switch(x){case 230:return jr.C40_ENCODE;case 231:return jr.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:d=!0;break;case 236:a.append("[)>05"),f.insert(0,"");break;case 237:a.append("[)>06"),f.insert(0,"");break;case 238:return jr.ANSIX12_ENCODE;case 239:return jr.TEXT_ENCODE;case 240:return jr.EDIFACT_ENCODE;case 241:break;default:if(x!==254||o.available()!==0)throw new v;break}}while(o.available()>0);return jr.ASCII_ENCODE}static decodeC40Segment(o,a){let f=!1;const d=[];let x=0;do{if(o.available()===8)return;const g=o.readBits(8);if(g===254)return;this.parseTwoBytes(g,o.readBits(8),d);for(let m=0;m<3;m++){const A=d[m];switch(x){case 0:if(A<3)x=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const I=this.C40_BASIC_SET_CHARS[A];f?(a.append(String.fromCharCode(I.charCodeAt(0)+128)),f=!1):a.append(I)}else throw new v;break;case 1:f?(a.append(String.fromCharCode(A+128)),f=!1):a.append(String.fromCharCode(A)),x=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const I=this.C40_SHIFT2_SET_CHARS[A];f?(a.append(String.fromCharCode(I.charCodeAt(0)+128)),f=!1):a.append(I)}else switch(A){case 27:a.append("");break;case 30:f=!0;break;default:throw new v}x=0;break;case 3:f?(a.append(String.fromCharCode(A+224)),f=!1):a.append(String.fromCharCode(A+96)),x=0;break;default:throw new v}}}while(o.available()>0)}static decodeTextSegment(o,a){let f=!1,d=[],x=0;do{if(o.available()===8)return;const g=o.readBits(8);if(g===254)return;this.parseTwoBytes(g,o.readBits(8),d);for(let m=0;m<3;m++){const A=d[m];switch(x){case 0:if(A<3)x=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const I=this.TEXT_BASIC_SET_CHARS[A];f?(a.append(String.fromCharCode(I.charCodeAt(0)+128)),f=!1):a.append(I)}else throw new v;break;case 1:f?(a.append(String.fromCharCode(A+128)),f=!1):a.append(String.fromCharCode(A)),x=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const I=this.TEXT_SHIFT2_SET_CHARS[A];f?(a.append(String.fromCharCode(I.charCodeAt(0)+128)),f=!1):a.append(I)}else switch(A){case 27:a.append("");break;case 30:f=!0;break;default:throw new v}x=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const I=this.TEXT_SHIFT3_SET_CHARS[A];f?(a.append(String.fromCharCode(I.charCodeAt(0)+128)),f=!1):a.append(I),x=0}else throw new v;break;default:throw new v}}}while(o.available()>0)}static decodeAnsiX12Segment(o,a){const f=[];do{if(o.available()===8)return;const d=o.readBits(8);if(d===254)return;this.parseTwoBytes(d,o.readBits(8),f);for(let x=0;x<3;x++){const g=f[x];switch(g){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(g<14)a.append(String.fromCharCode(g+44));else if(g<40)a.append(String.fromCharCode(g+51));else throw new v;break}}}while(o.available()>0)}static parseTwoBytes(o,a,f){let d=(o<<8)+a-1,x=Math.floor(d/1600);f[0]=x,d-=x*1600,x=Math.floor(d/40),f[1]=x,f[2]=d-x*40}static decodeEdifactSegment(o,a){do{if(o.available()<=16)return;for(let f=0;f<4;f++){let d=o.readBits(6);if(d===31){const x=8-o.getBitOffset();x!==8&&o.readBits(x);return}d&32||(d|=64),a.append(String.fromCharCode(d))}}while(o.available()>0)}static decodeBase256Segment(o,a,f){let d=1+o.getByteOffset();const x=this.unrandomize255State(o.readBits(8),d++);let g;if(x===0?g=o.available()/8|0:x<250?g=x:g=250*(x-249)+this.unrandomize255State(o.readBits(8),d++),g<0)throw new v;const m=new Uint8Array(g);for(let A=0;A<g;A++){if(o.available()<8)throw new v;m[A]=this.unrandomize255State(o.readBits(8),d++)}f.push(m);try{a.append(ne.decode(m,le.ISO88591))}catch(A){throw new Pe("Platform does not support required encoding: "+A.message)}}static unrandomize255State(o,a){const f=149*a%255+1,d=o-f;return d>=0?d:d+256}}ks.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ks.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ks.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ks.TEXT_SHIFT2_SET_CHARS=ks.C40_SHIFT2_SET_CHARS,ks.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class x0{constructor(){this.rsDecoder=new pt(Ae.DATA_MATRIX_FIELD_256)}decode(o){const a=new Ao(o),f=a.getVersion(),d=a.readCodewords(),x=_o.getDataBlocks(d,f);let g=0;for(let I of x)g+=I.getNumDataCodewords();const m=new Uint8Array(g),A=x.length;for(let I=0;I<A;I++){const k=x[I],$=k.getCodewords(),Q=k.getNumDataCodewords();this.correctErrors($,Q);for(let ce=0;ce<Q;ce++)m[ce*A+I]=$[ce]}return ks.decode(m)}correctErrors(o,a){const f=new Int32Array(o);try{this.rsDecoder.decode(f,o.length-a)}catch{throw new w}for(let d=0;d<a;d++)o[d]=f[d]}}class Gr{constructor(o){this.image=o,this.rectangleDetector=new $e(this.image)}detect(){const o=this.rectangleDetector.detect();let a=this.detectSolid1(o);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new C;a=this.shiftToModuleCenter(a);const f=a[0],d=a[1],x=a[2],g=a[3];let m=this.transitionsBetween(f,g)+1,A=this.transitionsBetween(x,g)+1;(m&1)===1&&(m+=1),(A&1)===1&&(A+=1),4*m<7*A&&4*A<7*m&&(m=A=Math.max(m,A));let I=Gr.sampleGrid(this.image,f,d,x,g,m,A);return new ut(I,[f,d,x,g])}static shiftPoint(o,a,f){let d=(a.getX()-o.getX())/(f+1),x=(a.getY()-o.getY())/(f+1);return new Ce(o.getX()+d,o.getY()+x)}static moveAway(o,a,f){let d=o.getX(),x=o.getY();return d<a?d-=1:d+=1,x<f?x-=1:x+=1,new Ce(d,x)}detectSolid1(o){let a=o[0],f=o[1],d=o[3],x=o[2],g=this.transitionsBetween(a,f),m=this.transitionsBetween(f,d),A=this.transitionsBetween(d,x),I=this.transitionsBetween(x,a),k=g,$=[x,a,f,d];return k>m&&(k=m,$[0]=a,$[1]=f,$[2]=d,$[3]=x),k>A&&(k=A,$[0]=f,$[1]=d,$[2]=x,$[3]=a),k>I&&($[0]=d,$[1]=x,$[2]=a,$[3]=f),$}detectSolid2(o){let a=o[0],f=o[1],d=o[2],x=o[3],g=this.transitionsBetween(a,x),m=Gr.shiftPoint(f,d,(g+1)*4),A=Gr.shiftPoint(d,f,(g+1)*4),I=this.transitionsBetween(m,a),k=this.transitionsBetween(A,x);return I<k?(o[0]=a,o[1]=f,o[2]=d,o[3]=x):(o[0]=f,o[1]=d,o[2]=x,o[3]=a),o}correctTopRight(o){let a=o[0],f=o[1],d=o[2],x=o[3],g=this.transitionsBetween(a,x),m=this.transitionsBetween(f,x),A=Gr.shiftPoint(a,f,(m+1)*4),I=Gr.shiftPoint(d,f,(g+1)*4);g=this.transitionsBetween(A,x),m=this.transitionsBetween(I,x);let k=new Ce(x.getX()+(d.getX()-f.getX())/(g+1),x.getY()+(d.getY()-f.getY())/(g+1)),$=new Ce(x.getX()+(a.getX()-f.getX())/(m+1),x.getY()+(a.getY()-f.getY())/(m+1));if(!this.isValid(k))return this.isValid($)?$:null;if(!this.isValid($))return k;let Q=this.transitionsBetween(A,k)+this.transitionsBetween(I,k),ce=this.transitionsBetween(A,$)+this.transitionsBetween(I,$);return Q>ce?k:$}shiftToModuleCenter(o){let a=o[0],f=o[1],d=o[2],x=o[3],g=this.transitionsBetween(a,x)+1,m=this.transitionsBetween(d,x)+1,A=Gr.shiftPoint(a,f,m*4),I=Gr.shiftPoint(d,f,g*4);g=this.transitionsBetween(A,x)+1,m=this.transitionsBetween(I,x)+1,(g&1)===1&&(g+=1),(m&1)===1&&(m+=1);let k=(a.getX()+f.getX()+d.getX()+x.getX())/4,$=(a.getY()+f.getY()+d.getY()+x.getY())/4;a=Gr.moveAway(a,k,$),f=Gr.moveAway(f,k,$),d=Gr.moveAway(d,k,$),x=Gr.moveAway(x,k,$);let Q,ce;return A=Gr.shiftPoint(a,f,m*4),A=Gr.shiftPoint(A,x,g*4),Q=Gr.shiftPoint(f,a,m*4),Q=Gr.shiftPoint(Q,d,g*4),I=Gr.shiftPoint(d,x,m*4),I=Gr.shiftPoint(I,f,g*4),ce=Gr.shiftPoint(x,d,m*4),ce=Gr.shiftPoint(ce,a,g*4),[A,Q,I,ce]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,a,f,d,x,g,m){return wt.getInstance().sampleGrid(o,g,m,.5,.5,g-.5,.5,g-.5,m-.5,.5,m-.5,a.getX(),a.getY(),x.getX(),x.getY(),d.getX(),d.getY(),f.getX(),f.getY())}transitionsBetween(o,a){let f=Math.trunc(o.getX()),d=Math.trunc(o.getY()),x=Math.trunc(a.getX()),g=Math.trunc(a.getY()),m=Math.abs(g-d)>Math.abs(x-f);if(m){let ge=f;f=d,d=ge,ge=x,x=g,g=ge}let A=Math.abs(x-f),I=Math.abs(g-d),k=-A/2,$=d<g?1:-1,Q=f<x?1:-1,ce=0,xe=this.image.get(m?d:f,m?f:d);for(let ge=f,ye=d;ge!==x;ge+=Q){let _e=this.image.get(m?ye:ge,m?ge:ye);if(_e!==xe&&(ce++,xe=_e),k+=I,k>0){if(ye===g)break;ye+=$,k-=A}}return ce}}class us{constructor(){this.decoder=new x0}decode(o,a=null){let f,d;if(a!=null&&a.has(R.PURE_BARCODE)){const I=us.extractPureBits(o.getBlackMatrix());f=this.decoder.decode(I),d=us.NO_POINTS}else{const I=new Gr(o.getBlackMatrix()).detect();f=this.decoder.decode(I.getBits()),d=I.getPoints()}const x=f.getRawBytes(),g=new ue(f.getText(),x,8*x.length,d,fe.DATA_MATRIX,S.currentTimeMillis()),m=f.getByteSegments();m!=null&&g.putMetadata(re.BYTE_SEGMENTS,m);const A=f.getECLevel();return A!=null&&g.putMetadata(re.ERROR_CORRECTION_LEVEL,A),g}reset(){}static extractPureBits(o){const a=o.getTopLeftOnBit(),f=o.getBottomRightOnBit();if(a==null||f==null)throw new C;const d=this.moduleSize(a,o);let x=a[1];const g=f[1];let m=a[0];const I=(f[0]-m+1)/d,k=(g-x+1)/d;if(I<=0||k<=0)throw new C;const $=d/2;x+=$,m+=$;const Q=new E(I,k);for(let ce=0;ce<k;ce++){const xe=x+ce*d;for(let ge=0;ge<I;ge++)o.get(m+ge*d,xe)&&Q.set(ge,ce)}return Q}static moduleSize(o,a){const f=a.getWidth();let d=o[0];const x=o[1];for(;d<f&&a.get(d,x);)d++;if(d===f)throw new C;const g=d-o[0];if(g===0)throw new C;return g}}us.NO_POINTS=[];class Cx extends G{constructor(o=500){super(new us,o)}}var wa;(function(q){q[q.L=0]="L",q[q.M=1]="M",q[q.Q=2]="Q",q[q.H=3]="H"})(wa||(wa={}));class Ar{constructor(o,a,f){this.value=o,this.stringValue=a,this.bits=f,Ar.FOR_BITS.set(f,this),Ar.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return Ar.L;case"M":return Ar.M;case"Q":return Ar.Q;case"H":return Ar.H;default:throw new p(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof Ar))return!1;const a=o;return this.value===a.value}static forBits(o){if(o<0||o>=Ar.FOR_BITS.size)throw new b;return Ar.FOR_BITS.get(o)}}Ar.FOR_BITS=new Map,Ar.FOR_VALUE=new Map,Ar.L=new Ar(wa.L,"L",1),Ar.M=new Ar(wa.M,"M",0),Ar.Q=new Ar(wa.Q,"Q",3),Ar.H=new Ar(wa.H,"H",2);class dn{constructor(o){this.errorCorrectionLevel=Ar.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,a){return O.bitCount(o^a)}static decodeFormatInformation(o,a){const f=dn.doDecodeFormatInformation(o,a);return f!==null?f:dn.doDecodeFormatInformation(o^dn.FORMAT_INFO_MASK_QR,a^dn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,a){let f=Number.MAX_SAFE_INTEGER,d=0;for(const x of dn.FORMAT_INFO_DECODE_LOOKUP){const g=x[0];if(g===o||g===a)return new dn(x[1]);let m=dn.numBitsDiffering(o,g);m<f&&(d=x[1],f=m),o!==a&&(m=dn.numBitsDiffering(a,g),m<f&&(d=x[1],f=m))}return f<=3?new dn(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof dn))return!1;const a=o;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}dn.FORMAT_INFO_MASK_QR=21522,dn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class we{constructor(o,...a){this.ecCodewordsPerBlock=o,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const a=this.ecBlocks;for(const f of a)o+=f.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class oe{constructor(o,a){this.count=o,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class gt{constructor(o,a,...f){this.versionNumber=o,this.alignmentPatternCenters=a,this.ecBlocks=f;let d=0;const x=f[0].getECCodewordsPerBlock(),g=f[0].getECBlocks();for(const m of g)d+=m.getCount()*(m.getDataCodewords()+x);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new v;try{return this.getVersionForNumber((o-17)/4)}catch{throw new v}}static getVersionForNumber(o){if(o<1||o>40)throw new b;return gt.VERSIONS[o-1]}static decodeVersionInformation(o){let a=Number.MAX_SAFE_INTEGER,f=0;for(let d=0;d<gt.VERSION_DECODE_INFO.length;d++){const x=gt.VERSION_DECODE_INFO[d];if(x===o)return gt.getVersionForNumber(d+7);const g=dn.numBitsDiffering(o,x);g<a&&(f=d+7,a=g)}return a<=3?gt.getVersionForNumber(f):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),a=new E(o);a.setRegion(0,0,9,9),a.setRegion(o-8,0,8,9),a.setRegion(0,o-8,9,8);const f=this.alignmentPatternCenters.length;for(let d=0;d<f;d++){const x=this.alignmentPatternCenters[d]-2;for(let g=0;g<f;g++)d===0&&(g===0||g===f-1)||d===f-1&&g===0||a.setRegion(this.alignmentPatternCenters[g]-2,x,5,5)}return a.setRegion(6,9,1,o-17),a.setRegion(9,6,o-17,1),this.versionNumber>6&&(a.setRegion(o-11,0,3,6),a.setRegion(0,o-11,6,3)),a}toString(){return""+this.versionNumber}}gt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),gt.VERSIONS=[new gt(1,new Int32Array(0),new we(7,new oe(1,19)),new we(10,new oe(1,16)),new we(13,new oe(1,13)),new we(17,new oe(1,9))),new gt(2,Int32Array.from([6,18]),new we(10,new oe(1,34)),new we(16,new oe(1,28)),new we(22,new oe(1,22)),new we(28,new oe(1,16))),new gt(3,Int32Array.from([6,22]),new we(15,new oe(1,55)),new we(26,new oe(1,44)),new we(18,new oe(2,17)),new we(22,new oe(2,13))),new gt(4,Int32Array.from([6,26]),new we(20,new oe(1,80)),new we(18,new oe(2,32)),new we(26,new oe(2,24)),new we(16,new oe(4,9))),new gt(5,Int32Array.from([6,30]),new we(26,new oe(1,108)),new we(24,new oe(2,43)),new we(18,new oe(2,15),new oe(2,16)),new we(22,new oe(2,11),new oe(2,12))),new gt(6,Int32Array.from([6,34]),new we(18,new oe(2,68)),new we(16,new oe(4,27)),new we(24,new oe(4,19)),new we(28,new oe(4,15))),new gt(7,Int32Array.from([6,22,38]),new we(20,new oe(2,78)),new we(18,new oe(4,31)),new we(18,new oe(2,14),new oe(4,15)),new we(26,new oe(4,13),new oe(1,14))),new gt(8,Int32Array.from([6,24,42]),new we(24,new oe(2,97)),new we(22,new oe(2,38),new oe(2,39)),new we(22,new oe(4,18),new oe(2,19)),new we(26,new oe(4,14),new oe(2,15))),new gt(9,Int32Array.from([6,26,46]),new we(30,new oe(2,116)),new we(22,new oe(3,36),new oe(2,37)),new we(20,new oe(4,16),new oe(4,17)),new we(24,new oe(4,12),new oe(4,13))),new gt(10,Int32Array.from([6,28,50]),new we(18,new oe(2,68),new oe(2,69)),new we(26,new oe(4,43),new oe(1,44)),new we(24,new oe(6,19),new oe(2,20)),new we(28,new oe(6,15),new oe(2,16))),new gt(11,Int32Array.from([6,30,54]),new we(20,new oe(4,81)),new we(30,new oe(1,50),new oe(4,51)),new we(28,new oe(4,22),new oe(4,23)),new we(24,new oe(3,12),new oe(8,13))),new gt(12,Int32Array.from([6,32,58]),new we(24,new oe(2,92),new oe(2,93)),new we(22,new oe(6,36),new oe(2,37)),new we(26,new oe(4,20),new oe(6,21)),new we(28,new oe(7,14),new oe(4,15))),new gt(13,Int32Array.from([6,34,62]),new we(26,new oe(4,107)),new we(22,new oe(8,37),new oe(1,38)),new we(24,new oe(8,20),new oe(4,21)),new we(22,new oe(12,11),new oe(4,12))),new gt(14,Int32Array.from([6,26,46,66]),new we(30,new oe(3,115),new oe(1,116)),new we(24,new oe(4,40),new oe(5,41)),new we(20,new oe(11,16),new oe(5,17)),new we(24,new oe(11,12),new oe(5,13))),new gt(15,Int32Array.from([6,26,48,70]),new we(22,new oe(5,87),new oe(1,88)),new we(24,new oe(5,41),new oe(5,42)),new we(30,new oe(5,24),new oe(7,25)),new we(24,new oe(11,12),new oe(7,13))),new gt(16,Int32Array.from([6,26,50,74]),new we(24,new oe(5,98),new oe(1,99)),new we(28,new oe(7,45),new oe(3,46)),new we(24,new oe(15,19),new oe(2,20)),new we(30,new oe(3,15),new oe(13,16))),new gt(17,Int32Array.from([6,30,54,78]),new we(28,new oe(1,107),new oe(5,108)),new we(28,new oe(10,46),new oe(1,47)),new we(28,new oe(1,22),new oe(15,23)),new we(28,new oe(2,14),new oe(17,15))),new gt(18,Int32Array.from([6,30,56,82]),new we(30,new oe(5,120),new oe(1,121)),new we(26,new oe(9,43),new oe(4,44)),new we(28,new oe(17,22),new oe(1,23)),new we(28,new oe(2,14),new oe(19,15))),new gt(19,Int32Array.from([6,30,58,86]),new we(28,new oe(3,113),new oe(4,114)),new we(26,new oe(3,44),new oe(11,45)),new we(26,new oe(17,21),new oe(4,22)),new we(26,new oe(9,13),new oe(16,14))),new gt(20,Int32Array.from([6,34,62,90]),new we(28,new oe(3,107),new oe(5,108)),new we(26,new oe(3,41),new oe(13,42)),new we(30,new oe(15,24),new oe(5,25)),new we(28,new oe(15,15),new oe(10,16))),new gt(21,Int32Array.from([6,28,50,72,94]),new we(28,new oe(4,116),new oe(4,117)),new we(26,new oe(17,42)),new we(28,new oe(17,22),new oe(6,23)),new we(30,new oe(19,16),new oe(6,17))),new gt(22,Int32Array.from([6,26,50,74,98]),new we(28,new oe(2,111),new oe(7,112)),new we(28,new oe(17,46)),new we(30,new oe(7,24),new oe(16,25)),new we(24,new oe(34,13))),new gt(23,Int32Array.from([6,30,54,78,102]),new we(30,new oe(4,121),new oe(5,122)),new we(28,new oe(4,47),new oe(14,48)),new we(30,new oe(11,24),new oe(14,25)),new we(30,new oe(16,15),new oe(14,16))),new gt(24,Int32Array.from([6,28,54,80,106]),new we(30,new oe(6,117),new oe(4,118)),new we(28,new oe(6,45),new oe(14,46)),new we(30,new oe(11,24),new oe(16,25)),new we(30,new oe(30,16),new oe(2,17))),new gt(25,Int32Array.from([6,32,58,84,110]),new we(26,new oe(8,106),new oe(4,107)),new we(28,new oe(8,47),new oe(13,48)),new we(30,new oe(7,24),new oe(22,25)),new we(30,new oe(22,15),new oe(13,16))),new gt(26,Int32Array.from([6,30,58,86,114]),new we(28,new oe(10,114),new oe(2,115)),new we(28,new oe(19,46),new oe(4,47)),new we(28,new oe(28,22),new oe(6,23)),new we(30,new oe(33,16),new oe(4,17))),new gt(27,Int32Array.from([6,34,62,90,118]),new we(30,new oe(8,122),new oe(4,123)),new we(28,new oe(22,45),new oe(3,46)),new we(30,new oe(8,23),new oe(26,24)),new we(30,new oe(12,15),new oe(28,16))),new gt(28,Int32Array.from([6,26,50,74,98,122]),new we(30,new oe(3,117),new oe(10,118)),new we(28,new oe(3,45),new oe(23,46)),new we(30,new oe(4,24),new oe(31,25)),new we(30,new oe(11,15),new oe(31,16))),new gt(29,Int32Array.from([6,30,54,78,102,126]),new we(30,new oe(7,116),new oe(7,117)),new we(28,new oe(21,45),new oe(7,46)),new we(30,new oe(1,23),new oe(37,24)),new we(30,new oe(19,15),new oe(26,16))),new gt(30,Int32Array.from([6,26,52,78,104,130]),new we(30,new oe(5,115),new oe(10,116)),new we(28,new oe(19,47),new oe(10,48)),new we(30,new oe(15,24),new oe(25,25)),new we(30,new oe(23,15),new oe(25,16))),new gt(31,Int32Array.from([6,30,56,82,108,134]),new we(30,new oe(13,115),new oe(3,116)),new we(28,new oe(2,46),new oe(29,47)),new we(30,new oe(42,24),new oe(1,25)),new we(30,new oe(23,15),new oe(28,16))),new gt(32,Int32Array.from([6,34,60,86,112,138]),new we(30,new oe(17,115)),new we(28,new oe(10,46),new oe(23,47)),new we(30,new oe(10,24),new oe(35,25)),new we(30,new oe(19,15),new oe(35,16))),new gt(33,Int32Array.from([6,30,58,86,114,142]),new we(30,new oe(17,115),new oe(1,116)),new we(28,new oe(14,46),new oe(21,47)),new we(30,new oe(29,24),new oe(19,25)),new we(30,new oe(11,15),new oe(46,16))),new gt(34,Int32Array.from([6,34,62,90,118,146]),new we(30,new oe(13,115),new oe(6,116)),new we(28,new oe(14,46),new oe(23,47)),new we(30,new oe(44,24),new oe(7,25)),new we(30,new oe(59,16),new oe(1,17))),new gt(35,Int32Array.from([6,30,54,78,102,126,150]),new we(30,new oe(12,121),new oe(7,122)),new we(28,new oe(12,47),new oe(26,48)),new we(30,new oe(39,24),new oe(14,25)),new we(30,new oe(22,15),new oe(41,16))),new gt(36,Int32Array.from([6,24,50,76,102,128,154]),new we(30,new oe(6,121),new oe(14,122)),new we(28,new oe(6,47),new oe(34,48)),new we(30,new oe(46,24),new oe(10,25)),new we(30,new oe(2,15),new oe(64,16))),new gt(37,Int32Array.from([6,28,54,80,106,132,158]),new we(30,new oe(17,122),new oe(4,123)),new we(28,new oe(29,46),new oe(14,47)),new we(30,new oe(49,24),new oe(10,25)),new we(30,new oe(24,15),new oe(46,16))),new gt(38,Int32Array.from([6,32,58,84,110,136,162]),new we(30,new oe(4,122),new oe(18,123)),new we(28,new oe(13,46),new oe(32,47)),new we(30,new oe(48,24),new oe(14,25)),new we(30,new oe(42,15),new oe(32,16))),new gt(39,Int32Array.from([6,26,54,82,110,138,166]),new we(30,new oe(20,117),new oe(4,118)),new we(28,new oe(40,47),new oe(7,48)),new we(30,new oe(43,24),new oe(22,25)),new we(30,new oe(10,15),new oe(67,16))),new gt(40,Int32Array.from([6,30,58,86,114,142,170]),new we(30,new oe(19,118),new oe(6,119)),new we(28,new oe(18,47),new oe(31,48)),new we(30,new oe(34,24),new oe(34,25)),new we(30,new oe(20,15),new oe(61,16)))];var en;(function(q){q[q.DATA_MASK_000=0]="DATA_MASK_000",q[q.DATA_MASK_001=1]="DATA_MASK_001",q[q.DATA_MASK_010=2]="DATA_MASK_010",q[q.DATA_MASK_011=3]="DATA_MASK_011",q[q.DATA_MASK_100=4]="DATA_MASK_100",q[q.DATA_MASK_101=5]="DATA_MASK_101",q[q.DATA_MASK_110=6]="DATA_MASK_110",q[q.DATA_MASK_111=7]="DATA_MASK_111"})(en||(en={}));class vn{constructor(o,a){this.value=o,this.isMasked=a}unmaskBitMatrix(o,a){for(let f=0;f<a;f++)for(let d=0;d<a;d++)this.isMasked(f,d)&&o.flip(d,f)}}vn.values=new Map([[en.DATA_MASK_000,new vn(en.DATA_MASK_000,(q,o)=>(q+o&1)===0)],[en.DATA_MASK_001,new vn(en.DATA_MASK_001,(q,o)=>(q&1)===0)],[en.DATA_MASK_010,new vn(en.DATA_MASK_010,(q,o)=>o%3===0)],[en.DATA_MASK_011,new vn(en.DATA_MASK_011,(q,o)=>(q+o)%3===0)],[en.DATA_MASK_100,new vn(en.DATA_MASK_100,(q,o)=>(Math.floor(q/2)+Math.floor(o/3)&1)===0)],[en.DATA_MASK_101,new vn(en.DATA_MASK_101,(q,o)=>q*o%6===0)],[en.DATA_MASK_110,new vn(en.DATA_MASK_110,(q,o)=>q*o%6<3)],[en.DATA_MASK_111,new vn(en.DATA_MASK_111,(q,o)=>(q+o+q*o%3&1)===0)]]);class va{constructor(o){const a=o.getHeight();if(a<21||(a&3)!==1)throw new v;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let x=0;x<6;x++)o=this.copyBit(x,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let x=5;x>=0;x--)o=this.copyBit(8,x,o);const a=this.bitMatrix.getHeight();let f=0;const d=a-7;for(let x=a-1;x>=d;x--)f=this.copyBit(8,x,f);for(let x=a-8;x<a;x++)f=this.copyBit(x,8,f);if(this.parsedFormatInfo=dn.decodeFormatInformation(o,f),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new v}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),a=Math.floor((o-17)/4);if(a<=6)return gt.getVersionForNumber(a);let f=0;const d=o-11;for(let g=5;g>=0;g--)for(let m=o-9;m>=d;m--)f=this.copyBit(m,g,f);let x=gt.decodeVersionInformation(f);if(x!==null&&x.getDimensionForVersion()===o)return this.parsedVersion=x,x;f=0;for(let g=5;g>=0;g--)for(let m=o-9;m>=d;m--)f=this.copyBit(g,m,f);if(x=gt.decodeVersionInformation(f),x!==null&&x.getDimensionForVersion()===o)return this.parsedVersion=x,x;throw new v}copyBit(o,a,f){return(this.isMirror?this.bitMatrix.get(a,o):this.bitMatrix.get(o,a))?f<<1|1:f<<1}readCodewords(){const o=this.readFormatInformation(),a=this.readVersion(),f=vn.values.get(o.getDataMask()),d=this.bitMatrix.getHeight();f.unmaskBitMatrix(this.bitMatrix,d);const x=a.buildFunctionPattern();let g=!0;const m=new Uint8Array(a.getTotalCodewords());let A=0,I=0,k=0;for(let $=d-1;$>0;$-=2){$===6&&$--;for(let Q=0;Q<d;Q++){const ce=g?d-1-Q:Q;for(let xe=0;xe<2;xe++)x.get($-xe,ce)||(k++,I<<=1,this.bitMatrix.get($-xe,ce)&&(I|=1),k===8&&(m[A++]=I,k=0,I=0))}g=!g}if(A!==a.getTotalCodewords())throw new v;return m}remask(){if(this.parsedFormatInfo===null)return;const o=vn.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let a=0,f=o.getWidth();a<f;a++)for(let d=a+1,x=o.getHeight();d<x;d++)o.get(a,d)!==o.get(d,a)&&(o.flip(d,a),o.flip(a,d))}}class Kl{constructor(o,a){this.numDataCodewords=o,this.codewords=a}static getDataBlocks(o,a,f){if(o.length!==a.getTotalCodewords())throw new b;const d=a.getECBlocksForLevel(f);let x=0;const g=d.getECBlocks();for(const xe of g)x+=xe.getCount();const m=new Array(x);let A=0;for(const xe of g)for(let ge=0;ge<xe.getCount();ge++){const ye=xe.getDataCodewords(),_e=d.getECCodewordsPerBlock()+ye;m[A++]=new Kl(ye,new Uint8Array(_e))}const I=m[0].codewords.length;let k=m.length-1;for(;k>=0&&m[k].codewords.length!==I;)k--;k++;const $=I-d.getECCodewordsPerBlock();let Q=0;for(let xe=0;xe<$;xe++)for(let ge=0;ge<A;ge++)m[ge].codewords[xe]=o[Q++];for(let xe=k;xe<A;xe++)m[xe].codewords[$]=o[Q++];const ce=m[0].codewords.length;for(let xe=$;xe<ce;xe++)for(let ge=0;ge<A;ge++){const ye=ge<k?xe:xe+1;m[ge].codewords[ye]=o[Q++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var li;(function(q){q[q.TERMINATOR=0]="TERMINATOR",q[q.NUMERIC=1]="NUMERIC",q[q.ALPHANUMERIC=2]="ALPHANUMERIC",q[q.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",q[q.BYTE=4]="BYTE",q[q.ECI=5]="ECI",q[q.KANJI=6]="KANJI",q[q.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",q[q.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",q[q.HANZI=9]="HANZI"})(li||(li={}));class ht{constructor(o,a,f,d){this.value=o,this.stringValue=a,this.characterCountBitsForVersions=f,this.bits=d,ht.FOR_BITS.set(d,this),ht.FOR_VALUE.set(o,this)}static forBits(o){const a=ht.FOR_BITS.get(o);if(a===void 0)throw new b;return a}getCharacterCountBits(o){const a=o.getVersionNumber();let f;return a<=9?f=0:a<=26?f=1:f=2,this.characterCountBitsForVersions[f]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof ht))return!1;const a=o;return this.value===a.value}toString(){return this.stringValue}}ht.FOR_BITS=new Map,ht.FOR_VALUE=new Map,ht.TERMINATOR=new ht(li.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ht.NUMERIC=new ht(li.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ht.ALPHANUMERIC=new ht(li.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ht.STRUCTURED_APPEND=new ht(li.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ht.BYTE=new ht(li.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ht.ECI=new ht(li.ECI,"ECI",Int32Array.from([0,0,0]),7),ht.KANJI=new ht(li.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ht.FNC1_FIRST_POSITION=new ht(li.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ht.FNC1_SECOND_POSITION=new ht(li.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ht.HANZI=new ht(li.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Mr{static decode(o,a,f,d){const x=new $l(o);let g=new V;const m=new Array;let A=-1,I=-1;try{let k=null,$=!1,Q;do{if(x.available()<4)Q=ht.TERMINATOR;else{const ce=x.readBits(4);Q=ht.forBits(ce)}switch(Q){case ht.TERMINATOR:break;case ht.FNC1_FIRST_POSITION:case ht.FNC1_SECOND_POSITION:$=!0;break;case ht.STRUCTURED_APPEND:if(x.available()<16)throw new v;A=x.readBits(8),I=x.readBits(8);break;case ht.ECI:const ce=Mr.parseECIValue(x);if(k=Y.getCharacterSetECIByValue(ce),k===null)throw new v;break;case ht.HANZI:const xe=x.readBits(4),ge=x.readBits(Q.getCharacterCountBits(a));xe===Mr.GB2312_SUBSET&&Mr.decodeHanziSegment(x,g,ge);break;default:const ye=x.readBits(Q.getCharacterCountBits(a));switch(Q){case ht.NUMERIC:Mr.decodeNumericSegment(x,g,ye);break;case ht.ALPHANUMERIC:Mr.decodeAlphanumericSegment(x,g,ye,$);break;case ht.BYTE:Mr.decodeByteSegment(x,g,ye,k,m,d);break;case ht.KANJI:Mr.decodeKanjiSegment(x,g,ye);break;default:throw new v}break}}while(Q!==ht.TERMINATOR)}catch{throw new v}return new se(o,g.toString(),m.length===0?null:m,f===null?null:f.toString(),A,I)}static decodeHanziSegment(o,a,f){if(f*13>o.available())throw new v;const d=new Uint8Array(2*f);let x=0;for(;f>0;){const g=o.readBits(13);let m=g/96<<8&4294967295|g%96;m<959?m+=41377:m+=42657,d[x]=m>>8&255,d[x+1]=m&255,x+=2,f--}try{a.append(ne.decode(d,le.GB2312))}catch(g){throw new v(g)}}static decodeKanjiSegment(o,a,f){if(f*13>o.available())throw new v;const d=new Uint8Array(2*f);let x=0;for(;f>0;){const g=o.readBits(13);let m=g/192<<8&4294967295|g%192;m<7936?m+=33088:m+=49472,d[x]=m>>8,d[x+1]=m,x+=2,f--}try{a.append(ne.decode(d,le.SHIFT_JIS))}catch(g){throw new v(g)}}static decodeByteSegment(o,a,f,d,x,g){if(8*f>o.available())throw new v;const m=new Uint8Array(f);for(let I=0;I<f;I++)m[I]=o.readBits(8);let A;d===null?A=le.guessEncoding(m,g):A=d.getName();try{a.append(ne.decode(m,A))}catch(I){throw new v(I)}x.push(m)}static toAlphaNumericChar(o){if(o>=Mr.ALPHANUMERIC_CHARS.length)throw new v;return Mr.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,a,f,d){const x=a.length();for(;f>1;){if(o.available()<11)throw new v;const g=o.readBits(11);a.append(Mr.toAlphaNumericChar(Math.floor(g/45))),a.append(Mr.toAlphaNumericChar(g%45)),f-=2}if(f===1){if(o.available()<6)throw new v;a.append(Mr.toAlphaNumericChar(o.readBits(6)))}if(d)for(let g=x;g<a.length();g++)a.charAt(g)==="%"&&(g<a.length()-1&&a.charAt(g+1)==="%"?a.deleteCharAt(g+1):a.setCharAt(g,""))}static decodeNumericSegment(o,a,f){for(;f>=3;){if(o.available()<10)throw new v;const d=o.readBits(10);if(d>=1e3)throw new v;a.append(Mr.toAlphaNumericChar(Math.floor(d/100))),a.append(Mr.toAlphaNumericChar(Math.floor(d/10)%10)),a.append(Mr.toAlphaNumericChar(d%10)),f-=3}if(f===2){if(o.available()<7)throw new v;const d=o.readBits(7);if(d>=100)throw new v;a.append(Mr.toAlphaNumericChar(Math.floor(d/10))),a.append(Mr.toAlphaNumericChar(d%10))}else if(f===1){if(o.available()<4)throw new v;const d=o.readBits(4);if(d>=10)throw new v;a.append(Mr.toAlphaNumericChar(d))}}static parseECIValue(o){const a=o.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const f=o.readBits(8);return(a&63)<<8&4294967295|f}if((a&224)===192){const f=o.readBits(16);return(a&31)<<16&4294967295|f}throw new v}}Mr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Mr.GB2312_SUBSET=1;class Wh{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const a=o[0];o[0]=o[2],o[2]=a}}class Sx{constructor(){this.rsDecoder=new pt(Ae.QR_CODE_FIELD_256)}decodeBooleanArray(o,a){return this.decodeBitMatrix(E.parseFromBooleanArray(o),a)}decodeBitMatrix(o,a){const f=new va(o);let d=null;try{return this.decodeBitMatrixParser(f,a)}catch(x){d=x}try{f.remask(),f.setMirror(!0),f.readVersion(),f.readFormatInformation(),f.mirror();const x=this.decodeBitMatrixParser(f,a);return x.setOther(new Wh(!0)),x}catch(x){throw d!==null?d:x}}decodeBitMatrixParser(o,a){const f=o.readVersion(),d=o.readFormatInformation().getErrorCorrectionLevel(),x=o.readCodewords(),g=Kl.getDataBlocks(x,f,d);let m=0;for(const k of g)m+=k.getNumDataCodewords();const A=new Uint8Array(m);let I=0;for(const k of g){const $=k.getCodewords(),Q=k.getNumDataCodewords();this.correctErrors($,Q);for(let ce=0;ce<Q;ce++)A[I++]=$[ce]}return Mr.decode(A,f,d,a)}correctErrors(o,a){const f=new Int32Array(o);try{this.rsDecoder.decode(f,o.length-a)}catch{throw new w}for(let d=0;d<a;d++)o[d]=f[d]}}class Wl extends Ce{constructor(o,a,f){super(o,a),this.estimatedModuleSize=f}aboutEquals(o,a,f){if(Math.abs(a-this.getY())<=o&&Math.abs(f-this.getX())<=o){const d=Math.abs(o-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(o,a,f){const d=(this.getX()+a)/2,x=(this.getY()+o)/2,g=(this.estimatedModuleSize+f)/2;return new Wl(d,x,g)}}class Sc{constructor(o,a,f,d,x,g,m){this.image=o,this.startX=a,this.startY=f,this.width=d,this.height=x,this.moduleSize=g,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,a=this.height,f=this.width,d=o+f,x=this.startY+a/2,g=new Int32Array(3),m=this.image;for(let A=0;A<a;A++){const I=x+(A&1?-Math.floor((A+1)/2):Math.floor((A+1)/2));g[0]=0,g[1]=0,g[2]=0;let k=o;for(;k<d&&!m.get(k,I);)k++;let $=0;for(;k<d;){if(m.get(k,I))if($===1)g[1]++;else if($===2){if(this.foundPatternCross(g)){const Q=this.handlePossibleCenter(g,I,k);if(Q!==null)return Q}g[0]=g[2],g[1]=1,g[2]=0,$=1}else g[++$]++;else $===1&&$++,g[$]++;k++}if(this.foundPatternCross(g)){const Q=this.handlePossibleCenter(g,I,d);if(Q!==null)return Q}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new C}static centerFromEnd(o,a){return a-o[2]-o[1]/2}foundPatternCross(o){const a=this.moduleSize,f=a/2;for(let d=0;d<3;d++)if(Math.abs(a-o[d])>=f)return!1;return!0}crossCheckVertical(o,a,f,d){const x=this.image,g=x.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let A=o;for(;A>=0&&x.get(a,A)&&m[1]<=f;)m[1]++,A--;if(A<0||m[1]>f)return NaN;for(;A>=0&&!x.get(a,A)&&m[0]<=f;)m[0]++,A--;if(m[0]>f)return NaN;for(A=o+1;A<g&&x.get(a,A)&&m[1]<=f;)m[1]++,A++;if(A===g||m[1]>f)return NaN;for(;A<g&&!x.get(a,A)&&m[2]<=f;)m[2]++,A++;if(m[2]>f)return NaN;const I=m[0]+m[1]+m[2];return 5*Math.abs(I-d)>=2*d?NaN:this.foundPatternCross(m)?Sc.centerFromEnd(m,A):NaN}handlePossibleCenter(o,a,f){const d=o[0]+o[1]+o[2],x=Sc.centerFromEnd(o,f),g=this.crossCheckVertical(a,x,2*o[1],d);if(!isNaN(g)){const m=(o[0]+o[1]+o[2])/3;for(const I of this.possibleCenters)if(I.aboutEquals(m,g,x))return I.combineEstimate(g,x,m);const A=new Wl(x,g,m);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class hs extends Ce{constructor(o,a,f,d){super(o,a),this.estimatedModuleSize=f,this.count=d,d===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,a,f){if(Math.abs(a-this.getY())<=o&&Math.abs(f-this.getX())<=o){const d=Math.abs(o-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(o,a,f){const d=this.count+1,x=(this.count*this.getX()+a)/d,g=(this.count*this.getY()+o)/d,m=(this.count*this.estimatedModuleSize+f)/d;return new hs(x,g,m,d)}}class Yh{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class on{constructor(o,a){this.image=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const a=o!=null&&o.get(R.TRY_HARDER)!==void 0,f=o!=null&&o.get(R.PURE_BARCODE)!==void 0,d=this.image,x=d.getHeight(),g=d.getWidth();let m=Math.floor(3*x/(4*on.MAX_MODULES));(m<on.MIN_SKIP||a)&&(m=on.MIN_SKIP);let A=!1;const I=new Int32Array(5);for(let $=m-1;$<x&&!A;$+=m){I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0;let Q=0;for(let ce=0;ce<g;ce++)if(d.get(ce,$))(Q&1)===1&&Q++,I[Q]++;else if(Q&1)I[Q]++;else if(Q===4)if(on.foundPatternCross(I)){if(this.handlePossibleCenter(I,$,ce,f)===!0)if(m=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const ge=this.findRowSkip();ge>I[2]&&($+=ge-I[2]-m,ce=g-1)}else{I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,Q=3;continue}Q=0,I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0}else I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,Q=3;else I[++Q]++;on.foundPatternCross(I)&&this.handlePossibleCenter(I,$,g,f)===!0&&(m=I[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const k=this.selectBestPatterns();return Ce.orderBestPatterns(k),new Yh(k)}static centerFromEnd(o,a){return a-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let a=0;for(let x=0;x<5;x++){const g=o[x];if(g===0)return!1;a+=g}if(a<7)return!1;const f=a/7,d=f/2;return Math.abs(f-o[0])<d&&Math.abs(f-o[1])<d&&Math.abs(3*f-o[2])<3*d&&Math.abs(f-o[3])<d&&Math.abs(f-o[4])<d}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,a,f,d){const x=this.getCrossCheckStateCount();let g=0;const m=this.image;for(;o>=g&&a>=g&&m.get(a-g,o-g);)x[2]++,g++;if(o<g||a<g)return!1;for(;o>=g&&a>=g&&!m.get(a-g,o-g)&&x[1]<=f;)x[1]++,g++;if(o<g||a<g||x[1]>f)return!1;for(;o>=g&&a>=g&&m.get(a-g,o-g)&&x[0]<=f;)x[0]++,g++;if(x[0]>f)return!1;const A=m.getHeight(),I=m.getWidth();for(g=1;o+g<A&&a+g<I&&m.get(a+g,o+g);)x[2]++,g++;if(o+g>=A||a+g>=I)return!1;for(;o+g<A&&a+g<I&&!m.get(a+g,o+g)&&x[3]<f;)x[3]++,g++;if(o+g>=A||a+g>=I||x[3]>=f)return!1;for(;o+g<A&&a+g<I&&m.get(a+g,o+g)&&x[4]<f;)x[4]++,g++;if(x[4]>=f)return!1;const k=x[0]+x[1]+x[2]+x[3]+x[4];return Math.abs(k-d)<2*d&&on.foundPatternCross(x)}crossCheckVertical(o,a,f,d){const x=this.image,g=x.getHeight(),m=this.getCrossCheckStateCount();let A=o;for(;A>=0&&x.get(a,A);)m[2]++,A--;if(A<0)return NaN;for(;A>=0&&!x.get(a,A)&&m[1]<=f;)m[1]++,A--;if(A<0||m[1]>f)return NaN;for(;A>=0&&x.get(a,A)&&m[0]<=f;)m[0]++,A--;if(m[0]>f)return NaN;for(A=o+1;A<g&&x.get(a,A);)m[2]++,A++;if(A===g)return NaN;for(;A<g&&!x.get(a,A)&&m[3]<f;)m[3]++,A++;if(A===g||m[3]>=f)return NaN;for(;A<g&&x.get(a,A)&&m[4]<f;)m[4]++,A++;if(m[4]>=f)return NaN;const I=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(I-d)>=2*d?NaN:on.foundPatternCross(m)?on.centerFromEnd(m,A):NaN}crossCheckHorizontal(o,a,f,d){const x=this.image,g=x.getWidth(),m=this.getCrossCheckStateCount();let A=o;for(;A>=0&&x.get(A,a);)m[2]++,A--;if(A<0)return NaN;for(;A>=0&&!x.get(A,a)&&m[1]<=f;)m[1]++,A--;if(A<0||m[1]>f)return NaN;for(;A>=0&&x.get(A,a)&&m[0]<=f;)m[0]++,A--;if(m[0]>f)return NaN;for(A=o+1;A<g&&x.get(A,a);)m[2]++,A++;if(A===g)return NaN;for(;A<g&&!x.get(A,a)&&m[3]<f;)m[3]++,A++;if(A===g||m[3]>=f)return NaN;for(;A<g&&x.get(A,a)&&m[4]<f;)m[4]++,A++;if(m[4]>=f)return NaN;const I=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(I-d)>=d?NaN:on.foundPatternCross(m)?on.centerFromEnd(m,A):NaN}handlePossibleCenter(o,a,f,d){const x=o[0]+o[1]+o[2]+o[3]+o[4];let g=on.centerFromEnd(o,f),m=this.crossCheckVertical(a,Math.floor(g),o[2],x);if(!isNaN(m)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(m),o[2],x),!isNaN(g)&&(!d||this.crossCheckDiagonal(Math.floor(m),Math.floor(g),o[2],x)))){const A=x/7;let I=!1;const k=this.possibleCenters;for(let $=0,Q=k.length;$<Q;$++){const ce=k[$];if(ce.aboutEquals(A,m,g)){k[$]=ce.combineEstimate(m,g,A),I=!0;break}}if(!I){const $=new hs(g,m,A);k.push($),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint($)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const f of this.possibleCenters)if(f.getCount()>=on.CENTER_QUORUM)if(a==null)a=f;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-f.getX())-Math.abs(a.getY()-f.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,a=0;const f=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=on.CENTER_QUORUM&&(o++,a+=g.getEstimatedModuleSize());if(o<3)return!1;const d=a/f;let x=0;for(const g of this.possibleCenters)x+=Math.abs(g.getEstimatedModuleSize()-d);return x<=.05*a}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new C;const a=this.possibleCenters;let f;if(o>3){let d=0,x=0;for(const A of this.possibleCenters){const I=A.getEstimatedModuleSize();d+=I,x+=I*I}f=d/o;let g=Math.sqrt(x/o-f*f);a.sort((A,I)=>{const k=Math.abs(I.getEstimatedModuleSize()-f),$=Math.abs(A.getEstimatedModuleSize()-f);return k<$?-1:k>$?1:0});const m=Math.max(.2*f,g);for(let A=0;A<a.length&&a.length>3;A++){const I=a[A];Math.abs(I.getEstimatedModuleSize()-f)>m&&(a.splice(A,1),A--)}}if(a.length>3){let d=0;for(const x of a)d+=x.getEstimatedModuleSize();f=d/a.length,a.sort((x,g)=>{if(g.getCount()===x.getCount()){const m=Math.abs(g.getEstimatedModuleSize()-f),A=Math.abs(x.getEstimatedModuleSize()-f);return m<A?1:m>A?-1:0}else return g.getCount()-x.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}on.CENTER_QUORUM=2,on.MIN_SKIP=3,on.MAX_MODULES=57;class Us{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(R.NEED_RESULT_POINT_CALLBACK);const f=new on(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(f)}processFinderPatternInfo(o){const a=o.getTopLeft(),f=o.getTopRight(),d=o.getBottomLeft(),x=this.calculateModuleSize(a,f,d);if(x<1)throw new C("No pattern found in proccess finder.");const g=Us.computeDimension(a,f,d,x),m=gt.getProvisionalVersionForDimension(g),A=m.getDimensionForVersion()-7;let I=null;if(m.getAlignmentPatternCenters().length>0){const ce=f.getX()-a.getX()+d.getX(),xe=f.getY()-a.getY()+d.getY(),ge=1-3/A,ye=Math.floor(a.getX()+ge*(ce-a.getX())),_e=Math.floor(a.getY()+ge*(xe-a.getY()));for(let Fe=4;Fe<=16;Fe<<=1)try{I=this.findAlignmentInRegion(x,ye,_e,Fe);break}catch(Le){if(!(Le instanceof C))throw Le}}const k=Us.createTransform(a,f,d,I,g),$=Us.sampleGrid(this.image,k,g);let Q;return I===null?Q=[d,a,f]:Q=[d,a,f,I],new ut($,Q)}static createTransform(o,a,f,d,x){const g=x-3.5;let m,A,I,k;return d!==null?(m=d.getX(),A=d.getY(),I=g-3,k=I):(m=a.getX()-o.getX()+f.getX(),A=a.getY()-o.getY()+f.getY(),I=g,k=g),He.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,I,k,3.5,g,o.getX(),o.getY(),a.getX(),a.getY(),m,A,f.getX(),f.getY())}static sampleGrid(o,a,f){return wt.getInstance().sampleGridWithTransform(o,f,f,a)}static computeDimension(o,a,f,d){const x=Je.round(Ce.distance(o,a)/d),g=Je.round(Ce.distance(o,f)/d);let m=Math.floor((x+g)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new C("Dimensions could be not found.")}return m}calculateModuleSize(o,a,f){return(this.calculateModuleSizeOneWay(o,a)+this.calculateModuleSizeOneWay(o,f))/2}calculateModuleSizeOneWay(o,a){const f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(a.getX()),Math.floor(a.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(f)?d/7:isNaN(d)?f/7:(f+d)/14}sizeOfBlackWhiteBlackRunBothWays(o,a,f,d){let x=this.sizeOfBlackWhiteBlackRun(o,a,f,d),g=1,m=o-(f-o);m<0?(g=o/(o-m),m=0):m>=this.image.getWidth()&&(g=(this.image.getWidth()-1-o)/(m-o),m=this.image.getWidth()-1);let A=Math.floor(a-(d-a)*g);return g=1,A<0?(g=a/(a-A),A=0):A>=this.image.getHeight()&&(g=(this.image.getHeight()-1-a)/(A-a),A=this.image.getHeight()-1),m=Math.floor(o+(m-o)*g),x+=this.sizeOfBlackWhiteBlackRun(o,a,m,A),x-1}sizeOfBlackWhiteBlackRun(o,a,f,d){const x=Math.abs(d-a)>Math.abs(f-o);if(x){let ce=o;o=a,a=ce,ce=f,f=d,d=ce}const g=Math.abs(f-o),m=Math.abs(d-a);let A=-g/2;const I=o<f?1:-1,k=a<d?1:-1;let $=0;const Q=f+I;for(let ce=o,xe=a;ce!==Q;ce+=I){const ge=x?xe:ce,ye=x?ce:xe;if($===1===this.image.get(ge,ye)){if($===2)return Je.distance(ce,xe,o,a);$++}if(A+=m,A>0){if(xe===d)break;xe+=k,A-=g}}return $===2?Je.distance(f+I,d,o,a):NaN}findAlignmentInRegion(o,a,f,d){const x=Math.floor(d*o),g=Math.max(0,a-x),m=Math.min(this.image.getWidth()-1,a+x);if(m-g<o*3)throw new C("Alignment top exceeds estimated module size.");const A=Math.max(0,f-x),I=Math.min(this.image.getHeight()-1,f+x);if(I-A<o*3)throw new C("Alignment bottom exceeds estimated module size.");return new Sc(this.image,g,A,m-g,I-A,o,this.resultPointCallback).find()}}class Hs{constructor(){this.decoder=new Sx}getDecoder(){return this.decoder}decode(o,a){let f,d;if(a!=null&&a.get(R.PURE_BARCODE)!==void 0){const A=Hs.extractPureBits(o.getBlackMatrix());f=this.decoder.decodeBitMatrix(A,a),d=Hs.NO_POINTS}else{const A=new Us(o.getBlackMatrix()).detect(a);f=this.decoder.decodeBitMatrix(A.getBits(),a),d=A.getPoints()}f.getOther()instanceof Wh&&f.getOther().applyMirroredCorrection(d);const x=new ue(f.getText(),f.getRawBytes(),void 0,d,fe.QR_CODE,void 0),g=f.getByteSegments();g!==null&&x.putMetadata(re.BYTE_SEGMENTS,g);const m=f.getECLevel();return m!==null&&x.putMetadata(re.ERROR_CORRECTION_LEVEL,m),f.hasStructuredAppend()&&(x.putMetadata(re.STRUCTURED_APPEND_SEQUENCE,f.getStructuredAppendSequenceNumber()),x.putMetadata(re.STRUCTURED_APPEND_PARITY,f.getStructuredAppendParity())),x}reset(){}static extractPureBits(o){const a=o.getTopLeftOnBit(),f=o.getBottomRightOnBit();if(a===null||f===null)throw new C;const d=this.moduleSize(a,o);let x=a[1],g=f[1],m=a[0],A=f[0];if(m>=A||x>=g)throw new C;if(g-x!==A-m&&(A=m+(g-x),A>=o.getWidth()))throw new C;const I=Math.round((A-m+1)/d),k=Math.round((g-x+1)/d);if(I<=0||k<=0)throw new C;if(k!==I)throw new C;const $=Math.floor(d/2);x+=$,m+=$;const Q=m+Math.floor((I-1)*d)-A;if(Q>0){if(Q>$)throw new C;m-=Q}const ce=x+Math.floor((k-1)*d)-g;if(ce>0){if(ce>$)throw new C;x-=ce}const xe=new E(I,k);for(let ge=0;ge<k;ge++){const ye=x+Math.floor(ge*d);for(let _e=0;_e<I;_e++)o.get(m+Math.floor(_e*d),ye)&&xe.set(_e,ge)}return xe}static moduleSize(o,a){const f=a.getHeight(),d=a.getWidth();let x=o[0],g=o[1],m=!0,A=0;for(;x<d&&g<f;){if(m!==a.get(x,g)){if(++A===5)break;m=!m}x++,g++}if(x===d||g===f)throw new C;return(x-o[0])/7}}Hs.NO_POINTS=new Array;class It{PDF417Common(){}static getBitCountSum(o){return Je.sum(o)}static toIntArray(o){if(o==null||!o.length)return It.EMPTY_INT_ARRAY;const a=new Int32Array(o.length);let f=0;for(const d of o)a[f++]=d;return a}static getCodeword(o){const a=N.binarySearch(It.SYMBOL_TABLE,o&262143);return a<0?-1:(It.CODEWORD_TABLE[a]-1)%It.NUMBER_OF_CODEWORDS}}It.NUMBER_OF_CODEWORDS=929,It.MAX_CODEWORDS_IN_BARCODE=It.NUMBER_OF_CODEWORDS-1,It.MIN_ROWS_IN_BARCODE=3,It.MAX_ROWS_IN_BARCODE=90,It.MODULES_IN_CODEWORD=17,It.MODULES_IN_STOP_PATTERN=18,It.BARS_IN_MODULE=8,It.EMPTY_INT_ARRAY=new Int32Array([]),It.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),It.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ix{constructor(o,a){this.bits=o,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Lt{static detectMultiple(o,a,f){let d=o.getBlackMatrix(),x=Lt.detect(f,d);return x.length||(d=d.clone(),d.rotate180(),x=Lt.detect(f,d)),new Ix(d,x)}static detect(o,a){const f=new Array;let d=0,x=0,g=!1;for(;d<a.getHeight();){const m=Lt.findVertices(a,d,x);if(m[0]==null&&m[3]==null){if(!g)break;g=!1,x=0;for(const A of f)A[1]!=null&&(d=Math.trunc(Math.max(d,A[1].getY()))),A[3]!=null&&(d=Math.max(d,Math.trunc(A[3].getY())));d+=Lt.ROW_STEP;continue}if(g=!0,f.push(m),!o)break;m[2]!=null?(x=Math.trunc(m[2].getX()),d=Math.trunc(m[2].getY())):(x=Math.trunc(m[4].getX()),d=Math.trunc(m[4].getY()))}return f}static findVertices(o,a,f){const d=o.getHeight(),x=o.getWidth(),g=new Array(8);return Lt.copyToResult(g,Lt.findRowsWithPattern(o,d,x,a,f,Lt.START_PATTERN),Lt.INDEXES_START_PATTERN),g[4]!=null&&(f=Math.trunc(g[4].getX()),a=Math.trunc(g[4].getY())),Lt.copyToResult(g,Lt.findRowsWithPattern(o,d,x,a,f,Lt.STOP_PATTERN),Lt.INDEXES_STOP_PATTERN),g}static copyToResult(o,a,f){for(let d=0;d<f.length;d++)o[f[d]]=a[d]}static findRowsWithPattern(o,a,f,d,x,g){const m=new Array(4);let A=!1;const I=new Int32Array(g.length);for(;d<a;d+=Lt.ROW_STEP){let $=Lt.findGuardPattern(o,x,d,f,!1,g,I);if($!=null){for(;d>0;){const Q=Lt.findGuardPattern(o,x,--d,f,!1,g,I);if(Q!=null)$=Q;else{d++;break}}m[0]=new Ce($[0],d),m[1]=new Ce($[1],d),A=!0;break}}let k=d+1;if(A){let $=0,Q=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;k<a;k++){const ce=Lt.findGuardPattern(o,Q[0],k,f,!1,g,I);if(ce!=null&&Math.abs(Q[0]-ce[0])<Lt.MAX_PATTERN_DRIFT&&Math.abs(Q[1]-ce[1])<Lt.MAX_PATTERN_DRIFT)Q=ce,$=0;else{if($>Lt.SKIPPED_ROW_COUNT_MAX)break;$++}}k-=$+1,m[2]=new Ce(Q[0],k),m[3]=new Ce(Q[1],k)}return k-d<Lt.BARCODE_MIN_HEIGHT&&N.fill(m,null),m}static findGuardPattern(o,a,f,d,x,g,m){N.fillWithin(m,0,m.length,0);let A=a,I=0;for(;o.get(A,f)&&A>0&&I++<Lt.MAX_PIXEL_DRIFT;)A--;let k=A,$=0,Q=g.length;for(let ce=x;k<d;k++)if(o.get(k,f)!==ce)m[$]++;else{if($===Q-1){if(Lt.patternMatchVariance(m,g,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return new Int32Array([A,k]);A+=m[0]+m[1],S.arraycopy(m,2,m,0,$-1),m[$-1]=0,m[$]=0,$--}else $++;m[$]=1,ce=!ce}return $===Q-1&&Lt.patternMatchVariance(m,g,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE?new Int32Array([A,k-1]):null}static patternMatchVariance(o,a,f){let d=o.length,x=0,g=0;for(let I=0;I<d;I++)x+=o[I],g+=a[I];if(x<g)return 1/0;let m=x/g;f*=m;let A=0;for(let I=0;I<d;I++){let k=o[I],$=a[I]*m,Q=k>$?k-$:$-k;if(Q>f)return 1/0;A+=Q}return A/x}}Lt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Lt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Lt.MAX_AVG_VARIANCE=.42,Lt.MAX_INDIVIDUAL_VARIANCE=.8,Lt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Lt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Lt.MAX_PIXEL_DRIFT=3,Lt.MAX_PATTERN_DRIFT=5,Lt.SKIPPED_ROW_COUNT_MAX=25,Lt.ROW_STEP=5,Lt.BARCODE_MIN_HEIGHT=10;class an{constructor(o,a){if(a.length===0)throw new b;this.field=o;let f=a.length;if(f>1&&a[0]===0){let d=1;for(;d<f&&a[d]===0;)d++;d===f?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(f-d),S.arraycopy(a,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let d=0;for(let x of this.coefficients)d=this.field.add(d,x);return d}let a=this.coefficients[0],f=this.coefficients.length;for(let d=1;d<f;d++)a=this.field.add(this.field.multiply(o,a),this.coefficients[d]);return a}add(o){if(!this.field.equals(o.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let a=this.coefficients,f=o.coefficients;if(a.length>f.length){let g=a;a=f,f=g}let d=new Int32Array(f.length),x=f.length-a.length;S.arraycopy(f,0,d,0,x);for(let g=x;g<f.length;g++)d[g]=this.field.add(a[g-x],f[g]);return new an(this.field,d)}subtract(o){if(!this.field.equals(o.field))throw new b("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof an?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new an(this.field,new Int32Array([0]));let a=this.coefficients,f=a.length,d=o.coefficients,x=d.length,g=new Int32Array(f+x-1);for(let m=0;m<f;m++){let A=a[m];for(let I=0;I<x;I++)g[m+I]=this.field.add(g[m+I],this.field.multiply(A,d[I]))}return new an(this.field,g)}negative(){let o=this.coefficients.length,a=new Int32Array(o);for(let f=0;f<o;f++)a[f]=this.field.subtract(0,this.coefficients[f]);return new an(this.field,a)}multiplyScalar(o){if(o===0)return new an(this.field,new Int32Array([0]));if(o===1)return this;let a=this.coefficients.length,f=new Int32Array(a);for(let d=0;d<a;d++)f[d]=this.field.multiply(this.coefficients[d],o);return new an(this.field,f)}multiplyByMonomial(o,a){if(o<0)throw new b;if(a===0)return new an(this.field,new Int32Array([0]));let f=this.coefficients.length,d=new Int32Array(f+o);for(let x=0;x<f;x++)d[x]=this.field.multiply(this.coefficients[x],a);return new an(this.field,d)}toString(){let o=new V;for(let a=this.getDegree();a>=0;a--){let f=this.getCoefficient(a);f!==0&&(f<0?(o.append(" - "),f=-f):o.length()>0&&o.append(" + "),(a===0||f!==1)&&o.append(f),a!==0&&(a===1?o.append("x"):(o.append("x^"),o.append(a))))}return o.toString()}}class Xh{add(o,a){return(o+a)%this.modulus}subtract(o,a){return(this.modulus+o-a)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new b;return this.logTable[o]}inverse(o){if(o===0)throw new de;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,a){return o===0||a===0?0:this.expTable[(this.logTable[o]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class Co extends Xh{constructor(o,a){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let f=1;for(let d=0;d<o;d++)this.expTable[d]=f,f=f*a%o;for(let d=0;d<o-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new an(this,new Int32Array([0])),this.one=new an(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,a){if(o<0)throw new b;if(a===0)return this.zero;let f=new Int32Array(o+1);return f[0]=a,new an(this,f)}}Co.PDF417_GF=new Co(It.NUMBER_OF_CODEWORDS,3);class Yl{constructor(){this.field=Co.PDF417_GF}decode(o,a,f){let d=new an(this.field,o),x=new Int32Array(a),g=!1;for(let xe=a;xe>0;xe--){let ge=d.evaluateAt(this.field.exp(xe));x[a-xe]=ge,ge!==0&&(g=!0)}if(!g)return 0;let m=this.field.getOne();if(f!=null)for(const xe of f){let ge=this.field.exp(o.length-1-xe),ye=new an(this.field,new Int32Array([this.field.subtract(0,ge),1]));m=m.multiply(ye)}let A=new an(this.field,x),I=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),A,a),k=I[0],$=I[1],Q=this.findErrorLocations(k),ce=this.findErrorMagnitudes($,k,Q);for(let xe=0;xe<Q.length;xe++){let ge=o.length-1-this.field.log(Q[xe]);if(ge<0)throw w.getChecksumInstance();o[ge]=this.field.subtract(o[ge],ce[xe])}return Q.length}runEuclideanAlgorithm(o,a,f){if(o.getDegree()<a.getDegree()){let Q=o;o=a,a=Q}let d=o,x=a,g=this.field.getZero(),m=this.field.getOne();for(;x.getDegree()>=Math.round(f/2);){let Q=d,ce=g;if(d=x,g=m,d.isZero())throw w.getChecksumInstance();x=Q;let xe=this.field.getZero(),ge=d.getCoefficient(d.getDegree()),ye=this.field.inverse(ge);for(;x.getDegree()>=d.getDegree()&&!x.isZero();){let _e=x.getDegree()-d.getDegree(),Fe=this.field.multiply(x.getCoefficient(x.getDegree()),ye);xe=xe.add(this.field.buildMonomial(_e,Fe)),x=x.subtract(d.multiplyByMonomial(_e,Fe))}m=xe.multiply(g).subtract(ce).negative()}let A=m.getCoefficient(0);if(A===0)throw w.getChecksumInstance();let I=this.field.inverse(A),k=m.multiply(I),$=x.multiply(I);return[k,$]}findErrorLocations(o){let a=o.getDegree(),f=new Int32Array(a),d=0;for(let x=1;x<this.field.getSize()&&d<a;x++)o.evaluateAt(x)===0&&(f[d]=this.field.inverse(x),d++);if(d!==a)throw w.getChecksumInstance();return f}findErrorMagnitudes(o,a,f){let d=a.getDegree(),x=new Int32Array(d);for(let I=1;I<=d;I++)x[d-I]=this.field.multiply(I,a.getCoefficient(I));let g=new an(this.field,x),m=f.length,A=new Int32Array(m);for(let I=0;I<m;I++){let k=this.field.inverse(f[I]),$=this.field.subtract(0,o.evaluateAt(k)),Q=this.field.inverse(g.evaluateAt(k));A[I]=this.field.multiply($,Q)}return A}}class So{constructor(o,a,f,d,x){o instanceof So?this.constructor_2(o):this.constructor_1(o,a,f,d,x)}constructor_1(o,a,f,d,x){const g=a==null||f==null,m=d==null||x==null;if(g&&m)throw new C;g?(a=new Ce(0,d.getY()),f=new Ce(0,x.getY())):m&&(d=new Ce(o.getWidth()-1,a.getY()),x=new Ce(o.getWidth()-1,f.getY())),this.image=o,this.topLeft=a,this.bottomLeft=f,this.topRight=d,this.bottomRight=x,this.minX=Math.trunc(Math.min(a.getX(),f.getX())),this.maxX=Math.trunc(Math.max(d.getX(),x.getX())),this.minY=Math.trunc(Math.min(a.getY(),d.getY())),this.maxY=Math.trunc(Math.max(f.getY(),x.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,a){return o==null?a:a==null?o:new So(o.image,o.topLeft,o.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(o,a,f){let d=this.topLeft,x=this.bottomLeft,g=this.topRight,m=this.bottomRight;if(o>0){let A=f?this.topLeft:this.topRight,I=Math.trunc(A.getY()-o);I<0&&(I=0);let k=new Ce(A.getX(),I);f?d=k:g=k}if(a>0){let A=f?this.bottomLeft:this.bottomRight,I=Math.trunc(A.getY()+a);I>=this.image.getHeight()&&(I=this.image.getHeight()-1);let k=new Ce(A.getX(),I);f?x=k:m=k}return new So(this.image,d,x,g,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Dx{constructor(o,a,f,d){this.columnCount=o,this.errorCorrectionLevel=d,this.rowCountUpperPart=a,this.rowCountLowerPart=f,this.rowCount=a+f}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class p0{constructor(){this.buffer=""}static form(o,a){let f=-1;function d(g,m,A,I,k,$){if(g==="%%")return"%";if(a[++f]===void 0)return;g=I?parseInt(I.substr(1)):void 0;let Q=k?parseInt(k.substr(1)):void 0,ce;switch($){case"s":ce=a[f];break;case"c":ce=a[f][0];break;case"f":ce=parseFloat(a[f]).toFixed(g);break;case"p":ce=parseFloat(a[f]).toPrecision(g);break;case"e":ce=parseFloat(a[f]).toExponential(g);break;case"x":ce=parseInt(a[f]).toString(Q||16);break;case"d":ce=parseFloat(parseInt(a[f],Q||10).toPrecision(g)).toFixed(0);break}ce=typeof ce=="object"?JSON.stringify(ce):(+ce).toString(Q);let xe=parseInt(A),ge=A&&A[0]+""=="0"?"0":" ";for(;ce.length<xe;)ce=m!==void 0?ce+ge:ge+ce;return ce}let x=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(x,d)}format(o,...a){this.buffer+=p0.form(o,a)}toString(){return this.buffer}}class ae{constructor(o){this.boundingBox=new So(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let a=this.getCodeword(o);if(a!=null)return a;for(let f=1;f<ae.MAX_NEARBY_DISTANCE;f++){let d=this.imageRowToCodewordIndex(o)-f;if(d>=0&&(a=this.codewords[d],a!=null)||(d=this.imageRowToCodewordIndex(o)+f,d<this.codewords.length&&(a=this.codewords[d],a!=null)))return a}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,a){this.codewords[this.imageRowToCodewordIndex(o)]=a}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new p0;let a=0;for(const f of this.codewords){if(f==null){o.format("%3d:    |   %n",a++);continue}o.format("%3d: %3d|%3d%n",a++,f.getRowNumber(),f.getValue())}return o.toString()}}ae.MAX_NEARBY_DISTANCE=5;class be{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let a=this.values.get(o);a==null&&(a=0),a++,this.values.set(o,a)}getValue(){let o=-1,a=new Array;for(const[f,d]of this.values.entries()){const x={getKey:()=>f,getValue:()=>d};x.getValue()>o?(o=x.getValue(),a=[],a.push(x.getKey())):x.getValue()===o&&a.push(x.getKey())}return It.toIntArray(a)}getConfidence(o){return this.values.get(o)}}class Re extends ae{constructor(o,a){super(o),this._isLeft=a}setRowNumbers(){for(let o of this.getCodewords())o!=null&&o.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,o);let f=this.getBoundingBox(),d=this._isLeft?f.getTopLeft():f.getTopRight(),x=this._isLeft?f.getBottomLeft():f.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(d.getY())),m=this.imageRowToCodewordIndex(Math.trunc(x.getY())),A=-1,I=1,k=0;for(let $=g;$<m;$++){if(a[$]==null)continue;let Q=a[$],ce=Q.getRowNumber()-A;if(ce===0)k++;else if(ce===1)I=Math.max(I,k),k=1,A=Q.getRowNumber();else if(ce<0||Q.getRowNumber()>=o.getRowCount()||ce>$)a[$]=null;else{let xe;I>2?xe=(I-2)*ce:xe=ce;let ge=xe>=$;for(let ye=1;ye<=xe&&!ge;ye++)ge=a[$-ye]!=null;ge?a[$]=null:(A=Q.getRowNumber(),k=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let a=new Int32Array(o.getRowCount());for(let f of this.getCodewords())if(f!=null){let d=f.getRowNumber();if(d>=a.length)continue;a[d]++}return a}adjustIncompleteIndicatorColumnRowNumbers(o){let a=this.getBoundingBox(),f=this._isLeft?a.getTopLeft():a.getTopRight(),d=this._isLeft?a.getBottomLeft():a.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(f.getY())),g=this.imageRowToCodewordIndex(Math.trunc(d.getY())),m=this.getCodewords(),A=-1;for(let I=x;I<g;I++){if(m[I]==null)continue;let k=m[I];k.setRowNumberAsRowIndicatorColumn();let $=k.getRowNumber()-A;$===0||($===1?A=k.getRowNumber():k.getRowNumber()>=o.getRowCount()?m[I]=null:A=k.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),a=new be,f=new be,d=new be,x=new be;for(let m of o){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let A=m.getValue()%30,I=m.getRowNumber();switch(this._isLeft||(I+=2),I%3){case 0:f.setValue(A*3+1);break;case 1:x.setValue(A/3),d.setValue(A%3);break;case 2:a.setValue(A+1);break}}if(a.getValue().length===0||f.getValue().length===0||d.getValue().length===0||x.getValue().length===0||a.getValue()[0]<1||f.getValue()[0]+d.getValue()[0]<It.MIN_ROWS_IN_BARCODE||f.getValue()[0]+d.getValue()[0]>It.MAX_ROWS_IN_BARCODE)return null;let g=new Dx(a.getValue()[0],f.getValue()[0],d.getValue()[0],x.getValue()[0]);return this.removeIncorrectCodewords(o,g),g}removeIncorrectCodewords(o,a){for(let f=0;f<o.length;f++){let d=o[f];if(o[f]==null)continue;let x=d.getValue()%30,g=d.getRowNumber();if(g>a.getRowCount()){o[f]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:x*3+1!==a.getRowCountUpperPart()&&(o[f]=null);break;case 1:(Math.trunc(x/3)!==a.getErrorCorrectionLevel()||x%3!==a.getRowCountLowerPart())&&(o[f]=null);break;case 2:x+1!==a.getColumnCount()&&(o[f]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Qe{constructor(o,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=It.MAX_CODEWORDS_IN_BARCODE,a;do a=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o!=null&&o.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let f=this.detectionResultColumns[a].getCodewords();for(let d=0;d<f.length;d++)f[d]!=null&&(f[d].hasValidRowNumber()||this.adjustRowNumbers(a,d,f))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let f=0;f<o.length;f++)if(o[f]!=null&&a[f]!=null&&o[f].getRowNumber()===a[f].getRowNumber())for(let d=1;d<=this.barcodeColumnCount;d++){let x=this.detectionResultColumns[d].getCodewords()[f];x!=null&&(x.setRowNumber(o[f].getRowNumber()),x.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[f]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let f=0;f<a.length;f++){if(a[f]==null)continue;let d=a[f].getRowNumber(),x=0;for(let g=this.barcodeColumnCount+1;g>0&&x<this.ADJUST_ROW_NUMBER_SKIP;g--){let m=this.detectionResultColumns[g].getCodewords()[f];m!=null&&(x=Qe.adjustRowNumberIfValid(d,x,m),m.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,a=this.detectionResultColumns[0].getCodewords();for(let f=0;f<a.length;f++){if(a[f]==null)continue;let d=a[f].getRowNumber(),x=0;for(let g=1;g<this.barcodeColumnCount+1&&x<this.ADJUST_ROW_NUMBER_SKIP;g++){let m=this.detectionResultColumns[g].getCodewords()[f];m!=null&&(x=Qe.adjustRowNumberIfValid(d,x,m),m.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,a,f){return f==null||f.hasValidRowNumber()||(f.isValidRowNumber(o)?(f.setRowNumber(o),a=0):++a),a}adjustRowNumbers(o,a,f){if(!this.detectionResultColumns[o-1])return;let d=f[a],x=this.detectionResultColumns[o-1].getCodewords(),g=x;this.detectionResultColumns[o+1]!=null&&(g=this.detectionResultColumns[o+1].getCodewords());let m=new Array(14);m[2]=x[a],m[3]=g[a],a>0&&(m[0]=f[a-1],m[4]=x[a-1],m[5]=g[a-1]),a>1&&(m[8]=f[a-2],m[10]=x[a-2],m[11]=g[a-2]),a<f.length-1&&(m[1]=f[a+1],m[6]=x[a+1],m[7]=g[a+1]),a<f.length-2&&(m[9]=f[a+2],m[12]=x[a+2],m[13]=g[a+2]);for(let A of m)if(Qe.adjustRowNumber(d,A))return}static adjustRowNumber(o,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===o.getBucket()?(o.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,a){this.detectionResultColumns[o]=a}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new p0;for(let f=0;f<o.getCodewords().length;f++){a.format("CW %3d:",f);for(let d=0;d<this.barcodeColumnCount+2;d++){if(this.detectionResultColumns[d]==null){a.format("    |   ");continue}let x=this.detectionResultColumns[d].getCodewords()[f];if(x==null){a.format("    |   ");continue}a.format(" %3d|%3d",x.getRowNumber(),x.getValue())}a.format("%n")}return a.toString()}}class br{constructor(o,a,f,d){this.rowNumber=br.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(a),this.bucket=Math.trunc(f),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==br.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}br.BARCODE_ROW_UNKNOWN=-1;class vt{static initialize(){for(let o=0;o<It.SYMBOL_TABLE.length;o++){let a=It.SYMBOL_TABLE[o],f=a&1;for(let d=0;d<It.BARS_IN_MODULE;d++){let x=0;for(;(a&1)===f;)x+=1,a>>=1;f=a&1,vt.RATIOS_TABLE[o]||(vt.RATIOS_TABLE[o]=new Array(It.BARS_IN_MODULE)),vt.RATIOS_TABLE[o][It.BARS_IN_MODULE-d-1]=Math.fround(x/It.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let a=vt.getDecodedCodewordValue(vt.sampleBitCounts(o));return a!==-1?a:vt.getClosestDecodedValue(o)}static sampleBitCounts(o){let a=Je.sum(o),f=new Int32Array(It.BARS_IN_MODULE),d=0,x=0;for(let g=0;g<It.MODULES_IN_CODEWORD;g++){let m=a/(2*It.MODULES_IN_CODEWORD)+g*a/It.MODULES_IN_CODEWORD;x+o[d]<=m&&(x+=o[d],d++),f[d]++}return f}static getDecodedCodewordValue(o){let a=vt.getBitValue(o);return It.getCodeword(a)===-1?-1:a}static getBitValue(o){let a=0;for(let f=0;f<o.length;f++)for(let d=0;d<o[f];d++)a=a<<1|(f%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(o){let a=Je.sum(o),f=new Array(It.BARS_IN_MODULE);if(a>1)for(let g=0;g<f.length;g++)f[g]=Math.fround(o[g]/a);let d=Ze.MAX_VALUE,x=-1;this.bSymbolTableReady||vt.initialize();for(let g=0;g<vt.RATIOS_TABLE.length;g++){let m=0,A=vt.RATIOS_TABLE[g];for(let I=0;I<It.BARS_IN_MODULE;I++){let k=Math.fround(A[I]-f[I]);if(m+=Math.fround(k*k),m>=d)break}m<d&&(d=m,x=It.SYMBOL_TABLE[g])}return x}}vt.bSymbolTableReady=!1,vt.RATIOS_TABLE=new Array(It.SYMBOL_TABLE.length).map(q=>new Array(It.BARS_IN_MODULE));class Br{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class tn{static parseLong(o,a=void 0){return parseInt(o,a)}}class cn extends u{}cn.kind="NullPointerException";class Pr{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,a,f){if(o==null)throw new cn;if(a<0||a>o.length||f<0||a+f>o.length||a+f<0)throw new T;if(f===0)return;for(let d=0;d<f;d++)this.write(o[a+d])}flush(){}close(){}}class Qn extends u{}class _i extends Pr{constructor(o=32){if(super(),this.count=0,o<0)throw new b("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let f=this.buf.length<<1;if(f-o<0&&(f=o),f<0){if(o<0)throw new Qn;f=O.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,f)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,a,f){if(a<0||a>o.length||f<0||a+f-o.length>0)throw new T;this.ensureCapacity(this.count+f),S.arraycopy(o,a,this.buf,this.count,f),this.count+=f}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var Mt;(function(q){q[q.ALPHA=0]="ALPHA",q[q.LOWER=1]="LOWER",q[q.MIXED=2]="MIXED",q[q.PUNCT=3]="PUNCT",q[q.ALPHA_SHIFT=4]="ALPHA_SHIFT",q[q.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Mt||(Mt={}));function Zn(){if(typeof window<"u")return window.BigInt||null;if(typeof At<"u")return At.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let En;function An(q){if(typeof En>"u"&&(En=Zn()),En===null)throw new Error("BigInt is not supported!");return En(q)}function ds(){let q=[];q[0]=An(1);let o=An(900);q[1]=o;for(let a=2;a<16;a++)q[a]=q[a-1]*o;return q}class Ee{static decode(o,a){let f=new V(""),d=Y.ISO8859_1;f.enableDecoding(d);let x=1,g=o[x++],m=new Br;for(;x<o[0];){switch(g){case Ee.TEXT_COMPACTION_MODE_LATCH:x=Ee.textCompaction(o,x,f);break;case Ee.BYTE_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH_6:x=Ee.byteCompaction(g,o,d,x,f);break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[x++]);break;case Ee.NUMERIC_COMPACTION_MODE_LATCH:x=Ee.numericCompaction(o,x,f);break;case Ee.ECI_CHARSET:Y.getCharacterSetECIByValue(o[x++]);break;case Ee.ECI_GENERAL_PURPOSE:x+=2;break;case Ee.ECI_USER_DEFINED:x++;break;case Ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:x=Ee.decodeMacroBlock(o,x,m);break;case Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ee.MACRO_PDF417_TERMINATOR:throw new v;default:x--,x=Ee.textCompaction(o,x,f);break}if(x<o.length)g=o[x++];else throw v.getFormatInstance()}if(f.length()===0)throw v.getFormatInstance();let A=new se(null,f.toString(),null,a);return A.setOther(m),A}static decodeMacroBlock(o,a,f){if(a+Ee.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw v.getFormatInstance();let d=new Int32Array(Ee.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<Ee.NUMBER_OF_SEQUENCE_CODEWORDS;m++,a++)d[m]=o[a];f.setSegmentIndex(O.parseInt(Ee.decodeBase900toBase10(d,Ee.NUMBER_OF_SEQUENCE_CODEWORDS)));let x=new V;a=Ee.textCompaction(o,a,x),f.setFileId(x.toString());let g=-1;for(o[a]===Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=a+1);a<o[0];)switch(o[a]){case Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,o[a]){case Ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new V;a=Ee.textCompaction(o,a+1,m),f.setFileName(m.toString());break;case Ee.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new V;a=Ee.textCompaction(o,a+1,A),f.setSender(A.toString());break;case Ee.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let I=new V;a=Ee.textCompaction(o,a+1,I),f.setAddressee(I.toString());break;case Ee.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let k=new V;a=Ee.numericCompaction(o,a+1,k),f.setSegmentCount(O.parseInt(k.toString()));break;case Ee.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let $=new V;a=Ee.numericCompaction(o,a+1,$),f.setTimestamp(tn.parseLong($.toString()));break;case Ee.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Q=new V;a=Ee.numericCompaction(o,a+1,Q),f.setChecksum(O.parseInt(Q.toString()));break;case Ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ce=new V;a=Ee.numericCompaction(o,a+1,ce),f.setFileSize(tn.parseLong(ce.toString()));break;default:throw v.getFormatInstance()}break;case Ee.MACRO_PDF417_TERMINATOR:a++,f.setLastSegment(!0);break;default:throw v.getFormatInstance()}if(g!==-1){let m=a-g;f.isLastSegment()&&m--,f.setOptionalData(N.copyOfRange(o,g,g+m))}return a}static textCompaction(o,a,f){let d=new Int32Array((o[0]-a)*2),x=new Int32Array((o[0]-a)*2),g=0,m=!1;for(;a<o[0]&&!m;){let A=o[a++];if(A<Ee.TEXT_COMPACTION_MODE_LATCH)d[g]=A/30,d[g+1]=A%30,g+=2;else switch(A){case Ee.TEXT_COMPACTION_MODE_LATCH:d[g++]=Ee.TEXT_COMPACTION_MODE_LATCH;break;case Ee.BYTE_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH_6:case Ee.NUMERIC_COMPACTION_MODE_LATCH:case Ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ee.MACRO_PDF417_TERMINATOR:a--,m=!0;break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[g]=Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=o[a++],x[g]=A,g++;break}}return Ee.decodeTextCompaction(d,x,g,f),a}static decodeTextCompaction(o,a,f,d){let x=Mt.ALPHA,g=Mt.ALPHA,m=0;for(;m<f;){let A=o[m],I="";switch(x){case Mt.ALPHA:if(A<26)I=String.fromCharCode(65+A);else switch(A){case 26:I=" ";break;case Ee.LL:x=Mt.LOWER;break;case Ee.ML:x=Mt.MIXED;break;case Ee.PS:g=x,x=Mt.PUNCT_SHIFT;break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[m]);break;case Ee.TEXT_COMPACTION_MODE_LATCH:x=Mt.ALPHA;break}break;case Mt.LOWER:if(A<26)I=String.fromCharCode(97+A);else switch(A){case 26:I=" ";break;case Ee.AS:g=x,x=Mt.ALPHA_SHIFT;break;case Ee.ML:x=Mt.MIXED;break;case Ee.PS:g=x,x=Mt.PUNCT_SHIFT;break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[m]);break;case Ee.TEXT_COMPACTION_MODE_LATCH:x=Mt.ALPHA;break}break;case Mt.MIXED:if(A<Ee.PL)I=Ee.MIXED_CHARS[A];else switch(A){case Ee.PL:x=Mt.PUNCT;break;case 26:I=" ";break;case Ee.LL:x=Mt.LOWER;break;case Ee.AL:x=Mt.ALPHA;break;case Ee.PS:g=x,x=Mt.PUNCT_SHIFT;break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[m]);break;case Ee.TEXT_COMPACTION_MODE_LATCH:x=Mt.ALPHA;break}break;case Mt.PUNCT:if(A<Ee.PAL)I=Ee.PUNCT_CHARS[A];else switch(A){case Ee.PAL:x=Mt.ALPHA;break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[m]);break;case Ee.TEXT_COMPACTION_MODE_LATCH:x=Mt.ALPHA;break}break;case Mt.ALPHA_SHIFT:if(x=g,A<26)I=String.fromCharCode(65+A);else switch(A){case 26:I=" ";break;case Ee.TEXT_COMPACTION_MODE_LATCH:x=Mt.ALPHA;break}break;case Mt.PUNCT_SHIFT:if(x=g,A<Ee.PAL)I=Ee.PUNCT_CHARS[A];else switch(A){case Ee.PAL:x=Mt.ALPHA;break;case Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[m]);break;case Ee.TEXT_COMPACTION_MODE_LATCH:x=Mt.ALPHA;break}break}I!==""&&d.append(I),m++}}static byteCompaction(o,a,f,d,x){let g=new _i,m=0,A=0,I=!1;switch(o){case Ee.BYTE_COMPACTION_MODE_LATCH:let k=new Int32Array(6),$=a[d++];for(;d<a[0]&&!I;)switch(k[m++]=$,A=900*A+$,$=a[d++],$){case Ee.TEXT_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH:case Ee.NUMERIC_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH_6:case Ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ee.MACRO_PDF417_TERMINATOR:d--,I=!0;break;default:if(m%5===0&&m>0){for(let Q=0;Q<6;++Q)g.write(Number(An(A)>>An(8*(5-Q))));A=0,m=0}break}d===a[0]&&$<Ee.TEXT_COMPACTION_MODE_LATCH&&(k[m++]=$);for(let Q=0;Q<m;Q++)g.write(k[Q]);break;case Ee.BYTE_COMPACTION_MODE_LATCH_6:for(;d<a[0]&&!I;){let Q=a[d++];if(Q<Ee.TEXT_COMPACTION_MODE_LATCH)m++,A=900*A+Q;else switch(Q){case Ee.TEXT_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH:case Ee.NUMERIC_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH_6:case Ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ee.MACRO_PDF417_TERMINATOR:d--,I=!0;break}if(m%5===0&&m>0){for(let ce=0;ce<6;++ce)g.write(Number(An(A)>>An(8*(5-ce))));A=0,m=0}}break}return x.append(ne.decode(g.toByteArray(),f)),d}static numericCompaction(o,a,f){let d=0,x=!1,g=new Int32Array(Ee.MAX_NUMERIC_CODEWORDS);for(;a<o[0]&&!x;){let m=o[a++];if(a===o[0]&&(x=!0),m<Ee.TEXT_COMPACTION_MODE_LATCH)g[d]=m,d++;else switch(m){case Ee.TEXT_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH:case Ee.BYTE_COMPACTION_MODE_LATCH_6:case Ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ee.MACRO_PDF417_TERMINATOR:a--,x=!0;break}(d%Ee.MAX_NUMERIC_CODEWORDS===0||m===Ee.NUMERIC_COMPACTION_MODE_LATCH||x)&&d>0&&(f.append(Ee.decodeBase900toBase10(g,d)),d=0)}return a}static decodeBase900toBase10(o,a){let f=An(0);for(let x=0;x<a;x++)f+=Ee.EXP900[a-x-1]*An(o[x]);let d=f.toString();if(d.charAt(0)!=="1")throw new v;return d.substring(1)}}Ee.TEXT_COMPACTION_MODE_LATCH=900,Ee.BYTE_COMPACTION_MODE_LATCH=901,Ee.NUMERIC_COMPACTION_MODE_LATCH=902,Ee.BYTE_COMPACTION_MODE_LATCH_6=924,Ee.ECI_USER_DEFINED=925,Ee.ECI_GENERAL_PURPOSE=926,Ee.ECI_CHARSET=927,Ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Ee.MACRO_PDF417_TERMINATOR=922,Ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Ee.MAX_NUMERIC_CODEWORDS=15,Ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Ee.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Ee.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Ee.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Ee.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Ee.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Ee.PL=25,Ee.LL=27,Ee.AS=27,Ee.ML=28,Ee.AL=28,Ee.PS=29,Ee.PAL=29,Ee.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Ee.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Ee.EXP900=Zn()?ds():[],Ee.NUMBER_OF_SEQUENCE_CODEWORDS=2;class zt{constructor(){}static decode(o,a,f,d,x,g,m){let A=new So(o,a,f,d,x),I=null,k=null,$;for(let xe=!0;;xe=!1){if(a!=null&&(I=zt.getRowIndicatorColumn(o,A,a,!0,g,m)),d!=null&&(k=zt.getRowIndicatorColumn(o,A,d,!1,g,m)),$=zt.merge(I,k),$==null)throw C.getNotFoundInstance();let ge=$.getBoundingBox();if(xe&&ge!=null&&(ge.getMinY()<A.getMinY()||ge.getMaxY()>A.getMaxY()))A=ge;else break}$.setBoundingBox(A);let Q=$.getBarcodeColumnCount()+1;$.setDetectionResultColumn(0,I),$.setDetectionResultColumn(Q,k);let ce=I!=null;for(let xe=1;xe<=Q;xe++){let ge=ce?xe:Q-xe;if($.getDetectionResultColumn(ge)!==void 0)continue;let ye;ge===0||ge===Q?ye=new Re(A,ge===0):ye=new ae(A),$.setDetectionResultColumn(ge,ye);let _e=-1,Fe=_e;for(let Le=A.getMinY();Le<=A.getMaxY();Le++){if(_e=zt.getStartColumn($,ge,Le,ce),_e<0||_e>A.getMaxX()){if(Fe===-1)continue;_e=Fe}let Be=zt.detectCodeword(o,A.getMinX(),A.getMaxX(),ce,_e,Le,g,m);Be!=null&&(ye.setCodeword(Le,Be),Fe=_e,g=Math.min(g,Be.getWidth()),m=Math.max(m,Be.getWidth()))}}return zt.createDecoderResult($)}static merge(o,a){if(o==null&&a==null)return null;let f=zt.getBarcodeMetadata(o,a);if(f==null)return null;let d=So.merge(zt.adjustBoundingBox(o),zt.adjustBoundingBox(a));return new Qe(f,d)}static adjustBoundingBox(o){if(o==null)return null;let a=o.getRowHeights();if(a==null)return null;let f=zt.getMax(a),d=0;for(let m of a)if(d+=f-m,m>0)break;let x=o.getCodewords();for(let m=0;d>0&&x[m]==null;m++)d--;let g=0;for(let m=a.length-1;m>=0&&(g+=f-a[m],!(a[m]>0));m--);for(let m=x.length-1;g>0&&x[m]==null;m--)g--;return o.getBoundingBox().addMissingRows(d,g,o.isLeft())}static getMax(o){let a=-1;for(let f of o)a=Math.max(a,f);return a}static getBarcodeMetadata(o,a){let f;if(o==null||(f=o.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let d;return a==null||(d=a.getBarcodeMetadata())==null?f:f.getColumnCount()!==d.getColumnCount()&&f.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&f.getRowCount()!==d.getRowCount()?null:f}static getRowIndicatorColumn(o,a,f,d,x,g){let m=new Re(a,d);for(let A=0;A<2;A++){let I=A===0?1:-1,k=Math.trunc(Math.trunc(f.getX()));for(let $=Math.trunc(Math.trunc(f.getY()));$<=a.getMaxY()&&$>=a.getMinY();$+=I){let Q=zt.detectCodeword(o,0,o.getWidth(),d,k,$,x,g);Q!=null&&(m.setCodeword($,Q),d?k=Q.getStartX():k=Q.getEndX())}}return m}static adjustCodewordCount(o,a){let f=a[0][1],d=f.getValue(),x=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-zt.getNumberOfECCodeWords(o.getBarcodeECLevel());if(d.length===0){if(x<1||x>It.MAX_CODEWORDS_IN_BARCODE)throw C.getNotFoundInstance();f.setValue(x)}else d[0]!==x&&f.setValue(x)}static createDecoderResult(o){let a=zt.createBarcodeMatrix(o);zt.adjustCodewordCount(o,a);let f=new Array,d=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),x=[],g=new Array;for(let A=0;A<o.getBarcodeRowCount();A++)for(let I=0;I<o.getBarcodeColumnCount();I++){let k=a[A][I+1].getValue(),$=A*o.getBarcodeColumnCount()+I;k.length===0?f.push($):k.length===1?d[$]=k[0]:(g.push($),x.push(k))}let m=new Array(x.length);for(let A=0;A<m.length;A++)m[A]=x[A];return zt.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),d,It.toIntArray(f),It.toIntArray(g),m)}static createDecoderResultFromAmbiguousValues(o,a,f,d,x){let g=new Int32Array(d.length),m=100;for(;m-- >0;){for(let A=0;A<g.length;A++)a[d[A]]=x[A][g[A]];try{return zt.decodeCodewords(a,o,f)}catch(A){if(!(A instanceof w))throw A}if(g.length===0)throw w.getChecksumInstance();for(let A=0;A<g.length;A++)if(g[A]<x[A].length-1){g[A]++;break}else if(g[A]=0,A===g.length-1)throw w.getChecksumInstance()}throw w.getChecksumInstance()}static createBarcodeMatrix(o){let a=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let d=0;d<a.length;d++)for(let x=0;x<a[d].length;x++)a[d][x]=new be;let f=0;for(let d of o.getDetectionResultColumns()){if(d!=null){for(let x of d.getCodewords())if(x!=null){let g=x.getRowNumber();if(g>=0){if(g>=a.length)continue;a[g][f].setValue(x.getValue())}}}f++}return a}static isValidBarcodeColumn(o,a){return a>=0&&a<=o.getBarcodeColumnCount()+1}static getStartColumn(o,a,f,d){let x=d?1:-1,g=null;if(zt.isValidBarcodeColumn(o,a-x)&&(g=o.getDetectionResultColumn(a-x).getCodeword(f)),g!=null)return d?g.getEndX():g.getStartX();if(g=o.getDetectionResultColumn(a).getCodewordNearby(f),g!=null)return d?g.getStartX():g.getEndX();if(zt.isValidBarcodeColumn(o,a-x)&&(g=o.getDetectionResultColumn(a-x).getCodewordNearby(f)),g!=null)return d?g.getEndX():g.getStartX();let m=0;for(;zt.isValidBarcodeColumn(o,a-x);){a-=x;for(let A of o.getDetectionResultColumn(a).getCodewords())if(A!=null)return(d?A.getEndX():A.getStartX())+x*m*(A.getEndX()-A.getStartX());m++}return d?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,a,f,d,x,g,m,A){x=zt.adjustCodewordStartColumn(o,a,f,d,x,g);let I=zt.getModuleBitCount(o,a,f,d,x,g);if(I==null)return null;let k,$=Je.sum(I);if(d)k=x+$;else{for(let xe=0;xe<I.length/2;xe++){let ge=I[xe];I[xe]=I[I.length-1-xe],I[I.length-1-xe]=ge}k=x,x=k-$}if(!zt.checkCodewordSkew($,m,A))return null;let Q=vt.getDecodedValue(I),ce=It.getCodeword(Q);return ce===-1?null:new br(x,k,zt.getCodewordBucketNumber(Q),ce)}static getModuleBitCount(o,a,f,d,x,g){let m=x,A=new Int32Array(8),I=0,k=d?1:-1,$=d;for(;(d?m<f:m>=a)&&I<A.length;)o.get(m,g)===$?(A[I]++,m+=k):(I++,$=!$);return I===A.length||m===(d?f:a)&&I===A.length-1?A:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,a,f,d,x,g){let m=x,A=d?-1:1;for(let I=0;I<2;I++){for(;(d?m>=a:m<f)&&d===o.get(m,g);){if(Math.abs(x-m)>zt.CODEWORD_SKEW_SIZE)return x;m+=A}A=-A,d=!d}return m}static checkCodewordSkew(o,a,f){return a-zt.CODEWORD_SKEW_SIZE<=o&&o<=f+zt.CODEWORD_SKEW_SIZE}static decodeCodewords(o,a,f){if(o.length===0)throw v.getFormatInstance();let d=1<<a+1,x=zt.correctErrors(o,f,d);zt.verifyCodewordCount(o,d);let g=Ee.decode(o,""+a);return g.setErrorsCorrected(x),g.setErasures(f.length),g}static correctErrors(o,a,f){if(a!=null&&a.length>f/2+zt.MAX_ERRORS||f<0||f>zt.MAX_EC_CODEWORDS)throw w.getChecksumInstance();return zt.errorCorrection.decode(o,f,a)}static verifyCodewordCount(o,a){if(o.length<4)throw v.getFormatInstance();let f=o[0];if(f>o.length)throw v.getFormatInstance();if(f===0)if(a<o.length)o[0]=o.length-a;else throw v.getFormatInstance()}static getBitCountForCodeword(o){let a=new Int32Array(8),f=0,d=a.length-1;for(;!((o&1)!==f&&(f=o&1,d--,d<0));)a[d]++,o>>=1;return a}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return zt.getCodewordBucketNumber(zt.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let a=new p0;for(let f=0;f<o.length;f++){a.format("Row %2d: ",f);for(let d=0;d<o[f].length;d++){let x=o[f][d];x.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",x.getValue()[0],x.getConfidence(x.getValue()[0]))}a.format("%n")}return a.toString()}}zt.CODEWORD_SKEW_SIZE=2,zt.MAX_ERRORS=3,zt.MAX_EC_CODEWORDS=512,zt.errorCorrection=new Yl;class Wr{decode(o,a=null){let f=Wr.decode(o,a,!1);if(f==null||f.length===0||f[0]==null)throw C.getNotFoundInstance();return f[0]}decodeMultiple(o,a=null){try{return Wr.decode(o,a,!0)}catch(f){throw f instanceof v||f instanceof w?C.getNotFoundInstance():f}}static decode(o,a,f){const d=new Array,x=Lt.detectMultiple(o,a,f);for(const g of x.getPoints()){const m=zt.decode(x.getBits(),g[4],g[5],g[6],g[7],Wr.getMinCodewordWidth(g),Wr.getMaxCodewordWidth(g)),A=new ue(m.getText(),m.getRawBytes(),void 0,g,fe.PDF_417);A.putMetadata(re.ERROR_CORRECTION_LEVEL,m.getECLevel());const I=m.getOther();I!=null&&A.putMetadata(re.PDF417_EXTRA_METADATA,I),d.push(A)}return d.map(g=>g)}static getMaxWidth(o,a){return o==null||a==null?0:Math.trunc(Math.abs(o.getX()-a.getX()))}static getMinWidth(o,a){return o==null||a==null?O.MAX_VALUE:Math.trunc(Math.abs(o.getX()-a.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(Wr.getMaxWidth(o[0],o[4]),Wr.getMaxWidth(o[6],o[2])*It.MODULES_IN_CODEWORD/It.MODULES_IN_STOP_PATTERN),Math.max(Wr.getMaxWidth(o[1],o[5]),Wr.getMaxWidth(o[7],o[3])*It.MODULES_IN_CODEWORD/It.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(Wr.getMinWidth(o[0],o[4]),Wr.getMinWidth(o[6],o[2])*It.MODULES_IN_CODEWORD/It.MODULES_IN_STOP_PATTERN),Math.min(Wr.getMinWidth(o[1],o[5]),Wr.getMinWidth(o[7],o[3])*It.MODULES_IN_CODEWORD/It.MODULES_IN_STOP_PATTERN)))}reset(){}}class Io extends u{}Io.kind="ReaderException";class $m{constructor(o,a){this.verbose=o===!0,a&&this.setHints(a)}decode(o,a){return a&&this.setHints(a),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const a=!n(o)&&o.get(R.TRY_HARDER)===!0,f=n(o)?null:o.get(R.POSSIBLE_FORMATS),d=new Array;if(!n(f)){const x=f.some(g=>g===fe.UPC_A||g===fe.UPC_E||g===fe.EAN_13||g===fe.EAN_8||g===fe.CODABAR||g===fe.CODE_39||g===fe.CODE_93||g===fe.CODE_128||g===fe.ITF||g===fe.RSS_14||g===fe.RSS_EXPANDED);x&&!a&&d.push(new zi(o,this.verbose)),f.includes(fe.QR_CODE)&&d.push(new Hs),f.includes(fe.DATA_MATRIX)&&d.push(new us),f.includes(fe.AZTEC)&&d.push(new Ct),f.includes(fe.PDF_417)&&d.push(new Wr),x&&a&&d.push(new zi(o,this.verbose))}d.length===0&&(a||d.push(new zi(o,this.verbose)),d.push(new Hs),d.push(new us),d.push(new Ct),d.push(new Wr),a&&d.push(new zi(o,this.verbose))),this.readers=d}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new Io("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(o,this.hints)}catch(f){if(f instanceof Io)continue}throw new C("No MultiFormat Readers were able to detect the code.")}}class tC extends G{constructor(o=null,a=500){const f=new $m;f.setHints(o),super(f,a)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class rC extends G{constructor(o=500){super(new Wr,o)}}class nC extends G{constructor(o=500){super(new Hs,o)}}var Tx;(function(q){q[q.ERROR_CORRECTION=0]="ERROR_CORRECTION",q[q.CHARACTER_SET=1]="CHARACTER_SET",q[q.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",q[q.MIN_SIZE=3]="MIN_SIZE",q[q.MAX_SIZE=4]="MAX_SIZE",q[q.MARGIN=5]="MARGIN",q[q.PDF417_COMPACT=6]="PDF417_COMPACT",q[q.PDF417_COMPACTION=7]="PDF417_COMPACTION",q[q.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",q[q.AZTEC_LAYERS=9]="AZTEC_LAYERS",q[q.QR_VERSION=10]="QR_VERSION"})(Tx||(Tx={}));var hn=Tx;class Nx{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new ee(o,Int32Array.from([1])))}buildGenerator(o){const a=this.cachedGenerators;if(o>=a.length){let f=a[a.length-1];const d=this.field;for(let x=a.length;x<=o;x++){const g=f.multiply(new ee(d,Int32Array.from([1,d.exp(x-1+d.getGeneratorBase())])));a.push(g),f=g}}return a[o]}encode(o,a){if(a===0)throw new b("No error correction bytes");const f=o.length-a;if(f<=0)throw new b("No data bytes provided");const d=this.buildGenerator(a),x=new Int32Array(f);S.arraycopy(o,0,x,0,f);let g=new ee(this.field,x);g=g.multiplyByMonomial(a,1);const A=g.divide(d)[1].getCoefficients(),I=a-A.length;for(let k=0;k<I;k++)o[f+k]=0;S.arraycopy(A,0,o,f+I,A.length)}}class Yr{constructor(){}static applyMaskPenaltyRule1(o){return Yr.applyMaskPenaltyRule1Internal(o,!0)+Yr.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let a=0;const f=o.getArray(),d=o.getWidth(),x=o.getHeight();for(let g=0;g<x-1;g++){const m=f[g];for(let A=0;A<d-1;A++){const I=m[A];I===m[A+1]&&I===f[g+1][A]&&I===f[g+1][A+1]&&a++}}return Yr.N2*a}static applyMaskPenaltyRule3(o){let a=0;const f=o.getArray(),d=o.getWidth(),x=o.getHeight();for(let g=0;g<x;g++)for(let m=0;m<d;m++){const A=f[g];m+6<d&&A[m]===1&&A[m+1]===0&&A[m+2]===1&&A[m+3]===1&&A[m+4]===1&&A[m+5]===0&&A[m+6]===1&&(Yr.isWhiteHorizontal(A,m-4,m)||Yr.isWhiteHorizontal(A,m+7,m+11))&&a++,g+6<x&&f[g][m]===1&&f[g+1][m]===0&&f[g+2][m]===1&&f[g+3][m]===1&&f[g+4][m]===1&&f[g+5][m]===0&&f[g+6][m]===1&&(Yr.isWhiteVertical(f,m,g-4,g)||Yr.isWhiteVertical(f,m,g+7,g+11))&&a++}return a*Yr.N3}static isWhiteHorizontal(o,a,f){a=Math.max(a,0),f=Math.min(f,o.length);for(let d=a;d<f;d++)if(o[d]===1)return!1;return!0}static isWhiteVertical(o,a,f,d){f=Math.max(f,0),d=Math.min(d,o.length);for(let x=f;x<d;x++)if(o[x][a]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let a=0;const f=o.getArray(),d=o.getWidth(),x=o.getHeight();for(let A=0;A<x;A++){const I=f[A];for(let k=0;k<d;k++)I[k]===1&&a++}const g=o.getHeight()*o.getWidth();return Math.floor(Math.abs(a*2-g)*10/g)*Yr.N4}static getDataMaskBit(o,a,f){let d,x;switch(o){case 0:d=f+a&1;break;case 1:d=f&1;break;case 2:d=a%3;break;case 3:d=(f+a)%3;break;case 4:d=Math.floor(f/2)+Math.floor(a/3)&1;break;case 5:x=f*a,d=(x&1)+x%3;break;case 6:x=f*a,d=(x&1)+x%3&1;break;case 7:x=f*a,d=x%3+(f+a&1)&1;break;default:throw new b("Invalid mask pattern: "+o)}return d===0}static applyMaskPenaltyRule1Internal(o,a){let f=0;const d=a?o.getHeight():o.getWidth(),x=a?o.getWidth():o.getHeight(),g=o.getArray();for(let m=0;m<d;m++){let A=0,I=-1;for(let k=0;k<x;k++){const $=a?g[m][k]:g[k][m];$===I?A++:(A>=5&&(f+=Yr.N1+(A-5)),A=1,I=$)}A>=5&&(f+=Yr.N1+(A-5))}return f}}Yr.N1=3,Yr.N2=3,Yr.N3=40,Yr.N4=10;class Qh{constructor(o,a){this.width=o,this.height=a;const f=new Array(a);for(let d=0;d!==a;d++)f[d]=new Uint8Array(o);this.bytes=f}getHeight(){return this.height}getWidth(){return this.width}get(o,a){return this.bytes[a][o]}getArray(){return this.bytes}setNumber(o,a,f){this.bytes[a][o]=f}setBoolean(o,a,f){this.bytes[a][o]=f?1:0}clear(o){for(const a of this.bytes)N.fill(a,o)}equals(o){if(!(o instanceof Qh))return!1;const a=o;if(this.width!==a.width||this.height!==a.height)return!1;for(let f=0,d=this.height;f<d;++f){const x=this.bytes[f],g=a.bytes[f];for(let m=0,A=this.width;m<A;++m)if(x[m]!==g[m])return!1}return!0}toString(){const o=new V;for(let a=0,f=this.height;a<f;++a){const d=this.bytes[a];for(let x=0,g=this.width;x<g;++x)switch(d[x]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class g0{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new V;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<g0.NUM_MASK_PATTERNS}}g0.NUM_MASK_PATTERNS=8;class Ir extends u{}Ir.kind="WriterException";class Dt{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,a,f,d,x){Dt.clearMatrix(x),Dt.embedBasicPatterns(f,x),Dt.embedTypeInfo(a,d,x),Dt.maybeEmbedVersionInfo(f,x),Dt.embedDataBits(o,d,x)}static embedBasicPatterns(o,a){Dt.embedPositionDetectionPatternsAndSeparators(a),Dt.embedDarkDotAtLeftBottomCorner(a),Dt.maybeEmbedPositionAdjustmentPatterns(o,a),Dt.embedTimingPatterns(a)}static embedTypeInfo(o,a,f){const d=new M;Dt.makeTypeInfoBits(o,a,d);for(let x=0,g=d.getSize();x<g;++x){const m=d.get(d.getSize()-1-x),A=Dt.TYPE_INFO_COORDINATES[x],I=A[0],k=A[1];if(f.setBoolean(I,k,m),x<8){const $=f.getWidth()-x-1;f.setBoolean($,8,m)}else{const Q=f.getHeight()-7+(x-8);f.setBoolean(8,Q,m)}}}static maybeEmbedVersionInfo(o,a){if(o.getVersionNumber()<7)return;const f=new M;Dt.makeVersionInfoBits(o,f);let d=6*3-1;for(let x=0;x<6;++x)for(let g=0;g<3;++g){const m=f.get(d);d--,a.setBoolean(x,a.getHeight()-11+g,m),a.setBoolean(a.getHeight()-11+g,x,m)}}static embedDataBits(o,a,f){let d=0,x=-1,g=f.getWidth()-1,m=f.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);m>=0&&m<f.getHeight();){for(let A=0;A<2;++A){const I=g-A;if(!Dt.isEmpty(f.get(I,m)))continue;let k;d<o.getSize()?(k=o.get(d),++d):k=!1,a!==255&&Yr.getDataMaskBit(a,I,m)&&(k=!k),f.setBoolean(I,m,k)}m+=x}x=-x,m+=x,g-=2}if(d!==o.getSize())throw new Ir("Not all bits consumed: "+d+"/"+o.getSize())}static findMSBSet(o){return 32-O.numberOfLeadingZeros(o)}static calculateBCHCode(o,a){if(a===0)throw new b("0 polynomial");const f=Dt.findMSBSet(a);for(o<<=f-1;Dt.findMSBSet(o)>=f;)o^=a<<Dt.findMSBSet(o)-f;return o}static makeTypeInfoBits(o,a,f){if(!g0.isValidMaskPattern(a))throw new Ir("Invalid mask pattern");const d=o.getBits()<<3|a;f.appendBits(d,5);const x=Dt.calculateBCHCode(d,Dt.TYPE_INFO_POLY);f.appendBits(x,10);const g=new M;if(g.appendBits(Dt.TYPE_INFO_MASK_PATTERN,15),f.xor(g),f.getSize()!==15)throw new Ir("should not happen but we got: "+f.getSize())}static makeVersionInfoBits(o,a){a.appendBits(o.getVersionNumber(),6);const f=Dt.calculateBCHCode(o.getVersionNumber(),Dt.VERSION_INFO_POLY);if(a.appendBits(f,12),a.getSize()!==18)throw new Ir("should not happen but we got: "+a.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let a=8;a<o.getWidth()-8;++a){const f=(a+1)%2;Dt.isEmpty(o.get(a,6))&&o.setNumber(a,6,f),Dt.isEmpty(o.get(6,a))&&o.setNumber(6,a,f)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new Ir;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,a,f){for(let d=0;d<8;++d){if(!Dt.isEmpty(f.get(o+d,a)))throw new Ir;f.setNumber(o+d,a,0)}}static embedVerticalSeparationPattern(o,a,f){for(let d=0;d<7;++d){if(!Dt.isEmpty(f.get(o,a+d)))throw new Ir;f.setNumber(o,a+d,0)}}static embedPositionAdjustmentPattern(o,a,f){for(let d=0;d<5;++d){const x=Dt.POSITION_ADJUSTMENT_PATTERN[d];for(let g=0;g<5;++g)f.setNumber(o+g,a+d,x[g])}}static embedPositionDetectionPattern(o,a,f){for(let d=0;d<7;++d){const x=Dt.POSITION_DETECTION_PATTERN[d];for(let g=0;g<7;++g)f.setNumber(o+g,a+d,x[g])}}static embedPositionDetectionPatternsAndSeparators(o){const a=Dt.POSITION_DETECTION_PATTERN[0].length;Dt.embedPositionDetectionPattern(0,0,o),Dt.embedPositionDetectionPattern(o.getWidth()-a,0,o),Dt.embedPositionDetectionPattern(0,o.getWidth()-a,o);const f=8;Dt.embedHorizontalSeparationPattern(0,f-1,o),Dt.embedHorizontalSeparationPattern(o.getWidth()-f,f-1,o),Dt.embedHorizontalSeparationPattern(0,o.getWidth()-f,o);const d=7;Dt.embedVerticalSeparationPattern(d,0,o),Dt.embedVerticalSeparationPattern(o.getHeight()-d-1,0,o),Dt.embedVerticalSeparationPattern(d,o.getHeight()-d,o)}static maybeEmbedPositionAdjustmentPatterns(o,a){if(o.getVersionNumber()<2)return;const f=o.getVersionNumber()-1,d=Dt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[f];for(let x=0,g=d.length;x!==g;x++){const m=d[x];if(m>=0)for(let A=0;A!==g;A++){const I=d[A];I>=0&&Dt.isEmpty(a.get(I,m))&&Dt.embedPositionAdjustmentPattern(I-2,m-2,a)}}}}Dt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Dt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Dt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Dt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Dt.VERSION_INFO_POLY=7973,Dt.TYPE_INFO_POLY=1335,Dt.TYPE_INFO_MASK_PATTERN=21522;class iC{constructor(o,a){this.dataBytes=o,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Fr{constructor(){}static calculateMaskPenalty(o){return Yr.applyMaskPenaltyRule1(o)+Yr.applyMaskPenaltyRule2(o)+Yr.applyMaskPenaltyRule3(o)+Yr.applyMaskPenaltyRule4(o)}static encode(o,a,f=null){let d=Fr.DEFAULT_BYTE_MODE_ENCODING;const x=f!==null&&f.get(hn.CHARACTER_SET)!==void 0;x&&(d=f.get(hn.CHARACTER_SET).toString());const g=this.chooseMode(o,d),m=new M;if(g===ht.BYTE&&(x||Fr.DEFAULT_BYTE_MODE_ENCODING!==d)){const Le=Y.getCharacterSetECIByName(d);Le!==void 0&&this.appendECI(Le,m)}this.appendModeInfo(g,m);const A=new M;this.appendBytes(o,g,A,d);let I;if(f!==null&&f.get(hn.QR_VERSION)!==void 0){const Le=Number.parseInt(f.get(hn.QR_VERSION).toString(),10);I=gt.getVersionForNumber(Le);const Be=this.calculateBitsNeeded(g,m,A,I);if(!this.willFit(Be,I,a))throw new Ir("Data too big for requested version")}else I=this.recommendVersion(a,g,m,A);const k=new M;k.appendBitArray(m);const $=g===ht.BYTE?A.getSizeInBytes():o.length;this.appendLengthInfo($,I,g,k),k.appendBitArray(A);const Q=I.getECBlocksForLevel(a),ce=I.getTotalCodewords()-Q.getTotalECCodewords();this.terminateBits(ce,k);const xe=this.interleaveWithECBytes(k,I.getTotalCodewords(),ce,Q.getNumBlocks()),ge=new g0;ge.setECLevel(a),ge.setMode(g),ge.setVersion(I);const ye=I.getDimensionForVersion(),_e=new Qh(ye,ye),Fe=this.chooseMaskPattern(xe,a,I,_e);return ge.setMaskPattern(Fe),Dt.buildMatrix(xe,a,I,Fe,_e),ge.setMatrix(_e),ge}static recommendVersion(o,a,f,d){const x=this.calculateBitsNeeded(a,f,d,gt.getVersionForNumber(1)),g=this.chooseVersion(x,o),m=this.calculateBitsNeeded(a,f,d,g);return this.chooseVersion(m,o)}static calculateBitsNeeded(o,a,f,d){return a.getSize()+o.getCharacterCountBits(d)+f.getSize()}static getAlphanumericCode(o){return o<Fr.ALPHANUMERIC_TABLE.length?Fr.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,a=null){if(Y.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(o))return ht.KANJI;let f=!1,d=!1;for(let x=0,g=o.length;x<g;++x){const m=o.charAt(x);if(Fr.isDigit(m))f=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)d=!0;else return ht.BYTE}return d?ht.ALPHANUMERIC:f?ht.NUMERIC:ht.BYTE}static isOnlyDoubleByteKanji(o){let a;try{a=ne.encode(o,Y.SJIS)}catch{return!1}const f=a.length;if(f%2!==0)return!1;for(let d=0;d<f;d+=2){const x=a[d]&255;if((x<129||x>159)&&(x<224||x>235))return!1}return!0}static chooseMaskPattern(o,a,f,d){let x=Number.MAX_SAFE_INTEGER,g=-1;for(let m=0;m<g0.NUM_MASK_PATTERNS;m++){Dt.buildMatrix(o,a,f,m,d);let A=this.calculateMaskPenalty(d);A<x&&(x=A,g=m)}return g}static chooseVersion(o,a){for(let f=1;f<=40;f++){const d=gt.getVersionForNumber(f);if(Fr.willFit(o,d,a))return d}throw new Ir("Data too big")}static willFit(o,a,f){const d=a.getTotalCodewords(),g=a.getECBlocksForLevel(f).getTotalECCodewords(),m=d-g,A=(o+7)/8;return m>=A}static terminateBits(o,a){const f=o*8;if(a.getSize()>f)throw new Ir("data bits cannot fit in the QR Code"+a.getSize()+" > "+f);for(let g=0;g<4&&a.getSize()<f;++g)a.appendBit(!1);const d=a.getSize()&7;if(d>0)for(let g=d;g<8;g++)a.appendBit(!1);const x=o-a.getSizeInBytes();for(let g=0;g<x;++g)a.appendBits(g&1?17:236,8);if(a.getSize()!==f)throw new Ir("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,a,f,d,x,g){if(d>=f)throw new Ir("Block ID too large");const m=o%f,A=f-m,I=Math.floor(o/f),k=I+1,$=Math.floor(a/f),Q=$+1,ce=I-$,xe=k-Q;if(ce!==xe)throw new Ir("EC bytes mismatch");if(f!==A+m)throw new Ir("RS blocks mismatch");if(o!==($+ce)*A+(Q+xe)*m)throw new Ir("Total bytes mismatch");d<A?(x[0]=$,g[0]=ce):(x[0]=Q,g[0]=xe)}static interleaveWithECBytes(o,a,f,d){if(o.getSizeInBytes()!==f)throw new Ir("Number of bits and data bytes does not match");let x=0,g=0,m=0;const A=new Array;for(let k=0;k<d;++k){const $=new Int32Array(1),Q=new Int32Array(1);Fr.getNumDataBytesAndNumECBytesForBlockID(a,f,d,k,$,Q);const ce=$[0],xe=new Uint8Array(ce);o.toBytes(8*x,xe,0,ce);const ge=Fr.generateECBytes(xe,Q[0]);A.push(new iC(xe,ge)),g=Math.max(g,ce),m=Math.max(m,ge.length),x+=$[0]}if(f!==x)throw new Ir("Data bytes does not match offset");const I=new M;for(let k=0;k<g;++k)for(const $ of A){const Q=$.getDataBytes();k<Q.length&&I.appendBits(Q[k],8)}for(let k=0;k<m;++k)for(const $ of A){const Q=$.getErrorCorrectionBytes();k<Q.length&&I.appendBits(Q[k],8)}if(a!==I.getSizeInBytes())throw new Ir("Interleaving error: "+a+" and "+I.getSizeInBytes()+" differ.");return I}static generateECBytes(o,a){const f=o.length,d=new Int32Array(f+a);for(let g=0;g<f;g++)d[g]=o[g]&255;new Nx(Ae.QR_CODE_FIELD_256).encode(d,a);const x=new Uint8Array(a);for(let g=0;g<a;g++)x[g]=d[f+g];return x}static appendModeInfo(o,a){a.appendBits(o.getBits(),4)}static appendLengthInfo(o,a,f,d){const x=f.getCharacterCountBits(a);if(o>=1<<x)throw new Ir(o+" is bigger than "+((1<<x)-1));d.appendBits(o,x)}static appendBytes(o,a,f,d){switch(a){case ht.NUMERIC:Fr.appendNumericBytes(o,f);break;case ht.ALPHANUMERIC:Fr.appendAlphanumericBytes(o,f);break;case ht.BYTE:Fr.append8BitBytes(o,f,d);break;case ht.KANJI:Fr.appendKanjiBytes(o,f);break;default:throw new Ir("Invalid mode: "+a)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const a=Fr.getDigit(o);return a>=0&&a<=9}static appendNumericBytes(o,a){const f=o.length;let d=0;for(;d<f;){const x=Fr.getDigit(o.charAt(d));if(d+2<f){const g=Fr.getDigit(o.charAt(d+1)),m=Fr.getDigit(o.charAt(d+2));a.appendBits(x*100+g*10+m,10),d+=3}else if(d+1<f){const g=Fr.getDigit(o.charAt(d+1));a.appendBits(x*10+g,7),d+=2}else a.appendBits(x,4),d++}}static appendAlphanumericBytes(o,a){const f=o.length;let d=0;for(;d<f;){const x=Fr.getAlphanumericCode(o.charCodeAt(d));if(x===-1)throw new Ir;if(d+1<f){const g=Fr.getAlphanumericCode(o.charCodeAt(d+1));if(g===-1)throw new Ir;a.appendBits(x*45+g,11),d+=2}else a.appendBits(x,6),d++}}static append8BitBytes(o,a,f){let d;try{d=ne.encode(o,f)}catch(x){throw new Ir(x)}for(let x=0,g=d.length;x!==g;x++){const m=d[x];a.appendBits(m,8)}}static appendKanjiBytes(o,a){let f;try{f=ne.encode(o,Y.SJIS)}catch(x){throw new Ir(x)}const d=f.length;for(let x=0;x<d;x+=2){const g=f[x]&255,m=f[x+1]&255,A=g<<8&4294967295|m;let I=-1;if(A>=33088&&A<=40956?I=A-33088:A>=57408&&A<=60351&&(I=A-49472),I===-1)throw new Ir("Invalid byte sequence");const k=(I>>8)*192+(I&255);a.appendBits(k,13)}}static appendECI(o,a){a.appendBits(ht.ECI.getBits(),4),a.appendBits(o.getValue(),8)}}Fr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Fr.DEFAULT_BYTE_MODE_ENCODING=Y.UTF8.getName();class b0{write(o,a,f,d=null){if(o.length===0)throw new b("Found empty contents");if(a<0||f<0)throw new b("Requested dimensions are too small: "+a+"x"+f);let x=Ar.L,g=b0.QUIET_ZONE_SIZE;d!==null&&(d.get(hn.ERROR_CORRECTION)!==void 0&&(x=Ar.fromString(d.get(hn.ERROR_CORRECTION).toString())),d.get(hn.MARGIN)!==void 0&&(g=Number.parseInt(d.get(hn.MARGIN).toString(),10)));const m=Fr.encode(o,x,d);return this.renderResult(m,a,f,g)}writeToDom(o,a,f,d,x=null){typeof o=="string"&&(o=document.querySelector(o));const g=this.write(a,f,d,x);o&&o.appendChild(g)}renderResult(o,a,f,d){const x=o.getMatrix();if(x===null)throw new Pe;const g=x.getWidth(),m=x.getHeight(),A=g+d*2,I=m+d*2,k=Math.max(a,A),$=Math.max(f,I),Q=Math.min(Math.floor(k/A),Math.floor($/I)),ce=Math.floor((k-g*Q)/2),xe=Math.floor(($-m*Q)/2),ge=this.createSVGElement(k,$);for(let ye=0,_e=xe;ye<m;ye++,_e+=Q)for(let Fe=0,Le=ce;Fe<g;Fe++,Le+=Q)if(x.get(Fe,ye)===1){const Be=this.createSvgRectElement(Le,_e,Q,Q);ge.appendChild(Be)}return ge}createSVGElement(o,a){const f=document.createElementNS(b0.SVG_NS,"svg");return f.setAttributeNS(null,"height",o.toString()),f.setAttributeNS(null,"width",a.toString()),f}createSvgRectElement(o,a,f,d){const x=document.createElementNS(b0.SVG_NS,"rect");return x.setAttributeNS(null,"x",o.toString()),x.setAttributeNS(null,"y",a.toString()),x.setAttributeNS(null,"height",f.toString()),x.setAttributeNS(null,"width",d.toString()),x.setAttributeNS(null,"fill","#000000"),x}}b0.QUIET_ZONE_SIZE=4,b0.SVG_NS="http://www.w3.org/2000/svg";class Ic{encode(o,a,f,d,x){if(o.length===0)throw new b("Found empty contents");if(a!==fe.QR_CODE)throw new b("Can only encode QR_CODE, but got "+a);if(f<0||d<0)throw new b(`Requested dimensions are too small: ${f}x${d}`);let g=Ar.L,m=Ic.QUIET_ZONE_SIZE;x!==null&&(x.get(hn.ERROR_CORRECTION)!==void 0&&(g=Ar.fromString(x.get(hn.ERROR_CORRECTION).toString())),x.get(hn.MARGIN)!==void 0&&(m=Number.parseInt(x.get(hn.MARGIN).toString(),10)));const A=Fr.encode(o,g,x);return Ic.renderResult(A,f,d,m)}static renderResult(o,a,f,d){const x=o.getMatrix();if(x===null)throw new Pe;const g=x.getWidth(),m=x.getHeight(),A=g+d*2,I=m+d*2,k=Math.max(a,A),$=Math.max(f,I),Q=Math.min(Math.floor(k/A),Math.floor($/I)),ce=Math.floor((k-g*Q)/2),xe=Math.floor(($-m*Q)/2),ge=new E(k,$);for(let ye=0,_e=xe;ye<m;ye++,_e+=Q)for(let Fe=0,Le=ce;Fe<g;Fe++,Le+=Q)x.get(Fe,ye)===1&&ge.setRegion(Le,_e,Q,Q);return ge}}Ic.QUIET_ZONE_SIZE=4;class sC{encode(o,a,f,d,x){let g;switch(a){case fe.QR_CODE:g=new Ic;break;default:throw new b("No encoder available for format "+a)}return g.encode(o,a,f,d,x)}}class zs extends K{constructor(o,a,f,d,x,g,m,A){if(super(g,m),this.yuvData=o,this.dataWidth=a,this.dataHeight=f,this.left=d,this.top=x,d+g>a||x+m>f)throw new b("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(g,m)}getRow(o,a){if(o<0||o>=this.getHeight())throw new b("Requested row is outside the image: "+o);const f=this.getWidth();(a==null||a.length<f)&&(a=new Uint8ClampedArray(f));const d=(o+this.top)*this.dataWidth+this.left;return S.arraycopy(this.yuvData,d,a,0,f),a}getMatrix(){const o=this.getWidth(),a=this.getHeight();if(o===this.dataWidth&&a===this.dataHeight)return this.yuvData;const f=o*a,d=new Uint8ClampedArray(f);let x=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return S.arraycopy(this.yuvData,x,d,0,f),d;for(let g=0;g<a;g++){const m=g*o;S.arraycopy(this.yuvData,x,d,m,o),x+=this.dataWidth}return d}isCropSupported(){return!0}crop(o,a,f,d){return new zs(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+a,f,d,!1)}renderThumbnail(){const o=this.getWidth()/zs.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/zs.THUMBNAIL_SCALE_FACTOR,f=new Int32Array(o*a),d=this.yuvData;let x=this.top*this.dataWidth+this.left;for(let g=0;g<a;g++){const m=g*o;for(let A=0;A<o;A++){const I=d[x+A*zs.THUMBNAIL_SCALE_FACTOR]&255;f[m+A]=4278190080|I*65793}x+=this.dataWidth*zs.THUMBNAIL_SCALE_FACTOR}return f}getThumbnailWidth(){return this.getWidth()/zs.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/zs.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,a){const f=this.yuvData;for(let d=0,x=this.top*this.dataWidth+this.left;d<a;d++,x+=this.dataWidth){const g=x+o/2;for(let m=x,A=x+o-1;m<g;m++,A--){const I=f[m];f[m]=f[A],f[A]=I}}}invert(){return new X(this)}}zs.THUMBNAIL_SCALE_FACTOR=2;class Ox extends K{constructor(o,a,f,d,x,g,m){if(super(a,f),this.dataWidth=d,this.dataHeight=x,this.left=g,this.top=m,o.BYTES_PER_ELEMENT===4){const A=a*f,I=new Uint8ClampedArray(A);for(let k=0;k<A;k++){const $=o[k],Q=$>>16&255,ce=$>>7&510,xe=$&255;I[k]=(Q+ce+xe)/4&255}this.luminances=I}else this.luminances=o;if(d===void 0&&(this.dataWidth=a),x===void 0&&(this.dataHeight=f),g===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+f>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(o,a){if(o<0||o>=this.getHeight())throw new b("Requested row is outside the image: "+o);const f=this.getWidth();(a==null||a.length<f)&&(a=new Uint8ClampedArray(f));const d=(o+this.top)*this.dataWidth+this.left;return S.arraycopy(this.luminances,d,a,0,f),a}getMatrix(){const o=this.getWidth(),a=this.getHeight();if(o===this.dataWidth&&a===this.dataHeight)return this.luminances;const f=o*a,d=new Uint8ClampedArray(f);let x=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return S.arraycopy(this.luminances,x,d,0,f),d;for(let g=0;g<a;g++){const m=g*o;S.arraycopy(this.luminances,x,d,m,o),x+=this.dataWidth}return d}isCropSupported(){return!0}crop(o,a,f,d){return new Ox(this.luminances,f,d,this.dataWidth,this.dataHeight,this.left+o,this.top+a)}invert(){return new X(this)}}class Km extends Y{static forName(o){return this.getCharacterSetECIByName(o)}}class Rx{}Rx.ISO_8859_1=Y.ISO8859_1;class Wm{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class Ym{static singletonList(o){return[o]}static min(o,a){return o.sort(a)[0]}}class oC{constructor(o){this.previous=o}getPrevious(){return this.previous}}class Dc extends oC{constructor(o,a,f){super(o),this.value=a,this.bitCount=f}appendTo(o,a){o.appendBits(this.value,this.bitCount)}add(o,a){return new Dc(this,o,a)}addBinaryShift(o,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Dc(this,o,a)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+O.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class Mx extends Dc{constructor(o,a,f){super(o,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=f}appendTo(o,a){for(let f=0;f<this.binaryShiftByteCount;f++)(f===0||f===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):f===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(a[this.binaryShiftStart+f],8)}addBinaryShift(o,a){return new Mx(this,o,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function aC(q,o,a){return new Mx(q,o,a)}function Xl(q,o,a){return new Dc(q,o,a)}const cC=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ea=0,Zh=1,ji=2,Xm=3,js=4,fC=new Dc(null,0,0),Bx=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function lC(q){for(let o of q)N.fill(o,-1);return q[Ea][js]=0,q[Zh][js]=0,q[Zh][Ea]=28,q[Xm][js]=0,q[ji][js]=0,q[ji][Ea]=15,q}const Qm=lC(N.createInt32Array(6,6));class Gs{constructor(o,a,f,d){this.token=o,this.mode=a,this.binaryShiftByteCount=f,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,a){let f=this.bitCount,d=this.token;if(o!==this.mode){let g=Bx[this.mode][o];d=Xl(d,g&65535,g>>16),f+=g>>16}let x=o===ji?4:5;return d=Xl(d,a,x),new Gs(d,o,0,f+x)}shiftAndAppend(o,a){let f=this.token,d=this.mode===ji?4:5;return f=Xl(f,Qm[this.mode][o],d),f=Xl(f,a,5),new Gs(f,this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(o){let a=this.token,f=this.mode,d=this.bitCount;if(this.mode===js||this.mode===ji){let m=Bx[f][Ea];a=Xl(a,m&65535,m>>16),d+=m>>16,f=Ea}let x=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new Gs(a,f,this.binaryShiftByteCount+1,d+x);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(o+1)),g}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=aC(a,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new Gs(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let a=this.bitCount+(Bx[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?a+=Gs.calculateBinaryShiftCost(o)-Gs.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(a+=10),a<=o.bitCount}toBitArray(o){let a=[];for(let d=this.endBinaryShift(o.length).token;d!==null;d=d.getPrevious())a.unshift(d);let f=new M;for(const d of a)d.appendTo(f,o);return f}toString(){return le.format("%s bits=%d bytes=%d",cC[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}Gs.INITIAL_STATE=new Gs(fC,Ea,0,0);function uC(q){const o=le.getCharCode(" "),a=le.getCharCode("."),f=le.getCharCode(",");q[Ea][o]=1;const d=le.getCharCode("Z"),x=le.getCharCode("A");for(let Q=x;Q<=d;Q++)q[Ea][Q]=Q-x+2;q[Zh][o]=1;const g=le.getCharCode("z"),m=le.getCharCode("a");for(let Q=m;Q<=g;Q++)q[Zh][Q]=Q-m+2;q[ji][o]=1;const A=le.getCharCode("9"),I=le.getCharCode("0");for(let Q=I;Q<=A;Q++)q[ji][Q]=Q-I+2;q[ji][f]=12,q[ji][a]=13;const k=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Q=0;Q<k.length;Q++)q[Xm][le.getCharCode(k[Q])]=Q;const $=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Q=0;Q<$.length;Q++)le.getCharCode($[Q])>0&&(q[js][le.getCharCode($[Q])]=Q);return q}const Px=uC(N.createInt32Array(5,256));class Ql{constructor(o){this.text=o}encode(){const o=le.getCharCode(" "),a=le.getCharCode(`
`);let f=Ym.singletonList(Gs.INITIAL_STATE);for(let x=0;x<this.text.length;x++){let g,m=x+1<this.text.length?this.text[x+1]:0;switch(this.text[x]){case le.getCharCode("\r"):g=m===a?2:0;break;case le.getCharCode("."):g=m===o?3:0;break;case le.getCharCode(","):g=m===o?4:0;break;case le.getCharCode(":"):g=m===o?5:0;break;default:g=0}g>0?(f=Ql.updateStateListForPair(f,x,g),x++):f=this.updateStateListForChar(f,x)}return Ym.min(f,(x,g)=>x.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,a){const f=[];for(let d of o)this.updateStateForChar(d,a,f);return Ql.simplifyStates(f)}updateStateForChar(o,a,f){let d=this.text[a]&255,x=Px[o.getMode()][d]>0,g=null;for(let m=0;m<=js;m++){let A=Px[m][d];if(A>0){if(g==null&&(g=o.endBinaryShift(a)),!x||m===o.getMode()||m===ji){const I=g.latchAndAppend(m,A);f.push(I)}if(!x&&Qm[o.getMode()][m]>=0){const I=g.shiftAndAppend(m,A);f.push(I)}}}if(o.getBinaryShiftByteCount()>0||Px[o.getMode()][d]===0){let m=o.addBinaryShiftChar(a);f.push(m)}}static updateStateListForPair(o,a,f){const d=[];for(let x of o)this.updateStateForPair(x,a,f,d);return this.simplifyStates(d)}static updateStateForPair(o,a,f,d){let x=o.endBinaryShift(a);if(d.push(x.latchAndAppend(js,f)),o.getMode()!==js&&d.push(x.shiftAndAppend(js,f)),f===3||f===4){let g=x.latchAndAppend(ji,16-f).latchAndAppend(ji,1);d.push(g)}if(o.getBinaryShiftByteCount()>0){let g=o.addBinaryShiftChar(a).addBinaryShiftChar(a+1);d.push(g)}}static simplifyStates(o){let a=[];for(const f of o){let d=!0;for(const x of a){if(x.isBetterThanOrEqualTo(f)){d=!1;break}f.isBetterThanOrEqualTo(x)&&(a=a.filter(g=>g!==x))}d&&a.push(f)}return a}}class ur{constructor(){}static encodeBytes(o){return ur.encode(o,ur.DEFAULT_EC_PERCENT,ur.DEFAULT_AZTEC_LAYERS)}static encode(o,a,f){let d=new Ql(o).encode(),x=O.truncDivision(d.getSize()*a,100)+11,g=d.getSize()+x,m,A,I,k,$;if(f!==ur.DEFAULT_AZTEC_LAYERS){if(m=f<0,A=Math.abs(f),A>(m?ur.MAX_NB_BITS_COMPACT:ur.MAX_NB_BITS))throw new b(le.format("Illegal value %s for layers",f));I=ur.totalBitsInLayer(A,m),k=ur.WORD_SIZE[A];let Be=I-I%k;if($=ur.stuffBits(d,k),$.getSize()+x>Be)throw new b("Data to large for user specified layer");if(m&&$.getSize()>k*64)throw new b("Data to large for user specified layer")}else{k=0,$=null;for(let Be=0;;Be++){if(Be>ur.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(m=Be<=3,A=m?Be+1:Be,I=ur.totalBitsInLayer(A,m),g>I)continue;($==null||k!==ur.WORD_SIZE[A])&&(k=ur.WORD_SIZE[A],$=ur.stuffBits(d,k));let rr=I-I%k;if(!(m&&$.getSize()>k*64)&&$.getSize()+x<=rr)break}}let Q=ur.generateCheckWords($,I,k),ce=$.getSize()/k,xe=ur.generateModeMessage(m,A,ce),ge=(m?11:14)+A*4,ye=new Int32Array(ge),_e;if(m){_e=ge;for(let Be=0;Be<ye.length;Be++)ye[Be]=Be}else{_e=ge+1+2*O.truncDivision(O.truncDivision(ge,2)-1,15);let Be=O.truncDivision(ge,2),rr=O.truncDivision(_e,2);for(let jt=0;jt<Be;jt++){let ui=jt+O.truncDivision(jt,15);ye[Be-jt-1]=rr-ui-1,ye[Be+jt]=rr+ui+1}}let Fe=new E(_e);for(let Be=0,rr=0;Be<A;Be++){let jt=(A-Be)*4+(m?9:12);for(let ui=0;ui<jt;ui++){let xs=ui*2;for(let hi=0;hi<2;hi++)Q.get(rr+xs+hi)&&Fe.set(ye[Be*2+hi],ye[Be*2+ui]),Q.get(rr+jt*2+xs+hi)&&Fe.set(ye[Be*2+ui],ye[ge-1-Be*2-hi]),Q.get(rr+jt*4+xs+hi)&&Fe.set(ye[ge-1-Be*2-hi],ye[ge-1-Be*2-ui]),Q.get(rr+jt*6+xs+hi)&&Fe.set(ye[ge-1-Be*2-ui],ye[Be*2+hi])}rr+=jt*8}if(ur.drawModeMessage(Fe,m,_e,xe),m)ur.drawBullsEye(Fe,O.truncDivision(_e,2),5);else{ur.drawBullsEye(Fe,O.truncDivision(_e,2),7);for(let Be=0,rr=0;Be<O.truncDivision(ge,2)-1;Be+=15,rr+=16)for(let jt=O.truncDivision(_e,2)&1;jt<_e;jt+=2)Fe.set(O.truncDivision(_e,2)-rr,jt),Fe.set(O.truncDivision(_e,2)+rr,jt),Fe.set(jt,O.truncDivision(_e,2)-rr),Fe.set(jt,O.truncDivision(_e,2)+rr)}let Le=new Wm;return Le.setCompact(m),Le.setSize(_e),Le.setLayers(A),Le.setCodeWords(ce),Le.setMatrix(Fe),Le}static drawBullsEye(o,a,f){for(let d=0;d<f;d+=2)for(let x=a-d;x<=a+d;x++)o.set(x,a-d),o.set(x,a+d),o.set(a-d,x),o.set(a+d,x);o.set(a-f,a-f),o.set(a-f+1,a-f),o.set(a-f,a-f+1),o.set(a+f,a-f),o.set(a+f,a-f+1),o.set(a+f,a+f-1)}static generateModeMessage(o,a,f){let d=new M;return o?(d.appendBits(a-1,2),d.appendBits(f-1,6),d=ur.generateCheckWords(d,28,4)):(d.appendBits(a-1,5),d.appendBits(f-1,11),d=ur.generateCheckWords(d,40,4)),d}static drawModeMessage(o,a,f,d){let x=O.truncDivision(f,2);if(a)for(let g=0;g<7;g++){let m=x-3+g;d.get(g)&&o.set(m,x-5),d.get(g+7)&&o.set(x+5,m),d.get(20-g)&&o.set(m,x+5),d.get(27-g)&&o.set(x-5,m)}else for(let g=0;g<10;g++){let m=x-5+g+O.truncDivision(g,5);d.get(g)&&o.set(m,x-7),d.get(g+10)&&o.set(x+7,m),d.get(29-g)&&o.set(m,x+7),d.get(39-g)&&o.set(x-7,m)}}static generateCheckWords(o,a,f){let d=o.getSize()/f,x=new Nx(ur.getGF(f)),g=O.truncDivision(a,f),m=ur.bitsToWords(o,f,g);x.encode(m,g-d);let A=a%f,I=new M;I.appendBits(0,A);for(const k of Array.from(m))I.appendBits(k,f);return I}static bitsToWords(o,a,f){let d=new Int32Array(f),x,g;for(x=0,g=o.getSize()/a;x<g;x++){let m=0;for(let A=0;A<a;A++)m|=o.get(x*a+A)?1<<a-A-1:0;d[x]=m}return d}static getGF(o){switch(o){case 4:return Ae.AZTEC_PARAM;case 6:return Ae.AZTEC_DATA_6;case 8:return Ae.AZTEC_DATA_8;case 10:return Ae.AZTEC_DATA_10;case 12:return Ae.AZTEC_DATA_12;default:throw new b("Unsupported word size "+o)}}static stuffBits(o,a){let f=new M,d=o.getSize(),x=(1<<a)-2;for(let g=0;g<d;g+=a){let m=0;for(let A=0;A<a;A++)(g+A>=d||o.get(g+A))&&(m|=1<<a-1-A);(m&x)===x?(f.appendBits(m&x,a),g--):m&x?f.appendBits(m,a):(f.appendBits(m|1,a),g--)}return f}static totalBitsInLayer(o,a){return((a?88:112)+16*o)*o}}ur.DEFAULT_EC_PERCENT=33,ur.DEFAULT_AZTEC_LAYERS=0,ur.MAX_NB_BITS=32,ur.MAX_NB_BITS_COMPACT=4,ur.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Jh{encode(o,a,f,d){return this.encodeWithHints(o,a,f,d,null)}encodeWithHints(o,a,f,d,x){let g=Rx.ISO_8859_1,m=ur.DEFAULT_EC_PERCENT,A=ur.DEFAULT_AZTEC_LAYERS;return x!=null&&(x.has(hn.CHARACTER_SET)&&(g=Km.forName(x.get(hn.CHARACTER_SET).toString())),x.has(hn.ERROR_CORRECTION)&&(m=O.parseInt(x.get(hn.ERROR_CORRECTION).toString())),x.has(hn.AZTEC_LAYERS)&&(A=O.parseInt(x.get(hn.AZTEC_LAYERS).toString()))),Jh.encodeLayers(o,a,f,d,g,m,A)}static encodeLayers(o,a,f,d,x,g,m){if(a!==fe.AZTEC)throw new b("Can only encode AZTEC, but got "+a);let A=ur.encode(le.getBytes(o,x),g,m);return Jh.renderResult(A,f,d)}static renderResult(o,a,f){let d=o.getMatrix();if(d==null)throw new Pe;let x=d.getWidth(),g=d.getHeight(),m=Math.max(a,x),A=Math.max(f,g),I=Math.min(m/x,A/g),k=(m-x*I)/2,$=(A-g*I)/2,Q=new E(m,A);for(let ce=0,xe=$;ce<g;ce++,xe+=I)for(let ge=0,ye=k;ge<x;ge++,ye+=I)d.get(ge,ce)&&Q.setRegion(ye,xe,I,I);return Q}}t.AbstractExpandedDecoder=gr,t.ArgumentException=p,t.ArithmeticException=de,t.AztecCode=Wm,t.AztecCodeReader=Ct,t.AztecCodeWriter=Jh,t.AztecDecoder=Ge,t.AztecDetector=Xe,t.AztecDetectorResult=Ye,t.AztecEncoder=ur,t.AztecHighLevelEncoder=Ql,t.AztecPoint=Ve,t.BarcodeFormat=fe,t.Binarizer=_,t.BinaryBitmap=y,t.BitArray=M,t.BitMatrix=E,t.BitSource=$l,t.BrowserAztecCodeReader=nt,t.BrowserBarcodeReader=fi,t.BrowserCodeReader=G,t.BrowserDatamatrixCodeReader=Cx,t.BrowserMultiFormatReader=tC,t.BrowserPDF417Reader=rC,t.BrowserQRCodeReader=nC,t.BrowserQRCodeSvgWriter=b0,t.CharacterSetECI=Y,t.ChecksumException=w,t.Code128Reader=Ie,t.Code39Reader=qe,t.DataMatrixDecodedBitStreamParser=ks,t.DataMatrixReader=us,t.DecodeHintType=R,t.DecoderResult=se,t.DefaultGridSampler=We,t.DetectorResult=ut,t.EAN13Reader=$t,t.EncodeHintType=hn,t.Exception=u,t.FormatException=v,t.GenericGF=Ae,t.GenericGFPoly=ee,t.GlobalHistogramBinarizer=U,t.GridSampler=_t,t.GridSamplerInstance=wt,t.HTMLCanvasElementLuminanceSource=te,t.HybridBinarizer=j,t.ITFReader=rt,t.IllegalArgumentException=b,t.IllegalStateException=Pe,t.InvertedLuminanceSource=X,t.LuminanceSource=K,t.MathUtils=Je,t.MultiFormatOneDReader=zi,t.MultiFormatReader=$m,t.MultiFormatWriter=sC,t.NotFoundException=C,t.OneDReader=Ke,t.PDF417DecodedBitStreamParser=Ee,t.PDF417DecoderErrorCorrection=Yl,t.PDF417Reader=Wr,t.PDF417ResultMetadata=Br,t.PerspectiveTransform=He,t.PlanarYUVLuminanceSource=zs,t.QRCodeByteMatrix=Qh,t.QRCodeDataMask=vn,t.QRCodeDecodedBitStreamParser=Mr,t.QRCodeDecoderErrorCorrectionLevel=Ar,t.QRCodeDecoderFormatInformation=dn,t.QRCodeEncoder=Fr,t.QRCodeEncoderQRCode=g0,t.QRCodeMaskUtil=Yr,t.QRCodeMatrixUtil=Dt,t.QRCodeMode=ht,t.QRCodeReader=Hs,t.QRCodeVersion=gt,t.QRCodeWriter=Ic,t.RGBLuminanceSource=Ox,t.RSS14Reader=Er,t.RSSExpandedReader=Oe,t.ReaderException=Io,t.ReedSolomonDecoder=pt,t.ReedSolomonEncoder=Nx,t.ReedSolomonException=Se,t.Result=ue,t.ResultMetadataType=re,t.ResultPoint=Ce,t.StringUtils=le,t.UnsupportedOperationException=J,t.VideoInputDevice=z,t.WhiteRectangleDetector=$e,t.WriterException=Ir,t.ZXingArrays=N,t.ZXingCharset=Km,t.ZXingInteger=O,t.ZXingStandardCharsets=Rx,t.ZXingStringBuilder=V,t.ZXingStringEncoding=ne,t.ZXingSystem=S,t.createAbstractExpandedDecoder=ya,Object.defineProperty(t,"__esModule",{value:!0})})})(O2,O2.exports);var Lr=O2.exports;const GN=ba(Lr),VN=gC({__proto__:null,default:GN},[Lr]);var _w=function(){function r(e,t,n){if(this.formatMap=new Map([[et.QR_CODE,Lr.BarcodeFormat.QR_CODE],[et.AZTEC,Lr.BarcodeFormat.AZTEC],[et.CODABAR,Lr.BarcodeFormat.CODABAR],[et.CODE_39,Lr.BarcodeFormat.CODE_39],[et.CODE_93,Lr.BarcodeFormat.CODE_93],[et.CODE_128,Lr.BarcodeFormat.CODE_128],[et.DATA_MATRIX,Lr.BarcodeFormat.DATA_MATRIX],[et.MAXICODE,Lr.BarcodeFormat.MAXICODE],[et.ITF,Lr.BarcodeFormat.ITF],[et.EAN_13,Lr.BarcodeFormat.EAN_13],[et.EAN_8,Lr.BarcodeFormat.EAN_8],[et.PDF_417,Lr.BarcodeFormat.PDF_417],[et.RSS_14,Lr.BarcodeFormat.RSS_14],[et.RSS_EXPANDED,Lr.BarcodeFormat.RSS_EXPANDED],[et.UPC_A,Lr.BarcodeFormat.UPC_A],[et.UPC_E,Lr.BarcodeFormat.UPC_E],[et.UPC_EAN_EXTENSION,Lr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!VN)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var i=this.createZXingFormats(e),s=new Map;s.set(Lr.DecodeHintType.POSSIBLE_FORMATS,i),s.set(Lr.DecodeHintType.TRY_HARDER,!1),this.hints=s}return r.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,i){try{n(t.decode(e))}catch(s){i(s)}})},r.prototype.decode=function(e){var t=new Lr.MultiFormatReader(this.verbose,this.hints),n=new Lr.HTMLCanvasElementLuminanceSource(e),i=new Lr.BinaryBitmap(new Lr.HybridBinarizer(n)),s=t.decode(i);return{text:s.text,format:IA.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,i){e.set(t,n)}),e},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createZXingFormats=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var s=i[n];this.formatMap.has(s)?t.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return t},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r}(),qN=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function l(p){try{u(n.next(p))}catch(b){c(b)}}function h(p){try{u(n.throw(p))}catch(b){c(b)}}function u(p){p.done?s(p.value):i(p.value).then(l,h)}u((n=n.apply(r,e||[])).next())})},$N=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(p){return h([u,p])}}function h(u){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(p){u=[6,p],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Cw=function(){function r(e,t,n){if(this.formatMap=new Map([[et.QR_CODE,"qr_code"],[et.AZTEC,"aztec"],[et.CODABAR,"codabar"],[et.CODE_39,"code_39"],[et.CODE_93,"code_93"],[et.CODE_128,"code_128"],[et.DATA_MATRIX,"data_matrix"],[et.ITF,"itf"],[et.EAN_13,"ean_13"],[et.EAN_8,"ean_8"],[et.PDF_417,"pdf417"],[et.UPC_A,"upc_a"],[et.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=n;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},r.prototype.decodeAsync=function(e){return qN(this,void 0,void 0,function(){var t,n;return $N(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=i.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(t),[2,{text:n.rawValue,format:IA.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,i=0,s=e;i<s.length;i++){var c=s[i],l=c.boundingBox.width*c.boundingBox.height;l>n&&(n=l,t=c)}if(!t)throw"No largest barcode found";return t},r.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var s=i[n];this.formatMap.has(s)?t.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,i){e.set(t,n)}),e},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r}(),Sw=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function l(p){try{u(n.next(p))}catch(b){c(b)}}function h(p){try{u(n.throw(p))}catch(b){c(b)}}function u(p){p.done?s(p.value):i(p.value).then(l,h)}u((n=n.apply(r,e||[])).next())})},Iw=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(p){return h([u,p])}}function h(u){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(p){u=[6,p],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},KN=function(){function r(e,t,n,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&Cw.isSupported()?(this.primaryDecoder=new Cw(e,n,i),this.secondaryDecoder=new _w(e,n,i)):this.primaryDecoder=new _w(e,n,i)}return r.prototype.decodeAsync=function(e){return Sw(this,void 0,void 0,function(){var t;return Iw(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(e){return Sw(this,void 0,void 0,function(){var t,n;return Iw(this,function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(n=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){var i=n[t];e+=i}var s=e/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},r}(),pm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),b1=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function l(p){try{u(n.next(p))}catch(b){c(b)}}function h(p){try{u(n.throw(p))}catch(b){c(b)}}function u(p){p.done?s(p.value):i(p.value).then(l,h)}u((n=n.apply(r,e||[])).next())})},m1=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(p){return h([u,p])}}function h(u){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(p){u=[6,p],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},OA=function(){function r(e,t){this.name=e,this.track=t}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},r.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},r}(),WN=function(r){pm(e,r);function e(t,n){return r.call(this,t,n)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var n={};n[this.name]=t;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),n=t[this.name];return{min:n.min,max:n.max,step:n.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(OA),YN=function(r){pm(e,r);function e(t){return r.call(this,"zoom",t)||this}return e}(WN),XN=function(r){pm(e,r);function e(t){return r.call(this,"torch",t)||this}return e}(OA),QN=function(){function r(e){this.track=e}return r.prototype.zoomFeature=function(){return new YN(this.track)},r.prototype.torchFeature=function(){return new XN(this.track)},r}(),ZN=function(){function r(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return r.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},r.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,i),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(e,t,n,i){return b1(this,void 0,void 0,function(){var s,c;return m1(this,function(l){switch(l.label){case 0:return s=new r(e,t,i),n.aspectRatio?(c={aspectRatio:n.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:l.sent(),l.label=2;case 2:return s.setupSurface(),[2,s]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(e){return b1(this,void 0,void 0,function(){return m1(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var i=e.mediaStream.getVideoTracks(),s=i.length,c=0;e.mediaStream.getVideoTracks().forEach(function(l){e.mediaStream.removeTrack(l),l.stop(),++c,c>=s&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},r.prototype.getCapabilities=function(){return new QN(this.getFirstTrackOrFail())},r}(),JN=function(){function r(e){this.mediaStream=e}return r.prototype.render=function(e,t,n){return b1(this,void 0,void 0,function(){return m1(this,function(i){return[2,ZN.create(e,this.mediaStream,t,n)]})})},r.create=function(e){return b1(this,void 0,void 0,function(){var t,n;return m1(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=i.sent(),[2,new r(n)]}})})},r}(),Dw=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function l(p){try{u(n.next(p))}catch(b){c(b)}}function h(p){try{u(n.throw(p))}catch(b){c(b)}}function u(p){p.done?s(p.value):i(p.value).then(l,h)}u((n=n.apply(r,e||[])).next())})},Tw=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(p){return h([u,p])}}function h(u){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(p){u=[6,p],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},eO=function(){function r(){}return r.failIfNotSupported=function(){return Dw(this,void 0,void 0,function(){return Tw(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(e){return Dw(this,void 0,void 0,function(){return Tw(this,function(t){return[2,JN.create(e)]})})},r}(),tO=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function l(p){try{u(n.next(p))}catch(b){c(b)}}function h(p){try{u(n.throw(p))}catch(b){c(b)}}function u(p){p.done?s(p.value):i(p.value).then(l,h)}u((n=n.apply(r,e||[])).next())})},rO=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(p){return h([u,p])}}function h(u){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(p){u=[6,p],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},nO=function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var e=Jc.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(e=Jc.insecureContextCameraQueryError()),Promise.reject(e)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},r.getCamerasFromMediaDevices=function(){return tO(this,void 0,void 0,function(){var e,t,n,i,s,c,l;return rO(this,function(h){switch(h.label){case 0:return e=function(u){for(var p=u.getVideoTracks(),b=0,y=p;b<y.length;b++){var w=y[b];w.enabled=!1,w.stop(),u.removeTrack(w)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=h.sent(),i=[],s=0,c=n;s<c.length;s++)l=c[s],l.kind==="videoinput"&&i.push({id:l.deviceId,label:l.label});return e(t),[2,i]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var n=function(s){for(var c=[],l=0,h=s;l<h.length;l++){var u=h[l];u.kind==="video"&&c.push({id:u.id,label:u.label})}e(c)},i=MediaStreamTrack;i.getSources(n)})},r}(),Xr;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(Xr||(Xr={}));var iO=function(){function r(){this.state=Xr.NOT_STARTED,this.onGoingTransactionNewState=Xr.UNKNOWN}return r.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},r.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===Xr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Xr.UNKNOWN,this.directTransition(e)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===Xr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Xr.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Xr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(e){switch(this.state){case Xr.UNKNOWN:throw"Transition from unknown is not allowed";case Xr.NOT_STARTED:this.failIfNewStateIs(e,[Xr.PAUSED]);break;case Xr.SCANNING:break;case Xr.PAUSED:break}},r.prototype.failIfNewStateIs=function(e,t){for(var n=0,i=t;n<i.length;n++){var s=i[n];if(e===s)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},r}(),sO=function(){function r(e){this.stateManager=e}return r.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},r.prototype.directTransition=function(e){this.stateManager.directTransition(e)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===Xr.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==Xr.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Xr.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===Xr.PAUSED},r}(),oO=function(){function r(){}return r.create=function(){return new sO(new iO)},r}(),aO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ii=function(r){aO(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Ds),cO=function(){function r(e,t){this.logger=t,this.fps=Ii.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ii.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?NA.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!Ys(this.qrbox)},r.create=function(e,t){return new r(e,t)},r}(),Nw=function(){function r(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var n;typeof t=="boolean"?this.verbose=t===!0:t&&(n=t,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new TA(this.verbose),this.qrcode=new KN(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=oO.create()}return r.prototype.start=function(e,t,n,i){var s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var l=cO.create(t,this.logger);this.clearElement();var h=!1;l.videoConstraints&&(l.isMediaStreamConstraintsValid()?h=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var u=h,p=document.getElementById(this.elementId);p.clientWidth?p.clientWidth:Ii.DEFAULT_WIDTH,p.style.position="relative",this.shouldScan=!0,this.element=p;var b=this,y=this.stateManagerProxy.startTransition(Xr.SCANNING);return new Promise(function(w,_){var S=u?l.videoConstraints:b.createVideoConstraints(e);if(!S){y.cancel(),_("videoConstraints should be defined");return}var T={};(!u||l.aspectRatio)&&(T.aspectRatio=l.aspectRatio);var F={onRenderSurfaceReady:function(N,O){b.setupUi(N,O,l),b.isScanning=!0,b.foreverScan(l,n,c)}};eO.failIfNotSupported().then(function(N){N.create(S).then(function(O){return O.render(s.element,T,F).then(function(M){b.renderedCamera=M,y.execute(),w(null)}).catch(function(M){y.cancel(),_(M)})}).catch(function(O){y.cancel(),_(Jc.errorGettingUserMedia(O))})}).catch(function(N){y.cancel(),_(Jc.cameraStreamingNotSupported())})})},r.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Xr.PAUSED),this.showPausedState(),(Ys(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Xr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Xr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var s=document.getElementById(Ii.SHADED_REGION_ELEMENT_ID);s&&e.element.removeChild(s)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),n(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),t.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(n){return n.decodedText})},r.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ys(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,s){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var c=new Image;c.onload=function(){var l=c.width,h=c.height,u=document.getElementById(n.elementId),p=u.clientWidth?u.clientWidth:Ii.DEFAULT_WIDTH,b=Math.max(u.clientHeight?u.clientHeight:h,Ii.FILE_SCAN_MIN_HEIGHT),y=n.computeCanvasDrawConfig(l,h,p,b);if(t){var w=n.createCanvasElement(p,b,"qr-canvas-visible");w.style.display="inline-block",u.appendChild(w);var _=w.getContext("2d");if(!_)throw"Unable to get 2d context from canvas";_.canvas.width=p,_.canvas.height=b,_.drawImage(c,0,0,l,h,y.x,y.y,y.width,y.height)}var S=Ii.FILE_SCAN_HIDDEN_CANVAS_PADDING,T=Math.max(c.width,y.width),F=Math.max(c.height,y.height),N=T+2*S,O=F+2*S,M=n.createCanvasElement(N,O);u.appendChild(M);var L=M.getContext("2d");if(!L)throw"Unable to get 2d context from canvas";L.canvas.width=N,L.canvas.height=O,L.drawImage(c,0,0,l,h,S,S,T,F);try{n.qrcode.decodeRobustlyAsync(M).then(function(R){i(Ew.createFromQrcodeResult(R))}).catch(s)}catch(R){s("QR code parse error, error = ".concat(R))}},c.onerror=s,c.onabort=s,c.onstalled=s,c.onsuspend=s,c.src=URL.createObjectURL(e)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return nO.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(e){if(e){if(!NA.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(e){var t=[et.QR_CODE,et.AZTEC,et.CODABAR,et.CODE_39,et.CODE_93,et.CODE_128,et.DATA_MATRIX,et.MAXICODE,et.ITF,et.EAN_13,et.EAN_8,et.PDF_417,et.RSS_14,et.RSS_EXPANDED,et.UPC_A,et.UPC_E,et.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,s=e.formatsToSupport;i<s.length;i++){var c=s[i];zN(c)?n.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},r.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ys(e))return!0;if(!Ys(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Ys(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Ys(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(e,t,n){var i=this,s=n.qrbox;this.validateQrboxConfig(s);var c=this.toQrdimensions(e,t,s),l=function(u){if(u<Ii.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ii.MIN_QR_BOX_SIZE,"px.")},h=function(u){return u>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),u=e),u};l(c.width),l(c.height),c.width=h(c.width)},r.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(e,t,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(e,t)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return n},r.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var i=Ys(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(i);var s=this.toQrdimensions(e,t,i);s.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=n.isShadedBoxEnabled()&&s.height<=t,l={x:0,y:0,width:e,height:t},h=c?this.getShadedRegionBounds(e,t,s):l,u=this.createCanvasElement(h.width,h.height),p={willReadFrequently:!0},b=u.getContext("2d",p);b.canvas.width=h.width,b.canvas.height=h.height,this.element.append(u),c&&this.possiblyInsertShadingElement(this.element,e,t,s),this.createScannerPausedUiElement(this.element),this.qrRegion=h,this.context=b,this.canvasElement=u},r.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Jc.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},r.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,Ew.createFromQrcodeResult(i)),n.possiblyUpdateShaders(!0),!0}).catch(function(i){n.possiblyUpdateShaders(!1);var s=Jc.codeParseError(i);return t(s,DA.createFrom(s)),!1})},r.prototype.foreverScan=function(e,t,n){var i=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),c=s.videoWidth/s.clientWidth,l=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*c,u=this.qrRegion.height*l,p=this.qrRegion.x*c,b=this.qrRegion.y*l;this.context.drawImage(s,p,b,h,u,0,0,this.qrRegion.width,this.qrRegion.height);var y=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,t,n)},i.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(w){!w&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(t,n).finally(function(){y()})):y()}).catch(function(w){i.logger.logError("Error happend while scanning context",w),y()})}},r.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",n="deviceId",i={user:!0,environment:!0},s="exact",c=function(_){if(_ in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(_,"'")},l=Object.keys(e);if(l.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(l.length," keys");var h=Object.keys(e)[0];if(h!==t&&h!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(h===t){var u=e.facingMode;if(typeof u=="string"){if(c(u))return{facingMode:u}}else if(typeof u=="object")if(s in u){if(c(u["".concat(s)]))return{facingMode:{exact:u["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var p=typeof u;throw"Invalid type of 'facingMode' = ".concat(p)}}else{var b=e.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(s in b)return{deviceId:{exact:b["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var y=typeof b;throw"Invalid type of 'deviceId' = ".concat(y)}}}var w=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(w)},r.prototype.computeCanvasDrawConfig=function(e,t,n,i){if(e<=n&&t<=i){var s=(n-e)/2,c=(i-t)/2;return{x:s,y:c,width:e,height:t}}else{var l=e,h=t;return e>n&&(t=n/e*t,e=n),t>i&&(e=i/t*e,t=i),this.logger.log("Image downsampled from "+"".concat(l,"X").concat(h)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,i)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},r.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Ii.BORDER_SHADER_MATCH_COLOR:Ii.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(e,t,n){var i=e,s=t,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(s,"px"),c.style.display="none",c.id=Ys(n)?"qr-canvas":n,c},r.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},r.prototype.possiblyInsertShadingElement=function(e,t,n,i){if(!(t-i.width<1||n-i.height<1)){var s=document.createElement("div");s.style.position="absolute";var c=(t-i.width)/2,l=(n-i.height)/2;if(s.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(Ii.SHADED_REGION_ELEMENT_ID),t-i.width<11||n-i.height<11)this.hasBorderShaders=!1;else{var h=5,u=40;this.insertShaderBorders(s,u,h,-h,null,0,!0),this.insertShaderBorders(s,u,h,-h,null,0,!1),this.insertShaderBorders(s,u,h,null,-h,0,!0),this.insertShaderBorders(s,u,h,null,-h,0,!1),this.insertShaderBorders(s,h,u+h,-h,null,-h,!0),this.insertShaderBorders(s,h,u+h,null,-h,-h,!0),this.insertShaderBorders(s,h,u+h,-h,null,-h,!1),this.insertShaderBorders(s,h,u+h,null,-h,-h,!1),this.hasBorderShaders=!0}e.append(s)}},r.prototype.insertShaderBorders=function(e,t,n,i,s,c,l){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=Ii.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(t,"px"),h.style.height="".concat(n,"px"),i!==null&&(h.style.top="".concat(i,"px")),s!==null&&(h.style.bottom="".concat(s,"px")),l?h.style.left="".concat(c,"px"):h.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),e.appendChild(h)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(e){return 1e3/e},r}(),gm="data:image/svg+xml;base64,",fO=gm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",lO=gm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Ow=gm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",uO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Rw=function(){function r(){}return r.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},r}(),hO=function(){function r(){this.data=Rw.createDefault();var e=localStorage.getItem(r.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return r.prototype.hasCameraPermissions=function(){return this.data.hasPermission},r.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},r.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},r.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},r.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},r.prototype.reset=function(){this.data=Rw.createDefault(),this.flush()},r.prototype.flush=function(){localStorage.setItem(r.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},r.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",r}(),dO=function(){function r(){this.infoDiv=document.createElement("div")}return r.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Aw.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(i);var s=document.createElement("a");s.innerText=Aw.reportIssues(),s.href="https://github.com/mebjas/html5-qrcode/issues",s.target="new",s.style.color="white",this.infoDiv.appendChild(s),e.appendChild(this.infoDiv)},r.prototype.show=function(){this.infoDiv.style.display="block"},r.prototype.hide=function(){this.infoDiv.style.display="none"},r}(),xO=function(){function r(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return r.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Ow,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(n){return t.onHoverIn()},this.infoIcon.onmouseout=function(n){return t.onHoverOut()},this.infoIcon.onclick=function(n){return t.onClick()},e.appendChild(this.infoIcon)},r.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},r.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},r.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=uO,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Ow,this.infoIcon.style.opacity="0.6")},r}(),pO=function(){function r(){var e=this;this.infoDiv=new dO,this.infoIcon=new xO(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return r.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},r}(),gO=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function l(p){try{u(n.next(p))}catch(b){c(b)}}function h(p){try{u(n.throw(p))}catch(b){c(b)}}function u(p){p.done?s(p.value):i(p.value).then(l,h)}u((n=n.apply(r,e||[])).next())})},bO=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(p){return h([u,p])}}function h(u){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(p){u=[6,p],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Mw=function(){function r(){}return r.hasPermissions=function(){return gO(this,void 0,void 0,function(){var e,t,n,i;return bO(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=s.sent(),t=0,n=e;t<n.length;t++)if(i=n[t],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},r}(),Ia=function(){function r(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return r.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},r.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},r.prototype.isCameraScanRequired=function(){for(var e=0,t=this.supportedScanTypes;e<t.length;e++){var n=t[e];if(r.isCameraScanType(n))return!0}return!1},r.isCameraScanType=function(e){return e===da.SCAN_TYPE_CAMERA},r.isFileScanType=function(e){return e===da.SCAN_TYPE_FILE},r.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Ds.DEFAULT_SUPPORTED_SCAN_TYPE;var t=Ds.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0,i=e;n<i.length;n++){var s=i[n];if(!Ds.DEFAULT_SUPPORTED_SCAN_TYPE.includes(s))throw"Unsupported scan type ".concat(s)}return e},r}(),Pi=function(){function r(){}return r.ALL_ELEMENT_CLASS="html5-qrcode-element",r.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",r.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",r.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",r.TORCH_BUTTON_ID="html5-qrcode-button-torch",r.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",r.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",r.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",r.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",r.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",r.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",r}(),na=function(){function r(){}return r.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(Pi.ALL_ELEMENT_CLASS),e==="button"&&n.setAttribute("type","button"),n},r}(),RA=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function l(p){try{u(n.next(p))}catch(b){c(b)}}function h(p){try{u(n.throw(p))}catch(b){c(b)}}function u(p){p.done?s(p.value):i(p.value).then(l,h)}u((n=n.apply(r,e||[])).next())})},MA=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(p){return h([u,p])}}function h(u){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(p){u=[6,p],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Bw=function(){function r(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return r.prototype.isTorchEnabled=function(){return this.isTorchOn},r.prototype.flipState=function(){return RA(this,void 0,void 0,function(){var e,t;return MA(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},r.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?yr.torchOffButton():yr.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},r.prototype.propagateFailure=function(e,t){var n=e?yr.torchOnFailedMessage():yr.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},r.prototype.reset=function(){this.isTorchOn=!1},r}(),mO=function(){function r(e,t){this.onTorchActionFailureCallback=t,this.torchButton=na.createElement("button",Pi.TORCH_BUTTON_ID),this.torchController=new Bw(e,this,t)}return r.prototype.render=function(e,t){var n=this;this.torchButton.innerText=yr.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var i=this;this.torchButton.addEventListener("click",function(s){return RA(n,void 0,void 0,function(){return MA(this,function(c){switch(c.label){case 0:return[4,i.torchController.flipState()];case 1:return c.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(Pi.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(Pi.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(Pi.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(Pi.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},r.prototype.updateTorchCapability=function(e){this.torchController=new Bw(e,this,this.onTorchActionFailureCallback)},r.prototype.getTorchButton=function(){return this.torchButton},r.prototype.hide=function(){this.torchButton.style.display="none"},r.prototype.show=function(){this.torchButton.style.display="inline-block"},r.prototype.disable=function(){this.torchButton.disabled=!0},r.prototype.enable=function(){this.torchButton.disabled=!1},r.prototype.setText=function(e){this.torchButton.innerText=e},r.prototype.reset=function(){this.torchButton.innerText=yr.torchOnButton(),this.torchController.reset()},r.create=function(e,t,n,i){var s=new r(t,i);return s.render(e,n),s},r}(),yO=function(){function r(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=na.createElement("button",Pi.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(l){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=na.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var s=this;this.fileScanInput.addEventListener("change",function(l){if(!(l==null||l.target==null)){var h=l.target;if(!(h.files&&h.files.length===0)){var u=h.files,p=u[0],b=p.name;s.setImageNameToButton(b),n(p)}}});var c=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(c),this.fileBasedScanRegion.addEventListener("dragenter",function(l){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),l.stopPropagation(),l.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(l){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder(),l.stopPropagation(),l.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(l){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),l.stopPropagation(),l.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(l){l.stopPropagation(),l.preventDefault(),s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder();var h=l.dataTransfer;if(h){var u=h.files;if(!u||u.length===0)return;for(var p=!1,b=0;b<u.length;++b){var y=u.item(b);if(y){var w=/image.*/;if(y.type.match(w)){p=!0;var _=y.name;s.setImageNameToButton(_),n(y),c.innerText=yr.dragAndDropMessage();break}}}p||(c.innerText=yr.dragAndDropMessageOnlyImages())}})}return r.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},r.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},r.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},r.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},r.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},r.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},r.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},r.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=yr.dragAndDropMessage(),e.style.fontWeight="400",e},r.prototype.setImageNameToButton=function(e){var t=20;if(e.length>t){var n=e.substring(0,8),i=e.length,s=e.substring(i-8,i);e="".concat(n,"....").concat(s)}var c=yr.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=c},r.prototype.setInitialValueToButton=function(){var e=yr.fileSelectionChooseImage()+" - "+yr.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},r.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},r.create=function(e,t,n){var i=new r(e,t,n);return i},r}(),wO=function(){function r(e){this.selectElement=na.createElement("select",Pi.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return r.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(n===0)throw new Error("No cameras found");if(n===1)t.style.display="none";else{var i=yr.selectCamera();t.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var s=1,c=0,l=this.cameras;c<l.length;c++){var h=l[c],u=h.id,p=h.label==null?u:h.label;(!p||p==="")&&(p=[yr.anonymousCameraPrefix(),s++].join(" "));var b=document.createElement("option");b.value=u,b.innerText=p,this.options.push(b),this.selectElement.appendChild(b)}t.appendChild(this.selectElement),e.appendChild(t)},r.prototype.disable=function(){this.selectElement.disabled=!0},r.prototype.isDisabled=function(){return this.selectElement.disabled===!0},r.prototype.enable=function(){this.selectElement.disabled=!1},r.prototype.getValue=function(){return this.selectElement.value},r.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){var i=n[t];if(i.value===e)return!0}return!1},r.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},r.prototype.hasSingleItem=function(){return this.cameras.length===1},r.prototype.numCameras=function(){return this.cameras.length},r.create=function(e,t){var n=new r(t);return n.render(e),n},r}(),vO=function(){function r(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=na.createElement("input",Pi.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return r.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=yr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},r.prototype.onValueChange=function(){var e=yr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},r.prototype.setValues=function(e,t,n,i){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},r.prototype.show=function(){this.zoomElementContainer.style.display="block"},r.prototype.hide=function(){this.zoomElementContainer.style.display="none"},r.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},r.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},r.create=function(e,t){var n=new r;return n.render(e,t),n},r}(),Di;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Di||(Di={}));function EO(r){return{fps:r.fps,qrbox:r.qrbox,aspectRatio:r.aspectRatio,disableFlip:r.disableFlip,videoConstraints:r.videoConstraints}}function AO(r,e){return{formatsToSupport:r.formatsToSupport,useBarCodeDetectorIfSupported:r.useBarCodeDetectorIfSupported,experimentalFeatures:r.experimentalFeatures,verbose:e}}var _O=function(){function r(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=n===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Ia(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new TA(this.verbose),this.persistedDataManager=new hO,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return r.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(s,c){if(e)e(s,c);else{if(n.lastMatchFound===s)return;n.lastMatchFound=s,n.setHeaderMessage(yr.lastMatch(s),Di.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(s,c){t&&t(s,c)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new Nw(this.getScanRegionId(),AO(this.config,this.verbose))},r.prototype.pause=function(e){(Ys(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},r.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},r.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},r.prototype.clear=function(){var e=this,t=function(){var n=document.getElementById(e.elementId);n&&(n.innerHTML="",e.resetBasicLayout(n))};return this.html5Qrcode?new Promise(function(n,i){if(!e.html5Qrcode){n();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(s){if(!e.html5Qrcode){n();return}e.html5Qrcode.clear(),t(),n()}).catch(function(s){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",s),i(s)}):(e.html5Qrcode.clear(),t(),n())}):Promise.resolve()},r.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},r.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},r.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},r.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Ds.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Ds.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Ds.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Ds.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Ds.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Ds.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Ds.DEFAULT_SUPPORTED_SCAN_TYPE}},r.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),Ia.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),s=this.getDashboardId();i.id=s,i.style.width="100%",e.appendChild(i),this.setupInitialDashboard(i)},r.prototype.resetBasicLayout=function(e){e.style.border="none"},r.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},r.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t);var n=new pO;n.renderInto(t);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",t.appendChild(i)},r.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},r.prototype.createCameraListUi=function(e,t,n){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(yr.cameraPermissionRequesting());var s=function(){n||i.createPermissionButton(e,t)};Nw.getCameras().then(function(c){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),c&&c.length>0?(e.removeChild(t),i.renderCameraSelection(c)):(i.setHeaderMessage(yr.noCameraFound(),Di.STATUS_WARNING),s())}).catch(function(c){i.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:s(),i.setHeaderMessage(c,Di.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},r.prototype.createPermissionButton=function(e,t){var n=this,i=na.createElement("button",this.getCameraPermissionButtonId());i.innerText=yr.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,n.createCameraListUi(e,t,i)}),t.appendChild(i)},r.prototype.createPermissionsUi=function(e,t){var n=this;if(Ia.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Mw.hasPermissions().then(function(i){i?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(i){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)});return}this.createPermissionButton(e,t)},r.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=Ia.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var i=document.createElement("div");i.style.textAlign="center",n.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,i),this.renderFileScanUi(t)},r.prototype.renderFileScanUi=function(e){var t=Ia.isFileScanType(this.currentScanType),n=this,i=function(s){if(!n.html5Qrcode)throw"html5Qrcode not defined";Ia.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(yr.loadingImage()),n.html5Qrcode.scanFileV2(s,!0).then(function(c){n.resetHeaderMessage(),n.qrCodeSuccessCallback(c.decodedText,c)}).catch(function(c){n.setHeaderMessage(c,Di.STATUS_WARNING),n.qrCodeErrorCallback(c,DA.createFrom(c))}))};this.fileSelectionUi=yO.create(e,t,i)},r.prototype.renderCameraSelection=function(e){var t=this,n=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var s=vO.create(i,!1),c=function(S){var T=S.zoomFeature();if(T.isSupported()){s.setOnCameraZoomValueChangeCallback(function(N){T.apply(N)});var F=1;t.config.defaultZoomValueIfSupported&&(F=t.config.defaultZoomValueIfSupported),F=jN(F,T.min(),T.max()),s.setValues(T.min(),T.max(),F,T.step()),s.show()}},l=wO.create(i,e),h=document.createElement("span"),u=na.createElement("button",Pi.CAMERA_START_BUTTON_ID);u.innerText=yr.scanButtonStartScanningText(),h.appendChild(u);var p=na.createElement("button",Pi.CAMERA_STOP_BUTTON_ID);p.innerText=yr.scanButtonStopScanningText(),p.style.display="none",p.disabled=!0,h.appendChild(p);var b,y=function(S){if(!S.torchFeature().isSupported()){b&&b.hide();return}b?b.updateTorchCapability(S.torchFeature()):b=mO.create(h,S.torchFeature(),{display:"none",marginLeft:"5px"},function(T){n.setHeaderMessage(T,Di.STATUS_WARNING)}),b.show()};i.appendChild(h);var w=function(S){S||(u.style.display="none"),u.innerText=yr.scanButtonStartScanningText(),u.style.opacity="1",u.disabled=!1,S&&(u.style.display="inline-block")};if(u.addEventListener("click",function(S){u.innerText=yr.scanButtonScanningStarting(),l.disable(),u.disabled=!0,u.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var T=l.getValue();n.persistedDataManager.setLastUsedCameraId(T),n.html5Qrcode.start(T,EO(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(F){p.disabled=!1,p.style.display="inline-block",w(!1);var N=n.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&y(N),t.config.showZoomSliderIfSupported===!0&&c(N)}).catch(function(F){n.showHideScanTypeSwapLink(!0),l.enable(),w(!0),n.setHeaderMessage(F,Di.STATUS_WARNING)})}),l.hasSingleItem()&&u.click(),p.addEventListener("click",function(S){if(!n.html5Qrcode)throw"html5Qrcode not defined";p.disabled=!0,n.html5Qrcode.stop().then(function(T){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),l.enable(),u.disabled=!1,p.style.display="none",u.style.display="inline-block",b&&(b.reset(),b.hide()),s.removeOnCameraZoomValueChangeCallback(),s.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(T){p.disabled=!1,n.setHeaderMessage(T,Di.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var _=n.persistedDataManager.getLastUsedCameraId();l.hasValue(_)?(l.setValue(_),u.click()):n.persistedDataManager.resetLastUsedCameraId()}},r.prototype.createSectionSwap=function(){var e=this,t=yr.textIfCameraScanSelected(),n=yr.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),s=document.createElement("div");s.style.textAlign="center";var c=na.createElement("span",this.getDashboardSectionSwapLinkId());c.style.textDecoration="underline",c.style.cursor="pointer",c.innerText=Ia.isCameraScanType(this.currentScanType)?t:n,c.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Ia.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),c.innerText=n,e.currentScanType=da.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),c.innerText=t,e.currentScanType=da.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),s.appendChild(c),i.appendChild(s)},r.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){Mw.hasPermissions().then(function(n){if(n){var i=document.getElementById(t.getCameraPermissionButtonId());if(!i)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(n){t.persistedDataManager.setHasPermission(!1)});return}},r.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},r.prototype.setHeaderMessage=function(e,t){t||(t=Di.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case Di.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Di.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Di.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)";break}},r.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},r.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=fO,this.cameraScanImage.alt=yr.cameraScanAltText()},r.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=lO,this.fileScanImage.alt=yr.fileScanAltText()},r.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},r.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},r.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},r.prototype.getDashboardSectionSwapLinkId=function(){return Pi.SCAN_TYPE_CHANGE_ANCHOR_ID},r.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},r.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},r.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},r.prototype.getCameraPermissionButtonId=function(){return Pi.CAMERA_PERMISSION_BUTTON_ID},r.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},r.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},r.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},r}(),bm={exports:{}},df=typeof Reflect=="object"?Reflect:null,Pw=df&&typeof df.apply=="function"?df.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Ld;df&&typeof df.ownKeys=="function"?Ld=df.ownKeys:Object.getOwnPropertySymbols?Ld=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ld=function(e){return Object.getOwnPropertyNames(e)};function CO(r){console&&console.warn&&console.warn(r)}var BA=Number.isNaN||function(e){return e!==e};function Sr(){Sr.init.call(this)}bm.exports=Sr;bm.exports.once=TO;Sr.EventEmitter=Sr;Sr.prototype._events=void 0;Sr.prototype._eventsCount=0;Sr.prototype._maxListeners=void 0;var Fw=10;function sx(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Sr,"defaultMaxListeners",{enumerable:!0,get:function(){return Fw},set:function(r){if(typeof r!="number"||r<0||BA(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Fw=r}});Sr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Sr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||BA(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function PA(r){return r._maxListeners===void 0?Sr.defaultMaxListeners:r._maxListeners}Sr.prototype.getMaxListeners=function(){return PA(this)};Sr.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var c;if(t.length>0&&(c=t[0]),c instanceof Error)throw c;var l=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw l.context=c,l}var h=s[e];if(h===void 0)return!1;if(typeof h=="function")Pw(h,this,t);else for(var u=h.length,p=HA(h,u),n=0;n<u;++n)Pw(p[n],this,t);return!0};function FA(r,e,t,n){var i,s,c;if(sx(t),s=r._events,s===void 0?(s=r._events=Object.create(null),r._eventsCount=0):(s.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),s=r._events),c=s[e]),c===void 0)c=s[e]=t,++r._eventsCount;else if(typeof c=="function"?c=s[e]=n?[t,c]:[c,t]:n?c.unshift(t):c.push(t),i=PA(r),i>0&&c.length>i&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=r,l.type=e,l.count=c.length,CO(l)}return r}Sr.prototype.addListener=function(e,t){return FA(this,e,t,!1)};Sr.prototype.on=Sr.prototype.addListener;Sr.prototype.prependListener=function(e,t){return FA(this,e,t,!0)};function SO(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function LA(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=SO.bind(n);return i.listener=t,n.wrapFn=i,i}Sr.prototype.once=function(e,t){return sx(t),this.on(e,LA(this,e,t)),this};Sr.prototype.prependOnceListener=function(e,t){return sx(t),this.prependListener(e,LA(this,e,t)),this};Sr.prototype.removeListener=function(e,t){var n,i,s,c,l;if(sx(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,c=n.length-1;c>=0;c--)if(n[c]===t||n[c].listener===t){l=n[c].listener,s=c;break}if(s<0)return this;s===0?n.shift():IO(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,l||t)}return this};Sr.prototype.off=Sr.prototype.removeListener;Sr.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),c;for(i=0;i<s.length;++i)c=s[i],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function kA(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?DO(i):HA(i,i.length)}Sr.prototype.listeners=function(e){return kA(this,e,!0)};Sr.prototype.rawListeners=function(e){return kA(this,e,!1)};Sr.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):UA.call(r,e)};Sr.prototype.listenerCount=UA;function UA(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Sr.prototype.eventNames=function(){return this._eventsCount>0?Ld(this._events):[]};function HA(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function IO(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function DO(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function TO(r,e){return new Promise(function(t,n){function i(c){r.removeListener(e,s),n(c)}function s(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}zA(r,e,s,{once:!0}),e!=="error"&&NO(r,i,{once:!0})})}function NO(r,e,t){typeof r.on=="function"&&zA(r,"error",e,t)}function zA(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(s){n.once&&r.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var cs=bm.exports;const jA=ba(cs),OO=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,RO=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,MO=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function BO(r,e){if(r==="__proto__"||r==="constructor"&&e&&typeof e=="object"&&"prototype"in e){PO(r);return}return e}function PO(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}function bd(r,e={}){if(typeof r!="string")return r;const t=r.trim();if(r[0]==='"'&&r.at(-1)==='"'&&!r.includes("\\"))return t.slice(1,-1);if(t.length<=9){const n=t.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!MO.test(r)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return r}try{if(OO.test(r)||RO.test(r)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(r,BO)}return JSON.parse(r)}catch(n){if(e.strict)throw n;return r}}function FO(r){return!r||typeof r.then!="function"?Promise.resolve(r):r}function pn(r,...e){try{return FO(r(...e))}catch(t){return Promise.reject(t)}}function LO(r){const e=typeof r;return r===null||e!=="object"&&e!=="function"}function kO(r){const e=Object.getPrototypeOf(r);return!e||e.isPrototypeOf(Object)}function kd(r){if(LO(r))return String(r);if(kO(r)||Array.isArray(r))return JSON.stringify(r);if(typeof r.toJSON=="function")return kd(r.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function GA(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const R2="base64:";function UO(r){if(typeof r=="string")return r;GA();const e=Buffer.from(r).toString("base64");return R2+e}function HO(r){return typeof r!="string"||!r.startsWith(R2)?r:(GA(),Buffer.from(r.slice(R2.length),"base64"))}function di(r){return r?r.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function zO(...r){return di(r.join(":"))}function md(r){return r=di(r),r?r+":":""}const jO="memory",GO=()=>{const r=new Map;return{name:jO,options:{},hasItem(e){return r.has(e)},getItem(e){return r.get(e)??null},getItemRaw(e){return r.get(e)??null},setItem(e,t){r.set(e,t)},setItemRaw(e,t){r.set(e,t)},removeItem(e){r.delete(e)},getKeys(){return Array.from(r.keys())},clear(){r.clear()},dispose(){r.clear()}}};function VO(r={}){const e={mounts:{"":r.driver||GO()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=u=>{for(const p of e.mountpoints)if(u.startsWith(p))return{base:p,relativeKey:u.slice(p.length),driver:e.mounts[p]};return{base:"",relativeKey:u,driver:e.mounts[""]}},n=(u,p)=>e.mountpoints.filter(b=>b.startsWith(u)||p&&u.startsWith(b)).map(b=>({relativeBase:u.length>b.length?u.slice(b.length):void 0,mountpoint:b,driver:e.mounts[b]})),i=(u,p)=>{if(e.watching){p=di(p);for(const b of e.watchListeners)b(u,p)}},s=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await Lw(e.mounts[u],i,u)}},c=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},l=(u,p,b)=>{const y=new Map,w=_=>{let S=y.get(_.base);return S||(S={driver:_.driver,base:_.base,items:[]},y.set(_.base,S)),S};for(const _ of u){const S=typeof _=="string",T=di(S?_:_.key),F=S?void 0:_.value,N=S||!_.options?p:{...p,..._.options},O=t(T);w(O).items.push({key:T,value:F,relativeKey:O.relativeKey,options:N})}return Promise.all([...y.values()].map(_=>b(_))).then(_=>_.flat())},h={hasItem(u,p={}){u=di(u);const{relativeKey:b,driver:y}=t(u);return pn(y.hasItem,b,p)},getItem(u,p={}){u=di(u);const{relativeKey:b,driver:y}=t(u);return pn(y.getItem,b,p).then(w=>bd(w))},getItems(u,p){return l(u,p,b=>b.driver.getItems?pn(b.driver.getItems,b.items.map(y=>({key:y.relativeKey,options:y.options})),p).then(y=>y.map(w=>({key:zO(b.base,w.key),value:bd(w.value)}))):Promise.all(b.items.map(y=>pn(b.driver.getItem,y.relativeKey,y.options).then(w=>({key:y.key,value:bd(w)})))))},getItemRaw(u,p={}){u=di(u);const{relativeKey:b,driver:y}=t(u);return y.getItemRaw?pn(y.getItemRaw,b,p):pn(y.getItem,b,p).then(w=>HO(w))},async setItem(u,p,b={}){if(p===void 0)return h.removeItem(u);u=di(u);const{relativeKey:y,driver:w}=t(u);w.setItem&&(await pn(w.setItem,y,kd(p),b),w.watch||i("update",u))},async setItems(u,p){await l(u,p,async b=>{b.driver.setItems&&await pn(b.driver.setItems,b.items.map(y=>({key:y.relativeKey,value:kd(y.value),options:y.options})),p),b.driver.setItem&&await Promise.all(b.items.map(y=>pn(b.driver.setItem,y.relativeKey,kd(y.value),y.options)))})},async setItemRaw(u,p,b={}){if(p===void 0)return h.removeItem(u,b);u=di(u);const{relativeKey:y,driver:w}=t(u);if(w.setItemRaw)await pn(w.setItemRaw,y,p,b);else if(w.setItem)await pn(w.setItem,y,UO(p),b);else return;w.watch||i("update",u)},async removeItem(u,p={}){typeof p=="boolean"&&(p={removeMeta:p}),u=di(u);const{relativeKey:b,driver:y}=t(u);y.removeItem&&(await pn(y.removeItem,b,p),(p.removeMeta||p.removeMata)&&await pn(y.removeItem,b+"$",p),y.watch||i("remove",u))},async getMeta(u,p={}){typeof p=="boolean"&&(p={nativeOnly:p}),u=di(u);const{relativeKey:b,driver:y}=t(u),w=Object.create(null);if(y.getMeta&&Object.assign(w,await pn(y.getMeta,b,p)),!p.nativeOnly){const _=await pn(y.getItem,b+"$",p).then(S=>bd(S));_&&typeof _=="object"&&(typeof _.atime=="string"&&(_.atime=new Date(_.atime)),typeof _.mtime=="string"&&(_.mtime=new Date(_.mtime)),Object.assign(w,_))}return w},setMeta(u,p,b={}){return this.setItem(u+"$",p,b)},removeMeta(u,p={}){return this.removeItem(u+"$",p)},async getKeys(u,p={}){u=md(u);const b=n(u,!0);let y=[];const w=[];for(const _ of b){const T=(await pn(_.driver.getKeys,_.relativeBase,p)).map(F=>_.mountpoint+di(F)).filter(F=>!y.some(N=>F.startsWith(N)));w.push(...T),y=[_.mountpoint,...y.filter(F=>!F.startsWith(_.mountpoint))]}return u?w.filter(_=>_.startsWith(u)&&!_.endsWith("$")):w.filter(_=>!_.endsWith("$"))},async clear(u,p={}){u=md(u),await Promise.all(n(u,!1).map(async b=>{if(b.driver.clear)return pn(b.driver.clear,b.relativeBase,p);if(b.driver.removeItem){const y=await b.driver.getKeys(b.relativeBase||"",p);return Promise.all(y.map(w=>b.driver.removeItem(w,p)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>kw(u)))},async watch(u){return await s(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(p=>p!==u),e.watchListeners.length===0&&await c()}},async unwatch(){e.watchListeners=[],await c()},mount(u,p){if(u=md(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((b,y)=>y.length-b.length)),e.mounts[u]=p,e.watching&&Promise.resolve(Lw(p,i,u)).then(b=>{e.unwatch[u]=b}).catch(console.error),h},async unmount(u,p=!0){u=md(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&(e.unwatch[u](),delete e.unwatch[u]),p&&await kw(e.mounts[u]),e.mountpoints=e.mountpoints.filter(b=>b!==u),delete e.mounts[u])},getMount(u=""){u=di(u)+":";const p=t(u);return{driver:p.driver,base:p.base}},getMounts(u="",p={}){return u=di(u),n(u,p.parents).map(y=>({driver:y.driver,base:y.mountpoint}))}};return h}function Lw(r,e,t){return r.watch?r.watch((n,i)=>e(n,t+i)):()=>{}}async function kw(r){typeof r.dispose=="function"&&await pn(r.dispose)}function vc(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function VA(r,e){const t=indexedDB.open(r);t.onupgradeneeded=()=>t.result.createObjectStore(e);const n=vc(t);return(i,s)=>n.then(c=>s(c.transaction(e,i).objectStore(e)))}let Jp;function Uh(){return Jp||(Jp=VA("keyval-store","keyval")),Jp}function Uw(r,e=Uh()){return e("readonly",t=>vc(t.get(r)))}function qO(r,e,t=Uh()){return t("readwrite",n=>(n.put(e,r),vc(n.transaction)))}function $O(r,e=Uh()){return e("readwrite",t=>(t.delete(r),vc(t.transaction)))}function KO(r=Uh()){return r("readwrite",e=>(e.clear(),vc(e.transaction)))}function WO(r,e){return r.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},vc(r.transaction)}function YO(r=Uh()){return r("readonly",e=>{if(e.getAllKeys)return vc(e.getAllKeys());const t=[];return WO(e,n=>t.push(n.key)).then(()=>t)})}const XO=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),QO=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function ox(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return QO(r)}catch{return r}}function Hh(r){return typeof r=="string"?r:XO(r)||""}const ZO="idb-keyval";var JO=(r={})=>{const e=r.base&&r.base.length>0?`${r.base}:`:"",t=i=>e+i;let n;return r.dbName&&r.storeName&&(n=VA(r.dbName,r.storeName)),{name:ZO,options:r,async hasItem(i){return!(typeof await Uw(t(i),n)>"u")},async getItem(i){return await Uw(t(i),n)??null},setItem(i,s){return qO(t(i),s,n)},removeItem(i){return $O(t(i),n)},getKeys(){return YO(n)},clear(){return KO(n)}}};const eR="WALLET_CONNECT_V2_INDEXED_DB",tR="keyvaluestorage";let rR=class{constructor(){this.indexedDb=VO({driver:JO({dbName:eR,storeName:tR})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,Hh(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var eg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ud={exports:{}};(function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,n){this[t]=String(n)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(n){t[n]=void 0,delete t[n]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof eg<"u"&&eg.localStorage?Ud.exports=eg.localStorage:typeof window<"u"&&window.localStorage?Ud.exports=window.localStorage:Ud.exports=new e})();function nR(r){var e;return[r[0],ox((e=r[1])!=null?e:"")]}let iR=class{constructor(){this.localStorage=Ud.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(nR)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return ox(t)}async setItem(e,t){this.localStorage.setItem(e,Hh(t))}async removeItem(e){this.localStorage.removeItem(e)}};const sR="wc_storage_version",Hw=1,oR=async(r,e,t)=>{const n=sR,i=await e.getItem(n);if(i&&i>=Hw){t(e);return}const s=await r.getKeys();if(!s.length){t(e);return}const c=[];for(;s.length;){const l=s.shift();if(!l)continue;const h=l.toLowerCase();if(h.includes("wc@")||h.includes("walletconnect")||h.includes("wc_")||h.includes("wallet_connect")){const u=await r.getItem(l);await e.setItem(l,u),c.push(l)}}await e.setItem(n,Hw),t(e),aR(r,c)},aR=async(r,e)=>{e.length&&e.forEach(async t=>{await r.removeItem(t)})};let cR=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new iR;this.storage=e;try{const t=new rR;oR(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var Bl={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var M2=function(r,e){return M2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},M2(r,e)};function fR(r,e){M2(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var B2=function(){return B2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},B2.apply(this,arguments)};function lR(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function uR(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var l=r.length-1;l>=0;l--)(c=r[l])&&(s=(i<3?c(s):i>3?c(e,t,s):c(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function hR(r,e){return function(t,n){e(t,n,r)}}function dR(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function xR(r,e,t,n){function i(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function l(p){try{u(n.next(p))}catch(b){c(b)}}function h(p){try{u(n.throw(p))}catch(b){c(b)}}function u(p){p.done?s(p.value):i(p.value).then(l,h)}u((n=n.apply(r,e||[])).next())})}function pR(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(p){return h([u,p])}}function h(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(p){u=[6,p],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function gR(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}function bR(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function P2(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qA(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return s}function mR(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(qA(arguments[e]));return r}function yR(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],c=0,l=s.length;c<l;c++,i++)n[i]=s[c];return n}function Qu(r){return this instanceof Qu?(this.v=r,this):new Qu(r)}function wR(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(y){n[y]&&(i[y]=function(w){return new Promise(function(_,S){s.push([y,w,_,S])>1||l(y,w)})})}function l(y,w){try{h(n[y](w))}catch(_){b(s[0][3],_)}}function h(y){y.value instanceof Qu?Promise.resolve(y.value.v).then(u,p):b(s[0][2],y)}function u(y){l("next",y)}function p(y){l("throw",y)}function b(y,w){y(w),s.shift(),s.length&&l(s[0][0],s[0][1])}}function vR(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(c){return(t=!t)?{value:Qu(r[i](c)),done:i==="return"}:s?s(c):c}:s}}function ER(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof P2=="function"?P2(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(c){return new Promise(function(l,h){c=r[s](c),i(l,h,c.done,c.value)})}}function i(s,c,l,h){Promise.resolve(h).then(function(u){s({value:u,done:l})},c)}}function AR(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function _R(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function CR(r){return r&&r.__esModule?r:{default:r}}function SR(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function IR(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const DR=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return B2},__asyncDelegator:vR,__asyncGenerator:wR,__asyncValues:ER,__await:Qu,__awaiter:xR,__classPrivateFieldGet:SR,__classPrivateFieldSet:IR,__createBinding:gR,__decorate:uR,__exportStar:bR,__extends:fR,__generator:pR,__importDefault:CR,__importStar:_R,__makeTemplateObject:AR,__metadata:dR,__param:hR,__read:qA,__rest:lR,__spread:mR,__spreadArrays:yR,__values:P2},Symbol.toStringTag,{value:"Module"})),ax=mc(DR);var nu={},tt={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F2=function(r,e){return F2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},F2(r,e)};function TR(r,e){F2(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var L2=function(){return L2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},L2.apply(this,arguments)};function NR(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function OR(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var l=r.length-1;l>=0;l--)(c=r[l])&&(s=(i<3?c(s):i>3?c(e,t,s):c(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function RR(r,e){return function(t,n){e(t,n,r)}}function MR(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function BR(r,e,t,n){function i(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function l(p){try{u(n.next(p))}catch(b){c(b)}}function h(p){try{u(n.throw(p))}catch(b){c(b)}}function u(p){p.done?s(p.value):i(p.value).then(l,h)}u((n=n.apply(r,e||[])).next())})}function PR(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(p){return h([u,p])}}function h(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(p){u=[6,p],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function FR(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}function LR(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function k2(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $A(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return s}function kR(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat($A(arguments[e]));return r}function UR(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],c=0,l=s.length;c<l;c++,i++)n[i]=s[c];return n}function Zu(r){return this instanceof Zu?(this.v=r,this):new Zu(r)}function HR(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(y){n[y]&&(i[y]=function(w){return new Promise(function(_,S){s.push([y,w,_,S])>1||l(y,w)})})}function l(y,w){try{h(n[y](w))}catch(_){b(s[0][3],_)}}function h(y){y.value instanceof Zu?Promise.resolve(y.value.v).then(u,p):b(s[0][2],y)}function u(y){l("next",y)}function p(y){l("throw",y)}function b(y,w){y(w),s.shift(),s.length&&l(s[0][0],s[0][1])}}function zR(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(c){return(t=!t)?{value:Zu(r[i](c)),done:i==="return"}:s?s(c):c}:s}}function jR(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof k2=="function"?k2(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(c){return new Promise(function(l,h){c=r[s](c),i(l,h,c.done,c.value)})}}function i(s,c,l,h){Promise.resolve(h).then(function(u){s({value:u,done:l})},c)}}function GR(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function VR(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function qR(r){return r&&r.__esModule?r:{default:r}}function $R(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function KR(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const WR=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return L2},__asyncDelegator:zR,__asyncGenerator:HR,__asyncValues:jR,__await:Zu,__awaiter:BR,__classPrivateFieldGet:$R,__classPrivateFieldSet:KR,__createBinding:FR,__decorate:OR,__exportStar:LR,__extends:TR,__generator:PR,__importDefault:qR,__importStar:VR,__makeTemplateObject:GR,__metadata:MR,__param:RR,__read:$A,__rest:NR,__spread:kR,__spreadArrays:UR,__values:k2},Symbol.toStringTag,{value:"Module"})),cx=mc(WR);var tg={},iu={},zw;function YR(){if(zw)return iu;zw=1,Object.defineProperty(iu,"__esModule",{value:!0}),iu.delay=void 0;function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return iu.delay=r,iu}var y0={},rg={},w0={},jw;function XR(){return jw||(jw=1,Object.defineProperty(w0,"__esModule",{value:!0}),w0.ONE_THOUSAND=w0.ONE_HUNDRED=void 0,w0.ONE_HUNDRED=100,w0.ONE_THOUSAND=1e3),w0}var ng={},Gw;function QR(){return Gw||(Gw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=r.ONE_MINUTE*5,r.TEN_MINUTES=r.ONE_MINUTE*10,r.THIRTY_MINUTES=r.ONE_MINUTE*30,r.SIXTY_MINUTES=r.ONE_MINUTE*60,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=r.ONE_HOUR*3,r.SIX_HOURS=r.ONE_HOUR*6,r.TWELVE_HOURS=r.ONE_HOUR*12,r.TWENTY_FOUR_HOURS=r.ONE_HOUR*24,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=r.ONE_DAY*3,r.FIVE_DAYS=r.ONE_DAY*5,r.SEVEN_DAYS=r.ONE_DAY*7,r.THIRTY_DAYS=r.ONE_DAY*30,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=r.ONE_WEEK*2,r.THREE_WEEKS=r.ONE_WEEK*3,r.FOUR_WEEKS=r.ONE_WEEK*4,r.ONE_YEAR=r.ONE_DAY*365}(ng)),ng}var Vw;function KA(){return Vw||(Vw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=cx;e.__exportStar(XR(),r),e.__exportStar(QR(),r)}(rg)),rg}var qw;function ZR(){if(qw)return y0;qw=1,Object.defineProperty(y0,"__esModule",{value:!0}),y0.fromMiliseconds=y0.toMiliseconds=void 0;const r=KA();function e(n){return n*r.ONE_THOUSAND}y0.toMiliseconds=e;function t(n){return Math.floor(n/r.ONE_THOUSAND)}return y0.fromMiliseconds=t,y0}var $w;function JR(){return $w||($w=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=cx;e.__exportStar(YR(),r),e.__exportStar(ZR(),r)}(tg)),tg}var Hc={},Kw;function eM(){if(Kw)return Hc;Kw=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const n=this.get(t);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const i=Date.now()-n.started;this.timestamps.set(t,{started:n.started,elapsed:i})}get(t){const n=this.timestamps.get(t);if(typeof n>"u")throw new Error(`No timestamp found for label: ${t}`);return n}elapsed(t){const n=this.get(t);return n.elapsed||Date.now()-n.started}}return Hc.Watch=r,Hc.default=r,Hc}var ig={},su={},Ww;function tM(){if(Ww)return su;Ww=1,Object.defineProperty(su,"__esModule",{value:!0}),su.IWatch=void 0;class r{}return su.IWatch=r,su}var Yw;function rM(){return Yw||(Yw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),cx.__exportStar(tM(),r)}(ig)),ig}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=cx;e.__exportStar(JR(),r),e.__exportStar(eM(),r),e.__exportStar(rM(),r),e.__exportStar(KA(),r)})(tt);var sg={},ou={};let Ec=class{};const nM=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Ec},Symbol.toStringTag,{value:"Module"})),iM=mc(nM);var Xw;function sM(){if(Xw)return ou;Xw=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.IHeartBeat=void 0;const r=iM;class e extends r.IEvents{constructor(n){super()}}return ou.IHeartBeat=e,ou}var Qw;function WA(){return Qw||(Qw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),ax.__exportStar(sM(),r)}(sg)),sg}var og={},v0={},Zw;function oM(){if(Zw)return v0;Zw=1,Object.defineProperty(v0,"__esModule",{value:!0}),v0.HEARTBEAT_EVENTS=v0.HEARTBEAT_INTERVAL=void 0;const r=tt;return v0.HEARTBEAT_INTERVAL=r.FIVE_SECONDS,v0.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},v0}var Jw;function YA(){return Jw||(Jw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),ax.__exportStar(oM(),r)}(og)),og}var e8;function aM(){if(e8)return nu;e8=1,Object.defineProperty(nu,"__esModule",{value:!0}),nu.HeartBeat=void 0;const r=ax,e=cs,t=tt,n=WA(),i=YA();class s extends n.IHeartBeat{constructor(l){super(l),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(l==null?void 0:l.interval)||i.HEARTBEAT_INTERVAL}static init(l){return r.__awaiter(this,void 0,void 0,function*(){const h=new s(l);return yield h.init(),h})}init(){return r.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(l,h){this.events.on(l,h)}once(l,h){this.events.once(l,h)}off(l,h){this.events.off(l,h)}removeListener(l,h){this.events.removeListener(l,h)}initialize(){return r.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return nu.HeartBeat=s,nu}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=ax;e.__exportStar(aM(),r),e.__exportStar(WA(),r),e.__exportStar(YA(),r)})(Bl);var Zt={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var U2=function(r,e){return U2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},U2(r,e)};function cM(r,e){U2(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var H2=function(){return H2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},H2.apply(this,arguments)};function fM(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function lM(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var l=r.length-1;l>=0;l--)(c=r[l])&&(s=(i<3?c(s):i>3?c(e,t,s):c(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function uM(r,e){return function(t,n){e(t,n,r)}}function hM(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function dM(r,e,t,n){function i(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function l(p){try{u(n.next(p))}catch(b){c(b)}}function h(p){try{u(n.throw(p))}catch(b){c(b)}}function u(p){p.done?s(p.value):i(p.value).then(l,h)}u((n=n.apply(r,e||[])).next())})}function xM(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(p){return h([u,p])}}function h(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(p){u=[6,p],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function pM(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}function gM(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function z2(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function XA(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return s}function bM(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(XA(arguments[e]));return r}function mM(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],c=0,l=s.length;c<l;c++,i++)n[i]=s[c];return n}function Ju(r){return this instanceof Ju?(this.v=r,this):new Ju(r)}function yM(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(y){n[y]&&(i[y]=function(w){return new Promise(function(_,S){s.push([y,w,_,S])>1||l(y,w)})})}function l(y,w){try{h(n[y](w))}catch(_){b(s[0][3],_)}}function h(y){y.value instanceof Ju?Promise.resolve(y.value.v).then(u,p):b(s[0][2],y)}function u(y){l("next",y)}function p(y){l("throw",y)}function b(y,w){y(w),s.shift(),s.length&&l(s[0][0],s[0][1])}}function wM(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(c){return(t=!t)?{value:Ju(r[i](c)),done:i==="return"}:s?s(c):c}:s}}function vM(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof z2=="function"?z2(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(c){return new Promise(function(l,h){c=r[s](c),i(l,h,c.done,c.value)})}}function i(s,c,l,h){Promise.resolve(h).then(function(u){s({value:u,done:l})},c)}}function EM(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function AM(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function _M(r){return r&&r.__esModule?r:{default:r}}function CM(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function SM(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const IM=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return H2},__asyncDelegator:wM,__asyncGenerator:yM,__asyncValues:vM,__await:Ju,__awaiter:dM,__classPrivateFieldGet:CM,__classPrivateFieldSet:SM,__createBinding:pM,__decorate:lM,__exportStar:gM,__extends:cM,__generator:xM,__importDefault:_M,__importStar:AM,__makeTemplateObject:EM,__metadata:hM,__param:uM,__read:XA,__rest:fM,__spread:bM,__spreadArrays:mM,__values:z2},Symbol.toStringTag,{value:"Module"})),DM=mc(IM);var ag,t8;function TM(){if(t8)return ag;t8=1;function r(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}ag=e;function e(t,n,i){var s=i&&i.stringify||r,c=1;if(typeof t=="object"&&t!==null){var l=n.length+c;if(l===1)return t;var h=new Array(l);h[0]=s(t);for(var u=1;u<l;u++)h[u]=s(n[u]);return h.join(" ")}if(typeof t!="string")return t;var p=n.length;if(p===0)return t;for(var b="",y=1-c,w=-1,_=t&&t.length||0,S=0;S<_;){if(t.charCodeAt(S)===37&&S+1<_){switch(w=w>-1?w:0,t.charCodeAt(S+1)){case 100:case 102:if(y>=p||n[y]==null)break;w<S&&(b+=t.slice(w,S)),b+=Number(n[y]),w=S+2,S++;break;case 105:if(y>=p||n[y]==null)break;w<S&&(b+=t.slice(w,S)),b+=Math.floor(Number(n[y])),w=S+2,S++;break;case 79:case 111:case 106:if(y>=p||n[y]===void 0)break;w<S&&(b+=t.slice(w,S));var T=typeof n[y];if(T==="string"){b+="'"+n[y]+"'",w=S+2,S++;break}if(T==="function"){b+=n[y].name||"<anonymous>",w=S+2,S++;break}b+=s(n[y]),w=S+2,S++;break;case 115:if(y>=p)break;w<S&&(b+=t.slice(w,S)),b+=String(n[y]),w=S+2,S++;break;case 37:w<S&&(b+=t.slice(w,S)),b+="%",w=S+2,S++,y--;break}++y}++S}return w===-1?t:(w<_&&(b+=t.slice(w)),b)}return ag}var cg,r8;function NM(){if(r8)return cg;r8=1;const r=TM();cg=i;const e=L().console||{},t={mapHttpRequest:_,mapHttpResponse:_,wrapRequestSerializer:S,wrapResponseSerializer:S,wrapErrorSerializer:S,req:_,res:_,err:y};function n(R,v){return Array.isArray(R)?R.filter(function(Y){return Y!=="!stdSerializers.err"}):R===!0?Object.keys(v):!1}function i(R){R=R||{},R.browser=R.browser||{};const v=R.browser.transmit;if(v&&typeof v.send!="function")throw Error("pino: transmit option must have a send function");const P=R.browser.write||e;R.browser.write&&(R.browser.asObject=!0);const Y=R.serializers||{},J=n(R.browser.serialize,Y);let ne=R.browser.serialize;Array.isArray(R.browser.serialize)&&R.browser.serialize.indexOf("!stdSerializers.err")>-1&&(ne=!1);const le=["error","fatal","warn","info","debug","trace"];typeof P=="function"&&(P.error=P.fatal=P.warn=P.info=P.debug=P.trace=P),R.enabled===!1&&(R.level="silent");const V=R.level||"info",E=Object.create(P);E.log||(E.log=T),Object.defineProperty(E,"levelVal",{get:U}),Object.defineProperty(E,"level",{get:j,set:K});const C={transmit:v,serialize:J,asObject:R.browser.asObject,levels:le,timestamp:w(R)};E.levels=i.levels,E.level=V,E.setMaxListeners=E.getMaxListeners=E.emit=E.addListener=E.on=E.prependListener=E.once=E.prependOnceListener=E.removeListener=E.removeAllListeners=E.listeners=E.listenerCount=E.eventNames=E.write=E.flush=T,E.serializers=Y,E._serialize=J,E._stdErrSerialize=ne,E.child=X,v&&(E._logEvent=b());function U(){return this.level==="silent"?1/0:this.levels.values[this.level]}function j(){return this._level}function K(te){if(te!=="silent"&&!this.levels.values[te])throw Error("unknown level "+te);this._level=te,s(C,E,"error","log"),s(C,E,"fatal","error"),s(C,E,"warn","error"),s(C,E,"info","log"),s(C,E,"debug","log"),s(C,E,"trace","log")}function X(te,z){if(!te)throw new Error("missing bindings for child Pino");z=z||{},J&&te.serializers&&(z.serializers=te.serializers);const D=z.serializers;if(J&&D){var G=Object.assign({},Y,D),ue=R.browser.serialize===!0?Object.keys(G):J;delete te.serializers,h([te],ue,G,this._stdErrSerialize)}function H(fe){this._childLevel=(fe._childLevel|0)+1,this.error=u(fe,te,"error"),this.fatal=u(fe,te,"fatal"),this.warn=u(fe,te,"warn"),this.info=u(fe,te,"info"),this.debug=u(fe,te,"debug"),this.trace=u(fe,te,"trace"),G&&(this.serializers=G,this._serialize=ue),v&&(this._logEvent=b([].concat(fe._logEvent.bindings,te)))}return H.prototype=this,new H(this)}return E}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=t,i.stdTimeFunctions=Object.assign({},{nullTime:F,epochTime:N,unixTime:O,isoTime:M});function s(R,v,P,Y){const J=Object.getPrototypeOf(v);v[P]=v.levelVal>v.levels.values[P]?T:J[P]?J[P]:e[P]||e[Y]||T,c(R,v,P)}function c(R,v,P){!R.transmit&&v[P]===T||(v[P]=function(Y){return function(){const ne=R.timestamp(),le=new Array(arguments.length),V=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var E=0;E<le.length;E++)le[E]=arguments[E];if(R.serialize&&!R.asObject&&h(le,this._serialize,this.serializers,this._stdErrSerialize),R.asObject?Y.call(V,l(this,P,le,ne)):Y.apply(V,le),R.transmit){const C=R.transmit.level||v.level,U=i.levels.values[C],j=i.levels.values[P];if(j<U)return;p(this,{ts:ne,methodLevel:P,methodValue:j,transmitLevel:C,transmitValue:i.levels.values[R.transmit.level||v.level],send:R.transmit.send,val:v.levelVal},le)}}}(v[P]))}function l(R,v,P,Y){R._serialize&&h(P,R._serialize,R.serializers,R._stdErrSerialize);const J=P.slice();let ne=J[0];const le={};Y&&(le.time=Y),le.level=i.levels.values[v];let V=(R._childLevel|0)+1;if(V<1&&(V=1),ne!==null&&typeof ne=="object"){for(;V--&&typeof J[0]=="object";)Object.assign(le,J.shift());ne=J.length?r(J.shift(),J):void 0}else typeof ne=="string"&&(ne=r(J.shift(),J));return ne!==void 0&&(le.msg=ne),le}function h(R,v,P,Y){for(const J in R)if(Y&&R[J]instanceof Error)R[J]=i.stdSerializers.err(R[J]);else if(typeof R[J]=="object"&&!Array.isArray(R[J]))for(const ne in R[J])v&&v.indexOf(ne)>-1&&ne in P&&(R[J][ne]=P[ne](R[J][ne]))}function u(R,v,P){return function(){const Y=new Array(1+arguments.length);Y[0]=v;for(var J=1;J<Y.length;J++)Y[J]=arguments[J-1];return R[P].apply(this,Y)}}function p(R,v,P){const Y=v.send,J=v.ts,ne=v.methodLevel,le=v.methodValue,V=v.val,E=R._logEvent.bindings;h(P,R._serialize||Object.keys(R.serializers),R.serializers,R._stdErrSerialize===void 0?!0:R._stdErrSerialize),R._logEvent.ts=J,R._logEvent.messages=P.filter(function(C){return E.indexOf(C)===-1}),R._logEvent.level.label=ne,R._logEvent.level.value=le,Y(ne,R._logEvent,V),R._logEvent=b(E)}function b(R){return{ts:0,messages:[],bindings:R||[],level:{label:"",value:0}}}function y(R){const v={type:R.constructor.name,msg:R.message,stack:R.stack};for(const P in R)v[P]===void 0&&(v[P]=R[P]);return v}function w(R){return typeof R.timestamp=="function"?R.timestamp:R.timestamp===!1?F:N}function _(){return{}}function S(R){return R}function T(){}function F(){return!1}function N(){return Date.now()}function O(){return Math.round(Date.now()/1e3)}function M(){return new Date(Date.now()).toISOString()}function L(){function R(v){return typeof v<"u"&&v}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return R(self)||R(window)||R(this)||{}}}return cg}var E0={},n8;function QA(){return n8||(n8=1,Object.defineProperty(E0,"__esModule",{value:!0}),E0.PINO_CUSTOM_CONTEXT_KEY=E0.PINO_LOGGER_DEFAULTS=void 0,E0.PINO_LOGGER_DEFAULTS={level:"info"},E0.PINO_CUSTOM_CONTEXT_KEY="custom_context"),E0}var Jn={},i8;function OM(){if(i8)return Jn;i8=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.generateChildLogger=Jn.formatChildLoggerContext=Jn.getLoggerContext=Jn.setBrowserLoggerContext=Jn.getBrowserLoggerContext=Jn.getDefaultLoggerOptions=void 0;const r=QA();function e(l){return Object.assign(Object.assign({},l),{level:(l==null?void 0:l.level)||r.PINO_LOGGER_DEFAULTS.level})}Jn.getDefaultLoggerOptions=e;function t(l,h=r.PINO_CUSTOM_CONTEXT_KEY){return l[h]||""}Jn.getBrowserLoggerContext=t;function n(l,h,u=r.PINO_CUSTOM_CONTEXT_KEY){return l[u]=h,l}Jn.setBrowserLoggerContext=n;function i(l,h=r.PINO_CUSTOM_CONTEXT_KEY){let u="";return typeof l.bindings>"u"?u=t(l,h):u=l.bindings().context||"",u}Jn.getLoggerContext=i;function s(l,h,u=r.PINO_CUSTOM_CONTEXT_KEY){const p=i(l,u);return p.trim()?`${p}/${h}`:h}Jn.formatChildLoggerContext=s;function c(l,h,u=r.PINO_CUSTOM_CONTEXT_KEY){const p=s(l,h,u),b=l.child({context:p});return n(b,p,u)}return Jn.generateChildLogger=c,Jn}(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.pino=void 0;const e=DM,t=e.__importDefault(NM());Object.defineProperty(r,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(QA(),r),e.__exportStar(OM(),r)})(Zt);class RM extends Ec{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}let MM=class extends Ec{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}},BM=class{constructor(e,t){this.logger=e,this.core=t}};class PM extends Ec{constructor(e,t){super(),this.relayer=e,this.logger=t}}let FM=class extends Ec{constructor(e){super()}},LM=class{constructor(e,t,n,i){this.core=e,this.logger=t,this.name=n}},kM=class extends Ec{constructor(e,t){super(),this.relayer=e,this.logger=t}},UM=class extends Ec{constructor(e,t){super(),this.core=e,this.logger=t}},HM=class{constructor(e,t){this.projectId=e,this.logger=t}},zM=class{constructor(e,t){this.projectId=e,this.logger=t}},jM=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},GM=class{constructor(e){this.client=e}};var mm={},Pl={},fx={},lx={};Object.defineProperty(lx,"__esModule",{value:!0});lx.BrowserRandomSource=void 0;const s8=65536;class VM{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let n=0;n<t.length;n+=s8)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,s8)));return t}}lx.BrowserRandomSource=VM;var ux={},Li={};Object.defineProperty(Li,"__esModule",{value:!0});function qM(r){for(var e=0;e<r.length;e++)r[e]=0;return r}Li.wipe=qM;Object.defineProperty(ux,"__esModule",{value:!0});ux.NodeRandomSource=void 0;const $M=Li;class KM{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof uA<"u"){const e=Qb;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=t[i];return(0,$M.wipe)(t),n}}ux.NodeRandomSource=KM;Object.defineProperty(fx,"__esModule",{value:!0});fx.SystemRandomSource=void 0;const WM=lx,YM=ux;class XM{constructor(){if(this.isAvailable=!1,this.name="",this._source=new WM.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new YM.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}fx.SystemRandomSource=XM;var qt={},ZA={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(l,h){var u=l>>>16&65535,p=l&65535,b=h>>>16&65535,y=h&65535;return p*y+(u*y+p*b<<16>>>0)|0}r.mul=Math.imul||e;function t(l,h){return l+h|0}r.add=t;function n(l,h){return l-h|0}r.sub=n;function i(l,h){return l<<h|l>>>32-h}r.rotl=i;function s(l,h){return l<<32-h|l>>>h}r.rotr=s;function c(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}r.isInteger=Number.isInteger||c,r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(l){return r.isInteger(l)&&l>=-r.MAX_SAFE_INTEGER&&l<=r.MAX_SAFE_INTEGER}})(ZA);Object.defineProperty(qt,"__esModule",{value:!0});var JA=ZA;function QM(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16}qt.readInt16BE=QM;function ZM(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])>>>0}qt.readUint16BE=ZM;function JM(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])<<16>>16}qt.readInt16LE=JM;function eB(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])>>>0}qt.readUint16LE=eB;function e5(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}qt.writeUint16BE=e5;qt.writeInt16BE=e5;function t5(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}qt.writeUint16LE=t5;qt.writeInt16LE=t5;function j2(r,e){return e===void 0&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}qt.readInt32BE=j2;function G2(r,e){return e===void 0&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}qt.readUint32BE=G2;function V2(r,e){return e===void 0&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}qt.readInt32LE=V2;function q2(r,e){return e===void 0&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}qt.readUint32LE=q2;function y1(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}qt.writeUint32BE=y1;qt.writeInt32BE=y1;function w1(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}qt.writeUint32LE=w1;qt.writeInt32LE=w1;function tB(r,e){e===void 0&&(e=0);var t=j2(r,e),n=j2(r,e+4);return t*4294967296+n-(n>>31)*4294967296}qt.readInt64BE=tB;function rB(r,e){e===void 0&&(e=0);var t=G2(r,e),n=G2(r,e+4);return t*4294967296+n}qt.readUint64BE=rB;function nB(r,e){e===void 0&&(e=0);var t=V2(r,e),n=V2(r,e+4);return n*4294967296+t-(t>>31)*4294967296}qt.readInt64LE=nB;function iB(r,e){e===void 0&&(e=0);var t=q2(r,e),n=q2(r,e+4);return n*4294967296+t}qt.readUint64LE=iB;function r5(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),y1(r/4294967296>>>0,e,t),y1(r>>>0,e,t+4),e}qt.writeUint64BE=r5;qt.writeInt64BE=r5;function n5(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),w1(r>>>0,e,t),w1(r/4294967296>>>0,e,t+4),e}qt.writeUint64LE=n5;qt.writeInt64LE=n5;function sB(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=r/8+t-1;s>=t;s--)n+=e[s]*i,i*=256;return n}qt.readUintBE=sB;function oB(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=t;s<t+r/8;s++)n+=e[s]*i,i*=256;return n}qt.readUintLE=oB;function aB(r,e,t,n){if(t===void 0&&(t=new Uint8Array(r/8)),n===void 0&&(n=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!JA.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=r/8+n-1;s>=n;s--)t[s]=e/i&255,i*=256;return t}qt.writeUintBE=aB;function cB(r,e,t,n){if(t===void 0&&(t=new Uint8Array(r/8)),n===void 0&&(n=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!JA.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+r/8;s++)t[s]=e/i&255,i*=256;return t}qt.writeUintLE=cB;function fB(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e)}qt.readFloat32BE=fB;function lB(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e,!0)}qt.readFloat32LE=lB;function uB(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e)}qt.readFloat64BE=uB;function hB(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e,!0)}qt.readFloat64LE=hB;function dB(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(t,r),e}qt.writeFloat32BE=dB;function xB(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(t,r,!0),e}qt.writeFloat32LE=xB;function pB(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(t,r),e}qt.writeFloat64BE=pB;function gB(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(t,r,!0),e}qt.writeFloat64LE=gB;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const e=fx,t=qt,n=Li;r.defaultRandomSource=new e.SystemRandomSource;function i(u,p=r.defaultRandomSource){return p.randomBytes(u)}r.randomBytes=i;function s(u=r.defaultRandomSource){const p=i(4,u),b=(0,t.readUint32LE)(p);return(0,n.wipe)(p),b}r.randomUint32=s;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(u,p=c,b=r.defaultRandomSource){if(p.length<2)throw new Error("randomString charset is too short");if(p.length>256)throw new Error("randomString charset is too long");let y="";const w=p.length,_=256-256%w;for(;u>0;){const S=i(Math.ceil(u*256/_),b);for(let T=0;T<S.length&&u>0;T++){const F=S[T];F<_&&(y+=p.charAt(F%w),u--)}(0,n.wipe)(S)}return y}r.randomString=l;function h(u,p=c,b=r.defaultRandomSource){const y=Math.ceil(u/(Math.log(p.length)/Math.LN2));return l(y,p,b)}r.randomStringForEntropy=h})(Pl);var i5={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=qt,t=Li;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var n=function(){function l(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},l.prototype.update=function(h,u){if(u===void 0&&(u=h.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var p=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&u>0;)this._buffer[this._bufferLength++]=h[p++],u--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(p=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,h,p,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=h[p++],u--;return this},l.prototype.finish=function(h){if(!this._finished){var u=this._bytesHashed,p=this._bufferLength,b=u/536870912|0,y=u<<3,w=u%128<112?128:256;this._buffer[p]=128;for(var _=p+1;_<w-8;_++)this._buffer[_]=0;e.writeUint32BE(b,this._buffer,w-8),e.writeUint32BE(y,this._buffer,w-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,w),this._finished=!0}for(var _=0;_<this.digestLength/8;_++)e.writeUint32BE(this._stateHi[_],h,_*8),e.writeUint32BE(this._stateLo[_],h,_*8+4);return this},l.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(h){return this._stateHi.set(h.stateHi),this._stateLo.set(h.stateLo),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(h){t.wipe(h.stateHi),t.wipe(h.stateLo),h.buffer&&t.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},l}();r.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(l,h,u,p,b,y,w){for(var _=u[0],S=u[1],T=u[2],F=u[3],N=u[4],O=u[5],M=u[6],L=u[7],R=p[0],v=p[1],P=p[2],Y=p[3],J=p[4],ne=p[5],le=p[6],V=p[7],E,C,U,j,K,X,te,z;w>=128;){for(var D=0;D<16;D++){var G=8*D+y;l[D]=e.readUint32BE(b,G),h[D]=e.readUint32BE(b,G+4)}for(var D=0;D<80;D++){var ue=_,H=S,fe=T,ie=F,re=N,se=O,B=M,ee=L,de=R,Ae=v,Se=P,Pe=Y,pt=J,je=ne,Ge=le,Je=V;if(E=L,C=V,K=C&65535,X=C>>>16,te=E&65535,z=E>>>16,E=(N>>>14|J<<18)^(N>>>18|J<<14)^(J>>>9|N<<23),C=(J>>>14|N<<18)^(J>>>18|N<<14)^(N>>>9|J<<23),K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,E=N&O^~N&M,C=J&ne^~J&le,K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,E=i[D*2],C=i[D*2+1],K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,E=l[D%16],C=h[D%16],K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,X+=K>>>16,te+=X>>>16,z+=te>>>16,U=te&65535|z<<16,j=K&65535|X<<16,E=U,C=j,K=C&65535,X=C>>>16,te=E&65535,z=E>>>16,E=(_>>>28|R<<4)^(R>>>2|_<<30)^(R>>>7|_<<25),C=(R>>>28|_<<4)^(_>>>2|R<<30)^(_>>>7|R<<25),K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,E=_&S^_&T^S&T,C=R&v^R&P^v&P,K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,X+=K>>>16,te+=X>>>16,z+=te>>>16,ee=te&65535|z<<16,Je=K&65535|X<<16,E=ie,C=Pe,K=C&65535,X=C>>>16,te=E&65535,z=E>>>16,E=U,C=j,K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,X+=K>>>16,te+=X>>>16,z+=te>>>16,ie=te&65535|z<<16,Pe=K&65535|X<<16,S=ue,T=H,F=fe,N=ie,O=re,M=se,L=B,_=ee,v=de,P=Ae,Y=Se,J=Pe,ne=pt,le=je,V=Ge,R=Je,D%16===15)for(var G=0;G<16;G++)E=l[G],C=h[G],K=C&65535,X=C>>>16,te=E&65535,z=E>>>16,E=l[(G+9)%16],C=h[(G+9)%16],K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,U=l[(G+1)%16],j=h[(G+1)%16],E=(U>>>1|j<<31)^(U>>>8|j<<24)^U>>>7,C=(j>>>1|U<<31)^(j>>>8|U<<24)^(j>>>7|U<<25),K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,U=l[(G+14)%16],j=h[(G+14)%16],E=(U>>>19|j<<13)^(j>>>29|U<<3)^U>>>6,C=(j>>>19|U<<13)^(U>>>29|j<<3)^(j>>>6|U<<26),K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,X+=K>>>16,te+=X>>>16,z+=te>>>16,l[G]=te&65535|z<<16,h[G]=K&65535|X<<16}E=_,C=R,K=C&65535,X=C>>>16,te=E&65535,z=E>>>16,E=u[0],C=p[0],K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,X+=K>>>16,te+=X>>>16,z+=te>>>16,u[0]=_=te&65535|z<<16,p[0]=R=K&65535|X<<16,E=S,C=v,K=C&65535,X=C>>>16,te=E&65535,z=E>>>16,E=u[1],C=p[1],K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,X+=K>>>16,te+=X>>>16,z+=te>>>16,u[1]=S=te&65535|z<<16,p[1]=v=K&65535|X<<16,E=T,C=P,K=C&65535,X=C>>>16,te=E&65535,z=E>>>16,E=u[2],C=p[2],K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,X+=K>>>16,te+=X>>>16,z+=te>>>16,u[2]=T=te&65535|z<<16,p[2]=P=K&65535|X<<16,E=F,C=Y,K=C&65535,X=C>>>16,te=E&65535,z=E>>>16,E=u[3],C=p[3],K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,X+=K>>>16,te+=X>>>16,z+=te>>>16,u[3]=F=te&65535|z<<16,p[3]=Y=K&65535|X<<16,E=N,C=J,K=C&65535,X=C>>>16,te=E&65535,z=E>>>16,E=u[4],C=p[4],K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,X+=K>>>16,te+=X>>>16,z+=te>>>16,u[4]=N=te&65535|z<<16,p[4]=J=K&65535|X<<16,E=O,C=ne,K=C&65535,X=C>>>16,te=E&65535,z=E>>>16,E=u[5],C=p[5],K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,X+=K>>>16,te+=X>>>16,z+=te>>>16,u[5]=O=te&65535|z<<16,p[5]=ne=K&65535|X<<16,E=M,C=le,K=C&65535,X=C>>>16,te=E&65535,z=E>>>16,E=u[6],C=p[6],K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,X+=K>>>16,te+=X>>>16,z+=te>>>16,u[6]=M=te&65535|z<<16,p[6]=le=K&65535|X<<16,E=L,C=V,K=C&65535,X=C>>>16,te=E&65535,z=E>>>16,E=u[7],C=p[7],K+=C&65535,X+=C>>>16,te+=E&65535,z+=E>>>16,X+=K>>>16,te+=X>>>16,z+=te>>>16,u[7]=L=te&65535|z<<16,p[7]=V=K&65535|X<<16,y+=128,w-=128}return y}function c(l){var h=new n;h.update(l);var u=h.digest();return h.clean(),u}r.hash=c})(i5);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=Pl,t=i5,n=Li;r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32;function i(ie){const re=new Float64Array(16);if(ie)for(let se=0;se<ie.length;se++)re[se]=ie[se];return re}const s=new Uint8Array(32);s[0]=9;const c=i(),l=i([1]),h=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),p=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),b=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),y=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function w(ie,re){for(let se=0;se<16;se++)ie[se]=re[se]|0}function _(ie){let re=1;for(let se=0;se<16;se++){let B=ie[se]+re+65535;re=Math.floor(B/65536),ie[se]=B-re*65536}ie[0]+=re-1+37*(re-1)}function S(ie,re,se){const B=~(se-1);for(let ee=0;ee<16;ee++){const de=B&(ie[ee]^re[ee]);ie[ee]^=de,re[ee]^=de}}function T(ie,re){const se=i(),B=i();for(let ee=0;ee<16;ee++)B[ee]=re[ee];_(B),_(B),_(B);for(let ee=0;ee<2;ee++){se[0]=B[0]-65517;for(let Ae=1;Ae<15;Ae++)se[Ae]=B[Ae]-65535-(se[Ae-1]>>16&1),se[Ae-1]&=65535;se[15]=B[15]-32767-(se[14]>>16&1);const de=se[15]>>16&1;se[14]&=65535,S(B,se,1-de)}for(let ee=0;ee<16;ee++)ie[2*ee]=B[ee]&255,ie[2*ee+1]=B[ee]>>8}function F(ie,re){let se=0;for(let B=0;B<32;B++)se|=ie[B]^re[B];return(1&se-1>>>8)-1}function N(ie,re){const se=new Uint8Array(32),B=new Uint8Array(32);return T(se,ie),T(B,re),F(se,B)}function O(ie){const re=new Uint8Array(32);return T(re,ie),re[0]&1}function M(ie,re){for(let se=0;se<16;se++)ie[se]=re[2*se]+(re[2*se+1]<<8);ie[15]&=32767}function L(ie,re,se){for(let B=0;B<16;B++)ie[B]=re[B]+se[B]}function R(ie,re,se){for(let B=0;B<16;B++)ie[B]=re[B]-se[B]}function v(ie,re,se){let B,ee,de=0,Ae=0,Se=0,Pe=0,pt=0,je=0,Ge=0,Je=0,Ze=0,Ce=0,ut=0,Ye=0,$e=0,_t=0,He=0,We=0,wt=0,Ve=0,Xe=0,Ct=0,nt=0,Ke=0,Ie=0,qe=0,rt=0,Pt=0,Ft=0,Rt=0,Qr=0,st=0,$t=0,fr=se[0],St=se[1],dt=se[2],sr=se[3],ot=se[4],bt=se[5],cr=se[6],mt=se[7],Nt=se[8],Ot=se[9],yt=se[10],ct=se[11],Qt=se[12],ft=se[13],Ne=se[14],lr=se[15];B=re[0],de+=B*fr,Ae+=B*St,Se+=B*dt,Pe+=B*sr,pt+=B*ot,je+=B*bt,Ge+=B*cr,Je+=B*mt,Ze+=B*Nt,Ce+=B*Ot,ut+=B*yt,Ye+=B*ct,$e+=B*Qt,_t+=B*ft,He+=B*Ne,We+=B*lr,B=re[1],Ae+=B*fr,Se+=B*St,Pe+=B*dt,pt+=B*sr,je+=B*ot,Ge+=B*bt,Je+=B*cr,Ze+=B*mt,Ce+=B*Nt,ut+=B*Ot,Ye+=B*yt,$e+=B*ct,_t+=B*Qt,He+=B*ft,We+=B*Ne,wt+=B*lr,B=re[2],Se+=B*fr,Pe+=B*St,pt+=B*dt,je+=B*sr,Ge+=B*ot,Je+=B*bt,Ze+=B*cr,Ce+=B*mt,ut+=B*Nt,Ye+=B*Ot,$e+=B*yt,_t+=B*ct,He+=B*Qt,We+=B*ft,wt+=B*Ne,Ve+=B*lr,B=re[3],Pe+=B*fr,pt+=B*St,je+=B*dt,Ge+=B*sr,Je+=B*ot,Ze+=B*bt,Ce+=B*cr,ut+=B*mt,Ye+=B*Nt,$e+=B*Ot,_t+=B*yt,He+=B*ct,We+=B*Qt,wt+=B*ft,Ve+=B*Ne,Xe+=B*lr,B=re[4],pt+=B*fr,je+=B*St,Ge+=B*dt,Je+=B*sr,Ze+=B*ot,Ce+=B*bt,ut+=B*cr,Ye+=B*mt,$e+=B*Nt,_t+=B*Ot,He+=B*yt,We+=B*ct,wt+=B*Qt,Ve+=B*ft,Xe+=B*Ne,Ct+=B*lr,B=re[5],je+=B*fr,Ge+=B*St,Je+=B*dt,Ze+=B*sr,Ce+=B*ot,ut+=B*bt,Ye+=B*cr,$e+=B*mt,_t+=B*Nt,He+=B*Ot,We+=B*yt,wt+=B*ct,Ve+=B*Qt,Xe+=B*ft,Ct+=B*Ne,nt+=B*lr,B=re[6],Ge+=B*fr,Je+=B*St,Ze+=B*dt,Ce+=B*sr,ut+=B*ot,Ye+=B*bt,$e+=B*cr,_t+=B*mt,He+=B*Nt,We+=B*Ot,wt+=B*yt,Ve+=B*ct,Xe+=B*Qt,Ct+=B*ft,nt+=B*Ne,Ke+=B*lr,B=re[7],Je+=B*fr,Ze+=B*St,Ce+=B*dt,ut+=B*sr,Ye+=B*ot,$e+=B*bt,_t+=B*cr,He+=B*mt,We+=B*Nt,wt+=B*Ot,Ve+=B*yt,Xe+=B*ct,Ct+=B*Qt,nt+=B*ft,Ke+=B*Ne,Ie+=B*lr,B=re[8],Ze+=B*fr,Ce+=B*St,ut+=B*dt,Ye+=B*sr,$e+=B*ot,_t+=B*bt,He+=B*cr,We+=B*mt,wt+=B*Nt,Ve+=B*Ot,Xe+=B*yt,Ct+=B*ct,nt+=B*Qt,Ke+=B*ft,Ie+=B*Ne,qe+=B*lr,B=re[9],Ce+=B*fr,ut+=B*St,Ye+=B*dt,$e+=B*sr,_t+=B*ot,He+=B*bt,We+=B*cr,wt+=B*mt,Ve+=B*Nt,Xe+=B*Ot,Ct+=B*yt,nt+=B*ct,Ke+=B*Qt,Ie+=B*ft,qe+=B*Ne,rt+=B*lr,B=re[10],ut+=B*fr,Ye+=B*St,$e+=B*dt,_t+=B*sr,He+=B*ot,We+=B*bt,wt+=B*cr,Ve+=B*mt,Xe+=B*Nt,Ct+=B*Ot,nt+=B*yt,Ke+=B*ct,Ie+=B*Qt,qe+=B*ft,rt+=B*Ne,Pt+=B*lr,B=re[11],Ye+=B*fr,$e+=B*St,_t+=B*dt,He+=B*sr,We+=B*ot,wt+=B*bt,Ve+=B*cr,Xe+=B*mt,Ct+=B*Nt,nt+=B*Ot,Ke+=B*yt,Ie+=B*ct,qe+=B*Qt,rt+=B*ft,Pt+=B*Ne,Ft+=B*lr,B=re[12],$e+=B*fr,_t+=B*St,He+=B*dt,We+=B*sr,wt+=B*ot,Ve+=B*bt,Xe+=B*cr,Ct+=B*mt,nt+=B*Nt,Ke+=B*Ot,Ie+=B*yt,qe+=B*ct,rt+=B*Qt,Pt+=B*ft,Ft+=B*Ne,Rt+=B*lr,B=re[13],_t+=B*fr,He+=B*St,We+=B*dt,wt+=B*sr,Ve+=B*ot,Xe+=B*bt,Ct+=B*cr,nt+=B*mt,Ke+=B*Nt,Ie+=B*Ot,qe+=B*yt,rt+=B*ct,Pt+=B*Qt,Ft+=B*ft,Rt+=B*Ne,Qr+=B*lr,B=re[14],He+=B*fr,We+=B*St,wt+=B*dt,Ve+=B*sr,Xe+=B*ot,Ct+=B*bt,nt+=B*cr,Ke+=B*mt,Ie+=B*Nt,qe+=B*Ot,rt+=B*yt,Pt+=B*ct,Ft+=B*Qt,Rt+=B*ft,Qr+=B*Ne,st+=B*lr,B=re[15],We+=B*fr,wt+=B*St,Ve+=B*dt,Xe+=B*sr,Ct+=B*ot,nt+=B*bt,Ke+=B*cr,Ie+=B*mt,qe+=B*Nt,rt+=B*Ot,Pt+=B*yt,Ft+=B*ct,Rt+=B*Qt,Qr+=B*ft,st+=B*Ne,$t+=B*lr,de+=38*wt,Ae+=38*Ve,Se+=38*Xe,Pe+=38*Ct,pt+=38*nt,je+=38*Ke,Ge+=38*Ie,Je+=38*qe,Ze+=38*rt,Ce+=38*Pt,ut+=38*Ft,Ye+=38*Rt,$e+=38*Qr,_t+=38*st,He+=38*$t,ee=1,B=de+ee+65535,ee=Math.floor(B/65536),de=B-ee*65536,B=Ae+ee+65535,ee=Math.floor(B/65536),Ae=B-ee*65536,B=Se+ee+65535,ee=Math.floor(B/65536),Se=B-ee*65536,B=Pe+ee+65535,ee=Math.floor(B/65536),Pe=B-ee*65536,B=pt+ee+65535,ee=Math.floor(B/65536),pt=B-ee*65536,B=je+ee+65535,ee=Math.floor(B/65536),je=B-ee*65536,B=Ge+ee+65535,ee=Math.floor(B/65536),Ge=B-ee*65536,B=Je+ee+65535,ee=Math.floor(B/65536),Je=B-ee*65536,B=Ze+ee+65535,ee=Math.floor(B/65536),Ze=B-ee*65536,B=Ce+ee+65535,ee=Math.floor(B/65536),Ce=B-ee*65536,B=ut+ee+65535,ee=Math.floor(B/65536),ut=B-ee*65536,B=Ye+ee+65535,ee=Math.floor(B/65536),Ye=B-ee*65536,B=$e+ee+65535,ee=Math.floor(B/65536),$e=B-ee*65536,B=_t+ee+65535,ee=Math.floor(B/65536),_t=B-ee*65536,B=He+ee+65535,ee=Math.floor(B/65536),He=B-ee*65536,B=We+ee+65535,ee=Math.floor(B/65536),We=B-ee*65536,de+=ee-1+37*(ee-1),ee=1,B=de+ee+65535,ee=Math.floor(B/65536),de=B-ee*65536,B=Ae+ee+65535,ee=Math.floor(B/65536),Ae=B-ee*65536,B=Se+ee+65535,ee=Math.floor(B/65536),Se=B-ee*65536,B=Pe+ee+65535,ee=Math.floor(B/65536),Pe=B-ee*65536,B=pt+ee+65535,ee=Math.floor(B/65536),pt=B-ee*65536,B=je+ee+65535,ee=Math.floor(B/65536),je=B-ee*65536,B=Ge+ee+65535,ee=Math.floor(B/65536),Ge=B-ee*65536,B=Je+ee+65535,ee=Math.floor(B/65536),Je=B-ee*65536,B=Ze+ee+65535,ee=Math.floor(B/65536),Ze=B-ee*65536,B=Ce+ee+65535,ee=Math.floor(B/65536),Ce=B-ee*65536,B=ut+ee+65535,ee=Math.floor(B/65536),ut=B-ee*65536,B=Ye+ee+65535,ee=Math.floor(B/65536),Ye=B-ee*65536,B=$e+ee+65535,ee=Math.floor(B/65536),$e=B-ee*65536,B=_t+ee+65535,ee=Math.floor(B/65536),_t=B-ee*65536,B=He+ee+65535,ee=Math.floor(B/65536),He=B-ee*65536,B=We+ee+65535,ee=Math.floor(B/65536),We=B-ee*65536,de+=ee-1+37*(ee-1),ie[0]=de,ie[1]=Ae,ie[2]=Se,ie[3]=Pe,ie[4]=pt,ie[5]=je,ie[6]=Ge,ie[7]=Je,ie[8]=Ze,ie[9]=Ce,ie[10]=ut,ie[11]=Ye,ie[12]=$e,ie[13]=_t,ie[14]=He,ie[15]=We}function P(ie,re){v(ie,re,re)}function Y(ie,re){const se=i();let B;for(B=0;B<16;B++)se[B]=re[B];for(B=253;B>=0;B--)P(se,se),B!==2&&B!==4&&v(se,se,re);for(B=0;B<16;B++)ie[B]=se[B]}function J(ie,re){const se=i();let B;for(B=0;B<16;B++)se[B]=re[B];for(B=250;B>=0;B--)P(se,se),B!==1&&v(se,se,re);for(B=0;B<16;B++)ie[B]=se[B]}function ne(ie,re){const se=i(),B=i(),ee=i(),de=i(),Ae=i(),Se=i(),Pe=i(),pt=i(),je=i();R(se,ie[1],ie[0]),R(je,re[1],re[0]),v(se,se,je),L(B,ie[0],ie[1]),L(je,re[0],re[1]),v(B,B,je),v(ee,ie[3],re[3]),v(ee,ee,u),v(de,ie[2],re[2]),L(de,de,de),R(Ae,B,se),R(Se,de,ee),L(Pe,de,ee),L(pt,B,se),v(ie[0],Ae,Se),v(ie[1],pt,Pe),v(ie[2],Pe,Se),v(ie[3],Ae,pt)}function le(ie,re,se){for(let B=0;B<4;B++)S(ie[B],re[B],se)}function V(ie,re){const se=i(),B=i(),ee=i();Y(ee,re[2]),v(se,re[0],ee),v(B,re[1],ee),T(ie,B),ie[31]^=O(se)<<7}function E(ie,re,se){w(ie[0],c),w(ie[1],l),w(ie[2],l),w(ie[3],c);for(let B=255;B>=0;--B){const ee=se[B/8|0]>>(B&7)&1;le(ie,re,ee),ne(re,ie),ne(ie,ie),le(ie,re,ee)}}function C(ie,re){const se=[i(),i(),i(),i()];w(se[0],p),w(se[1],b),w(se[2],l),v(se[3],p,b),E(ie,se,re)}function U(ie){if(ie.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const re=(0,t.hash)(ie);re[0]&=248,re[31]&=127,re[31]|=64;const se=new Uint8Array(32),B=[i(),i(),i(),i()];C(B,re),V(se,B);const ee=new Uint8Array(64);return ee.set(ie),ee.set(se,32),{publicKey:se,secretKey:ee}}r.generateKeyPairFromSeed=U;function j(ie){const re=(0,e.randomBytes)(32,ie),se=U(re);return(0,n.wipe)(re),se}r.generateKeyPair=j;function K(ie){if(ie.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(ie.subarray(32))}r.extractPublicKeyFromSecretKey=K;const X=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function te(ie,re){let se,B,ee,de;for(B=63;B>=32;--B){for(se=0,ee=B-32,de=B-12;ee<de;++ee)re[ee]+=se-16*re[B]*X[ee-(B-32)],se=Math.floor((re[ee]+128)/256),re[ee]-=se*256;re[ee]+=se,re[B]=0}for(se=0,ee=0;ee<32;ee++)re[ee]+=se-(re[31]>>4)*X[ee],se=re[ee]>>8,re[ee]&=255;for(ee=0;ee<32;ee++)re[ee]-=se*X[ee];for(B=0;B<32;B++)re[B+1]+=re[B]>>8,ie[B]=re[B]&255}function z(ie){const re=new Float64Array(64);for(let se=0;se<64;se++)re[se]=ie[se];for(let se=0;se<64;se++)ie[se]=0;te(ie,re)}function D(ie,re){const se=new Float64Array(64),B=[i(),i(),i(),i()],ee=(0,t.hash)(ie.subarray(0,32));ee[0]&=248,ee[31]&=127,ee[31]|=64;const de=new Uint8Array(64);de.set(ee.subarray(32),32);const Ae=new t.SHA512;Ae.update(de.subarray(32)),Ae.update(re);const Se=Ae.digest();Ae.clean(),z(Se),C(B,Se),V(de,B),Ae.reset(),Ae.update(de.subarray(0,32)),Ae.update(ie.subarray(32)),Ae.update(re);const Pe=Ae.digest();z(Pe);for(let pt=0;pt<32;pt++)se[pt]=Se[pt];for(let pt=0;pt<32;pt++)for(let je=0;je<32;je++)se[pt+je]+=Pe[pt]*ee[je];return te(de.subarray(32),se),de}r.sign=D;function G(ie,re){const se=i(),B=i(),ee=i(),de=i(),Ae=i(),Se=i(),Pe=i();return w(ie[2],l),M(ie[1],re),P(ee,ie[1]),v(de,ee,h),R(ee,ee,ie[2]),L(de,ie[2],de),P(Ae,de),P(Se,Ae),v(Pe,Se,Ae),v(se,Pe,ee),v(se,se,de),J(se,se),v(se,se,ee),v(se,se,de),v(se,se,de),v(ie[0],se,de),P(B,ie[0]),v(B,B,de),N(B,ee)&&v(ie[0],ie[0],y),P(B,ie[0]),v(B,B,de),N(B,ee)?-1:(O(ie[0])===re[31]>>7&&R(ie[0],c,ie[0]),v(ie[3],ie[0],ie[1]),0)}function ue(ie,re,se){const B=new Uint8Array(32),ee=[i(),i(),i(),i()],de=[i(),i(),i(),i()];if(se.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(G(de,ie))return!1;const Ae=new t.SHA512;Ae.update(se.subarray(0,32)),Ae.update(ie),Ae.update(re);const Se=Ae.digest();return z(Se),E(ee,de,Se),C(de,se.subarray(32)),ne(ee,de),V(B,ee),!F(se,B)}r.verify=ue;function H(ie){let re=[i(),i(),i(),i()];if(G(re,ie))throw new Error("Ed25519: invalid public key");let se=i(),B=i(),ee=re[1];L(se,l,ee),R(B,l,ee),Y(B,B),v(se,se,B);let de=new Uint8Array(32);return T(de,se),de}r.convertPublicKeyToX25519=H;function fe(ie){const re=(0,t.hash)(ie.subarray(0,32));re[0]&=248,re[31]&=127,re[31]|=64;const se=new Uint8Array(re.subarray(0,32));return(0,n.wipe)(re),se}r.convertSecretKeyToX25519=fe})(mm);const bB="EdDSA",mB="JWT",s5=".",o5="base64url",yB="utf8",wB="utf8",vB=":",EB="did",AB="key",o8="base58btc",_B="z",CB="K36",SB=32;function ym(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function a5(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ym(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function $2(r,e){e||(e=r.reduce((i,s)=>i+s.length,0));const t=a5(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return ym(t)}function IB(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),c=s.charCodeAt(0);if(t[c]!==255)throw new TypeError(s+" is ambiguous");t[c]=i}var l=r.length,h=r.charAt(0),u=Math.log(l)/Math.log(256),p=Math.log(256)/Math.log(l);function b(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var S=0,T=0,F=0,N=_.length;F!==N&&_[F]===0;)F++,S++;for(var O=(N-F)*p+1>>>0,M=new Uint8Array(O);F!==N;){for(var L=_[F],R=0,v=O-1;(L!==0||R<T)&&v!==-1;v--,R++)L+=256*M[v]>>>0,M[v]=L%l>>>0,L=L/l>>>0;if(L!==0)throw new Error("Non-zero carry");T=R,F++}for(var P=O-T;P!==O&&M[P]===0;)P++;for(var Y=h.repeat(S);P<O;++P)Y+=r.charAt(M[P]);return Y}function y(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var S=0;if(_[S]!==" "){for(var T=0,F=0;_[S]===h;)T++,S++;for(var N=(_.length-S)*u+1>>>0,O=new Uint8Array(N);_[S];){var M=t[_.charCodeAt(S)];if(M===255)return;for(var L=0,R=N-1;(M!==0||L<F)&&R!==-1;R--,L++)M+=l*O[R]>>>0,O[R]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");F=L,S++}if(_[S]!==" "){for(var v=N-F;v!==N&&O[v]===0;)v++;for(var P=new Uint8Array(T+(N-v)),Y=T;v!==N;)P[Y++]=O[v++];return P}}}function w(_){var S=y(_);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:y,decode:w}}var DB=IB,TB=DB;const NB=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},OB=r=>new TextEncoder().encode(r),RB=r=>new TextDecoder().decode(r);class MB{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class BB{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return c5(this,e)}}class PB{constructor(e){this.decoders=e}or(e){return c5(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const c5=(r,e)=>new PB({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class FB{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new MB(e,t,n),this.decoder=new BB(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const hx=({name:r,prefix:e,encode:t,decode:n})=>new FB(r,e,t,n),zh=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=TB(t,e);return hx({prefix:r,name:e,encode:n,decode:s=>NB(i(s))})},LB=(r,e,t,n)=>{const i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let s=r.length;for(;r[s-1]==="=";)--s;const c=new Uint8Array(s*t/8|0);let l=0,h=0,u=0;for(let p=0;p<s;++p){const b=i[r[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<t|b,l+=t,l>=8&&(l-=8,c[u++]=255&h>>l)}if(l>=t||255&h<<8-l)throw new SyntaxError("Unexpected end of data");return c},kB=(r,e,t)=>{const n=e[e.length-1]==="=",i=(1<<t)-1;let s="",c=0,l=0;for(let h=0;h<r.length;++h)for(l=l<<8|r[h],c+=8;c>t;)c-=t,s+=e[i&l>>c];if(c&&(s+=e[i&l<<t-c]),n)for(;s.length*t&7;)s+="=";return s},Mn=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>hx({prefix:e,name:r,encode(i){return kB(i,n,t)},decode(i){return LB(i,n,t,r)}}),UB=hx({prefix:"\0",name:"identity",encode:r=>RB(r),decode:r=>OB(r)}),HB=Object.freeze(Object.defineProperty({__proto__:null,identity:UB},Symbol.toStringTag,{value:"Module"})),zB=Mn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),jB=Object.freeze(Object.defineProperty({__proto__:null,base2:zB},Symbol.toStringTag,{value:"Module"})),GB=Mn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),VB=Object.freeze(Object.defineProperty({__proto__:null,base8:GB},Symbol.toStringTag,{value:"Module"})),qB=zh({prefix:"9",name:"base10",alphabet:"0123456789"}),$B=Object.freeze(Object.defineProperty({__proto__:null,base10:qB},Symbol.toStringTag,{value:"Module"})),KB=Mn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),WB=Mn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),YB=Object.freeze(Object.defineProperty({__proto__:null,base16:KB,base16upper:WB},Symbol.toStringTag,{value:"Module"})),XB=Mn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),QB=Mn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ZB=Mn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),JB=Mn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eP=Mn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),tP=Mn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rP=Mn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nP=Mn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),iP=Mn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),sP=Object.freeze(Object.defineProperty({__proto__:null,base32:XB,base32hex:eP,base32hexpad:rP,base32hexpadupper:nP,base32hexupper:tP,base32pad:ZB,base32padupper:JB,base32upper:QB,base32z:iP},Symbol.toStringTag,{value:"Module"})),oP=zh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),aP=zh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),cP=Object.freeze(Object.defineProperty({__proto__:null,base36:oP,base36upper:aP},Symbol.toStringTag,{value:"Module"})),fP=zh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),lP=zh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),uP=Object.freeze(Object.defineProperty({__proto__:null,base58btc:fP,base58flickr:lP},Symbol.toStringTag,{value:"Module"})),hP=Mn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dP=Mn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xP=Mn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),pP=Mn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),gP=Object.freeze(Object.defineProperty({__proto__:null,base64:hP,base64pad:dP,base64url:xP,base64urlpad:pP},Symbol.toStringTag,{value:"Module"})),f5=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),bP=f5.reduce((r,e,t)=>(r[t]=e,r),[]),mP=f5.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function yP(r){return r.reduce((e,t)=>(e+=bP[t],e),"")}function wP(r){const e=[];for(const t of r){const n=mP[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const vP=hx({prefix:"🚀",name:"base256emoji",encode:yP,decode:wP}),EP=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:vP},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const a8={...HB,...jB,...VB,...$B,...YB,...sP,...cP,...uP,...gP,...EP};function l5(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const c8=l5("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),fg=l5("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=a5(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),u5={utf8:c8,"utf-8":c8,hex:a8.base16,latin1:fg,ascii:fg,binary:fg,...a8};function Rn(r,e="utf8"){const t=u5[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}function Wn(r,e="utf8"){const t=u5[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ym(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function v1(r){return Rn(Wn(Hh(r),yB),o5)}function h5(r){const e=Wn(CB,o8),t=_B+Rn($2([e,r]),o8);return[EB,AB,t].join(vB)}function AP(r){return Rn(r,o5)}function _P(r){return Wn([v1(r.header),v1(r.payload)].join(s5),wB)}function CP(r){return[v1(r.header),v1(r.payload),AP(r.signature)].join(s5)}function f8(r=Pl.randomBytes(SB)){return mm.generateKeyPairFromSeed(r)}async function SP(r,e,t,n,i=tt.fromMiliseconds(Date.now())){const s={alg:bB,typ:mB},c=h5(n.publicKey),l=i+t,h={iss:c,sub:r,aud:e,iat:i,exp:l},u=_P({header:s,payload:h}),p=mm.sign(n.secretKey,u);return CP({header:s,payload:h,signature:p})}var wm={},dx={};Object.defineProperty(dx,"__esModule",{value:!0});var kn=qt,K2=Li,IP=20;function DP(r,e,t){for(var n=1634760805,i=857760878,s=2036477234,c=1797285236,l=t[3]<<24|t[2]<<16|t[1]<<8|t[0],h=t[7]<<24|t[6]<<16|t[5]<<8|t[4],u=t[11]<<24|t[10]<<16|t[9]<<8|t[8],p=t[15]<<24|t[14]<<16|t[13]<<8|t[12],b=t[19]<<24|t[18]<<16|t[17]<<8|t[16],y=t[23]<<24|t[22]<<16|t[21]<<8|t[20],w=t[27]<<24|t[26]<<16|t[25]<<8|t[24],_=t[31]<<24|t[30]<<16|t[29]<<8|t[28],S=e[3]<<24|e[2]<<16|e[1]<<8|e[0],T=e[7]<<24|e[6]<<16|e[5]<<8|e[4],F=e[11]<<24|e[10]<<16|e[9]<<8|e[8],N=e[15]<<24|e[14]<<16|e[13]<<8|e[12],O=n,M=i,L=s,R=c,v=l,P=h,Y=u,J=p,ne=b,le=y,V=w,E=_,C=S,U=T,j=F,K=N,X=0;X<IP;X+=2)O=O+v|0,C^=O,C=C>>>16|C<<16,ne=ne+C|0,v^=ne,v=v>>>20|v<<12,M=M+P|0,U^=M,U=U>>>16|U<<16,le=le+U|0,P^=le,P=P>>>20|P<<12,L=L+Y|0,j^=L,j=j>>>16|j<<16,V=V+j|0,Y^=V,Y=Y>>>20|Y<<12,R=R+J|0,K^=R,K=K>>>16|K<<16,E=E+K|0,J^=E,J=J>>>20|J<<12,L=L+Y|0,j^=L,j=j>>>24|j<<8,V=V+j|0,Y^=V,Y=Y>>>25|Y<<7,R=R+J|0,K^=R,K=K>>>24|K<<8,E=E+K|0,J^=E,J=J>>>25|J<<7,M=M+P|0,U^=M,U=U>>>24|U<<8,le=le+U|0,P^=le,P=P>>>25|P<<7,O=O+v|0,C^=O,C=C>>>24|C<<8,ne=ne+C|0,v^=ne,v=v>>>25|v<<7,O=O+P|0,K^=O,K=K>>>16|K<<16,V=V+K|0,P^=V,P=P>>>20|P<<12,M=M+Y|0,C^=M,C=C>>>16|C<<16,E=E+C|0,Y^=E,Y=Y>>>20|Y<<12,L=L+J|0,U^=L,U=U>>>16|U<<16,ne=ne+U|0,J^=ne,J=J>>>20|J<<12,R=R+v|0,j^=R,j=j>>>16|j<<16,le=le+j|0,v^=le,v=v>>>20|v<<12,L=L+J|0,U^=L,U=U>>>24|U<<8,ne=ne+U|0,J^=ne,J=J>>>25|J<<7,R=R+v|0,j^=R,j=j>>>24|j<<8,le=le+j|0,v^=le,v=v>>>25|v<<7,M=M+Y|0,C^=M,C=C>>>24|C<<8,E=E+C|0,Y^=E,Y=Y>>>25|Y<<7,O=O+P|0,K^=O,K=K>>>24|K<<8,V=V+K|0,P^=V,P=P>>>25|P<<7;kn.writeUint32LE(O+n|0,r,0),kn.writeUint32LE(M+i|0,r,4),kn.writeUint32LE(L+s|0,r,8),kn.writeUint32LE(R+c|0,r,12),kn.writeUint32LE(v+l|0,r,16),kn.writeUint32LE(P+h|0,r,20),kn.writeUint32LE(Y+u|0,r,24),kn.writeUint32LE(J+p|0,r,28),kn.writeUint32LE(ne+b|0,r,32),kn.writeUint32LE(le+y|0,r,36),kn.writeUint32LE(V+w|0,r,40),kn.writeUint32LE(E+_|0,r,44),kn.writeUint32LE(C+S|0,r,48),kn.writeUint32LE(U+T|0,r,52),kn.writeUint32LE(j+F|0,r,56),kn.writeUint32LE(K+N|0,r,60)}function d5(r,e,t,n,i){if(i===void 0&&(i=0),r.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<t.length)throw new Error("ChaCha: destination is shorter than source");var s,c;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),c=s.length-e.length,s.set(e,c)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,c=i}for(var l=new Uint8Array(64),h=0;h<t.length;h+=64){DP(l,s,r);for(var u=h;u<h+64&&u<t.length;u++)n[u]=t[u]^l[u-h];NP(s,0,c)}return K2.wipe(l),i===0&&K2.wipe(s),n}dx.streamXOR=d5;function TP(r,e,t,n){return n===void 0&&(n=0),K2.wipe(t),d5(r,e,t,t,n)}dx.stream=TP;function NP(r,e,t){for(var n=1;t--;)n=n+(r[e]&255)|0,r[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var x5={},h0={};Object.defineProperty(h0,"__esModule",{value:!0});function OP(r,e,t){return~(r-1)&e|r-1&t}h0.select=OP;function RP(r,e){return(r|0)-(e|0)-1>>>31&1}h0.lessOrEqual=RP;function p5(r,e){if(r.length!==e.length)return 0;for(var t=0,n=0;n<r.length;n++)t|=r[n]^e[n];return 1&t-1>>>8}h0.compare=p5;function MP(r,e){return r.length===0||e.length===0?!1:p5(r,e)!==0}h0.equal=MP;(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=h0,t=Li;r.DIGEST_LENGTH=16;var n=function(){function c(l){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var h=l[0]|l[1]<<8;this._r[0]=h&8191;var u=l[2]|l[3]<<8;this._r[1]=(h>>>13|u<<3)&8191;var p=l[4]|l[5]<<8;this._r[2]=(u>>>10|p<<6)&7939;var b=l[6]|l[7]<<8;this._r[3]=(p>>>7|b<<9)&8191;var y=l[8]|l[9]<<8;this._r[4]=(b>>>4|y<<12)&255,this._r[5]=y>>>1&8190;var w=l[10]|l[11]<<8;this._r[6]=(y>>>14|w<<2)&8191;var _=l[12]|l[13]<<8;this._r[7]=(w>>>11|_<<5)&8065;var S=l[14]|l[15]<<8;this._r[8]=(_>>>8|S<<8)&8191,this._r[9]=S>>>5&127,this._pad[0]=l[16]|l[17]<<8,this._pad[1]=l[18]|l[19]<<8,this._pad[2]=l[20]|l[21]<<8,this._pad[3]=l[22]|l[23]<<8,this._pad[4]=l[24]|l[25]<<8,this._pad[5]=l[26]|l[27]<<8,this._pad[6]=l[28]|l[29]<<8,this._pad[7]=l[30]|l[31]<<8}return c.prototype._blocks=function(l,h,u){for(var p=this._fin?0:2048,b=this._h[0],y=this._h[1],w=this._h[2],_=this._h[3],S=this._h[4],T=this._h[5],F=this._h[6],N=this._h[7],O=this._h[8],M=this._h[9],L=this._r[0],R=this._r[1],v=this._r[2],P=this._r[3],Y=this._r[4],J=this._r[5],ne=this._r[6],le=this._r[7],V=this._r[8],E=this._r[9];u>=16;){var C=l[h+0]|l[h+1]<<8;b+=C&8191;var U=l[h+2]|l[h+3]<<8;y+=(C>>>13|U<<3)&8191;var j=l[h+4]|l[h+5]<<8;w+=(U>>>10|j<<6)&8191;var K=l[h+6]|l[h+7]<<8;_+=(j>>>7|K<<9)&8191;var X=l[h+8]|l[h+9]<<8;S+=(K>>>4|X<<12)&8191,T+=X>>>1&8191;var te=l[h+10]|l[h+11]<<8;F+=(X>>>14|te<<2)&8191;var z=l[h+12]|l[h+13]<<8;N+=(te>>>11|z<<5)&8191;var D=l[h+14]|l[h+15]<<8;O+=(z>>>8|D<<8)&8191,M+=D>>>5|p;var G=0,ue=G;ue+=b*L,ue+=y*(5*E),ue+=w*(5*V),ue+=_*(5*le),ue+=S*(5*ne),G=ue>>>13,ue&=8191,ue+=T*(5*J),ue+=F*(5*Y),ue+=N*(5*P),ue+=O*(5*v),ue+=M*(5*R),G+=ue>>>13,ue&=8191;var H=G;H+=b*R,H+=y*L,H+=w*(5*E),H+=_*(5*V),H+=S*(5*le),G=H>>>13,H&=8191,H+=T*(5*ne),H+=F*(5*J),H+=N*(5*Y),H+=O*(5*P),H+=M*(5*v),G+=H>>>13,H&=8191;var fe=G;fe+=b*v,fe+=y*R,fe+=w*L,fe+=_*(5*E),fe+=S*(5*V),G=fe>>>13,fe&=8191,fe+=T*(5*le),fe+=F*(5*ne),fe+=N*(5*J),fe+=O*(5*Y),fe+=M*(5*P),G+=fe>>>13,fe&=8191;var ie=G;ie+=b*P,ie+=y*v,ie+=w*R,ie+=_*L,ie+=S*(5*E),G=ie>>>13,ie&=8191,ie+=T*(5*V),ie+=F*(5*le),ie+=N*(5*ne),ie+=O*(5*J),ie+=M*(5*Y),G+=ie>>>13,ie&=8191;var re=G;re+=b*Y,re+=y*P,re+=w*v,re+=_*R,re+=S*L,G=re>>>13,re&=8191,re+=T*(5*E),re+=F*(5*V),re+=N*(5*le),re+=O*(5*ne),re+=M*(5*J),G+=re>>>13,re&=8191;var se=G;se+=b*J,se+=y*Y,se+=w*P,se+=_*v,se+=S*R,G=se>>>13,se&=8191,se+=T*L,se+=F*(5*E),se+=N*(5*V),se+=O*(5*le),se+=M*(5*ne),G+=se>>>13,se&=8191;var B=G;B+=b*ne,B+=y*J,B+=w*Y,B+=_*P,B+=S*v,G=B>>>13,B&=8191,B+=T*R,B+=F*L,B+=N*(5*E),B+=O*(5*V),B+=M*(5*le),G+=B>>>13,B&=8191;var ee=G;ee+=b*le,ee+=y*ne,ee+=w*J,ee+=_*Y,ee+=S*P,G=ee>>>13,ee&=8191,ee+=T*v,ee+=F*R,ee+=N*L,ee+=O*(5*E),ee+=M*(5*V),G+=ee>>>13,ee&=8191;var de=G;de+=b*V,de+=y*le,de+=w*ne,de+=_*J,de+=S*Y,G=de>>>13,de&=8191,de+=T*P,de+=F*v,de+=N*R,de+=O*L,de+=M*(5*E),G+=de>>>13,de&=8191;var Ae=G;Ae+=b*E,Ae+=y*V,Ae+=w*le,Ae+=_*ne,Ae+=S*J,G=Ae>>>13,Ae&=8191,Ae+=T*Y,Ae+=F*P,Ae+=N*v,Ae+=O*R,Ae+=M*L,G+=Ae>>>13,Ae&=8191,G=(G<<2)+G|0,G=G+ue|0,ue=G&8191,G=G>>>13,H+=G,b=ue,y=H,w=fe,_=ie,S=re,T=se,F=B,N=ee,O=de,M=Ae,h+=16,u-=16}this._h[0]=b,this._h[1]=y,this._h[2]=w,this._h[3]=_,this._h[4]=S,this._h[5]=T,this._h[6]=F,this._h[7]=N,this._h[8]=O,this._h[9]=M},c.prototype.finish=function(l,h){h===void 0&&(h=0);var u=new Uint16Array(10),p,b,y,w;if(this._leftover){for(w=this._leftover,this._buffer[w++]=1;w<16;w++)this._buffer[w]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(p=this._h[1]>>>13,this._h[1]&=8191,w=2;w<10;w++)this._h[w]+=p,p=this._h[w]>>>13,this._h[w]&=8191;for(this._h[0]+=p*5,p=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=p,p=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=p,u[0]=this._h[0]+5,p=u[0]>>>13,u[0]&=8191,w=1;w<10;w++)u[w]=this._h[w]+p,p=u[w]>>>13,u[w]&=8191;for(u[9]-=8192,b=(p^1)-1,w=0;w<10;w++)u[w]&=b;for(b=~b,w=0;w<10;w++)this._h[w]=this._h[w]&b|u[w];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,y=this._h[0]+this._pad[0],this._h[0]=y&65535,w=1;w<8;w++)y=(this._h[w]+this._pad[w]|0)+(y>>>16)|0,this._h[w]=y&65535;return l[h+0]=this._h[0]>>>0,l[h+1]=this._h[0]>>>8,l[h+2]=this._h[1]>>>0,l[h+3]=this._h[1]>>>8,l[h+4]=this._h[2]>>>0,l[h+5]=this._h[2]>>>8,l[h+6]=this._h[3]>>>0,l[h+7]=this._h[3]>>>8,l[h+8]=this._h[4]>>>0,l[h+9]=this._h[4]>>>8,l[h+10]=this._h[5]>>>0,l[h+11]=this._h[5]>>>8,l[h+12]=this._h[6]>>>0,l[h+13]=this._h[6]>>>8,l[h+14]=this._h[7]>>>0,l[h+15]=this._h[7]>>>8,this._finished=!0,this},c.prototype.update=function(l){var h=0,u=l.length,p;if(this._leftover){p=16-this._leftover,p>u&&(p=u);for(var b=0;b<p;b++)this._buffer[this._leftover+b]=l[h+b];if(u-=p,h+=p,this._leftover+=p,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(p=u-u%16,this._blocks(l,h,p),h+=p,u-=p),u){for(var b=0;b<u;b++)this._buffer[this._leftover+b]=l[h+b];this._leftover+=u}return this},c.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var l=new Uint8Array(16);return this.finish(l),l},c.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},c}();r.Poly1305=n;function i(c,l){var h=new n(c);h.update(l);var u=h.digest();return h.clean(),u}r.oneTimeAuth=i;function s(c,l){return c.length!==r.DIGEST_LENGTH||l.length!==r.DIGEST_LENGTH?!1:e.equal(c,l)}r.equal=s})(x5);(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=dx,t=x5,n=Li,i=qt,s=h0;r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var c=new Uint8Array(16),l=function(){function h(u){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,u.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(u)}return h.prototype.seal=function(u,p,b,y){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var w=new Uint8Array(16);w.set(u,w.length-u.length);var _=new Uint8Array(32);e.stream(this._key,w,_,4);var S=p.length+this.tagLength,T;if(y){if(y.length!==S)throw new Error("ChaCha20Poly1305: incorrect destination length");T=y}else T=new Uint8Array(S);return e.streamXOR(this._key,w,p,T,4),this._authenticate(T.subarray(T.length-this.tagLength,T.length),_,T.subarray(0,T.length-this.tagLength),b),n.wipe(w),T},h.prototype.open=function(u,p,b,y){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(p.length<this.tagLength)return null;var w=new Uint8Array(16);w.set(u,w.length-u.length);var _=new Uint8Array(32);e.stream(this._key,w,_,4);var S=new Uint8Array(this.tagLength);if(this._authenticate(S,_,p.subarray(0,p.length-this.tagLength),b),!s.equal(S,p.subarray(p.length-this.tagLength,p.length)))return null;var T=p.length-this.tagLength,F;if(y){if(y.length!==T)throw new Error("ChaCha20Poly1305: incorrect destination length");F=y}else F=new Uint8Array(T);return e.streamXOR(this._key,w,p.subarray(0,p.length-this.tagLength),F,4),n.wipe(w),F},h.prototype.clean=function(){return n.wipe(this._key),this},h.prototype._authenticate=function(u,p,b,y){var w=new t.Poly1305(p);y&&(w.update(y),y.length%16>0&&w.update(c.subarray(y.length%16))),w.update(b),b.length%16>0&&w.update(c.subarray(b.length%16));var _=new Uint8Array(8);y&&i.writeUint64LE(y.length,_),w.update(_),i.writeUint64LE(b.length,_),w.update(_);for(var S=w.digest(),T=0;T<S.length;T++)u[T]=S[T];w.clean(),n.wipe(S),n.wipe(_)},h}();r.ChaCha20Poly1305=l})(wm);var g5={},jh={},vm={};Object.defineProperty(vm,"__esModule",{value:!0});function BP(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"}vm.isSerializableHash=BP;Object.defineProperty(jh,"__esModule",{value:!0});var $s=vm,PP=h0,FP=Li,b5=function(){function r(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(n).clean():n.set(t);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),$s.isSerializableHash(this._inner)&&$s.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),FP.wipe(n)}return r.prototype.reset=function(){if(!$s.isSerializableHash(this._inner)||!$s.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){$s.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),$s.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(e){return this._inner.update(e),this},r.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(!$s.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(e){if(!$s.isSerializableHash(this._inner)||!$s.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(e){if(!$s.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},r}();jh.HMAC=b5;function LP(r,e,t){var n=new b5(r,e);n.update(t);var i=n.digest();return n.clean(),i}jh.hmac=LP;jh.equal=PP.equal;Object.defineProperty(g5,"__esModule",{value:!0});var l8=jh,u8=Li,kP=function(){function r(e,t,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=l8.hmac(this._hash,n,t);this._hmac=new l8.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[n]=this._buffer[this._bufpos++];return t},r.prototype.clean=function(){this._hmac.clean(),u8.wipe(this._buffer),u8.wipe(this._counter),this._bufpos=0},r}(),UP=g5.HKDF=kP,Ac={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=qt,t=Li;r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var n=function(){function l(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},l.prototype.update=function(h,u){if(u===void 0&&(u=h.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var p=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&u>0;)this._buffer[this._bufferLength++]=h[p++],u--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(p=s(this._temp,this._state,h,p,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=h[p++],u--;return this},l.prototype.finish=function(h){if(!this._finished){var u=this._bytesHashed,p=this._bufferLength,b=u/536870912|0,y=u<<3,w=u%64<56?64:128;this._buffer[p]=128;for(var _=p+1;_<w-8;_++)this._buffer[_]=0;e.writeUint32BE(b,this._buffer,w-8),e.writeUint32BE(y,this._buffer,w-4),s(this._temp,this._state,this._buffer,0,w),this._finished=!0}for(var _=0;_<this.digestLength/4;_++)e.writeUint32BE(this._state[_],h,_*4);return this},l.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(h){return this._state.set(h.state),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(h){t.wipe(h.state),h.buffer&&t.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},l}();r.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(l,h,u,p,b){for(;b>=64;){for(var y=h[0],w=h[1],_=h[2],S=h[3],T=h[4],F=h[5],N=h[6],O=h[7],M=0;M<16;M++){var L=p+M*4;l[M]=e.readUint32BE(u,L)}for(var M=16;M<64;M++){var R=l[M-2],v=(R>>>17|R<<15)^(R>>>19|R<<13)^R>>>10;R=l[M-15];var P=(R>>>7|R<<25)^(R>>>18|R<<14)^R>>>3;l[M]=(v+l[M-7]|0)+(P+l[M-16]|0)}for(var M=0;M<64;M++){var v=(((T>>>6|T<<26)^(T>>>11|T<<21)^(T>>>25|T<<7))+(T&F^~T&N)|0)+(O+(i[M]+l[M]|0)|0)|0,P=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&w^y&_^w&_)|0;O=N,N=F,F=T,T=S+v|0,S=_,_=w,w=y,y=v+P|0}h[0]+=y,h[1]+=w,h[2]+=_,h[3]+=S,h[4]+=T,h[5]+=F,h[6]+=N,h[7]+=O,p+=64,b-=64}return p}function c(l){var h=new n;h.update(l);var u=h.digest();return h.clean(),u}r.hash=c})(Ac);var Em={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=Pl,t=Li;r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function n(M){const L=new Float64Array(16);if(M)for(let R=0;R<M.length;R++)L[R]=M[R];return L}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function c(M){let L=1;for(let R=0;R<16;R++){let v=M[R]+L+65535;L=Math.floor(v/65536),M[R]=v-L*65536}M[0]+=L-1+37*(L-1)}function l(M,L,R){const v=~(R-1);for(let P=0;P<16;P++){const Y=v&(M[P]^L[P]);M[P]^=Y,L[P]^=Y}}function h(M,L){const R=n(),v=n();for(let P=0;P<16;P++)v[P]=L[P];c(v),c(v),c(v);for(let P=0;P<2;P++){R[0]=v[0]-65517;for(let J=1;J<15;J++)R[J]=v[J]-65535-(R[J-1]>>16&1),R[J-1]&=65535;R[15]=v[15]-32767-(R[14]>>16&1);const Y=R[15]>>16&1;R[14]&=65535,l(v,R,1-Y)}for(let P=0;P<16;P++)M[2*P]=v[P]&255,M[2*P+1]=v[P]>>8}function u(M,L){for(let R=0;R<16;R++)M[R]=L[2*R]+(L[2*R+1]<<8);M[15]&=32767}function p(M,L,R){for(let v=0;v<16;v++)M[v]=L[v]+R[v]}function b(M,L,R){for(let v=0;v<16;v++)M[v]=L[v]-R[v]}function y(M,L,R){let v,P,Y=0,J=0,ne=0,le=0,V=0,E=0,C=0,U=0,j=0,K=0,X=0,te=0,z=0,D=0,G=0,ue=0,H=0,fe=0,ie=0,re=0,se=0,B=0,ee=0,de=0,Ae=0,Se=0,Pe=0,pt=0,je=0,Ge=0,Je=0,Ze=R[0],Ce=R[1],ut=R[2],Ye=R[3],$e=R[4],_t=R[5],He=R[6],We=R[7],wt=R[8],Ve=R[9],Xe=R[10],Ct=R[11],nt=R[12],Ke=R[13],Ie=R[14],qe=R[15];v=L[0],Y+=v*Ze,J+=v*Ce,ne+=v*ut,le+=v*Ye,V+=v*$e,E+=v*_t,C+=v*He,U+=v*We,j+=v*wt,K+=v*Ve,X+=v*Xe,te+=v*Ct,z+=v*nt,D+=v*Ke,G+=v*Ie,ue+=v*qe,v=L[1],J+=v*Ze,ne+=v*Ce,le+=v*ut,V+=v*Ye,E+=v*$e,C+=v*_t,U+=v*He,j+=v*We,K+=v*wt,X+=v*Ve,te+=v*Xe,z+=v*Ct,D+=v*nt,G+=v*Ke,ue+=v*Ie,H+=v*qe,v=L[2],ne+=v*Ze,le+=v*Ce,V+=v*ut,E+=v*Ye,C+=v*$e,U+=v*_t,j+=v*He,K+=v*We,X+=v*wt,te+=v*Ve,z+=v*Xe,D+=v*Ct,G+=v*nt,ue+=v*Ke,H+=v*Ie,fe+=v*qe,v=L[3],le+=v*Ze,V+=v*Ce,E+=v*ut,C+=v*Ye,U+=v*$e,j+=v*_t,K+=v*He,X+=v*We,te+=v*wt,z+=v*Ve,D+=v*Xe,G+=v*Ct,ue+=v*nt,H+=v*Ke,fe+=v*Ie,ie+=v*qe,v=L[4],V+=v*Ze,E+=v*Ce,C+=v*ut,U+=v*Ye,j+=v*$e,K+=v*_t,X+=v*He,te+=v*We,z+=v*wt,D+=v*Ve,G+=v*Xe,ue+=v*Ct,H+=v*nt,fe+=v*Ke,ie+=v*Ie,re+=v*qe,v=L[5],E+=v*Ze,C+=v*Ce,U+=v*ut,j+=v*Ye,K+=v*$e,X+=v*_t,te+=v*He,z+=v*We,D+=v*wt,G+=v*Ve,ue+=v*Xe,H+=v*Ct,fe+=v*nt,ie+=v*Ke,re+=v*Ie,se+=v*qe,v=L[6],C+=v*Ze,U+=v*Ce,j+=v*ut,K+=v*Ye,X+=v*$e,te+=v*_t,z+=v*He,D+=v*We,G+=v*wt,ue+=v*Ve,H+=v*Xe,fe+=v*Ct,ie+=v*nt,re+=v*Ke,se+=v*Ie,B+=v*qe,v=L[7],U+=v*Ze,j+=v*Ce,K+=v*ut,X+=v*Ye,te+=v*$e,z+=v*_t,D+=v*He,G+=v*We,ue+=v*wt,H+=v*Ve,fe+=v*Xe,ie+=v*Ct,re+=v*nt,se+=v*Ke,B+=v*Ie,ee+=v*qe,v=L[8],j+=v*Ze,K+=v*Ce,X+=v*ut,te+=v*Ye,z+=v*$e,D+=v*_t,G+=v*He,ue+=v*We,H+=v*wt,fe+=v*Ve,ie+=v*Xe,re+=v*Ct,se+=v*nt,B+=v*Ke,ee+=v*Ie,de+=v*qe,v=L[9],K+=v*Ze,X+=v*Ce,te+=v*ut,z+=v*Ye,D+=v*$e,G+=v*_t,ue+=v*He,H+=v*We,fe+=v*wt,ie+=v*Ve,re+=v*Xe,se+=v*Ct,B+=v*nt,ee+=v*Ke,de+=v*Ie,Ae+=v*qe,v=L[10],X+=v*Ze,te+=v*Ce,z+=v*ut,D+=v*Ye,G+=v*$e,ue+=v*_t,H+=v*He,fe+=v*We,ie+=v*wt,re+=v*Ve,se+=v*Xe,B+=v*Ct,ee+=v*nt,de+=v*Ke,Ae+=v*Ie,Se+=v*qe,v=L[11],te+=v*Ze,z+=v*Ce,D+=v*ut,G+=v*Ye,ue+=v*$e,H+=v*_t,fe+=v*He,ie+=v*We,re+=v*wt,se+=v*Ve,B+=v*Xe,ee+=v*Ct,de+=v*nt,Ae+=v*Ke,Se+=v*Ie,Pe+=v*qe,v=L[12],z+=v*Ze,D+=v*Ce,G+=v*ut,ue+=v*Ye,H+=v*$e,fe+=v*_t,ie+=v*He,re+=v*We,se+=v*wt,B+=v*Ve,ee+=v*Xe,de+=v*Ct,Ae+=v*nt,Se+=v*Ke,Pe+=v*Ie,pt+=v*qe,v=L[13],D+=v*Ze,G+=v*Ce,ue+=v*ut,H+=v*Ye,fe+=v*$e,ie+=v*_t,re+=v*He,se+=v*We,B+=v*wt,ee+=v*Ve,de+=v*Xe,Ae+=v*Ct,Se+=v*nt,Pe+=v*Ke,pt+=v*Ie,je+=v*qe,v=L[14],G+=v*Ze,ue+=v*Ce,H+=v*ut,fe+=v*Ye,ie+=v*$e,re+=v*_t,se+=v*He,B+=v*We,ee+=v*wt,de+=v*Ve,Ae+=v*Xe,Se+=v*Ct,Pe+=v*nt,pt+=v*Ke,je+=v*Ie,Ge+=v*qe,v=L[15],ue+=v*Ze,H+=v*Ce,fe+=v*ut,ie+=v*Ye,re+=v*$e,se+=v*_t,B+=v*He,ee+=v*We,de+=v*wt,Ae+=v*Ve,Se+=v*Xe,Pe+=v*Ct,pt+=v*nt,je+=v*Ke,Ge+=v*Ie,Je+=v*qe,Y+=38*H,J+=38*fe,ne+=38*ie,le+=38*re,V+=38*se,E+=38*B,C+=38*ee,U+=38*de,j+=38*Ae,K+=38*Se,X+=38*Pe,te+=38*pt,z+=38*je,D+=38*Ge,G+=38*Je,P=1,v=Y+P+65535,P=Math.floor(v/65536),Y=v-P*65536,v=J+P+65535,P=Math.floor(v/65536),J=v-P*65536,v=ne+P+65535,P=Math.floor(v/65536),ne=v-P*65536,v=le+P+65535,P=Math.floor(v/65536),le=v-P*65536,v=V+P+65535,P=Math.floor(v/65536),V=v-P*65536,v=E+P+65535,P=Math.floor(v/65536),E=v-P*65536,v=C+P+65535,P=Math.floor(v/65536),C=v-P*65536,v=U+P+65535,P=Math.floor(v/65536),U=v-P*65536,v=j+P+65535,P=Math.floor(v/65536),j=v-P*65536,v=K+P+65535,P=Math.floor(v/65536),K=v-P*65536,v=X+P+65535,P=Math.floor(v/65536),X=v-P*65536,v=te+P+65535,P=Math.floor(v/65536),te=v-P*65536,v=z+P+65535,P=Math.floor(v/65536),z=v-P*65536,v=D+P+65535,P=Math.floor(v/65536),D=v-P*65536,v=G+P+65535,P=Math.floor(v/65536),G=v-P*65536,v=ue+P+65535,P=Math.floor(v/65536),ue=v-P*65536,Y+=P-1+37*(P-1),P=1,v=Y+P+65535,P=Math.floor(v/65536),Y=v-P*65536,v=J+P+65535,P=Math.floor(v/65536),J=v-P*65536,v=ne+P+65535,P=Math.floor(v/65536),ne=v-P*65536,v=le+P+65535,P=Math.floor(v/65536),le=v-P*65536,v=V+P+65535,P=Math.floor(v/65536),V=v-P*65536,v=E+P+65535,P=Math.floor(v/65536),E=v-P*65536,v=C+P+65535,P=Math.floor(v/65536),C=v-P*65536,v=U+P+65535,P=Math.floor(v/65536),U=v-P*65536,v=j+P+65535,P=Math.floor(v/65536),j=v-P*65536,v=K+P+65535,P=Math.floor(v/65536),K=v-P*65536,v=X+P+65535,P=Math.floor(v/65536),X=v-P*65536,v=te+P+65535,P=Math.floor(v/65536),te=v-P*65536,v=z+P+65535,P=Math.floor(v/65536),z=v-P*65536,v=D+P+65535,P=Math.floor(v/65536),D=v-P*65536,v=G+P+65535,P=Math.floor(v/65536),G=v-P*65536,v=ue+P+65535,P=Math.floor(v/65536),ue=v-P*65536,Y+=P-1+37*(P-1),M[0]=Y,M[1]=J,M[2]=ne,M[3]=le,M[4]=V,M[5]=E,M[6]=C,M[7]=U,M[8]=j,M[9]=K,M[10]=X,M[11]=te,M[12]=z,M[13]=D,M[14]=G,M[15]=ue}function w(M,L){y(M,L,L)}function _(M,L){const R=n();for(let v=0;v<16;v++)R[v]=L[v];for(let v=253;v>=0;v--)w(R,R),v!==2&&v!==4&&y(R,R,L);for(let v=0;v<16;v++)M[v]=R[v]}function S(M,L){const R=new Uint8Array(32),v=new Float64Array(80),P=n(),Y=n(),J=n(),ne=n(),le=n(),V=n();for(let j=0;j<31;j++)R[j]=M[j];R[31]=M[31]&127|64,R[0]&=248,u(v,L);for(let j=0;j<16;j++)Y[j]=v[j];P[0]=ne[0]=1;for(let j=254;j>=0;--j){const K=R[j>>>3]>>>(j&7)&1;l(P,Y,K),l(J,ne,K),p(le,P,J),b(P,P,J),p(J,Y,ne),b(Y,Y,ne),w(ne,le),w(V,P),y(P,J,P),y(J,Y,le),p(le,P,J),b(P,P,J),w(Y,P),b(J,ne,V),y(P,J,s),p(P,P,ne),y(J,J,P),y(P,ne,V),y(ne,Y,v),w(Y,le),l(P,Y,K),l(J,ne,K)}for(let j=0;j<16;j++)v[j+16]=P[j],v[j+32]=J[j],v[j+48]=Y[j],v[j+64]=ne[j];const E=v.subarray(32),C=v.subarray(16);_(E,E),y(C,C,E);const U=new Uint8Array(32);return h(U,C),U}r.scalarMult=S;function T(M){return S(M,i)}r.scalarMultBase=T;function F(M){if(M.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const L=new Uint8Array(M);return{publicKey:T(L),secretKey:L}}r.generateKeyPairFromSeed=F;function N(M){const L=(0,e.randomBytes)(32,M),R=F(L);return(0,t.wipe)(L),R}r.generateKeyPair=N;function O(M,L,R=!1){if(M.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(L.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const v=S(M,L);if(R){let P=0;for(let Y=0;Y<v.length;Y++)P|=v[Y];if(P===0)throw new Error("X25519: invalid shared key")}return v}r.sharedKey=O})(Em);var h8=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},HP=function(){function r(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}return r}(),zP=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}(),jP=function(){function r(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"}return r}(),GP=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),VP=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),qP=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,$P=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,d8=3,KP=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",qP]],x8=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function WP(r){return r?p8(r):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new VP:typeof navigator<"u"?p8(navigator.userAgent):QP()}function YP(r){return r!==""&&KP.reduce(function(e,t){var n=t[0],i=t[1];if(e)return e;var s=i.exec(r);return!!s&&[n,s]},!1)}function p8(r){var e=YP(r);if(!e)return null;var t=e[0],n=e[1];if(t==="searchbot")return new GP;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<d8&&(i=h8(h8([],i,!0),ZP(d8-i.length),!0)):i=[];var s=i.join("."),c=XP(r),l=$P.exec(r);return l&&l[1]?new jP(t,s,c,l[1]):new HP(t,s,c)}function XP(r){for(var e=0,t=x8.length;e<t;e++){var n=x8[e],i=n[0],s=n[1],c=s.exec(r);if(c)return i}return null}function QP(){var r=typeof process<"u"&&process.version;return r?new zP(process.version.slice(1)):null}function ZP(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.getLocalStorage=Nr.getLocalStorageOrThrow=Nr.getCrypto=Nr.getCryptoOrThrow=m5=Nr.getLocation=Nr.getLocationOrThrow=kl=Nr.getNavigator=Nr.getNavigatorOrThrow=Ll=Nr.getDocument=Nr.getDocumentOrThrow=Nr.getFromWindowOrThrow=Nr.getFromWindow=void 0;function _c(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}Nr.getFromWindow=_c;function Fl(r){const e=_c(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}Nr.getFromWindowOrThrow=Fl;function JP(){return Fl("document")}Nr.getDocumentOrThrow=JP;function eF(){return _c("document")}var Ll=Nr.getDocument=eF;function tF(){return Fl("navigator")}Nr.getNavigatorOrThrow=tF;function rF(){return _c("navigator")}var kl=Nr.getNavigator=rF;function nF(){return Fl("location")}Nr.getLocationOrThrow=nF;function iF(){return _c("location")}var m5=Nr.getLocation=iF;function sF(){return Fl("crypto")}Nr.getCryptoOrThrow=sF;function oF(){return _c("crypto")}Nr.getCrypto=oF;function aF(){return Fl("localStorage")}Nr.getLocalStorageOrThrow=aF;function cF(){return _c("localStorage")}Nr.getLocalStorage=cF;var Am={};Object.defineProperty(Am,"__esModule",{value:!0});var y5=Am.getWindowMetadata=void 0;const g8=Nr;function fF(){let r,e;try{r=g8.getDocumentOrThrow(),e=g8.getLocationOrThrow()}catch{return null}function t(){const b=r.getElementsByTagName("link"),y=[];for(let w=0;w<b.length;w++){const _=b[w],S=_.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const T=_.getAttribute("href");if(T)if(T.toLowerCase().indexOf("https:")===-1&&T.toLowerCase().indexOf("http:")===-1&&T.indexOf("//")!==0){let F=e.protocol+"//"+e.host;if(T.indexOf("/")===0)F+=T;else{const N=e.pathname.split("/");N.pop();const O=N.join("/");F+=O+"/"+T}y.push(F)}else if(T.indexOf("//")===0){const F=e.protocol+T;y.push(F)}else y.push(T)}}return y}function n(...b){const y=r.getElementsByTagName("meta");for(let w=0;w<y.length;w++){const _=y[w],S=["itemprop","property","name"].map(T=>_.getAttribute(T)).filter(T=>T?b.includes(T):!1);if(S.length&&S){const T=_.getAttribute("content");if(T)return T}}return""}function i(){let b=n("name","og:site_name","og:title","twitter:title");return b||(b=r.title),b}function s(){return n("description","og:description","twitter:description","keywords")}const c=i(),l=s(),h=e.origin,u=t();return{description:l,url:h,icons:u,name:c}}y5=Am.getWindowMetadata=fF;var eh={},lF=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),w5="%[a-f0-9]{2}",b8=new RegExp("("+w5+")|([^%]+?)","gi"),m8=new RegExp("("+w5+")+","gi");function W2(r,e){try{return[decodeURIComponent(r.join(""))]}catch{}if(r.length===1)return r;e=e||1;var t=r.slice(0,e),n=r.slice(e);return Array.prototype.concat.call([],W2(t),W2(n))}function uF(r){try{return decodeURIComponent(r)}catch{for(var e=r.match(b8)||[],t=1;t<e.length;t++)r=W2(e,t).join(""),e=r.match(b8)||[];return r}}function hF(r){for(var e={"%FE%FF":"��","%FF%FE":"��"},t=m8.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var n=uF(t[0]);n!==t[0]&&(e[t[0]]=n)}t=m8.exec(r)}e["%C2"]="�";for(var i=Object.keys(e),s=0;s<i.length;s++){var c=i[s];r=r.replace(new RegExp(c,"g"),e[c])}return r}var dF=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return hF(r)}},xF=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];const t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]},pF=function(r,e){for(var t={},n=Object.keys(r),i=Array.isArray(e),s=0;s<n.length;s++){var c=n[s],l=r[c];(i?e.indexOf(c)!==-1:e(c,l,r))&&(t[c]=l)}return t};(function(r){const e=lF,t=dF,n=xF,i=pF,s=N=>N==null,c=Symbol("encodeFragmentIdentifier");function l(N){switch(N.arrayFormat){case"index":return O=>(M,L)=>{const R=M.length;return L===void 0||N.skipNull&&L===null||N.skipEmptyString&&L===""?M:L===null?[...M,[p(O,N),"[",R,"]"].join("")]:[...M,[p(O,N),"[",p(R,N),"]=",p(L,N)].join("")]};case"bracket":return O=>(M,L)=>L===void 0||N.skipNull&&L===null||N.skipEmptyString&&L===""?M:L===null?[...M,[p(O,N),"[]"].join("")]:[...M,[p(O,N),"[]=",p(L,N)].join("")];case"colon-list-separator":return O=>(M,L)=>L===void 0||N.skipNull&&L===null||N.skipEmptyString&&L===""?M:L===null?[...M,[p(O,N),":list="].join("")]:[...M,[p(O,N),":list=",p(L,N)].join("")];case"comma":case"separator":case"bracket-separator":{const O=N.arrayFormat==="bracket-separator"?"[]=":"=";return M=>(L,R)=>R===void 0||N.skipNull&&R===null||N.skipEmptyString&&R===""?L:(R=R===null?"":R,L.length===0?[[p(M,N),O,p(R,N)].join("")]:[[L,p(R,N)].join(N.arrayFormatSeparator)])}default:return O=>(M,L)=>L===void 0||N.skipNull&&L===null||N.skipEmptyString&&L===""?M:L===null?[...M,p(O,N)]:[...M,[p(O,N),"=",p(L,N)].join("")]}}function h(N){let O;switch(N.arrayFormat){case"index":return(M,L,R)=>{if(O=/\[(\d*)\]$/.exec(M),M=M.replace(/\[\d*\]$/,""),!O){R[M]=L;return}R[M]===void 0&&(R[M]={}),R[M][O[1]]=L};case"bracket":return(M,L,R)=>{if(O=/(\[\])$/.exec(M),M=M.replace(/\[\]$/,""),!O){R[M]=L;return}if(R[M]===void 0){R[M]=[L];return}R[M]=[].concat(R[M],L)};case"colon-list-separator":return(M,L,R)=>{if(O=/(:list)$/.exec(M),M=M.replace(/:list$/,""),!O){R[M]=L;return}if(R[M]===void 0){R[M]=[L];return}R[M]=[].concat(R[M],L)};case"comma":case"separator":return(M,L,R)=>{const v=typeof L=="string"&&L.includes(N.arrayFormatSeparator),P=typeof L=="string"&&!v&&b(L,N).includes(N.arrayFormatSeparator);L=P?b(L,N):L;const Y=v||P?L.split(N.arrayFormatSeparator).map(J=>b(J,N)):L===null?L:b(L,N);R[M]=Y};case"bracket-separator":return(M,L,R)=>{const v=/(\[\])$/.test(M);if(M=M.replace(/\[\]$/,""),!v){R[M]=L&&b(L,N);return}const P=L===null?[]:L.split(N.arrayFormatSeparator).map(Y=>b(Y,N));if(R[M]===void 0){R[M]=P;return}R[M]=[].concat(R[M],P)};default:return(M,L,R)=>{if(R[M]===void 0){R[M]=L;return}R[M]=[].concat(R[M],L)}}}function u(N){if(typeof N!="string"||N.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function p(N,O){return O.encode?O.strict?e(N):encodeURIComponent(N):N}function b(N,O){return O.decode?t(N):N}function y(N){return Array.isArray(N)?N.sort():typeof N=="object"?y(Object.keys(N)).sort((O,M)=>Number(O)-Number(M)).map(O=>N[O]):N}function w(N){const O=N.indexOf("#");return O!==-1&&(N=N.slice(0,O)),N}function _(N){let O="";const M=N.indexOf("#");return M!==-1&&(O=N.slice(M)),O}function S(N){N=w(N);const O=N.indexOf("?");return O===-1?"":N.slice(O+1)}function T(N,O){return O.parseNumbers&&!Number.isNaN(Number(N))&&typeof N=="string"&&N.trim()!==""?N=Number(N):O.parseBooleans&&N!==null&&(N.toLowerCase()==="true"||N.toLowerCase()==="false")&&(N=N.toLowerCase()==="true"),N}function F(N,O){O=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},O),u(O.arrayFormatSeparator);const M=h(O),L=Object.create(null);if(typeof N!="string"||(N=N.trim().replace(/^[?#&]/,""),!N))return L;for(const R of N.split("&")){if(R==="")continue;let[v,P]=n(O.decode?R.replace(/\+/g," "):R,"=");P=P===void 0?null:["comma","separator","bracket-separator"].includes(O.arrayFormat)?P:b(P,O),M(b(v,O),P,L)}for(const R of Object.keys(L)){const v=L[R];if(typeof v=="object"&&v!==null)for(const P of Object.keys(v))v[P]=T(v[P],O);else L[R]=T(v,O)}return O.sort===!1?L:(O.sort===!0?Object.keys(L).sort():Object.keys(L).sort(O.sort)).reduce((R,v)=>{const P=L[v];return P&&typeof P=="object"&&!Array.isArray(P)?R[v]=y(P):R[v]=P,R},Object.create(null))}r.extract=S,r.parse=F,r.stringify=(N,O)=>{if(!N)return"";O=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},O),u(O.arrayFormatSeparator);const M=P=>O.skipNull&&s(N[P])||O.skipEmptyString&&N[P]==="",L=l(O),R={};for(const P of Object.keys(N))M(P)||(R[P]=N[P]);const v=Object.keys(R);return O.sort!==!1&&v.sort(O.sort),v.map(P=>{const Y=N[P];return Y===void 0?"":Y===null?p(P,O):Array.isArray(Y)?Y.length===0&&O.arrayFormat==="bracket-separator"?p(P,O)+"[]":Y.reduce(L(P),[]).join("&"):p(P,O)+"="+p(Y,O)}).filter(P=>P.length>0).join("&")},r.parseUrl=(N,O)=>{O=Object.assign({decode:!0},O);const[M,L]=n(N,"#");return Object.assign({url:M.split("?")[0]||"",query:F(S(N),O)},O&&O.parseFragmentIdentifier&&L?{fragmentIdentifier:b(L,O)}:{})},r.stringifyUrl=(N,O)=>{O=Object.assign({encode:!0,strict:!0,[c]:!0},O);const M=w(N.url).split("?")[0]||"",L=r.extract(N.url),R=r.parse(L,{sort:!1}),v=Object.assign(R,N.query);let P=r.stringify(v,O);P&&(P=`?${P}`);let Y=_(N.url);return N.fragmentIdentifier&&(Y=`#${O[c]?p(N.fragmentIdentifier,O):N.fragmentIdentifier}`),`${M}${P}${Y}`},r.pick=(N,O,M)=>{M=Object.assign({parseFragmentIdentifier:!0,[c]:!1},M);const{url:L,query:R,fragmentIdentifier:v}=r.parseUrl(N,M);return r.stringifyUrl({url:L,query:i(R,O),fragmentIdentifier:v},M)},r.exclude=(N,O,M)=>{const L=Array.isArray(O)?R=>!O.includes(R):(R,v)=>!O(R,v);return r.pick(N,L,M)}})(eh);const gF={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},v5="base10",ai="base16",Y2="base64pad",_m="utf8",E5=0,Ul=1,bF=0,y8=1,X2=12,Cm=32;function mF(){const r=Em.generateKeyPair();return{privateKey:Rn(r.secretKey,ai),publicKey:Rn(r.publicKey,ai)}}function Q2(){const r=Pl.randomBytes(Cm);return Rn(r,ai)}function yF(r,e){const t=Em.sharedKey(Wn(r,ai),Wn(e,ai),!0),n=new UP(Ac.SHA256,t).expand(Cm);return Rn(n,ai)}function wF(r){const e=Ac.hash(Wn(r,ai));return Rn(e,ai)}function Z2(r){const e=Ac.hash(Wn(r,_m));return Rn(e,ai)}function vF(r){return Wn(`${r}`,v5)}function Gh(r){return Number(Rn(r,v5))}function EF(r){const e=vF(typeof r.type<"u"?r.type:E5);if(Gh(e)===Ul&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?Wn(r.senderPublicKey,ai):void 0,n=typeof r.iv<"u"?Wn(r.iv,ai):Pl.randomBytes(X2),i=new wm.ChaCha20Poly1305(Wn(r.symKey,ai)).seal(n,Wn(r.message,_m));return _F({type:e,sealed:i,iv:n,senderPublicKey:t})}function AF(r){const e=new wm.ChaCha20Poly1305(Wn(r.symKey,ai)),{sealed:t,iv:n}=E1(r.encoded),i=e.open(n,t);if(i===null)throw new Error("Failed to decrypt");return Rn(i,_m)}function _F(r){if(Gh(r.type)===Ul){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Rn($2([r.type,r.senderPublicKey,r.iv,r.sealed]),Y2)}return Rn($2([r.type,r.iv,r.sealed]),Y2)}function E1(r){const e=Wn(r,Y2),t=e.slice(bF,y8),n=y8;if(Gh(t)===Ul){const l=n+Cm,h=l+X2,u=e.slice(n,l),p=e.slice(l,h),b=e.slice(h);return{type:t,sealed:b,iv:p,senderPublicKey:u}}const i=n+X2,s=e.slice(n,i),c=e.slice(i);return{type:t,sealed:c,iv:s}}function CF(r,e){const t=E1(r);return A5({type:Gh(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Rn(t.senderPublicKey,ai):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function A5(r){const e=(r==null?void 0:r.type)||E5;if(e===Ul){if(typeof(r==null?void 0:r.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(r==null?void 0:r.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r==null?void 0:r.senderPublicKey,receiverPublicKey:r==null?void 0:r.receiverPublicKey}}function w8(r){return r.type===Ul&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}var SF=Object.defineProperty,v8=Object.getOwnPropertySymbols,IF=Object.prototype.hasOwnProperty,DF=Object.prototype.propertyIsEnumerable,E8=(r,e,t)=>e in r?SF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,A8=(r,e)=>{for(var t in e||(e={}))IF.call(e,t)&&E8(r,t,e[t]);if(v8)for(var t of v8(e))DF.call(e,t)&&E8(r,t,e[t]);return r};const TF="ReactNative",Os={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},NF="js";function Sm(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Hl(){return!Ll()&&!!kl()&&navigator.product===TF}function xx(){return!Sm()&&!!kl()&&!!Ll()}function px(){return Hl()?Os.reactNative:Sm()?Os.node:xx()?Os.browser:Os.unknown}function OF(){var r;try{return Hl()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(r=global.Application)==null?void 0:r.applicationId:void 0}catch{return}}function RF(r,e){let t=eh.parse(r);return t=A8(A8({},t),e),r=eh.stringify(t),r}function MF(){if(px()===Os.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:n}=global.Platform;return[t,n].join("-")}const r=WP();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function BF(){var r;const e=px();return e===Os.browser?[e,((r=m5())==null?void 0:r.host)||"unknown"].join(":"):e}function PF(r,e,t){const n=MF(),i=BF();return[[r,e].join("-"),[NF,t].join("-"),n,i].join("/")}function FF({protocol:r,version:e,relayUrl:t,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:c,bundleId:l}){const h=t.split("?"),u=PF(r,e,n),p={auth:i,ua:u,projectId:s,useOnCloseEvent:c||void 0,origin:l||void 0},b=RF(h[1]||"",p);return h[0]+"?"+b}function _5(r){return Object.fromEntries(r.entries())}function C5(r){return new Map(Object.entries(r))}function LF(r=tt.FIVE_MINUTES,e){const t=tt.toMiliseconds(r||tt.FIVE_MINUTES);let n,i,s;return{resolve:c=>{s&&n&&(clearTimeout(s),n(c))},reject:c=>{s&&i&&(clearTimeout(s),i(c))},done:()=>new Promise((c,l)=>{s=setTimeout(()=>{l(new Error(e))},t),n=c,i=l})}}function th(r,e,t){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(t)),e);try{const c=await r;n(c)}catch(c){i(c)}clearTimeout(s)})}function S5(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function kF(r){return S5("topic",r)}function UF(r){return S5("id",r)}function HF(r){const[e,t]=r.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")n.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))n.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return n}function Hd(r,e){return tt.fromMiliseconds((e||Date.now())+tt.toMiliseconds(r))}function _8(r){return Date.now()>=tt.toMiliseconds(r)}function lg(r,e){return`${r}${e?`:${e}`:""}`}const zF="irn";function J2(r){return(r==null?void 0:r.relay)||{protocol:zF}}function zd(r){const e=gF[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var jF=Object.defineProperty,GF=Object.defineProperties,VF=Object.getOwnPropertyDescriptors,C8=Object.getOwnPropertySymbols,qF=Object.prototype.hasOwnProperty,$F=Object.prototype.propertyIsEnumerable,S8=(r,e,t)=>e in r?jF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,KF=(r,e)=>{for(var t in e||(e={}))qF.call(e,t)&&S8(r,t,e[t]);if(C8)for(var t of C8(e))$F.call(e,t)&&S8(r,t,e[t]);return r},WF=(r,e)=>GF(r,VF(e));function YF(r,e="-"){const t={},n="relay"+e;return Object.keys(r).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),c=r[i];t[s]=c}}),t}function I8(r){r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,n=r.substring(0,e),i=r.substring(e+1,t).split("@"),s=typeof t<"u"?r.substring(t):"",c=eh.parse(s);return{protocol:n,topic:XF(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:YF(c),expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function XF(r){return r.startsWith("//")?r.substring(2):r}function QF(r,e="-"){const t="relay",n={};return Object.keys(r).forEach(i=>{const s=t+e+i;r[i]&&(n[s]=r[i])}),n}function ZF(r){return`${r.protocol}:${r.topic}@${r.version}?`+eh.stringify(WF(KF({symKey:r.symKey},QF(r.relay)),{expiryTimestamp:r.expiryTimestamp}))}const JF={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},eL={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function wr(r,e){const{message:t,code:n}=eL[r];return{message:e?`${t} ${e}`:t,code:n}}function Eu(r,e){const{message:t,code:n}=JF[r];return{message:e?`${t} ${e}`:t,code:n}}function tL(r,e){return Array.isArray(r)?typeof e<"u"&&r.length?r.every(e):!0:!1}function A1(r){return typeof r>"u"}function I5(r,e){return e&&A1(r)?!0:typeof r=="string"&&!!r.trim().length}function rL(r){if(I5(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}function nL(r){var e;return(e=r==null?void 0:r.proposer)==null?void 0:e.publicKey}function iL(r){return r==null?void 0:r.topic}function ug(r){return typeof r<"u"&&typeof r!==null}function D8(){const r=px();return new Promise(e=>{switch(r){case Os.browser:e(sL());break;case Os.reactNative:e(oL());break;case Os.node:e(aL());break;default:e(!0)}})}function sL(){return xx()&&(navigator==null?void 0:navigator.onLine)}async function oL(){if(Hl()&&typeof global<"u"&&global!=null&&global.NetInfo){const r=await(global==null?void 0:global.NetInfo.fetch());return r==null?void 0:r.isConnected}return!0}function aL(){return!0}function cL(r){switch(px()){case Os.browser:fL(r);break;case Os.reactNative:lL(r);break}}function fL(r){!Hl()&&xx()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function lL(r){Hl()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>r(e==null?void 0:e.isConnected)))}const uL="PARSE_ERROR",hL="INVALID_REQUEST",dL="METHOD_NOT_FOUND",xL="INVALID_PARAMS",D5="INTERNAL_ERROR",Im="SERVER_ERROR",pL=[-32700,-32600,-32601,-32602,-32603],Ru={[uL]:{code:-32700,message:"Parse error"},[hL]:{code:-32600,message:"Invalid Request"},[dL]:{code:-32601,message:"Method not found"},[xL]:{code:-32602,message:"Invalid params"},[D5]:{code:-32603,message:"Internal error"},[Im]:{code:-32e3,message:"Server error"}},T5=Im;function gL(r){return pL.includes(r)}function T8(r){return Object.keys(Ru).includes(r)?Ru[r]:Ru[T5]}function bL(r){const e=Object.values(Ru).find(t=>t.code===r);return e||Ru[T5]}function mL(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var N5={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eb=function(r,e){return eb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},eb(r,e)};function yL(r,e){eb(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var tb=function(){return tb=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},tb.apply(this,arguments)};function wL(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function vL(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var l=r.length-1;l>=0;l--)(c=r[l])&&(s=(i<3?c(s):i>3?c(e,t,s):c(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function EL(r,e){return function(t,n){e(t,n,r)}}function AL(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function _L(r,e,t,n){function i(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function l(p){try{u(n.next(p))}catch(b){c(b)}}function h(p){try{u(n.throw(p))}catch(b){c(b)}}function u(p){p.done?s(p.value):i(p.value).then(l,h)}u((n=n.apply(r,e||[])).next())})}function CL(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(p){return h([u,p])}}function h(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(p){u=[6,p],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function SL(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}function IL(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function rb(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function O5(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return s}function DL(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(O5(arguments[e]));return r}function TL(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],c=0,l=s.length;c<l;c++,i++)n[i]=s[c];return n}function rh(r){return this instanceof rh?(this.v=r,this):new rh(r)}function NL(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(y){n[y]&&(i[y]=function(w){return new Promise(function(_,S){s.push([y,w,_,S])>1||l(y,w)})})}function l(y,w){try{h(n[y](w))}catch(_){b(s[0][3],_)}}function h(y){y.value instanceof rh?Promise.resolve(y.value.v).then(u,p):b(s[0][2],y)}function u(y){l("next",y)}function p(y){l("throw",y)}function b(y,w){y(w),s.shift(),s.length&&l(s[0][0],s[0][1])}}function OL(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(c){return(t=!t)?{value:rh(r[i](c)),done:i==="return"}:s?s(c):c}:s}}function RL(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof rb=="function"?rb(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(c){return new Promise(function(l,h){c=r[s](c),i(l,h,c.done,c.value)})}}function i(s,c,l,h){Promise.resolve(h).then(function(u){s({value:u,done:l})},c)}}function ML(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function BL(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function PL(r){return r&&r.__esModule?r:{default:r}}function FL(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function LL(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const kL=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return tb},__asyncDelegator:OL,__asyncGenerator:NL,__asyncValues:RL,__await:rh,__awaiter:_L,__classPrivateFieldGet:FL,__classPrivateFieldSet:LL,__createBinding:SL,__decorate:vL,__exportStar:IL,__extends:yL,__generator:CL,__importDefault:PL,__importStar:BL,__makeTemplateObject:ML,__metadata:AL,__param:EL,__read:O5,__rest:wL,__spread:DL,__spreadArrays:TL,__values:rb},Symbol.toStringTag,{value:"Module"})),UL=mc(kL);var Do={},N8;function HL(){if(N8)return Do;N8=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.isBrowserCryptoAvailable=Do.getSubtleCrypto=Do.getBrowerCrypto=void 0;function r(){return(At==null?void 0:At.crypto)||(At==null?void 0:At.msCrypto)||{}}Do.getBrowerCrypto=r;function e(){const n=r();return n.subtle||n.webkitSubtle}Do.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return Do.isBrowserCryptoAvailable=t,Do}var To={},O8;function zL(){if(O8)return To;O8=1,Object.defineProperty(To,"__esModule",{value:!0}),To.isBrowser=To.isNode=To.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}To.isReactNative=r;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}To.isNode=e;function t(){return!r()&&!e()}return To.isBrowser=t,To}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=UL;e.__exportStar(HL(),r),e.__exportStar(zL(),r)})(N5);function Dm(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function R5(r=6){return BigInt(Dm(r))}function oc(r,e,t){return{id:t||Dm(),jsonrpc:"2.0",method:r,params:e}}function gx(r,e){return{id:r,jsonrpc:"2.0",result:e}}function bx(r,e,t){return{id:r,jsonrpc:"2.0",error:jL(e,t)}}function jL(r,e){return typeof r>"u"?T8(D5):(typeof r=="string"&&(r=Object.assign(Object.assign({},T8(Im)),{message:r})),typeof e<"u"&&(r.data=e),gL(r.code)&&(r=bL(r.code)),r)}class GL{}class VL extends GL{constructor(){super()}}class qL extends VL{constructor(e){super()}}const $L="^wss?:";function KL(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function WL(r,e){const t=KL(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function R8(r){return WL(r,$L)}function YL(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function M5(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function mx(r){return M5(r)&&"method"in r}function Vh(r){return M5(r)&&(Qs(r)||rs(r))}function Qs(r){return"result"in r}function rs(r){return"error"in r}class XL extends qL{constructor(e){super(e),this.events=new cs.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(oc(e.method,e.params||[],e.id||R5().toString()),t)}async requestStrict(e,t){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{rs(s)?i(s.error):n(s.result)});try{await this.connection.send(e,t)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Vh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const QL=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),ZL=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",M8=r=>r.split("?")[0],B8=10,JL=QL();let ek=class{constructor(e){if(this.url=e,this.events=new cs.EventEmitter,this.registering=!1,!R8(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Hh(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!R8(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,n)=>{const i=new URLSearchParams(e).get("origin"),s=N5.isReactNative()?{headers:{origin:i}}:{rejectUnauthorized:!YL(e)},c=new JL(e,[],s);ZL()?c.onerror=l=>{const h=l;n(this.emitError(h.error))}:c.on("error",l=>{n(this.emitError(l))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?ox(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),i=n.message||n.toString(),s=bx(e,i);this.events.emit("payload",s)}parseError(e,t=this.url){return mL(e,M8(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>B8&&this.events.setMaxListeners(B8)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${M8(this.url)}`));return this.events.emit("register_error",t),t}};var _1={exports:{}};_1.exports;(function(r,e){var t=200,n="__lodash_hash_undefined__",i=1,s=2,c=9007199254740991,l="[object Arguments]",h="[object Array]",u="[object AsyncFunction]",p="[object Boolean]",b="[object Date]",y="[object Error]",w="[object Function]",_="[object GeneratorFunction]",S="[object Map]",T="[object Number]",F="[object Null]",N="[object Object]",O="[object Promise]",M="[object Proxy]",L="[object RegExp]",R="[object Set]",v="[object String]",P="[object Symbol]",Y="[object Undefined]",J="[object WeakMap]",ne="[object ArrayBuffer]",le="[object DataView]",V="[object Float32Array]",E="[object Float64Array]",C="[object Int8Array]",U="[object Int16Array]",j="[object Int32Array]",K="[object Uint8Array]",X="[object Uint8ClampedArray]",te="[object Uint16Array]",z="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,G=/^\[object .+?Constructor\]$/,ue=/^(?:0|[1-9]\d*)$/,H={};H[V]=H[E]=H[C]=H[U]=H[j]=H[K]=H[X]=H[te]=H[z]=!0,H[l]=H[h]=H[ne]=H[p]=H[le]=H[b]=H[y]=H[w]=H[S]=H[T]=H[N]=H[L]=H[R]=H[v]=H[J]=!1;var fe=typeof At=="object"&&At&&At.Object===Object&&At,ie=typeof self=="object"&&self&&self.Object===Object&&self,re=fe||ie||Function("return this")(),se=e&&!e.nodeType&&e,B=se&&!0&&r&&!r.nodeType&&r,ee=B&&B.exports===se,de=ee&&fe.process,Ae=function(){try{return de&&de.binding&&de.binding("util")}catch{}}(),Se=Ae&&Ae.isTypedArray;function Pe(ae,be){for(var Re=-1,Qe=ae==null?0:ae.length,br=0,vt=[];++Re<Qe;){var Br=ae[Re];be(Br,Re,ae)&&(vt[br++]=Br)}return vt}function pt(ae,be){for(var Re=-1,Qe=be.length,br=ae.length;++Re<Qe;)ae[br+Re]=be[Re];return ae}function je(ae,be){for(var Re=-1,Qe=ae==null?0:ae.length;++Re<Qe;)if(be(ae[Re],Re,ae))return!0;return!1}function Ge(ae,be){for(var Re=-1,Qe=Array(ae);++Re<ae;)Qe[Re]=be(Re);return Qe}function Je(ae){return function(be){return ae(be)}}function Ze(ae,be){return ae.has(be)}function Ce(ae,be){return ae==null?void 0:ae[be]}function ut(ae){var be=-1,Re=Array(ae.size);return ae.forEach(function(Qe,br){Re[++be]=[br,Qe]}),Re}function Ye(ae,be){return function(Re){return ae(be(Re))}}function $e(ae){var be=-1,Re=Array(ae.size);return ae.forEach(function(Qe){Re[++be]=Qe}),Re}var _t=Array.prototype,He=Function.prototype,We=Object.prototype,wt=re["__core-js_shared__"],Ve=He.toString,Xe=We.hasOwnProperty,Ct=function(){var ae=/[^.]+$/.exec(wt&&wt.keys&&wt.keys.IE_PROTO||"");return ae?"Symbol(src)_1."+ae:""}(),nt=We.toString,Ke=RegExp("^"+Ve.call(Xe).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=ee?re.Buffer:void 0,qe=re.Symbol,rt=re.Uint8Array,Pt=We.propertyIsEnumerable,Ft=_t.splice,Rt=qe?qe.toStringTag:void 0,Qr=Object.getOwnPropertySymbols,st=Ie?Ie.isBuffer:void 0,$t=Ye(Object.keys,Object),fr=va(re,"DataView"),St=va(re,"Map"),dt=va(re,"Promise"),sr=va(re,"Set"),ot=va(re,"WeakMap"),bt=va(Object,"create"),cr=hs(fr),mt=hs(St),Nt=hs(dt),Ot=hs(sr),yt=hs(ot),ct=qe?qe.prototype:void 0,Qt=ct?ct.valueOf:void 0;function ft(ae){var be=-1,Re=ae==null?0:ae.length;for(this.clear();++be<Re;){var Qe=ae[be];this.set(Qe[0],Qe[1])}}function Ne(){this.__data__=bt?bt(null):{},this.size=0}function lr(ae){var be=this.has(ae)&&delete this.__data__[ae];return this.size-=be?1:0,be}function gr(ae){var be=this.__data__;if(bt){var Re=be[ae];return Re===n?void 0:Re}return Xe.call(be,ae)?be[ae]:void 0}function Ht(ae){var be=this.__data__;return bt?be[ae]!==void 0:Xe.call(be,ae)}function Ln(ae,be){var Re=this.__data__;return this.size+=this.has(ae)?0:1,Re[ae]=bt&&be===void 0?n:be,this}ft.prototype.clear=Ne,ft.prototype.delete=lr,ft.prototype.get=gr,ft.prototype.has=Ht,ft.prototype.set=Ln;function Wt(ae){var be=-1,Re=ae==null?0:ae.length;for(this.clear();++be<Re;){var Qe=ae[be];this.set(Qe[0],Qe[1])}}function hr(){this.__data__=[],this.size=0}function Zr(ae){var be=this.__data__,Re=jr(be,ae);if(Re<0)return!1;var Qe=be.length-1;return Re==Qe?be.pop():Ft.call(be,Re,1),--this.size,!0}function Ui(ae){var be=this.__data__,Re=jr(be,ae);return Re<0?void 0:be[Re][1]}function Hi(ae){return jr(this.__data__,ae)>-1}function Jr(ae,be){var Re=this.__data__,Qe=jr(Re,ae);return Qe<0?(++this.size,Re.push([ae,be])):Re[Qe][1]=be,this}Wt.prototype.clear=hr,Wt.prototype.delete=Zr,Wt.prototype.get=Ui,Wt.prototype.has=Hi,Wt.prototype.set=Jr;function dr(ae){var be=-1,Re=ae==null?0:ae.length;for(this.clear();++be<Re;){var Qe=ae[be];this.set(Qe[0],Qe[1])}}function mr(){this.size=0,this.__data__={hash:new ft,map:new(St||Wt),string:new ft}}function ya(ae){var be=vn(this,ae).delete(ae);return this.size-=be?1:0,be}function ci(ae){return vn(this,ae).get(ae)}function Eo(ae){return vn(this,ae).has(ae)}function Oe(ae,be){var Re=vn(this,ae),Qe=Re.size;return Re.set(ae,be),this.size+=Re.size==Qe?0:1,this}dr.prototype.clear=mr,dr.prototype.delete=ya,dr.prototype.get=ci,dr.prototype.has=Eo,dr.prototype.set=Oe;function Ls(ae){var be=-1,Re=ae==null?0:ae.length;for(this.__data__=new dr;++be<Re;)this.add(ae[be])}function Er(ae){return this.__data__.set(ae,n),this}function zi(ae){return this.__data__.has(ae)}Ls.prototype.add=Ls.prototype.push=Er,Ls.prototype.has=zi;function fi(ae){var be=this.__data__=new Wt(ae);this.size=be.size}function tr(){this.__data__=new Wt,this.size=0}function er(ae){var be=this.__data__,Re=be.delete(ae);return this.size=be.size,Re}function Kt(ae){return this.__data__.get(ae)}function Ao(ae){return this.__data__.has(ae)}function _o(ae,be){var Re=this.__data__;if(Re instanceof Wt){var Qe=Re.__data__;if(!St||Qe.length<t-1)return Qe.push([ae,be]),this.size=++Re.size,this;Re=this.__data__=new dr(Qe)}return Re.set(ae,be),this.size=Re.size,this}fi.prototype.clear=tr,fi.prototype.delete=er,fi.prototype.get=Kt,fi.prototype.has=Ao,fi.prototype.set=_o;function $l(ae,be){var Re=Us(ae),Qe=!Re&&on(ae),br=!Re&&!Qe&&It(ae),vt=!Re&&!Qe&&!br&&Yl(ae),Br=Re||Qe||br||vt,tn=Br?Ge(ae.length,String):[],cn=tn.length;for(var Pr in ae)(be||Xe.call(ae,Pr))&&!(Br&&(Pr=="length"||br&&(Pr=="offset"||Pr=="parent")||vt&&(Pr=="buffer"||Pr=="byteLength"||Pr=="byteOffset")||Mr(Pr,cn)))&&tn.push(Pr);return tn}function jr(ae,be){for(var Re=ae.length;Re--;)if(Yh(ae[Re][0],be))return Re;return-1}function ks(ae,be,Re){var Qe=be(ae);return Us(ae)?Qe:pt(Qe,Re(ae))}function x0(ae){return ae==null?ae===void 0?Y:F:Rt&&Rt in Object(ae)?Kl(ae):Sc(ae)}function Gr(ae){return Co(ae)&&x0(ae)==l}function us(ae,be,Re,Qe,br){return ae===be?!0:ae==null||be==null||!Co(ae)&&!Co(be)?ae!==ae&&be!==be:Cx(ae,be,Re,Qe,us,br)}function Cx(ae,be,Re,Qe,br,vt){var Br=Us(ae),tn=Us(be),cn=Br?h:ht(ae),Pr=tn?h:ht(be);cn=cn==l?N:cn,Pr=Pr==l?N:Pr;var Qn=cn==N,_i=Pr==N,Mt=cn==Pr;if(Mt&&It(ae)){if(!It(be))return!1;Br=!0,Qn=!1}if(Mt&&!Qn)return vt||(vt=new fi),Br||Yl(ae)?we(ae,be,Re,Qe,br,vt):oe(ae,be,cn,Re,Qe,br,vt);if(!(Re&i)){var Zn=Qn&&Xe.call(ae,"__wrapped__"),En=_i&&Xe.call(be,"__wrapped__");if(Zn||En){var An=Zn?ae.value():ae,ds=En?be.value():be;return vt||(vt=new fi),br(An,ds,Re,Qe,vt)}}return Mt?(vt||(vt=new fi),gt(ae,be,Re,Qe,br,vt)):!1}function wa(ae){if(!Xh(ae)||Sx(ae))return!1;var be=Lt(ae)?Ke:G;return be.test(hs(ae))}function Ar(ae){return Co(ae)&&an(ae.length)&&!!H[x0(ae)]}function dn(ae){if(!Wl(ae))return $t(ae);var be=[];for(var Re in Object(ae))Xe.call(ae,Re)&&Re!="constructor"&&be.push(Re);return be}function we(ae,be,Re,Qe,br,vt){var Br=Re&i,tn=ae.length,cn=be.length;if(tn!=cn&&!(Br&&cn>tn))return!1;var Pr=vt.get(ae);if(Pr&&vt.get(be))return Pr==be;var Qn=-1,_i=!0,Mt=Re&s?new Ls:void 0;for(vt.set(ae,be),vt.set(be,ae);++Qn<tn;){var Zn=ae[Qn],En=be[Qn];if(Qe)var An=Br?Qe(En,Zn,Qn,be,ae,vt):Qe(Zn,En,Qn,ae,be,vt);if(An!==void 0){if(An)continue;_i=!1;break}if(Mt){if(!je(be,function(ds,Ee){if(!Ze(Mt,Ee)&&(Zn===ds||br(Zn,ds,Re,Qe,vt)))return Mt.push(Ee)})){_i=!1;break}}else if(!(Zn===En||br(Zn,En,Re,Qe,vt))){_i=!1;break}}return vt.delete(ae),vt.delete(be),_i}function oe(ae,be,Re,Qe,br,vt,Br){switch(Re){case le:if(ae.byteLength!=be.byteLength||ae.byteOffset!=be.byteOffset)return!1;ae=ae.buffer,be=be.buffer;case ne:return!(ae.byteLength!=be.byteLength||!vt(new rt(ae),new rt(be)));case p:case b:case T:return Yh(+ae,+be);case y:return ae.name==be.name&&ae.message==be.message;case L:case v:return ae==be+"";case S:var tn=ut;case R:var cn=Qe&i;if(tn||(tn=$e),ae.size!=be.size&&!cn)return!1;var Pr=Br.get(ae);if(Pr)return Pr==be;Qe|=s,Br.set(ae,be);var Qn=we(tn(ae),tn(be),Qe,br,vt,Br);return Br.delete(ae),Qn;case P:if(Qt)return Qt.call(ae)==Qt.call(be)}return!1}function gt(ae,be,Re,Qe,br,vt){var Br=Re&i,tn=en(ae),cn=tn.length,Pr=en(be),Qn=Pr.length;if(cn!=Qn&&!Br)return!1;for(var _i=cn;_i--;){var Mt=tn[_i];if(!(Br?Mt in be:Xe.call(be,Mt)))return!1}var Zn=vt.get(ae);if(Zn&&vt.get(be))return Zn==be;var En=!0;vt.set(ae,be),vt.set(be,ae);for(var An=Br;++_i<cn;){Mt=tn[_i];var ds=ae[Mt],Ee=be[Mt];if(Qe)var zt=Br?Qe(Ee,ds,Mt,be,ae,vt):Qe(ds,Ee,Mt,ae,be,vt);if(!(zt===void 0?ds===Ee||br(ds,Ee,Re,Qe,vt):zt)){En=!1;break}An||(An=Mt=="constructor")}if(En&&!An){var Wr=ae.constructor,Io=be.constructor;Wr!=Io&&"constructor"in ae&&"constructor"in be&&!(typeof Wr=="function"&&Wr instanceof Wr&&typeof Io=="function"&&Io instanceof Io)&&(En=!1)}return vt.delete(ae),vt.delete(be),En}function en(ae){return ks(ae,So,li)}function vn(ae,be){var Re=ae.__data__;return Wh(be)?Re[typeof be=="string"?"string":"hash"]:Re.map}function va(ae,be){var Re=Ce(ae,be);return wa(Re)?Re:void 0}function Kl(ae){var be=Xe.call(ae,Rt),Re=ae[Rt];try{ae[Rt]=void 0;var Qe=!0}catch{}var br=nt.call(ae);return Qe&&(be?ae[Rt]=Re:delete ae[Rt]),br}var li=Qr?function(ae){return ae==null?[]:(ae=Object(ae),Pe(Qr(ae),function(be){return Pt.call(ae,be)}))}:Dx,ht=x0;(fr&&ht(new fr(new ArrayBuffer(1)))!=le||St&&ht(new St)!=S||dt&&ht(dt.resolve())!=O||sr&&ht(new sr)!=R||ot&&ht(new ot)!=J)&&(ht=function(ae){var be=x0(ae),Re=be==N?ae.constructor:void 0,Qe=Re?hs(Re):"";if(Qe)switch(Qe){case cr:return le;case mt:return S;case Nt:return O;case Ot:return R;case yt:return J}return be});function Mr(ae,be){return be=be??c,!!be&&(typeof ae=="number"||ue.test(ae))&&ae>-1&&ae%1==0&&ae<be}function Wh(ae){var be=typeof ae;return be=="string"||be=="number"||be=="symbol"||be=="boolean"?ae!=="__proto__":ae===null}function Sx(ae){return!!Ct&&Ct in ae}function Wl(ae){var be=ae&&ae.constructor,Re=typeof be=="function"&&be.prototype||We;return ae===Re}function Sc(ae){return nt.call(ae)}function hs(ae){if(ae!=null){try{return Ve.call(ae)}catch{}try{return ae+""}catch{}}return""}function Yh(ae,be){return ae===be||ae!==ae&&be!==be}var on=Gr(function(){return arguments}())?Gr:function(ae){return Co(ae)&&Xe.call(ae,"callee")&&!Pt.call(ae,"callee")},Us=Array.isArray;function Hs(ae){return ae!=null&&an(ae.length)&&!Lt(ae)}var It=st||p0;function Ix(ae,be){return us(ae,be)}function Lt(ae){if(!Xh(ae))return!1;var be=x0(ae);return be==w||be==_||be==u||be==M}function an(ae){return typeof ae=="number"&&ae>-1&&ae%1==0&&ae<=c}function Xh(ae){var be=typeof ae;return ae!=null&&(be=="object"||be=="function")}function Co(ae){return ae!=null&&typeof ae=="object"}var Yl=Se?Je(Se):Ar;function So(ae){return Hs(ae)?$l(ae):dn(ae)}function Dx(){return[]}function p0(){return!1}r.exports=Ix})(_1,_1.exports);var tk=_1.exports;const rk=ba(tk);function nk(r,e){return e=e||{},new Promise(function(t,n){var i=new XMLHttpRequest,s=[],c=[],l={},h=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:h,headers:{keys:function(){return s},entries:function(){return c},get:function(p){return l[p.toLowerCase()]},has:function(p){return p.toLowerCase()in l}}}};for(var u in i.open(e.method||"get",r,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(p,b,y){s.push(b=b.toLowerCase()),c.push([b,y]),l[b]=l[b]?l[b]+","+y:y}),t(h())},i.onerror=n,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(u,e.headers[u]);i.send(e.body||null)})}const ik=Object.freeze(Object.defineProperty({__proto__:null,default:nk},Symbol.toStringTag,{value:"Module"})),P8=mc(ik);var sk=self.fetch||(self.fetch=P8.default||P8);const B5=ba(sk);var ok={};function ak(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),c=s.charCodeAt(0);if(t[c]!==255)throw new TypeError(s+" is ambiguous");t[c]=i}var l=r.length,h=r.charAt(0),u=Math.log(l)/Math.log(256),p=Math.log(256)/Math.log(l);function b(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var S=0,T=0,F=0,N=_.length;F!==N&&_[F]===0;)F++,S++;for(var O=(N-F)*p+1>>>0,M=new Uint8Array(O);F!==N;){for(var L=_[F],R=0,v=O-1;(L!==0||R<T)&&v!==-1;v--,R++)L+=256*M[v]>>>0,M[v]=L%l>>>0,L=L/l>>>0;if(L!==0)throw new Error("Non-zero carry");T=R,F++}for(var P=O-T;P!==O&&M[P]===0;)P++;for(var Y=h.repeat(S);P<O;++P)Y+=r.charAt(M[P]);return Y}function y(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var S=0;if(_[S]!==" "){for(var T=0,F=0;_[S]===h;)T++,S++;for(var N=(_.length-S)*u+1>>>0,O=new Uint8Array(N);_[S];){var M=t[_.charCodeAt(S)];if(M===255)return;for(var L=0,R=N-1;(M!==0||L<F)&&R!==-1;R--,L++)M+=l*O[R]>>>0,O[R]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");F=L,S++}if(_[S]!==" "){for(var v=N-F;v!==N&&O[v]===0;)v++;for(var P=new Uint8Array(T+(N-v)),Y=T;v!==N;)P[Y++]=O[v++];return P}}}function w(_){var S=y(_);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:y,decode:w}}var ck=ak,fk=ck;const P5=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},lk=r=>new TextEncoder().encode(r),uk=r=>new TextDecoder().decode(r);class hk{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class dk{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return F5(this,e)}}class xk{constructor(e){this.decoders=e}or(e){return F5(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const F5=(r,e)=>new xk({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class pk{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new hk(e,t,n),this.decoder=new dk(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const yx=({name:r,prefix:e,encode:t,decode:n})=>new pk(r,e,t,n),qh=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=fk(t,e);return yx({prefix:r,name:e,encode:n,decode:s=>P5(i(s))})},gk=(r,e,t,n)=>{const i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let s=r.length;for(;r[s-1]==="=";)--s;const c=new Uint8Array(s*t/8|0);let l=0,h=0,u=0;for(let p=0;p<s;++p){const b=i[r[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<t|b,l+=t,l>=8&&(l-=8,c[u++]=255&h>>l)}if(l>=t||255&h<<8-l)throw new SyntaxError("Unexpected end of data");return c},bk=(r,e,t)=>{const n=e[e.length-1]==="=",i=(1<<t)-1;let s="",c=0,l=0;for(let h=0;h<r.length;++h)for(l=l<<8|r[h],c+=8;c>t;)c-=t,s+=e[i&l>>c];if(c&&(s+=e[i&l<<t-c]),n)for(;s.length*t&7;)s+="=";return s},Bn=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>yx({prefix:e,name:r,encode(i){return bk(i,n,t)},decode(i){return gk(i,n,t,r)}}),mk=yx({prefix:"\0",name:"identity",encode:r=>uk(r),decode:r=>lk(r)});var yk=Object.freeze({__proto__:null,identity:mk});const wk=Bn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var vk=Object.freeze({__proto__:null,base2:wk});const Ek=Bn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ak=Object.freeze({__proto__:null,base8:Ek});const _k=qh({prefix:"9",name:"base10",alphabet:"0123456789"});var Ck=Object.freeze({__proto__:null,base10:_k});const Sk=Bn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ik=Bn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Dk=Object.freeze({__proto__:null,base16:Sk,base16upper:Ik});const Tk=Bn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Nk=Bn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ok=Bn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Rk=Bn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Mk=Bn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Bk=Bn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Pk=Bn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Fk=Bn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Lk=Bn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var kk=Object.freeze({__proto__:null,base32:Tk,base32upper:Nk,base32pad:Ok,base32padupper:Rk,base32hex:Mk,base32hexupper:Bk,base32hexpad:Pk,base32hexpadupper:Fk,base32z:Lk});const Uk=qh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Hk=qh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var zk=Object.freeze({__proto__:null,base36:Uk,base36upper:Hk});const jk=qh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Gk=qh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Vk=Object.freeze({__proto__:null,base58btc:jk,base58flickr:Gk});const qk=Bn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$k=Bn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Kk=Bn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Wk=Bn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Yk=Object.freeze({__proto__:null,base64:qk,base64pad:$k,base64url:Kk,base64urlpad:Wk});const L5=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Xk=L5.reduce((r,e,t)=>(r[t]=e,r),[]),Qk=L5.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Zk(r){return r.reduce((e,t)=>(e+=Xk[t],e),"")}function Jk(r){const e=[];for(const t of r){const n=Qk[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const eU=yx({prefix:"🚀",name:"base256emoji",encode:Zk,decode:Jk});var tU=Object.freeze({__proto__:null,base256emoji:eU}),rU=k5,F8=128,nU=127,iU=~nU,sU=Math.pow(2,31);function k5(r,e,t){e=e||[],t=t||0;for(var n=t;r>=sU;)e[t++]=r&255|F8,r/=128;for(;r&iU;)e[t++]=r&255|F8,r>>>=7;return e[t]=r|0,k5.bytes=t-n+1,e}var oU=nb,aU=128,L8=127;function nb(r,n){var t=0,n=n||0,i=0,s=n,c,l=r.length;do{if(s>=l)throw nb.bytes=0,new RangeError("Could not decode varint");c=r[s++],t+=i<28?(c&L8)<<i:(c&L8)*Math.pow(2,i),i+=7}while(c>=aU);return nb.bytes=s-n,t}var cU=Math.pow(2,7),fU=Math.pow(2,14),lU=Math.pow(2,21),uU=Math.pow(2,28),hU=Math.pow(2,35),dU=Math.pow(2,42),xU=Math.pow(2,49),pU=Math.pow(2,56),gU=Math.pow(2,63),bU=function(r){return r<cU?1:r<fU?2:r<lU?3:r<uU?4:r<hU?5:r<dU?6:r<xU?7:r<pU?8:r<gU?9:10},mU={encode:rU,decode:oU,encodingLength:bU},U5=mU;const k8=(r,e,t=0)=>(U5.encode(r,e,t),e),U8=r=>U5.encodingLength(r),ib=(r,e)=>{const t=e.byteLength,n=U8(r),i=n+U8(t),s=new Uint8Array(i+t);return k8(r,s,0),k8(t,s,n),s.set(e,i),new yU(r,t,e,s)};let yU=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};const H5=({name:r,code:e,encode:t})=>new wU(r,e,t);let wU=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ib(this.code,t):t.then(n=>ib(this.code,n))}else throw Error("Unknown type, must be binary type")}};const z5=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),vU=H5({name:"sha2-256",code:18,encode:z5("SHA-256")}),EU=H5({name:"sha2-512",code:19,encode:z5("SHA-512")});var AU=Object.freeze({__proto__:null,sha256:vU,sha512:EU});const j5=0,_U="identity",G5=P5,CU=r=>ib(j5,G5(r)),SU={code:j5,name:_U,encode:G5,digest:CU};var IU=Object.freeze({__proto__:null,identity:SU});new TextEncoder,new TextDecoder;const H8={...yk,...vk,...Ak,...Ck,...Dk,...kk,...zk,...Vk,...Yk,...tU};({...AU,...IU});function V5(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function DU(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?V5(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function q5(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const z8=q5("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),hg=q5("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=DU(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),TU={utf8:z8,"utf-8":z8,hex:H8.base16,latin1:hg,ascii:hg,binary:hg,...H8};function NU(r,e="utf8"){const t=TU[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?V5(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}const $5="wc",OU=2,Tm="core",r0=`${$5}@2:${Tm}:`,RU={name:Tm,logger:"error"},MU={database:":memory:"},BU="crypto",j8="client_ed25519_seed",PU=tt.ONE_DAY,FU="keychain",LU="0.3",kU="messages",UU="0.3",HU=tt.SIX_HOURS,zU="publisher",K5="irn",jU="error",W5="wss://relay.walletconnect.com",G8="wss://relay.walletconnect.org",GU="relayer",Dn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},VU="_subscription",No={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},qU=tt.ONE_SECOND,$U="2.11.1",KU=1e4,WU="0.3",YU="WALLETCONNECT_CLIENT_ID",ws={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},XU="subscription",QU="0.3",ZU=tt.FIVE_SECONDS*1e3,JU="pairing",eH="0.3",au={wc_pairingDelete:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:tt.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:tt.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:tt.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:0},res:{ttl:tt.ONE_DAY,prompt:!1,tag:0}}},ef={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ks={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},tH="history",rH="0.3",nH="expirer",Wi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},iH="0.3",dg="verify-api",tf="https://verify.walletconnect.com",sb="https://verify.walletconnect.org",sH=[tf,sb],oH="echo",aH="https://echo.walletconnect.com";let cH=class{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=FU,this.version=LU,this.initialized=!1,this.storagePrefix=r0,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=wr("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Zt.generateChildLogger(t,this.name)}get context(){return Zt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,_5(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?C5(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=wr("NOT_INITIALIZED",this.name);throw new Error(e)}}},fH=class{constructor(e,t,n){this.core=e,this.logger=t,this.name=BU,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=f8(i);return h5(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=mF();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),c=f8(s),l=Q2();return await SP(l,i,PU,c)},this.generateSharedKey=(i,s,c)=>{this.isInitialized();const l=this.getPrivateKey(i),h=yF(l,s);return this.setSymKey(h,c)},this.setSymKey=async(i,s)=>{this.isInitialized();const c=s||wF(i);return await this.keychain.set(c,i),c},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,c)=>{this.isInitialized();const l=A5(c),h=Hh(s);if(w8(l)){const y=l.senderPublicKey,w=l.receiverPublicKey;i=await this.generateSharedKey(y,w)}const u=this.getSymKey(i),{type:p,senderPublicKey:b}=l;return EF({type:p,symKey:u,message:h,senderPublicKey:b})},this.decode=async(i,s,c)=>{this.isInitialized();const l=CF(s,c);if(w8(l)){const h=l.receiverPublicKey,u=l.senderPublicKey;i=await this.generateSharedKey(h,u)}try{const h=this.getSymKey(i),u=AF({symKey:h,encoded:s});return ox(u)}catch(h){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(h)}},this.getPayloadType=i=>{const s=E1(i);return Gh(s.type)},this.getPayloadSenderPublicKey=i=>{const s=E1(i);return s.senderPublicKey?Rn(s.senderPublicKey,ai):void 0},this.core=e,this.logger=Zt.generateChildLogger(t,this.name),this.keychain=n||new cH(this.core,this.logger)}get context(){return Zt.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(j8)}catch{e=Q2(),await this.keychain.set(j8,e)}return NU(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=wr("NOT_INITIALIZED",this.name);throw new Error(e)}}},lH=class extends BM{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=kU,this.version=UU,this.initialized=!1,this.storagePrefix=r0,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Z2(i);let c=this.messages.get(n);return typeof c>"u"&&(c={}),typeof c[s]<"u"||(c[s]=i,this.messages.set(n,c),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),c=Z2(i);return typeof s[c]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Zt.generateChildLogger(e,this.name),this.core=t}get context(){return Zt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,_5(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?C5(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=wr("NOT_INITIALIZED",this.name);throw new Error(e)}}},uH=class extends PM{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new cs.EventEmitter,this.name=zU,this.queue=new Map,this.publishTimeout=tt.toMiliseconds(tt.TEN_SECONDS*2),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const l=(s==null?void 0:s.ttl)||HU,h=J2(s),u=(s==null?void 0:s.prompt)||!1,p=(s==null?void 0:s.tag)||0,b=(s==null?void 0:s.id)||R5().toString(),y={topic:n,message:i,opts:{ttl:l,relay:h,prompt:u,tag:p,id:b}},w=setTimeout(()=>this.queue.set(b,y),this.publishTimeout);try{await await th(this.rpcPublish(n,i,l,h,u,p,b),this.publishTimeout,`Failed to publish payload, please try again. id:${b} tag:${p}`),this.removeRequestFromQueue(b),this.relayer.events.emit(Dn.publish,y)}catch(_){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(c=s==null?void 0:s.internal)!=null&&c.throwOnFailedPublish)throw this.removeRequestFromQueue(b),_;return}finally{clearTimeout(w)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(l){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(l),l}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Zt.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Zt.getLoggerContext(this.logger)}rpcPublish(e,t,n,i,s,c,l){var h,u,p,b;const y={method:zd(i.protocol).publish,params:{topic:e,message:t,ttl:n,prompt:s,tag:c},id:l};return A1((h=y.params)==null?void 0:h.prompt)&&((u=y.params)==null||delete u.prompt),A1((p=y.params)==null?void 0:p.tag)&&((b=y.params)==null||delete b.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:y}),this.relayer.request(y)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:n,opts:i}=e;await this.publish(t,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Bl.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Dn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Dn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}};class hH{constructor(){this.map=new Map,this.set=(e,t)=>{const n=this.get(e);this.exists(e,t)||this.map.set(e,[...n,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,t))return;const i=n.filter(s=>s!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var dH=Object.defineProperty,xH=Object.defineProperties,pH=Object.getOwnPropertyDescriptors,V8=Object.getOwnPropertySymbols,gH=Object.prototype.hasOwnProperty,bH=Object.prototype.propertyIsEnumerable,q8=(r,e,t)=>e in r?dH(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,cu=(r,e)=>{for(var t in e||(e={}))gH.call(e,t)&&q8(r,t,e[t]);if(V8)for(var t of V8(e))bH.call(e,t)&&q8(r,t,e[t]);return r},xg=(r,e)=>xH(r,pH(e));let mH=class extends kM{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new hH,this.events=new cs.EventEmitter,this.name=XU,this.version=QU,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=r0,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=J2(i),c={topic:n,relay:s};this.pending.set(n,c);const l=await this.rpcSubscribe(n,s);return this.onSubscribe(l,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),l}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>{if(this.topics.includes(n))return!0;const i=`${this.pendingSubscriptionWatchLabel}_${n}`;return await new Promise((s,c)=>{const l=new tt.Watch;l.start(i);const h=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(h),l.stop(i),s(!0)),l.elapsed(i)>=ZU&&(clearInterval(h),l.stop(i),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Zt.generateChildLogger(t,this.name),this.clientId=""}get context(){return Zt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let n=!1;try{n=this.getSubscription(e).topic===t}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,t)))}async unsubscribeById(e,t,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}});try{const i=J2(n);await this.rpcUnsubscribe(e,t,i);const s=Eu("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,t){const n={method:zd(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await th(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Dn.connection_stalled)}return Z2(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,n={method:zd(t.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await th(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Dn.connection_stalled)}}rpcUnsubscribe(e,t,n){const i={method:zd(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,xg(cu({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,cu({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,n){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,cu({},t)),this.topicMap.set(t.topic,e),this.events.emit(ws.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:n}=wr("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(ws.deleted,xg(cu({},n),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ws.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(ws.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=wr("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);tL(t)&&this.onBatchSubscribe(t.map((n,i)=>xg(cu({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Bl.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Dn.connect,async()=>{await this.onConnect()}),this.relayer.on(Dn.disconnect,()=>{this.onDisconnect()}),this.events.on(ws.created,async e=>{const t=ws.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(ws.deleted,async e=>{const t=ws.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=wr("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}};var yH=Object.defineProperty,$8=Object.getOwnPropertySymbols,wH=Object.prototype.hasOwnProperty,vH=Object.prototype.propertyIsEnumerable,K8=(r,e,t)=>e in r?yH(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,EH=(r,e)=>{for(var t in e||(e={}))wH.call(e,t)&&K8(r,t,e[t]);if($8)for(var t of $8(e))vH.call(e,t)&&K8(r,t,e[t]);return r};let AH=class extends FM{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new cs.EventEmitter,this.name=GU,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.request=async t=>{this.logger.debug("Publishing Request Payload");const n=t.id,i=this.provider.request(t);this.requestsInFlight.set(n,{promise:i,request:t});try{return await this.toEstablishConnection(),await i}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}finally{this.requestsInFlight.delete(n)}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(Dn.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(Dn.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(No.payload,this.onPayloadHandler),this.provider.on(No.connect,this.onConnectHandler),this.provider.on(No.disconnect,this.onDisconnectHandler),this.provider.on(No.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Zt.generateChildLogger(e.logger,this.name):Zt.pino(Zt.getDefaultLoggerOptions({level:e.logger||jU})),this.messages=new lH(this.logger,e.core),this.subscriber=new mH(this,this.logger),this.publisher=new uH(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||W5,this.projectId=e.projectId,this.bundleId=OF(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${G8}...`),await this.restartTransport(G8)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},KU)}get context(){return Zt.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,n){this.isInitialized(),await this.publisher.publish(e,t,n),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";if(i)return i;let s;const c=l=>{l.topic===e&&(this.subscriber.off(ws.created,c),s())};return await Promise.all([new Promise(l=>{s=l,this.subscriber.on(ws.created,c)}),new Promise(async l=>{i=await this.subscriber.subscribe(e,t),l()})]),i}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.requestsInFlight.size>0&&(this.logger.debug("Waiting for all in-flight requests to finish before closing transport..."),this.requestsInFlight.forEach(async e=>{await e.promise})),this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await th(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once(ws.resubscribed,()=>{t()})}),new Promise(async(t,n)=>{try{await th(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}t()})])}catch(t){this.logger.error(t);const n=t;if(!this.isConnectionStalled(n.message))throw t;this.provider.events.emit(No.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await D8())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new XL(new ek(FF({sdkVersion:$U,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:n}=e;await this.messages.set(t,n)}async shouldIgnoreMessageEvent(e){const{topic:t,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const i=this.messages.has(t,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),mx(e)){if(!e.method.endsWith(VU))return;const t=e.params,{topic:n,message:i,publishedAt:s}=t.data,c={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(EH({type:"event",event:t.id},c)),this.events.emit(t.id,c),await this.acknowledgePayload(e),await this.onMessageEvent(c)}else Vh(e)&&this.events.emit(Dn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Dn.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=gx(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(No.payload,this.onPayloadHandler),this.provider.off(No.connect,this.onConnectHandler),this.provider.off(No.disconnect,this.onDisconnectHandler),this.provider.off(No.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Dn.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let e=await D8();cL(async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(Dn.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},tt.toMiliseconds(qU)))}isInitialized(){if(!this.initialized){const{message:e}=wr("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var _H=Object.defineProperty,W8=Object.getOwnPropertySymbols,CH=Object.prototype.hasOwnProperty,SH=Object.prototype.propertyIsEnumerable,Y8=(r,e,t)=>e in r?_H(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,X8=(r,e)=>{for(var t in e||(e={}))CH.call(e,t)&&Y8(r,t,e[t]);if(W8)for(var t of W8(e))SH.call(e,t)&&Y8(r,t,e[t]);return r};let ac=class extends LM{constructor(e,t,n,i=r0,s=void 0){super(e,t,n,i),this.core=e,this.logger=t,this.name=n,this.map=new Map,this.version=WU,this.cached=[],this.initialized=!1,this.storagePrefix=r0,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!A1(c)?this.map.set(this.getKey(c),c):nL(c)?this.map.set(c.id,c):iL(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)},this.set=async(c,l)=>{this.isInitialized(),this.map.has(c)?await this.update(c,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:l}),this.map.set(c,l),await this.persist())},this.get=c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c)),this.getAll=c=>(this.isInitialized(),c?this.values.filter(l=>Object.keys(c).every(h=>rk(l[h],c[h]))):this.values),this.update=async(c,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:l});const h=X8(X8({},this.getData(c)),l);this.map.set(c,h),await this.persist()},this.delete=async(c,l)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:l}),this.map.delete(c),await this.persist())},this.logger=Zt.generateChildLogger(t,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Zt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:n}=wr("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=wr("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=wr("NOT_INITIALIZED",this.name);throw new Error(e)}}},IH=class{constructor(e,t){this.core=e,this.logger=t,this.name=JU,this.version=eH,this.events=new jA,this.initialized=!1,this.storagePrefix=r0,this.ignoredPayloadTypes=[Ul],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Q2(),i=await this.core.crypto.setSymKey(n),s=Hd(tt.FIVE_MINUTES),c={protocol:K5},l={topic:i,expiry:s,relay:c,active:!1},h=ZF({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:c,expiryTimestamp:s});return await this.pairings.set(i,l),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:h}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:c,expiryTimestamp:l}=I8(n.uri);let h;if(this.pairings.keys.includes(i)&&(h=this.pairings.get(i),h.active))throw new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);const u=l||Hd(tt.FIVE_MINUTES),p={topic:i,relay:c,expiry:u,active:!1};return await this.pairings.set(i,p),this.core.expirer.set(i,u),n.activatePairing&&await this.activate({topic:i}),this.events.emit(ef.create,p),this.core.crypto.keychain.has(i)||(await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:c})),p},this.activate=async({topic:n})=>{this.isInitialized();const i=Hd(tt.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:l,reject:h}=LF();this.events.once(lg("pairing_ping",s),({error:u})=>{u?h(u):l()}),await c()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Eu("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const c=oc(i,s),l=await this.core.crypto.encode(n,c),h=au[i].req;return this.core.history.set(n,c),this.core.relayer.publish(n,l,h),c.id},this.sendResult=async(n,i,s)=>{const c=gx(n,s),l=await this.core.crypto.encode(i,c),h=await this.core.history.get(i,n),u=au[h.request.method].res;await this.core.relayer.publish(i,l,u),await this.core.history.resolve(c)},this.sendError=async(n,i,s)=>{const c=bx(n,s),l=await this.core.crypto.encode(i,c),h=await this.core.history.get(i,n),u=au[h.request.method]?au[h.request.method].res:au.unregistered_method.res;await this.core.relayer.publish(i,l,u),await this.core.history.resolve(c)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Eu("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>_8(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,c=(await this.core.history.get(i,s.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(c)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(ef.ping,{id:s,topic:n})}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Qs(i)?this.events.emit(lg("pairing_ping",s),{}):rs(i)&&this.events.emit(lg("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(ef.delete,{id:s,topic:n})}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:c}=i;try{if(this.registeredMethods.includes(c))return;const l=Eu("WC_METHOD_UNSUPPORTED",c);await this.sendError(s,n,l),this.logger.error(l)}catch(l){await this.sendError(s,n,l),this.logger.error(l)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Eu("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{var i;if(!ug(n)){const{message:c}=wr("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(c)}if(!rL(n.uri)){const{message:c}=wr("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(c)}const s=I8(n.uri);if(!((i=s==null?void 0:s.relay)!=null&&i.protocol)){const{message:c}=wr("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(c)}if(!(s!=null&&s.symKey)){const{message:c}=wr("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(c)}if(s!=null&&s.expiryTimestamp&&tt.toMiliseconds(s==null?void 0:s.expiryTimestamp)<Date.now()){const{message:c}=wr("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(c)}},this.isValidPing=async n=>{if(!ug(n)){const{message:s}=wr("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!ug(n)){const{message:s}=wr("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!I5(n,!1)){const{message:i}=wr("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=wr("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(_8(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=wr("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Zt.generateChildLogger(t,this.name),this.pairings=new ac(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Zt.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=wr("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Dn.message,async e=>{const{topic:t,message:n}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(t,n);try{mx(i)?(this.core.history.set(t,i),this.onRelayEventRequest({topic:t,payload:i})):Vh(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.core.history.delete(t,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Wi.expired,async e=>{const{topic:t}=HF(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(ef.expire,{topic:t}))})}},DH=class extends MM{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new cs.EventEmitter,this.name=tH,this.version=rH,this.cached=[],this.initialized=!1,this.storagePrefix=r0,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const c={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Hd(tt.THIRTY_DAYS)};this.records.set(c.id,c),this.events.emit(Ks.created,c)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=rs(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(Ks.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Ks.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Zt.generateChildLogger(t,this.name)}get context(){return Zt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:oc(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:n}=wr("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ks.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=wr("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ks.created,e=>{const t=Ks.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Ks.updated,e=>{const t=Ks.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Ks.deleted,e=>{const t=Ks.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Bl.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{tt.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=wr("NOT_INITIALIZED",this.name);throw new Error(e)}}},TH=class extends UM{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new cs.EventEmitter,this.name=nH,this.version=iH,this.cached=[],this.initialized=!1,this.storagePrefix=r0,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),c={target:s,expiry:i};this.expirations.set(s,c),this.checkExpiry(s,c),this.events.emit(Wi.created,{target:s,expiration:c})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Wi.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Zt.generateChildLogger(t,this.name)}get context(){return Zt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return kF(e);if(typeof e=="number")return UF(e);const{message:t}=wr("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Wi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=wr("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:n}=wr("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}checkExpiry(e,t){const{expiry:n}=t;tt.toMiliseconds(n)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Wi.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Bl.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Wi.created,e=>{const t=Wi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Wi.expired,e=>{const t=Wi.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Wi.deleted,e=>{const t=Wi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=wr("NOT_INITIALIZED",this.name);throw new Error(e)}}},NH=class extends HM{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=dg,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||Hl()||!xx())return;const i=this.getVerifyUrl(n==null?void 0:n.verifyUrl);this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=sb;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=this.getVerifyUrl(n==null?void 0:n.verifyUrl);let s;try{s=await this.fetchAttestation(n.attestationId,i)}catch(c){this.logger.info(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.info(c),s=await this.fetchAttestation(n.attestationId,sb)}return s},this.fetchAttestation=async(n,i)=>{this.logger.info(`resolving attestation: ${n} from url: ${i}`);const s=this.startAbortTimer(tt.ONE_SECOND*2),c=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(s),c.status===200?await c.json():void 0},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(dg))return s();window.addEventListener("message",i);const c=document.createElement("iframe");c.id=dg,c.src=`${this.verifyUrl}/${this.projectId}`,c.style.display="none",document.body.append(c),this.iframe=c,n=s}),new Promise((s,c)=>setTimeout(()=>{window.removeEventListener("message",i),c("verify iframe load timeout")},tt.toMiliseconds(tt.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=n=>{let i=n||tf;return sH.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${tf}`),i=tf),i},this.logger=Zt.generateChildLogger(t,this.name),this.verifyUrl=tf,this.abortController=new AbortController,this.isDevEnv=Sm()&&ok.IS_VITEST}get context(){return Zt.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),tt.toMiliseconds(e))}},OH=class extends zM{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=oH,this.registerDeviceToken=async n=>{const{clientId:i,token:s,notificationType:c,enableEncrypted:l=!1}=n,h=`${aH}/${this.projectId}/clients`;await B5(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:c,token:s,always_raw:l})})},this.logger=Zt.generateChildLogger(t,this.context)}};var RH=Object.defineProperty,Q8=Object.getOwnPropertySymbols,MH=Object.prototype.hasOwnProperty,BH=Object.prototype.propertyIsEnumerable,Z8=(r,e,t)=>e in r?RH(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,J8=(r,e)=>{for(var t in e||(e={}))MH.call(e,t)&&Z8(r,t,e[t]);if(Q8)for(var t of Q8(e))BH.call(e,t)&&Z8(r,t,e[t]);return r};let PH=class Y5 extends RM{constructor(e){super(e),this.protocol=$5,this.version=OU,this.name=Tm,this.events=new cs.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||W5,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Zt.pino(Zt.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||RU.logger}));this.logger=Zt.generateChildLogger(t,this.name),this.heartbeat=new Bl.HeartBeat,this.crypto=new fH(this,this.logger,e==null?void 0:e.keychain),this.history=new DH(this,this.logger),this.expirer=new TH(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new cR(J8(J8({},MU),e==null?void 0:e.storageOptions)),this.relayer=new AH({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new IH(this,this.logger),this.verify=new NH(this.projectId||"",this.logger),this.echoClient=new OH(this.projectId||"",this.logger)}static async init(e){const t=new Y5(e);await t.initialize();const n=await t.crypto.getClientId();return await t.storage.setItem(YU,n),t}get context(){return Zt.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const nh=PH,e4="base16",FH=1;function t4(r){const e=Ac.hash(Wn(r,e4));return Rn(e,e4)}function LH(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function kH(){return!LH()&&!!kl()&&!!Ll()}function pg(r,e){return r.filter(t=>e.includes(t)).length===r.length}function M0(r=[],e=[]){return[...new Set([...r,...e])]}var UH=Object.defineProperty,HH=Object.defineProperties,zH=Object.getOwnPropertyDescriptors,r4=Object.getOwnPropertySymbols,jH=Object.prototype.hasOwnProperty,GH=Object.prototype.propertyIsEnumerable,n4=(r,e,t)=>e in r?UH(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,VH=(r,e)=>{for(var t in e||(e={}))jH.call(e,t)&&n4(r,t,e[t]);if(r4)for(var t of r4(e))GH.call(e,t)&&n4(r,t,e[t]);return r},qH=(r,e)=>HH(r,zH(e));function X5(r){const e=[];return r.forEach(t=>{const[n,i]=t.split(":");e.push(`${n}:${i}`)}),e}function $H(r){const{proposal:{requiredNamespaces:e,optionalNamespaces:t={}},supportedNamespaces:n}=r,i=i4(e),s=i4(t),c={};Object.keys(n).forEach(u=>{const p=n[u].chains,b=n[u].methods,y=n[u].events,w=n[u].accounts;p.forEach(_=>{if(!w.some(S=>S.includes(_)))throw new Error(`No accounts provided for chain ${_} in namespace ${u}`)}),c[u]={chains:p,methods:b,events:y,accounts:w}});const l=tz(e,c,"approve()");if(l)throw new Error(l.message);const h={};return!Object.keys(e).length&&!Object.keys(t).length?c:(Object.keys(i).forEach(u=>{const p=n[u].chains.filter(_=>{var S,T;return(T=(S=i[u])==null?void 0:S.chains)==null?void 0:T.includes(_)}),b=n[u].methods.filter(_=>{var S,T;return(T=(S=i[u])==null?void 0:S.methods)==null?void 0:T.includes(_)}),y=n[u].events.filter(_=>{var S,T;return(T=(S=i[u])==null?void 0:S.events)==null?void 0:T.includes(_)}),w=p.map(_=>n[u].accounts.filter(S=>S.includes(`${_}:`))).flat();h[u]={chains:p,methods:b,events:y,accounts:w}}),Object.keys(s).forEach(u=>{var p,b,y,w,_,S;if(!n[u])return;const T=(b=(p=s[u])==null?void 0:p.chains)==null?void 0:b.filter(M=>n[u].chains.includes(M)),F=n[u].methods.filter(M=>{var L,R;return(R=(L=s[u])==null?void 0:L.methods)==null?void 0:R.includes(M)}),N=n[u].events.filter(M=>{var L,R;return(R=(L=s[u])==null?void 0:L.events)==null?void 0:R.includes(M)}),O=T==null?void 0:T.map(M=>n[u].accounts.filter(L=>L.includes(`${M}:`))).flat();h[u]={chains:M0((y=h[u])==null?void 0:y.chains,T),methods:M0((w=h[u])==null?void 0:w.methods,F),events:M0((_=h[u])==null?void 0:_.events,N),accounts:M0((S=h[u])==null?void 0:S.accounts,O)}}),h)}function Q5(r){return r.includes(":")}function KH(r){return Q5(r)?r.split(":")[0]:r}function i4(r){var e,t,n;const i={};if(!QH(r))return i;for(const[s,c]of Object.entries(r)){const l=Q5(s)?[s]:c.chains,h=c.methods||[],u=c.events||[],p=KH(s);i[p]=qH(VH({},i[p]),{chains:M0(l,(e=i[p])==null?void 0:e.chains),methods:M0(h,(t=i[p])==null?void 0:t.methods),events:M0(u,(n=i[p])==null?void 0:n.events)})}return i}const WH={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},YH={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function S0(r,e){const{message:t,code:n}=YH[r];return{message:e?`${t} ${e}`:t,code:n}}function XH(r,e){const{message:t,code:n}=WH[r];return{message:e?`${t} ${e}`:t,code:n}}function QH(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function Z5(r){return typeof r>"u"}function ZH(r,e){return e&&Z5(r)?!0:typeof r=="string"&&!!r.trim().length}function JH(r,e){return e&&Z5(r)?!0:typeof r=="number"&&!isNaN(r)}function ez(r){if(ZH(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}function tz(r,e,t){let n=null;const i=rz(r),s=nz(e),c=Object.keys(i),l=Object.keys(s),h=s4(Object.keys(r)),u=s4(Object.keys(e)),p=h.filter(b=>!u.includes(b));return p.length&&(n=S0("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${p.toString()}
      Received: ${Object.keys(e).toString()}`)),pg(c,l)||(n=S0("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(b=>{if(!b.includes(":")||n)return;const y=X5(e[b].accounts);y.includes(b)||(n=S0("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${b}
        Required: ${b}
        Approved: ${y.toString()}`))}),c.forEach(b=>{n||(pg(i[b].methods,s[b].methods)?pg(i[b].events,s[b].events)||(n=S0("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${b}`)):n=S0("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${b}`))}),n}function rz(r){const e={};return Object.keys(r).forEach(t=>{var n;t.includes(":")?e[t]=r[t]:(n=r[t].chains)==null||n.forEach(i=>{e[i]={methods:r[t].methods,events:r[t].events}})}),e}function s4(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function nz(r){const e={};return Object.keys(r).forEach(t=>{if(t.includes(":"))e[t]=r[t];else{const n=X5(r[t].accounts);n==null||n.forEach(i=>{e[i]={accounts:r[t].accounts.filter(s=>s.includes(`${i}:`)),methods:r[t].methods,events:r[t].events}})}}),e}function iz(r,e){return JH(r,!1)&&r<=e.max&&r>=e.min}var J5={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(r){(function(){var e="input is invalid type",t="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",c=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;c?i=At:s&&(i=self);var l=!i.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,h=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),p=[31,7936,2031616,520093696],b=[4,1024,262144,67108864],y=[1,256,65536,16777216],w=[6,1536,393216,100663296],_=[0,8,16,24],S=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],T=[224,256,384,512],F=[128,256],N=["hex","buffer","arrayBuffer","array","digest"],O={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(H){return Object.prototype.toString.call(H)==="[object Array]"}),h&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(H){return typeof H=="object"&&H.buffer&&H.buffer.constructor===ArrayBuffer});for(var M=function(H,fe,ie){return function(re){return new D(H,fe,H).update(re)[ie]()}},L=function(H,fe,ie){return function(re,se){return new D(H,fe,se).update(re)[ie]()}},R=function(H,fe,ie){return function(re,se,B,ee){return E["cshake"+H].update(re,se,B,ee)[ie]()}},v=function(H,fe,ie){return function(re,se,B,ee){return E["kmac"+H].update(re,se,B,ee)[ie]()}},P=function(H,fe,ie,re){for(var se=0;se<N.length;++se){var B=N[se];H[B]=fe(ie,re,B)}return H},Y=function(H,fe){var ie=M(H,fe,"hex");return ie.create=function(){return new D(H,fe,H)},ie.update=function(re){return ie.create().update(re)},P(ie,M,H,fe)},J=function(H,fe){var ie=L(H,fe,"hex");return ie.create=function(re){return new D(H,fe,re)},ie.update=function(re,se){return ie.create(se).update(re)},P(ie,L,H,fe)},ne=function(H,fe){var ie=O[H],re=R(H,fe,"hex");return re.create=function(se,B,ee){return!B&&!ee?E["shake"+H].create(se):new D(H,fe,se).bytepad([B,ee],ie)},re.update=function(se,B,ee,de){return re.create(B,ee,de).update(se)},P(re,R,H,fe)},le=function(H,fe){var ie=O[H],re=v(H,fe,"hex");return re.create=function(se,B,ee){return new G(H,fe,B).bytepad(["KMAC",ee],ie).bytepad([se],ie)},re.update=function(se,B,ee,de){return re.create(se,ee,de).update(B)},P(re,v,H,fe)},V=[{name:"keccak",padding:y,bits:T,createMethod:Y},{name:"sha3",padding:w,bits:T,createMethod:Y},{name:"shake",padding:p,bits:F,createMethod:J},{name:"cshake",padding:b,bits:F,createMethod:ne},{name:"kmac",padding:b,bits:F,createMethod:le}],E={},C=[],U=0;U<V.length;++U)for(var j=V[U],K=j.bits,X=0;X<K.length;++X){var te=j.name+"_"+K[X];if(C.push(te),E[te]=j.createMethod(K[X],j.padding),j.name!=="sha3"){var z=j.name+K[X];C.push(z),E[z]=E[te]}}function D(H,fe,ie){this.blocks=[],this.s=[],this.padding=fe,this.outputBits=ie,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(H<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=ie>>5,this.extraBytes=(ie&31)>>3;for(var re=0;re<50;++re)this.s[re]=0}D.prototype.update=function(H){if(this.finalized)throw new Error(t);var fe,ie=typeof H;if(ie!=="string"){if(ie==="object"){if(H===null)throw new Error(e);if(h&&H.constructor===ArrayBuffer)H=new Uint8Array(H);else if(!Array.isArray(H)&&(!h||!ArrayBuffer.isView(H)))throw new Error(e)}else throw new Error(e);fe=!0}for(var re=this.blocks,se=this.byteCount,B=H.length,ee=this.blockCount,de=0,Ae=this.s,Se,Pe;de<B;){if(this.reset)for(this.reset=!1,re[0]=this.block,Se=1;Se<ee+1;++Se)re[Se]=0;if(fe)for(Se=this.start;de<B&&Se<se;++de)re[Se>>2]|=H[de]<<_[Se++&3];else for(Se=this.start;de<B&&Se<se;++de)Pe=H.charCodeAt(de),Pe<128?re[Se>>2]|=Pe<<_[Se++&3]:Pe<2048?(re[Se>>2]|=(192|Pe>>6)<<_[Se++&3],re[Se>>2]|=(128|Pe&63)<<_[Se++&3]):Pe<55296||Pe>=57344?(re[Se>>2]|=(224|Pe>>12)<<_[Se++&3],re[Se>>2]|=(128|Pe>>6&63)<<_[Se++&3],re[Se>>2]|=(128|Pe&63)<<_[Se++&3]):(Pe=65536+((Pe&1023)<<10|H.charCodeAt(++de)&1023),re[Se>>2]|=(240|Pe>>18)<<_[Se++&3],re[Se>>2]|=(128|Pe>>12&63)<<_[Se++&3],re[Se>>2]|=(128|Pe>>6&63)<<_[Se++&3],re[Se>>2]|=(128|Pe&63)<<_[Se++&3]);if(this.lastByteIndex=Se,Se>=se){for(this.start=Se-se,this.block=re[ee],Se=0;Se<ee;++Se)Ae[Se]^=re[Se];ue(Ae),this.reset=!0}else this.start=Se}return this},D.prototype.encode=function(H,fe){var ie=H&255,re=1,se=[ie];for(H=H>>8,ie=H&255;ie>0;)se.unshift(ie),H=H>>8,ie=H&255,++re;return fe?se.push(re):se.unshift(re),this.update(se),se.length},D.prototype.encodeString=function(H){var fe,ie=typeof H;if(ie!=="string"){if(ie==="object"){if(H===null)throw new Error(e);if(h&&H.constructor===ArrayBuffer)H=new Uint8Array(H);else if(!Array.isArray(H)&&(!h||!ArrayBuffer.isView(H)))throw new Error(e)}else throw new Error(e);fe=!0}var re=0,se=H.length;if(fe)re=se;else for(var B=0;B<H.length;++B){var ee=H.charCodeAt(B);ee<128?re+=1:ee<2048?re+=2:ee<55296||ee>=57344?re+=3:(ee=65536+((ee&1023)<<10|H.charCodeAt(++B)&1023),re+=4)}return re+=this.encode(re*8),this.update(H),re},D.prototype.bytepad=function(H,fe){for(var ie=this.encode(fe),re=0;re<H.length;++re)ie+=this.encodeString(H[re]);var se=fe-ie%fe,B=[];return B.length=se,this.update(B),this},D.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var H=this.blocks,fe=this.lastByteIndex,ie=this.blockCount,re=this.s;if(H[fe>>2]|=this.padding[fe&3],this.lastByteIndex===this.byteCount)for(H[0]=H[ie],fe=1;fe<ie+1;++fe)H[fe]=0;for(H[ie-1]|=2147483648,fe=0;fe<ie;++fe)re[fe]^=H[fe];ue(re)}},D.prototype.toString=D.prototype.hex=function(){this.finalize();for(var H=this.blockCount,fe=this.s,ie=this.outputBlocks,re=this.extraBytes,se=0,B=0,ee="",de;B<ie;){for(se=0;se<H&&B<ie;++se,++B)de=fe[se],ee+=u[de>>4&15]+u[de&15]+u[de>>12&15]+u[de>>8&15]+u[de>>20&15]+u[de>>16&15]+u[de>>28&15]+u[de>>24&15];B%H===0&&(ue(fe),se=0)}return re&&(de=fe[se],ee+=u[de>>4&15]+u[de&15],re>1&&(ee+=u[de>>12&15]+u[de>>8&15]),re>2&&(ee+=u[de>>20&15]+u[de>>16&15])),ee},D.prototype.arrayBuffer=function(){this.finalize();var H=this.blockCount,fe=this.s,ie=this.outputBlocks,re=this.extraBytes,se=0,B=0,ee=this.outputBits>>3,de;re?de=new ArrayBuffer(ie+1<<2):de=new ArrayBuffer(ee);for(var Ae=new Uint32Array(de);B<ie;){for(se=0;se<H&&B<ie;++se,++B)Ae[B]=fe[se];B%H===0&&ue(fe)}return re&&(Ae[se]=fe[se],de=de.slice(0,ee)),de},D.prototype.buffer=D.prototype.arrayBuffer,D.prototype.digest=D.prototype.array=function(){this.finalize();for(var H=this.blockCount,fe=this.s,ie=this.outputBlocks,re=this.extraBytes,se=0,B=0,ee=[],de,Ae;B<ie;){for(se=0;se<H&&B<ie;++se,++B)de=B<<2,Ae=fe[se],ee[de]=Ae&255,ee[de+1]=Ae>>8&255,ee[de+2]=Ae>>16&255,ee[de+3]=Ae>>24&255;B%H===0&&ue(fe)}return re&&(de=B<<2,Ae=fe[se],ee[de]=Ae&255,re>1&&(ee[de+1]=Ae>>8&255),re>2&&(ee[de+2]=Ae>>16&255)),ee};function G(H,fe,ie){D.call(this,H,fe,ie)}G.prototype=new D,G.prototype.finalize=function(){return this.encode(this.outputBits,!0),D.prototype.finalize.call(this)};var ue=function(H){var fe,ie,re,se,B,ee,de,Ae,Se,Pe,pt,je,Ge,Je,Ze,Ce,ut,Ye,$e,_t,He,We,wt,Ve,Xe,Ct,nt,Ke,Ie,qe,rt,Pt,Ft,Rt,Qr,st,$t,fr,St,dt,sr,ot,bt,cr,mt,Nt,Ot,yt,ct,Qt,ft,Ne,lr,gr,Ht,Ln,Wt,hr,Zr,Ui,Hi,Jr,dr;for(re=0;re<48;re+=2)se=H[0]^H[10]^H[20]^H[30]^H[40],B=H[1]^H[11]^H[21]^H[31]^H[41],ee=H[2]^H[12]^H[22]^H[32]^H[42],de=H[3]^H[13]^H[23]^H[33]^H[43],Ae=H[4]^H[14]^H[24]^H[34]^H[44],Se=H[5]^H[15]^H[25]^H[35]^H[45],Pe=H[6]^H[16]^H[26]^H[36]^H[46],pt=H[7]^H[17]^H[27]^H[37]^H[47],je=H[8]^H[18]^H[28]^H[38]^H[48],Ge=H[9]^H[19]^H[29]^H[39]^H[49],fe=je^(ee<<1|de>>>31),ie=Ge^(de<<1|ee>>>31),H[0]^=fe,H[1]^=ie,H[10]^=fe,H[11]^=ie,H[20]^=fe,H[21]^=ie,H[30]^=fe,H[31]^=ie,H[40]^=fe,H[41]^=ie,fe=se^(Ae<<1|Se>>>31),ie=B^(Se<<1|Ae>>>31),H[2]^=fe,H[3]^=ie,H[12]^=fe,H[13]^=ie,H[22]^=fe,H[23]^=ie,H[32]^=fe,H[33]^=ie,H[42]^=fe,H[43]^=ie,fe=ee^(Pe<<1|pt>>>31),ie=de^(pt<<1|Pe>>>31),H[4]^=fe,H[5]^=ie,H[14]^=fe,H[15]^=ie,H[24]^=fe,H[25]^=ie,H[34]^=fe,H[35]^=ie,H[44]^=fe,H[45]^=ie,fe=Ae^(je<<1|Ge>>>31),ie=Se^(Ge<<1|je>>>31),H[6]^=fe,H[7]^=ie,H[16]^=fe,H[17]^=ie,H[26]^=fe,H[27]^=ie,H[36]^=fe,H[37]^=ie,H[46]^=fe,H[47]^=ie,fe=Pe^(se<<1|B>>>31),ie=pt^(B<<1|se>>>31),H[8]^=fe,H[9]^=ie,H[18]^=fe,H[19]^=ie,H[28]^=fe,H[29]^=ie,H[38]^=fe,H[39]^=ie,H[48]^=fe,H[49]^=ie,Je=H[0],Ze=H[1],Nt=H[11]<<4|H[10]>>>28,Ot=H[10]<<4|H[11]>>>28,Ke=H[20]<<3|H[21]>>>29,Ie=H[21]<<3|H[20]>>>29,Ui=H[31]<<9|H[30]>>>23,Hi=H[30]<<9|H[31]>>>23,ot=H[40]<<18|H[41]>>>14,bt=H[41]<<18|H[40]>>>14,Rt=H[2]<<1|H[3]>>>31,Qr=H[3]<<1|H[2]>>>31,Ce=H[13]<<12|H[12]>>>20,ut=H[12]<<12|H[13]>>>20,yt=H[22]<<10|H[23]>>>22,ct=H[23]<<10|H[22]>>>22,qe=H[33]<<13|H[32]>>>19,rt=H[32]<<13|H[33]>>>19,Jr=H[42]<<2|H[43]>>>30,dr=H[43]<<2|H[42]>>>30,gr=H[5]<<30|H[4]>>>2,Ht=H[4]<<30|H[5]>>>2,st=H[14]<<6|H[15]>>>26,$t=H[15]<<6|H[14]>>>26,Ye=H[25]<<11|H[24]>>>21,$e=H[24]<<11|H[25]>>>21,Qt=H[34]<<15|H[35]>>>17,ft=H[35]<<15|H[34]>>>17,Pt=H[45]<<29|H[44]>>>3,Ft=H[44]<<29|H[45]>>>3,Ve=H[6]<<28|H[7]>>>4,Xe=H[7]<<28|H[6]>>>4,Ln=H[17]<<23|H[16]>>>9,Wt=H[16]<<23|H[17]>>>9,fr=H[26]<<25|H[27]>>>7,St=H[27]<<25|H[26]>>>7,_t=H[36]<<21|H[37]>>>11,He=H[37]<<21|H[36]>>>11,Ne=H[47]<<24|H[46]>>>8,lr=H[46]<<24|H[47]>>>8,cr=H[8]<<27|H[9]>>>5,mt=H[9]<<27|H[8]>>>5,Ct=H[18]<<20|H[19]>>>12,nt=H[19]<<20|H[18]>>>12,hr=H[29]<<7|H[28]>>>25,Zr=H[28]<<7|H[29]>>>25,dt=H[38]<<8|H[39]>>>24,sr=H[39]<<8|H[38]>>>24,We=H[48]<<14|H[49]>>>18,wt=H[49]<<14|H[48]>>>18,H[0]=Je^~Ce&Ye,H[1]=Ze^~ut&$e,H[10]=Ve^~Ct&Ke,H[11]=Xe^~nt&Ie,H[20]=Rt^~st&fr,H[21]=Qr^~$t&St,H[30]=cr^~Nt&yt,H[31]=mt^~Ot&ct,H[40]=gr^~Ln&hr,H[41]=Ht^~Wt&Zr,H[2]=Ce^~Ye&_t,H[3]=ut^~$e&He,H[12]=Ct^~Ke&qe,H[13]=nt^~Ie&rt,H[22]=st^~fr&dt,H[23]=$t^~St&sr,H[32]=Nt^~yt&Qt,H[33]=Ot^~ct&ft,H[42]=Ln^~hr&Ui,H[43]=Wt^~Zr&Hi,H[4]=Ye^~_t&We,H[5]=$e^~He&wt,H[14]=Ke^~qe&Pt,H[15]=Ie^~rt&Ft,H[24]=fr^~dt&ot,H[25]=St^~sr&bt,H[34]=yt^~Qt&Ne,H[35]=ct^~ft&lr,H[44]=hr^~Ui&Jr,H[45]=Zr^~Hi&dr,H[6]=_t^~We&Je,H[7]=He^~wt&Ze,H[16]=qe^~Pt&Ve,H[17]=rt^~Ft&Xe,H[26]=dt^~ot&Rt,H[27]=sr^~bt&Qr,H[36]=Qt^~Ne&cr,H[37]=ft^~lr&mt,H[46]=Ui^~Jr&gr,H[47]=Hi^~dr&Ht,H[8]=We^~Je&Ce,H[9]=wt^~Ze&ut,H[18]=Pt^~Ve&Ct,H[19]=Ft^~Xe&nt,H[28]=ot^~Rt&st,H[29]=bt^~Qr&$t,H[38]=Ne^~cr&Nt,H[39]=lr^~mt&Ot,H[48]=Jr^~gr&Ln,H[49]=dr^~Ht&Wt,H[0]^=S[re],H[1]^=S[re+1]};if(l)r.exports=E;else for(U=0;U<C.length;++U)i[C[U]]=E[C[U]]})()})(J5);var sz=J5.exports;const oz=ba(sz),az="logger/5.7.0";let o4=!1,a4=!1;const jd={debug:1,default:2,info:2,warning:3,error:4,off:5};let c4=jd.default,gg=null;function cz(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(r){return r.message}return null}const f4=cz();var ob;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(ob||(ob={}));var vs;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(vs||(vs={}));const l4="0123456789abcdef";class kr{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const n=e.toLowerCase();jd[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(c4>jd[n])&&console.log.apply(console,t)}debug(...e){this._log(kr.levels.DEBUG,e)}info(...e){this._log(kr.levels.INFO,e)}warn(...e){this._log(kr.levels.WARNING,e)}makeError(e,t,n){if(a4)return this.makeError("censored error",t,{});t||(t=kr.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(h=>{const u=n[h];try{if(u instanceof Uint8Array){let p="";for(let b=0;b<u.length;b++)p+=l4[u[b]>>4],p+=l4[u[b]&15];i.push(h+"=Uint8Array(0x"+p+")")}else i.push(h+"="+JSON.stringify(u))}catch{i.push(h+"="+JSON.stringify(n[h].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let c="";switch(t){case vs.NUMERIC_FAULT:{c="NUMERIC_FAULT";const h=e;switch(h){case"overflow":case"underflow":case"division-by-zero":c+="-"+h;break;case"negative-power":case"negative-width":c+="-unsupported";break;case"unbound-bitwise-result":c+="-unbound-result";break}break}case vs.CALL_EXCEPTION:case vs.INSUFFICIENT_FUNDS:case vs.MISSING_NEW:case vs.NONCE_EXPIRED:case vs.REPLACEMENT_UNDERPRICED:case vs.TRANSACTION_REPLACED:case vs.UNPREDICTABLE_GAS_LIMIT:c=t;break}c&&(e+=" [ See: https://links.ethers.org/v5-errors-"+c+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const l=new Error(e);return l.reason=s,l.code=t,Object.keys(n).forEach(function(h){l[h]=n[h]}),l}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,kr.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,i){e||this.throwError(t,n,i)}assertArgument(e,t,n,i){e||this.throwArgumentError(t,n,i)}checkNormalize(e){f4&&this.throwError("platform missing String.prototype.normalize",kr.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:f4})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,kr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,kr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n?n=": "+n:n="",e<t&&this.throwError("missing argument"+n,kr.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,kr.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",kr.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",kr.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",kr.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return gg||(gg=new kr(az)),gg}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",kr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),o4){if(!e)return;this.globalLogger().throwError("error censorship permanent",kr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}a4=!!e,o4=!!t}static setLogLevel(e){const t=jd[e.toLowerCase()];if(t==null){kr.globalLogger().warn("invalid log level - "+e);return}c4=t}static from(e){return new kr(e)}}kr.errors=vs;kr.levels=ob;const fz="bytes/5.7.0",rn=new kr(fz);function e_(r){return!!r.toHexString}function xf(r){return r.slice||(r.slice=function(){const e=Array.prototype.slice.call(arguments);return xf(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function lz(r){return uo(r)&&!(r.length%2)||Nm(r)}function u4(r){return typeof r=="number"&&r==r&&r%1===0}function Nm(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!u4(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(!u4(t)||t<0||t>=256)return!1}return!0}function un(r,e){if(e||(e={}),typeof r=="number"){rn.checkSafeUint53(r,"invalid arrayify value");const t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),xf(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),e_(r)&&(r=r.toHexString()),uo(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":rn.throwArgumentError("hex data is odd-length","value",r));const n=[];for(let i=0;i<t.length;i+=2)n.push(parseInt(t.substring(i,i+2),16));return xf(new Uint8Array(n))}return Nm(r)?xf(new Uint8Array(r)):rn.throwArgumentError("invalid arrayify value","value",r)}function uz(r){const e=r.map(i=>un(i)),t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),xf(n)}function hz(r,e){r=un(r),r.length>e&&rn.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(r,e-r.length),xf(t)}function uo(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}const bg="0123456789abcdef";function bi(r,e){if(e||(e={}),typeof r=="number"){rn.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=bg[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),e_(r))return r.toHexString();if(uo(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":rn.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(Nm(r)){let t="0x";for(let n=0;n<r.length;n++){let i=r[n];t+=bg[(i&240)>>4]+bg[i&15]}return t}return rn.throwArgumentError("invalid hexlify value","value",r)}function dz(r){if(typeof r!="string")r=bi(r);else if(!uo(r)||r.length%2)return null;return(r.length-2)/2}function h4(r,e,t){return typeof r!="string"?r=bi(r):(!uo(r)||r.length%2)&&rn.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function pf(r,e){for(typeof r!="string"?r=bi(r):uo(r)||rn.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&rn.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function t_(r){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(lz(r)){let t=un(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=bi(t.slice(0,32)),e.s=bi(t.slice(32,64))):t.length===65?(e.r=bi(t.slice(0,32)),e.s=bi(t.slice(32,64)),e.v=t[64]):rn.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:rn.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=bi(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){const i=hz(un(e._vs),32);e._vs=bi(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&rn.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),i[0]&=127;const c=bi(i);e.s==null?e.s=c:e.s!==c&&rn.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?rn.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&rn.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!uo(e.r)?rn.throwArgumentError("signature missing or invalid r","signature",r):e.r=pf(e.r,32),e.s==null||!uo(e.s)?rn.throwArgumentError("signature missing or invalid s","signature",r):e.s=pf(e.s,32);const t=un(e.s);t[0]>=128&&rn.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);const n=bi(t);e._vs&&(uo(e._vs)||rn.throwArgumentError("signature invalid _vs","signature",r),e._vs=pf(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&rn.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Om(r){return"0x"+oz.keccak_256(un(r))}var Rm={exports:{}};Rm.exports;(function(r){(function(e,t){function n(V,E){if(!V)throw new Error(E||"Assertion failed")}function i(V,E){V.super_=E;var C=function(){};C.prototype=E.prototype,V.prototype=new C,V.prototype.constructor=V}function s(V,E,C){if(s.isBN(V))return V;this.negative=0,this.words=null,this.length=0,this.red=null,V!==null&&((E==="le"||E==="be")&&(C=E,E=10),this._init(V||0,E||10,C||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=Qb.Buffer}catch{}s.isBN=function(E){return E instanceof s?!0:E!==null&&typeof E=="object"&&E.constructor.wordSize===s.wordSize&&Array.isArray(E.words)},s.max=function(E,C){return E.cmp(C)>0?E:C},s.min=function(E,C){return E.cmp(C)<0?E:C},s.prototype._init=function(E,C,U){if(typeof E=="number")return this._initNumber(E,C,U);if(typeof E=="object")return this._initArray(E,C,U);C==="hex"&&(C=16),n(C===(C|0)&&C>=2&&C<=36),E=E.toString().replace(/\s+/g,"");var j=0;E[0]==="-"&&(j++,this.negative=1),j<E.length&&(C===16?this._parseHex(E,j,U):(this._parseBase(E,C,j),U==="le"&&this._initArray(this.toArray(),C,U)))},s.prototype._initNumber=function(E,C,U){E<0&&(this.negative=1,E=-E),E<67108864?(this.words=[E&67108863],this.length=1):E<4503599627370496?(this.words=[E&67108863,E/67108864&67108863],this.length=2):(n(E<9007199254740992),this.words=[E&67108863,E/67108864&67108863,1],this.length=3),U==="le"&&this._initArray(this.toArray(),C,U)},s.prototype._initArray=function(E,C,U){if(n(typeof E.length=="number"),E.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(E.length/3),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var K,X,te=0;if(U==="be")for(j=E.length-1,K=0;j>=0;j-=3)X=E[j]|E[j-1]<<8|E[j-2]<<16,this.words[K]|=X<<te&67108863,this.words[K+1]=X>>>26-te&67108863,te+=24,te>=26&&(te-=26,K++);else if(U==="le")for(j=0,K=0;j<E.length;j+=3)X=E[j]|E[j+1]<<8|E[j+2]<<16,this.words[K]|=X<<te&67108863,this.words[K+1]=X>>>26-te&67108863,te+=24,te>=26&&(te-=26,K++);return this._strip()};function l(V,E){var C=V.charCodeAt(E);if(C>=48&&C<=57)return C-48;if(C>=65&&C<=70)return C-55;if(C>=97&&C<=102)return C-87;n(!1,"Invalid character in "+V)}function h(V,E,C){var U=l(V,C);return C-1>=E&&(U|=l(V,C-1)<<4),U}s.prototype._parseHex=function(E,C,U){this.length=Math.ceil((E.length-C)/6),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var K=0,X=0,te;if(U==="be")for(j=E.length-1;j>=C;j-=2)te=h(E,C,j)<<K,this.words[X]|=te&67108863,K>=18?(K-=18,X+=1,this.words[X]|=te>>>26):K+=8;else{var z=E.length-C;for(j=z%2===0?C+1:C;j<E.length;j+=2)te=h(E,C,j)<<K,this.words[X]|=te&67108863,K>=18?(K-=18,X+=1,this.words[X]|=te>>>26):K+=8}this._strip()};function u(V,E,C,U){for(var j=0,K=0,X=Math.min(V.length,C),te=E;te<X;te++){var z=V.charCodeAt(te)-48;j*=U,z>=49?K=z-49+10:z>=17?K=z-17+10:K=z,n(z>=0&&K<U,"Invalid character"),j+=K}return j}s.prototype._parseBase=function(E,C,U){this.words=[0],this.length=1;for(var j=0,K=1;K<=67108863;K*=C)j++;j--,K=K/C|0;for(var X=E.length-U,te=X%j,z=Math.min(X,X-te)+U,D=0,G=U;G<z;G+=j)D=u(E,G,G+j,C),this.imuln(K),this.words[0]+D<67108864?this.words[0]+=D:this._iaddn(D);if(te!==0){var ue=1;for(D=u(E,G,E.length,C),G=0;G<te;G++)ue*=C;this.imuln(ue),this.words[0]+D<67108864?this.words[0]+=D:this._iaddn(D)}this._strip()},s.prototype.copy=function(E){E.words=new Array(this.length);for(var C=0;C<this.length;C++)E.words[C]=this.words[C];E.length=this.length,E.negative=this.negative,E.red=this.red};function p(V,E){V.words=E.words,V.length=E.length,V.negative=E.negative,V.red=E.red}if(s.prototype._move=function(E){p(E,this)},s.prototype.clone=function(){var E=new s(null);return this.copy(E),E},s.prototype._expand=function(E){for(;this.length<E;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{s.prototype.inspect=b}else s.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(E,C){E=E||10,C=C|0||1;var U;if(E===16||E==="hex"){U="";for(var j=0,K=0,X=0;X<this.length;X++){var te=this.words[X],z=((te<<j|K)&16777215).toString(16);K=te>>>24-j&16777215,j+=2,j>=26&&(j-=26,X--),K!==0||X!==this.length-1?U=y[6-z.length]+z+U:U=z+U}for(K!==0&&(U=K.toString(16)+U);U.length%C!==0;)U="0"+U;return this.negative!==0&&(U="-"+U),U}if(E===(E|0)&&E>=2&&E<=36){var D=w[E],G=_[E];U="";var ue=this.clone();for(ue.negative=0;!ue.isZero();){var H=ue.modrn(G).toString(E);ue=ue.idivn(G),ue.isZero()?U=H+U:U=y[D-H.length]+H+U}for(this.isZero()&&(U="0"+U);U.length%C!==0;)U="0"+U;return this.negative!==0&&(U="-"+U),U}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var E=this.words[0];return this.length===2?E+=this.words[1]*67108864:this.length===3&&this.words[2]===1?E+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-E:E},s.prototype.toJSON=function(){return this.toString(16,2)},c&&(s.prototype.toBuffer=function(E,C){return this.toArrayLike(c,E,C)}),s.prototype.toArray=function(E,C){return this.toArrayLike(Array,E,C)};var S=function(E,C){return E.allocUnsafe?E.allocUnsafe(C):new E(C)};s.prototype.toArrayLike=function(E,C,U){this._strip();var j=this.byteLength(),K=U||Math.max(1,j);n(j<=K,"byte array longer than desired length"),n(K>0,"Requested array length <= 0");var X=S(E,K),te=C==="le"?"LE":"BE";return this["_toArrayLike"+te](X,j),X},s.prototype._toArrayLikeLE=function(E,C){for(var U=0,j=0,K=0,X=0;K<this.length;K++){var te=this.words[K]<<X|j;E[U++]=te&255,U<E.length&&(E[U++]=te>>8&255),U<E.length&&(E[U++]=te>>16&255),X===6?(U<E.length&&(E[U++]=te>>24&255),j=0,X=0):(j=te>>>24,X+=2)}if(U<E.length)for(E[U++]=j;U<E.length;)E[U++]=0},s.prototype._toArrayLikeBE=function(E,C){for(var U=E.length-1,j=0,K=0,X=0;K<this.length;K++){var te=this.words[K]<<X|j;E[U--]=te&255,U>=0&&(E[U--]=te>>8&255),U>=0&&(E[U--]=te>>16&255),X===6?(U>=0&&(E[U--]=te>>24&255),j=0,X=0):(j=te>>>24,X+=2)}if(U>=0)for(E[U--]=j;U>=0;)E[U--]=0},Math.clz32?s.prototype._countBits=function(E){return 32-Math.clz32(E)}:s.prototype._countBits=function(E){var C=E,U=0;return C>=4096&&(U+=13,C>>>=13),C>=64&&(U+=7,C>>>=7),C>=8&&(U+=4,C>>>=4),C>=2&&(U+=2,C>>>=2),U+C},s.prototype._zeroBits=function(E){if(E===0)return 26;var C=E,U=0;return C&8191||(U+=13,C>>>=13),C&127||(U+=7,C>>>=7),C&15||(U+=4,C>>>=4),C&3||(U+=2,C>>>=2),C&1||U++,U},s.prototype.bitLength=function(){var E=this.words[this.length-1],C=this._countBits(E);return(this.length-1)*26+C};function T(V){for(var E=new Array(V.bitLength()),C=0;C<E.length;C++){var U=C/26|0,j=C%26;E[C]=V.words[U]>>>j&1}return E}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var E=0,C=0;C<this.length;C++){var U=this._zeroBits(this.words[C]);if(E+=U,U!==26)break}return E},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(E){return this.negative!==0?this.abs().inotn(E).iaddn(1):this.clone()},s.prototype.fromTwos=function(E){return this.testn(E-1)?this.notn(E).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(E){for(;this.length<E.length;)this.words[this.length++]=0;for(var C=0;C<E.length;C++)this.words[C]=this.words[C]|E.words[C];return this._strip()},s.prototype.ior=function(E){return n((this.negative|E.negative)===0),this.iuor(E)},s.prototype.or=function(E){return this.length>E.length?this.clone().ior(E):E.clone().ior(this)},s.prototype.uor=function(E){return this.length>E.length?this.clone().iuor(E):E.clone().iuor(this)},s.prototype.iuand=function(E){var C;this.length>E.length?C=E:C=this;for(var U=0;U<C.length;U++)this.words[U]=this.words[U]&E.words[U];return this.length=C.length,this._strip()},s.prototype.iand=function(E){return n((this.negative|E.negative)===0),this.iuand(E)},s.prototype.and=function(E){return this.length>E.length?this.clone().iand(E):E.clone().iand(this)},s.prototype.uand=function(E){return this.length>E.length?this.clone().iuand(E):E.clone().iuand(this)},s.prototype.iuxor=function(E){var C,U;this.length>E.length?(C=this,U=E):(C=E,U=this);for(var j=0;j<U.length;j++)this.words[j]=C.words[j]^U.words[j];if(this!==C)for(;j<C.length;j++)this.words[j]=C.words[j];return this.length=C.length,this._strip()},s.prototype.ixor=function(E){return n((this.negative|E.negative)===0),this.iuxor(E)},s.prototype.xor=function(E){return this.length>E.length?this.clone().ixor(E):E.clone().ixor(this)},s.prototype.uxor=function(E){return this.length>E.length?this.clone().iuxor(E):E.clone().iuxor(this)},s.prototype.inotn=function(E){n(typeof E=="number"&&E>=0);var C=Math.ceil(E/26)|0,U=E%26;this._expand(C),U>0&&C--;for(var j=0;j<C;j++)this.words[j]=~this.words[j]&67108863;return U>0&&(this.words[j]=~this.words[j]&67108863>>26-U),this._strip()},s.prototype.notn=function(E){return this.clone().inotn(E)},s.prototype.setn=function(E,C){n(typeof E=="number"&&E>=0);var U=E/26|0,j=E%26;return this._expand(U+1),C?this.words[U]=this.words[U]|1<<j:this.words[U]=this.words[U]&~(1<<j),this._strip()},s.prototype.iadd=function(E){var C;if(this.negative!==0&&E.negative===0)return this.negative=0,C=this.isub(E),this.negative^=1,this._normSign();if(this.negative===0&&E.negative!==0)return E.negative=0,C=this.isub(E),E.negative=1,C._normSign();var U,j;this.length>E.length?(U=this,j=E):(U=E,j=this);for(var K=0,X=0;X<j.length;X++)C=(U.words[X]|0)+(j.words[X]|0)+K,this.words[X]=C&67108863,K=C>>>26;for(;K!==0&&X<U.length;X++)C=(U.words[X]|0)+K,this.words[X]=C&67108863,K=C>>>26;if(this.length=U.length,K!==0)this.words[this.length]=K,this.length++;else if(U!==this)for(;X<U.length;X++)this.words[X]=U.words[X];return this},s.prototype.add=function(E){var C;return E.negative!==0&&this.negative===0?(E.negative=0,C=this.sub(E),E.negative^=1,C):E.negative===0&&this.negative!==0?(this.negative=0,C=E.sub(this),this.negative=1,C):this.length>E.length?this.clone().iadd(E):E.clone().iadd(this)},s.prototype.isub=function(E){if(E.negative!==0){E.negative=0;var C=this.iadd(E);return E.negative=1,C._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(E),this.negative=1,this._normSign();var U=this.cmp(E);if(U===0)return this.negative=0,this.length=1,this.words[0]=0,this;var j,K;U>0?(j=this,K=E):(j=E,K=this);for(var X=0,te=0;te<K.length;te++)C=(j.words[te]|0)-(K.words[te]|0)+X,X=C>>26,this.words[te]=C&67108863;for(;X!==0&&te<j.length;te++)C=(j.words[te]|0)+X,X=C>>26,this.words[te]=C&67108863;if(X===0&&te<j.length&&j!==this)for(;te<j.length;te++)this.words[te]=j.words[te];return this.length=Math.max(this.length,te),j!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(E){return this.clone().isub(E)};function F(V,E,C){C.negative=E.negative^V.negative;var U=V.length+E.length|0;C.length=U,U=U-1|0;var j=V.words[0]|0,K=E.words[0]|0,X=j*K,te=X&67108863,z=X/67108864|0;C.words[0]=te;for(var D=1;D<U;D++){for(var G=z>>>26,ue=z&67108863,H=Math.min(D,E.length-1),fe=Math.max(0,D-V.length+1);fe<=H;fe++){var ie=D-fe|0;j=V.words[ie]|0,K=E.words[fe]|0,X=j*K+ue,G+=X/67108864|0,ue=X&67108863}C.words[D]=ue|0,z=G|0}return z!==0?C.words[D]=z|0:C.length--,C._strip()}var N=function(E,C,U){var j=E.words,K=C.words,X=U.words,te=0,z,D,G,ue=j[0]|0,H=ue&8191,fe=ue>>>13,ie=j[1]|0,re=ie&8191,se=ie>>>13,B=j[2]|0,ee=B&8191,de=B>>>13,Ae=j[3]|0,Se=Ae&8191,Pe=Ae>>>13,pt=j[4]|0,je=pt&8191,Ge=pt>>>13,Je=j[5]|0,Ze=Je&8191,Ce=Je>>>13,ut=j[6]|0,Ye=ut&8191,$e=ut>>>13,_t=j[7]|0,He=_t&8191,We=_t>>>13,wt=j[8]|0,Ve=wt&8191,Xe=wt>>>13,Ct=j[9]|0,nt=Ct&8191,Ke=Ct>>>13,Ie=K[0]|0,qe=Ie&8191,rt=Ie>>>13,Pt=K[1]|0,Ft=Pt&8191,Rt=Pt>>>13,Qr=K[2]|0,st=Qr&8191,$t=Qr>>>13,fr=K[3]|0,St=fr&8191,dt=fr>>>13,sr=K[4]|0,ot=sr&8191,bt=sr>>>13,cr=K[5]|0,mt=cr&8191,Nt=cr>>>13,Ot=K[6]|0,yt=Ot&8191,ct=Ot>>>13,Qt=K[7]|0,ft=Qt&8191,Ne=Qt>>>13,lr=K[8]|0,gr=lr&8191,Ht=lr>>>13,Ln=K[9]|0,Wt=Ln&8191,hr=Ln>>>13;U.negative=E.negative^C.negative,U.length=19,z=Math.imul(H,qe),D=Math.imul(H,rt),D=D+Math.imul(fe,qe)|0,G=Math.imul(fe,rt);var Zr=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,z=Math.imul(re,qe),D=Math.imul(re,rt),D=D+Math.imul(se,qe)|0,G=Math.imul(se,rt),z=z+Math.imul(H,Ft)|0,D=D+Math.imul(H,Rt)|0,D=D+Math.imul(fe,Ft)|0,G=G+Math.imul(fe,Rt)|0;var Ui=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,z=Math.imul(ee,qe),D=Math.imul(ee,rt),D=D+Math.imul(de,qe)|0,G=Math.imul(de,rt),z=z+Math.imul(re,Ft)|0,D=D+Math.imul(re,Rt)|0,D=D+Math.imul(se,Ft)|0,G=G+Math.imul(se,Rt)|0,z=z+Math.imul(H,st)|0,D=D+Math.imul(H,$t)|0,D=D+Math.imul(fe,st)|0,G=G+Math.imul(fe,$t)|0;var Hi=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,z=Math.imul(Se,qe),D=Math.imul(Se,rt),D=D+Math.imul(Pe,qe)|0,G=Math.imul(Pe,rt),z=z+Math.imul(ee,Ft)|0,D=D+Math.imul(ee,Rt)|0,D=D+Math.imul(de,Ft)|0,G=G+Math.imul(de,Rt)|0,z=z+Math.imul(re,st)|0,D=D+Math.imul(re,$t)|0,D=D+Math.imul(se,st)|0,G=G+Math.imul(se,$t)|0,z=z+Math.imul(H,St)|0,D=D+Math.imul(H,dt)|0,D=D+Math.imul(fe,St)|0,G=G+Math.imul(fe,dt)|0;var Jr=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,z=Math.imul(je,qe),D=Math.imul(je,rt),D=D+Math.imul(Ge,qe)|0,G=Math.imul(Ge,rt),z=z+Math.imul(Se,Ft)|0,D=D+Math.imul(Se,Rt)|0,D=D+Math.imul(Pe,Ft)|0,G=G+Math.imul(Pe,Rt)|0,z=z+Math.imul(ee,st)|0,D=D+Math.imul(ee,$t)|0,D=D+Math.imul(de,st)|0,G=G+Math.imul(de,$t)|0,z=z+Math.imul(re,St)|0,D=D+Math.imul(re,dt)|0,D=D+Math.imul(se,St)|0,G=G+Math.imul(se,dt)|0,z=z+Math.imul(H,ot)|0,D=D+Math.imul(H,bt)|0,D=D+Math.imul(fe,ot)|0,G=G+Math.imul(fe,bt)|0;var dr=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(dr>>>26)|0,dr&=67108863,z=Math.imul(Ze,qe),D=Math.imul(Ze,rt),D=D+Math.imul(Ce,qe)|0,G=Math.imul(Ce,rt),z=z+Math.imul(je,Ft)|0,D=D+Math.imul(je,Rt)|0,D=D+Math.imul(Ge,Ft)|0,G=G+Math.imul(Ge,Rt)|0,z=z+Math.imul(Se,st)|0,D=D+Math.imul(Se,$t)|0,D=D+Math.imul(Pe,st)|0,G=G+Math.imul(Pe,$t)|0,z=z+Math.imul(ee,St)|0,D=D+Math.imul(ee,dt)|0,D=D+Math.imul(de,St)|0,G=G+Math.imul(de,dt)|0,z=z+Math.imul(re,ot)|0,D=D+Math.imul(re,bt)|0,D=D+Math.imul(se,ot)|0,G=G+Math.imul(se,bt)|0,z=z+Math.imul(H,mt)|0,D=D+Math.imul(H,Nt)|0,D=D+Math.imul(fe,mt)|0,G=G+Math.imul(fe,Nt)|0;var mr=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(mr>>>26)|0,mr&=67108863,z=Math.imul(Ye,qe),D=Math.imul(Ye,rt),D=D+Math.imul($e,qe)|0,G=Math.imul($e,rt),z=z+Math.imul(Ze,Ft)|0,D=D+Math.imul(Ze,Rt)|0,D=D+Math.imul(Ce,Ft)|0,G=G+Math.imul(Ce,Rt)|0,z=z+Math.imul(je,st)|0,D=D+Math.imul(je,$t)|0,D=D+Math.imul(Ge,st)|0,G=G+Math.imul(Ge,$t)|0,z=z+Math.imul(Se,St)|0,D=D+Math.imul(Se,dt)|0,D=D+Math.imul(Pe,St)|0,G=G+Math.imul(Pe,dt)|0,z=z+Math.imul(ee,ot)|0,D=D+Math.imul(ee,bt)|0,D=D+Math.imul(de,ot)|0,G=G+Math.imul(de,bt)|0,z=z+Math.imul(re,mt)|0,D=D+Math.imul(re,Nt)|0,D=D+Math.imul(se,mt)|0,G=G+Math.imul(se,Nt)|0,z=z+Math.imul(H,yt)|0,D=D+Math.imul(H,ct)|0,D=D+Math.imul(fe,yt)|0,G=G+Math.imul(fe,ct)|0;var ya=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(ya>>>26)|0,ya&=67108863,z=Math.imul(He,qe),D=Math.imul(He,rt),D=D+Math.imul(We,qe)|0,G=Math.imul(We,rt),z=z+Math.imul(Ye,Ft)|0,D=D+Math.imul(Ye,Rt)|0,D=D+Math.imul($e,Ft)|0,G=G+Math.imul($e,Rt)|0,z=z+Math.imul(Ze,st)|0,D=D+Math.imul(Ze,$t)|0,D=D+Math.imul(Ce,st)|0,G=G+Math.imul(Ce,$t)|0,z=z+Math.imul(je,St)|0,D=D+Math.imul(je,dt)|0,D=D+Math.imul(Ge,St)|0,G=G+Math.imul(Ge,dt)|0,z=z+Math.imul(Se,ot)|0,D=D+Math.imul(Se,bt)|0,D=D+Math.imul(Pe,ot)|0,G=G+Math.imul(Pe,bt)|0,z=z+Math.imul(ee,mt)|0,D=D+Math.imul(ee,Nt)|0,D=D+Math.imul(de,mt)|0,G=G+Math.imul(de,Nt)|0,z=z+Math.imul(re,yt)|0,D=D+Math.imul(re,ct)|0,D=D+Math.imul(se,yt)|0,G=G+Math.imul(se,ct)|0,z=z+Math.imul(H,ft)|0,D=D+Math.imul(H,Ne)|0,D=D+Math.imul(fe,ft)|0,G=G+Math.imul(fe,Ne)|0;var ci=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(ci>>>26)|0,ci&=67108863,z=Math.imul(Ve,qe),D=Math.imul(Ve,rt),D=D+Math.imul(Xe,qe)|0,G=Math.imul(Xe,rt),z=z+Math.imul(He,Ft)|0,D=D+Math.imul(He,Rt)|0,D=D+Math.imul(We,Ft)|0,G=G+Math.imul(We,Rt)|0,z=z+Math.imul(Ye,st)|0,D=D+Math.imul(Ye,$t)|0,D=D+Math.imul($e,st)|0,G=G+Math.imul($e,$t)|0,z=z+Math.imul(Ze,St)|0,D=D+Math.imul(Ze,dt)|0,D=D+Math.imul(Ce,St)|0,G=G+Math.imul(Ce,dt)|0,z=z+Math.imul(je,ot)|0,D=D+Math.imul(je,bt)|0,D=D+Math.imul(Ge,ot)|0,G=G+Math.imul(Ge,bt)|0,z=z+Math.imul(Se,mt)|0,D=D+Math.imul(Se,Nt)|0,D=D+Math.imul(Pe,mt)|0,G=G+Math.imul(Pe,Nt)|0,z=z+Math.imul(ee,yt)|0,D=D+Math.imul(ee,ct)|0,D=D+Math.imul(de,yt)|0,G=G+Math.imul(de,ct)|0,z=z+Math.imul(re,ft)|0,D=D+Math.imul(re,Ne)|0,D=D+Math.imul(se,ft)|0,G=G+Math.imul(se,Ne)|0,z=z+Math.imul(H,gr)|0,D=D+Math.imul(H,Ht)|0,D=D+Math.imul(fe,gr)|0,G=G+Math.imul(fe,Ht)|0;var Eo=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(Eo>>>26)|0,Eo&=67108863,z=Math.imul(nt,qe),D=Math.imul(nt,rt),D=D+Math.imul(Ke,qe)|0,G=Math.imul(Ke,rt),z=z+Math.imul(Ve,Ft)|0,D=D+Math.imul(Ve,Rt)|0,D=D+Math.imul(Xe,Ft)|0,G=G+Math.imul(Xe,Rt)|0,z=z+Math.imul(He,st)|0,D=D+Math.imul(He,$t)|0,D=D+Math.imul(We,st)|0,G=G+Math.imul(We,$t)|0,z=z+Math.imul(Ye,St)|0,D=D+Math.imul(Ye,dt)|0,D=D+Math.imul($e,St)|0,G=G+Math.imul($e,dt)|0,z=z+Math.imul(Ze,ot)|0,D=D+Math.imul(Ze,bt)|0,D=D+Math.imul(Ce,ot)|0,G=G+Math.imul(Ce,bt)|0,z=z+Math.imul(je,mt)|0,D=D+Math.imul(je,Nt)|0,D=D+Math.imul(Ge,mt)|0,G=G+Math.imul(Ge,Nt)|0,z=z+Math.imul(Se,yt)|0,D=D+Math.imul(Se,ct)|0,D=D+Math.imul(Pe,yt)|0,G=G+Math.imul(Pe,ct)|0,z=z+Math.imul(ee,ft)|0,D=D+Math.imul(ee,Ne)|0,D=D+Math.imul(de,ft)|0,G=G+Math.imul(de,Ne)|0,z=z+Math.imul(re,gr)|0,D=D+Math.imul(re,Ht)|0,D=D+Math.imul(se,gr)|0,G=G+Math.imul(se,Ht)|0,z=z+Math.imul(H,Wt)|0,D=D+Math.imul(H,hr)|0,D=D+Math.imul(fe,Wt)|0,G=G+Math.imul(fe,hr)|0;var Oe=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,z=Math.imul(nt,Ft),D=Math.imul(nt,Rt),D=D+Math.imul(Ke,Ft)|0,G=Math.imul(Ke,Rt),z=z+Math.imul(Ve,st)|0,D=D+Math.imul(Ve,$t)|0,D=D+Math.imul(Xe,st)|0,G=G+Math.imul(Xe,$t)|0,z=z+Math.imul(He,St)|0,D=D+Math.imul(He,dt)|0,D=D+Math.imul(We,St)|0,G=G+Math.imul(We,dt)|0,z=z+Math.imul(Ye,ot)|0,D=D+Math.imul(Ye,bt)|0,D=D+Math.imul($e,ot)|0,G=G+Math.imul($e,bt)|0,z=z+Math.imul(Ze,mt)|0,D=D+Math.imul(Ze,Nt)|0,D=D+Math.imul(Ce,mt)|0,G=G+Math.imul(Ce,Nt)|0,z=z+Math.imul(je,yt)|0,D=D+Math.imul(je,ct)|0,D=D+Math.imul(Ge,yt)|0,G=G+Math.imul(Ge,ct)|0,z=z+Math.imul(Se,ft)|0,D=D+Math.imul(Se,Ne)|0,D=D+Math.imul(Pe,ft)|0,G=G+Math.imul(Pe,Ne)|0,z=z+Math.imul(ee,gr)|0,D=D+Math.imul(ee,Ht)|0,D=D+Math.imul(de,gr)|0,G=G+Math.imul(de,Ht)|0,z=z+Math.imul(re,Wt)|0,D=D+Math.imul(re,hr)|0,D=D+Math.imul(se,Wt)|0,G=G+Math.imul(se,hr)|0;var Ls=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,z=Math.imul(nt,st),D=Math.imul(nt,$t),D=D+Math.imul(Ke,st)|0,G=Math.imul(Ke,$t),z=z+Math.imul(Ve,St)|0,D=D+Math.imul(Ve,dt)|0,D=D+Math.imul(Xe,St)|0,G=G+Math.imul(Xe,dt)|0,z=z+Math.imul(He,ot)|0,D=D+Math.imul(He,bt)|0,D=D+Math.imul(We,ot)|0,G=G+Math.imul(We,bt)|0,z=z+Math.imul(Ye,mt)|0,D=D+Math.imul(Ye,Nt)|0,D=D+Math.imul($e,mt)|0,G=G+Math.imul($e,Nt)|0,z=z+Math.imul(Ze,yt)|0,D=D+Math.imul(Ze,ct)|0,D=D+Math.imul(Ce,yt)|0,G=G+Math.imul(Ce,ct)|0,z=z+Math.imul(je,ft)|0,D=D+Math.imul(je,Ne)|0,D=D+Math.imul(Ge,ft)|0,G=G+Math.imul(Ge,Ne)|0,z=z+Math.imul(Se,gr)|0,D=D+Math.imul(Se,Ht)|0,D=D+Math.imul(Pe,gr)|0,G=G+Math.imul(Pe,Ht)|0,z=z+Math.imul(ee,Wt)|0,D=D+Math.imul(ee,hr)|0,D=D+Math.imul(de,Wt)|0,G=G+Math.imul(de,hr)|0;var Er=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(Er>>>26)|0,Er&=67108863,z=Math.imul(nt,St),D=Math.imul(nt,dt),D=D+Math.imul(Ke,St)|0,G=Math.imul(Ke,dt),z=z+Math.imul(Ve,ot)|0,D=D+Math.imul(Ve,bt)|0,D=D+Math.imul(Xe,ot)|0,G=G+Math.imul(Xe,bt)|0,z=z+Math.imul(He,mt)|0,D=D+Math.imul(He,Nt)|0,D=D+Math.imul(We,mt)|0,G=G+Math.imul(We,Nt)|0,z=z+Math.imul(Ye,yt)|0,D=D+Math.imul(Ye,ct)|0,D=D+Math.imul($e,yt)|0,G=G+Math.imul($e,ct)|0,z=z+Math.imul(Ze,ft)|0,D=D+Math.imul(Ze,Ne)|0,D=D+Math.imul(Ce,ft)|0,G=G+Math.imul(Ce,Ne)|0,z=z+Math.imul(je,gr)|0,D=D+Math.imul(je,Ht)|0,D=D+Math.imul(Ge,gr)|0,G=G+Math.imul(Ge,Ht)|0,z=z+Math.imul(Se,Wt)|0,D=D+Math.imul(Se,hr)|0,D=D+Math.imul(Pe,Wt)|0,G=G+Math.imul(Pe,hr)|0;var zi=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(zi>>>26)|0,zi&=67108863,z=Math.imul(nt,ot),D=Math.imul(nt,bt),D=D+Math.imul(Ke,ot)|0,G=Math.imul(Ke,bt),z=z+Math.imul(Ve,mt)|0,D=D+Math.imul(Ve,Nt)|0,D=D+Math.imul(Xe,mt)|0,G=G+Math.imul(Xe,Nt)|0,z=z+Math.imul(He,yt)|0,D=D+Math.imul(He,ct)|0,D=D+Math.imul(We,yt)|0,G=G+Math.imul(We,ct)|0,z=z+Math.imul(Ye,ft)|0,D=D+Math.imul(Ye,Ne)|0,D=D+Math.imul($e,ft)|0,G=G+Math.imul($e,Ne)|0,z=z+Math.imul(Ze,gr)|0,D=D+Math.imul(Ze,Ht)|0,D=D+Math.imul(Ce,gr)|0,G=G+Math.imul(Ce,Ht)|0,z=z+Math.imul(je,Wt)|0,D=D+Math.imul(je,hr)|0,D=D+Math.imul(Ge,Wt)|0,G=G+Math.imul(Ge,hr)|0;var fi=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(fi>>>26)|0,fi&=67108863,z=Math.imul(nt,mt),D=Math.imul(nt,Nt),D=D+Math.imul(Ke,mt)|0,G=Math.imul(Ke,Nt),z=z+Math.imul(Ve,yt)|0,D=D+Math.imul(Ve,ct)|0,D=D+Math.imul(Xe,yt)|0,G=G+Math.imul(Xe,ct)|0,z=z+Math.imul(He,ft)|0,D=D+Math.imul(He,Ne)|0,D=D+Math.imul(We,ft)|0,G=G+Math.imul(We,Ne)|0,z=z+Math.imul(Ye,gr)|0,D=D+Math.imul(Ye,Ht)|0,D=D+Math.imul($e,gr)|0,G=G+Math.imul($e,Ht)|0,z=z+Math.imul(Ze,Wt)|0,D=D+Math.imul(Ze,hr)|0,D=D+Math.imul(Ce,Wt)|0,G=G+Math.imul(Ce,hr)|0;var tr=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(tr>>>26)|0,tr&=67108863,z=Math.imul(nt,yt),D=Math.imul(nt,ct),D=D+Math.imul(Ke,yt)|0,G=Math.imul(Ke,ct),z=z+Math.imul(Ve,ft)|0,D=D+Math.imul(Ve,Ne)|0,D=D+Math.imul(Xe,ft)|0,G=G+Math.imul(Xe,Ne)|0,z=z+Math.imul(He,gr)|0,D=D+Math.imul(He,Ht)|0,D=D+Math.imul(We,gr)|0,G=G+Math.imul(We,Ht)|0,z=z+Math.imul(Ye,Wt)|0,D=D+Math.imul(Ye,hr)|0,D=D+Math.imul($e,Wt)|0,G=G+Math.imul($e,hr)|0;var er=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(er>>>26)|0,er&=67108863,z=Math.imul(nt,ft),D=Math.imul(nt,Ne),D=D+Math.imul(Ke,ft)|0,G=Math.imul(Ke,Ne),z=z+Math.imul(Ve,gr)|0,D=D+Math.imul(Ve,Ht)|0,D=D+Math.imul(Xe,gr)|0,G=G+Math.imul(Xe,Ht)|0,z=z+Math.imul(He,Wt)|0,D=D+Math.imul(He,hr)|0,D=D+Math.imul(We,Wt)|0,G=G+Math.imul(We,hr)|0;var Kt=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,z=Math.imul(nt,gr),D=Math.imul(nt,Ht),D=D+Math.imul(Ke,gr)|0,G=Math.imul(Ke,Ht),z=z+Math.imul(Ve,Wt)|0,D=D+Math.imul(Ve,hr)|0,D=D+Math.imul(Xe,Wt)|0,G=G+Math.imul(Xe,hr)|0;var Ao=(te+z|0)+((D&8191)<<13)|0;te=(G+(D>>>13)|0)+(Ao>>>26)|0,Ao&=67108863,z=Math.imul(nt,Wt),D=Math.imul(nt,hr),D=D+Math.imul(Ke,Wt)|0,G=Math.imul(Ke,hr);var _o=(te+z|0)+((D&8191)<<13)|0;return te=(G+(D>>>13)|0)+(_o>>>26)|0,_o&=67108863,X[0]=Zr,X[1]=Ui,X[2]=Hi,X[3]=Jr,X[4]=dr,X[5]=mr,X[6]=ya,X[7]=ci,X[8]=Eo,X[9]=Oe,X[10]=Ls,X[11]=Er,X[12]=zi,X[13]=fi,X[14]=tr,X[15]=er,X[16]=Kt,X[17]=Ao,X[18]=_o,te!==0&&(X[19]=te,U.length++),U};Math.imul||(N=F);function O(V,E,C){C.negative=E.negative^V.negative,C.length=V.length+E.length;for(var U=0,j=0,K=0;K<C.length-1;K++){var X=j;j=0;for(var te=U&67108863,z=Math.min(K,E.length-1),D=Math.max(0,K-V.length+1);D<=z;D++){var G=K-D,ue=V.words[G]|0,H=E.words[D]|0,fe=ue*H,ie=fe&67108863;X=X+(fe/67108864|0)|0,ie=ie+te|0,te=ie&67108863,X=X+(ie>>>26)|0,j+=X>>>26,X&=67108863}C.words[K]=te,U=X,X=j}return U!==0?C.words[K]=U:C.length--,C._strip()}function M(V,E,C){return O(V,E,C)}s.prototype.mulTo=function(E,C){var U,j=this.length+E.length;return this.length===10&&E.length===10?U=N(this,E,C):j<63?U=F(this,E,C):j<1024?U=O(this,E,C):U=M(this,E,C),U},s.prototype.mul=function(E){var C=new s(null);return C.words=new Array(this.length+E.length),this.mulTo(E,C)},s.prototype.mulf=function(E){var C=new s(null);return C.words=new Array(this.length+E.length),M(this,E,C)},s.prototype.imul=function(E){return this.clone().mulTo(E,this)},s.prototype.imuln=function(E){var C=E<0;C&&(E=-E),n(typeof E=="number"),n(E<67108864);for(var U=0,j=0;j<this.length;j++){var K=(this.words[j]|0)*E,X=(K&67108863)+(U&67108863);U>>=26,U+=K/67108864|0,U+=X>>>26,this.words[j]=X&67108863}return U!==0&&(this.words[j]=U,this.length++),C?this.ineg():this},s.prototype.muln=function(E){return this.clone().imuln(E)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(E){var C=T(E);if(C.length===0)return new s(1);for(var U=this,j=0;j<C.length&&C[j]===0;j++,U=U.sqr());if(++j<C.length)for(var K=U.sqr();j<C.length;j++,K=K.sqr())C[j]!==0&&(U=U.mul(K));return U},s.prototype.iushln=function(E){n(typeof E=="number"&&E>=0);var C=E%26,U=(E-C)/26,j=67108863>>>26-C<<26-C,K;if(C!==0){var X=0;for(K=0;K<this.length;K++){var te=this.words[K]&j,z=(this.words[K]|0)-te<<C;this.words[K]=z|X,X=te>>>26-C}X&&(this.words[K]=X,this.length++)}if(U!==0){for(K=this.length-1;K>=0;K--)this.words[K+U]=this.words[K];for(K=0;K<U;K++)this.words[K]=0;this.length+=U}return this._strip()},s.prototype.ishln=function(E){return n(this.negative===0),this.iushln(E)},s.prototype.iushrn=function(E,C,U){n(typeof E=="number"&&E>=0);var j;C?j=(C-C%26)/26:j=0;var K=E%26,X=Math.min((E-K)/26,this.length),te=67108863^67108863>>>K<<K,z=U;if(j-=X,j=Math.max(0,j),z){for(var D=0;D<X;D++)z.words[D]=this.words[D];z.length=X}if(X!==0)if(this.length>X)for(this.length-=X,D=0;D<this.length;D++)this.words[D]=this.words[D+X];else this.words[0]=0,this.length=1;var G=0;for(D=this.length-1;D>=0&&(G!==0||D>=j);D--){var ue=this.words[D]|0;this.words[D]=G<<26-K|ue>>>K,G=ue&te}return z&&G!==0&&(z.words[z.length++]=G),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(E,C,U){return n(this.negative===0),this.iushrn(E,C,U)},s.prototype.shln=function(E){return this.clone().ishln(E)},s.prototype.ushln=function(E){return this.clone().iushln(E)},s.prototype.shrn=function(E){return this.clone().ishrn(E)},s.prototype.ushrn=function(E){return this.clone().iushrn(E)},s.prototype.testn=function(E){n(typeof E=="number"&&E>=0);var C=E%26,U=(E-C)/26,j=1<<C;if(this.length<=U)return!1;var K=this.words[U];return!!(K&j)},s.prototype.imaskn=function(E){n(typeof E=="number"&&E>=0);var C=E%26,U=(E-C)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=U)return this;if(C!==0&&U++,this.length=Math.min(U,this.length),C!==0){var j=67108863^67108863>>>C<<C;this.words[this.length-1]&=j}return this._strip()},s.prototype.maskn=function(E){return this.clone().imaskn(E)},s.prototype.iaddn=function(E){return n(typeof E=="number"),n(E<67108864),E<0?this.isubn(-E):this.negative!==0?this.length===1&&(this.words[0]|0)<=E?(this.words[0]=E-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(E),this.negative=1,this):this._iaddn(E)},s.prototype._iaddn=function(E){this.words[0]+=E;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},s.prototype.isubn=function(E){if(n(typeof E=="number"),n(E<67108864),E<0)return this.iaddn(-E);if(this.negative!==0)return this.negative=0,this.iaddn(E),this.negative=1,this;if(this.words[0]-=E,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this._strip()},s.prototype.addn=function(E){return this.clone().iaddn(E)},s.prototype.subn=function(E){return this.clone().isubn(E)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(E,C,U){var j=E.length+U,K;this._expand(j);var X,te=0;for(K=0;K<E.length;K++){X=(this.words[K+U]|0)+te;var z=(E.words[K]|0)*C;X-=z&67108863,te=(X>>26)-(z/67108864|0),this.words[K+U]=X&67108863}for(;K<this.length-U;K++)X=(this.words[K+U]|0)+te,te=X>>26,this.words[K+U]=X&67108863;if(te===0)return this._strip();for(n(te===-1),te=0,K=0;K<this.length;K++)X=-(this.words[K]|0)+te,te=X>>26,this.words[K]=X&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(E,C){var U=this.length-E.length,j=this.clone(),K=E,X=K.words[K.length-1]|0,te=this._countBits(X);U=26-te,U!==0&&(K=K.ushln(U),j.iushln(U),X=K.words[K.length-1]|0);var z=j.length-K.length,D;if(C!=="mod"){D=new s(null),D.length=z+1,D.words=new Array(D.length);for(var G=0;G<D.length;G++)D.words[G]=0}var ue=j.clone()._ishlnsubmul(K,1,z);ue.negative===0&&(j=ue,D&&(D.words[z]=1));for(var H=z-1;H>=0;H--){var fe=(j.words[K.length+H]|0)*67108864+(j.words[K.length+H-1]|0);for(fe=Math.min(fe/X|0,67108863),j._ishlnsubmul(K,fe,H);j.negative!==0;)fe--,j.negative=0,j._ishlnsubmul(K,1,H),j.isZero()||(j.negative^=1);D&&(D.words[H]=fe)}return D&&D._strip(),j._strip(),C!=="div"&&U!==0&&j.iushrn(U),{div:D||null,mod:j}},s.prototype.divmod=function(E,C,U){if(n(!E.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var j,K,X;return this.negative!==0&&E.negative===0?(X=this.neg().divmod(E,C),C!=="mod"&&(j=X.div.neg()),C!=="div"&&(K=X.mod.neg(),U&&K.negative!==0&&K.iadd(E)),{div:j,mod:K}):this.negative===0&&E.negative!==0?(X=this.divmod(E.neg(),C),C!=="mod"&&(j=X.div.neg()),{div:j,mod:X.mod}):this.negative&E.negative?(X=this.neg().divmod(E.neg(),C),C!=="div"&&(K=X.mod.neg(),U&&K.negative!==0&&K.isub(E)),{div:X.div,mod:K}):E.length>this.length||this.cmp(E)<0?{div:new s(0),mod:this}:E.length===1?C==="div"?{div:this.divn(E.words[0]),mod:null}:C==="mod"?{div:null,mod:new s(this.modrn(E.words[0]))}:{div:this.divn(E.words[0]),mod:new s(this.modrn(E.words[0]))}:this._wordDiv(E,C)},s.prototype.div=function(E){return this.divmod(E,"div",!1).div},s.prototype.mod=function(E){return this.divmod(E,"mod",!1).mod},s.prototype.umod=function(E){return this.divmod(E,"mod",!0).mod},s.prototype.divRound=function(E){var C=this.divmod(E);if(C.mod.isZero())return C.div;var U=C.div.negative!==0?C.mod.isub(E):C.mod,j=E.ushrn(1),K=E.andln(1),X=U.cmp(j);return X<0||K===1&&X===0?C.div:C.div.negative!==0?C.div.isubn(1):C.div.iaddn(1)},s.prototype.modrn=function(E){var C=E<0;C&&(E=-E),n(E<=67108863);for(var U=(1<<26)%E,j=0,K=this.length-1;K>=0;K--)j=(U*j+(this.words[K]|0))%E;return C?-j:j},s.prototype.modn=function(E){return this.modrn(E)},s.prototype.idivn=function(E){var C=E<0;C&&(E=-E),n(E<=67108863);for(var U=0,j=this.length-1;j>=0;j--){var K=(this.words[j]|0)+U*67108864;this.words[j]=K/E|0,U=K%E}return this._strip(),C?this.ineg():this},s.prototype.divn=function(E){return this.clone().idivn(E)},s.prototype.egcd=function(E){n(E.negative===0),n(!E.isZero());var C=this,U=E.clone();C.negative!==0?C=C.umod(E):C=C.clone();for(var j=new s(1),K=new s(0),X=new s(0),te=new s(1),z=0;C.isEven()&&U.isEven();)C.iushrn(1),U.iushrn(1),++z;for(var D=U.clone(),G=C.clone();!C.isZero();){for(var ue=0,H=1;!(C.words[0]&H)&&ue<26;++ue,H<<=1);if(ue>0)for(C.iushrn(ue);ue-- >0;)(j.isOdd()||K.isOdd())&&(j.iadd(D),K.isub(G)),j.iushrn(1),K.iushrn(1);for(var fe=0,ie=1;!(U.words[0]&ie)&&fe<26;++fe,ie<<=1);if(fe>0)for(U.iushrn(fe);fe-- >0;)(X.isOdd()||te.isOdd())&&(X.iadd(D),te.isub(G)),X.iushrn(1),te.iushrn(1);C.cmp(U)>=0?(C.isub(U),j.isub(X),K.isub(te)):(U.isub(C),X.isub(j),te.isub(K))}return{a:X,b:te,gcd:U.iushln(z)}},s.prototype._invmp=function(E){n(E.negative===0),n(!E.isZero());var C=this,U=E.clone();C.negative!==0?C=C.umod(E):C=C.clone();for(var j=new s(1),K=new s(0),X=U.clone();C.cmpn(1)>0&&U.cmpn(1)>0;){for(var te=0,z=1;!(C.words[0]&z)&&te<26;++te,z<<=1);if(te>0)for(C.iushrn(te);te-- >0;)j.isOdd()&&j.iadd(X),j.iushrn(1);for(var D=0,G=1;!(U.words[0]&G)&&D<26;++D,G<<=1);if(D>0)for(U.iushrn(D);D-- >0;)K.isOdd()&&K.iadd(X),K.iushrn(1);C.cmp(U)>=0?(C.isub(U),j.isub(K)):(U.isub(C),K.isub(j))}var ue;return C.cmpn(1)===0?ue=j:ue=K,ue.cmpn(0)<0&&ue.iadd(E),ue},s.prototype.gcd=function(E){if(this.isZero())return E.abs();if(E.isZero())return this.abs();var C=this.clone(),U=E.clone();C.negative=0,U.negative=0;for(var j=0;C.isEven()&&U.isEven();j++)C.iushrn(1),U.iushrn(1);do{for(;C.isEven();)C.iushrn(1);for(;U.isEven();)U.iushrn(1);var K=C.cmp(U);if(K<0){var X=C;C=U,U=X}else if(K===0||U.cmpn(1)===0)break;C.isub(U)}while(!0);return U.iushln(j)},s.prototype.invm=function(E){return this.egcd(E).a.umod(E)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(E){return this.words[0]&E},s.prototype.bincn=function(E){n(typeof E=="number");var C=E%26,U=(E-C)/26,j=1<<C;if(this.length<=U)return this._expand(U+1),this.words[U]|=j,this;for(var K=j,X=U;K!==0&&X<this.length;X++){var te=this.words[X]|0;te+=K,K=te>>>26,te&=67108863,this.words[X]=te}return K!==0&&(this.words[X]=K,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(E){var C=E<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;this._strip();var U;if(this.length>1)U=1;else{C&&(E=-E),n(E<=67108863,"Number is too big");var j=this.words[0]|0;U=j===E?0:j<E?-1:1}return this.negative!==0?-U|0:U},s.prototype.cmp=function(E){if(this.negative!==0&&E.negative===0)return-1;if(this.negative===0&&E.negative!==0)return 1;var C=this.ucmp(E);return this.negative!==0?-C|0:C},s.prototype.ucmp=function(E){if(this.length>E.length)return 1;if(this.length<E.length)return-1;for(var C=0,U=this.length-1;U>=0;U--){var j=this.words[U]|0,K=E.words[U]|0;if(j!==K){j<K?C=-1:j>K&&(C=1);break}}return C},s.prototype.gtn=function(E){return this.cmpn(E)===1},s.prototype.gt=function(E){return this.cmp(E)===1},s.prototype.gten=function(E){return this.cmpn(E)>=0},s.prototype.gte=function(E){return this.cmp(E)>=0},s.prototype.ltn=function(E){return this.cmpn(E)===-1},s.prototype.lt=function(E){return this.cmp(E)===-1},s.prototype.lten=function(E){return this.cmpn(E)<=0},s.prototype.lte=function(E){return this.cmp(E)<=0},s.prototype.eqn=function(E){return this.cmpn(E)===0},s.prototype.eq=function(E){return this.cmp(E)===0},s.red=function(E){return new ne(E)},s.prototype.toRed=function(E){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),E.convertTo(this)._forceRed(E)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(E){return this.red=E,this},s.prototype.forceRed=function(E){return n(!this.red,"Already a number in reduction context"),this._forceRed(E)},s.prototype.redAdd=function(E){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,E)},s.prototype.redIAdd=function(E){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,E)},s.prototype.redSub=function(E){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,E)},s.prototype.redISub=function(E){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,E)},s.prototype.redShl=function(E){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,E)},s.prototype.redMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.mul(this,E)},s.prototype.redIMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.imul(this,E)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(E){return n(this.red&&!E.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,E)};var L={k256:null,p224:null,p192:null,p25519:null};function R(V,E){this.name=V,this.p=new s(E,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var E=new s(null);return E.words=new Array(Math.ceil(this.n/13)),E},R.prototype.ireduce=function(E){var C=E,U;do this.split(C,this.tmp),C=this.imulK(C),C=C.iadd(this.tmp),U=C.bitLength();while(U>this.n);var j=U<this.n?-1:C.ucmp(this.p);return j===0?(C.words[0]=0,C.length=1):j>0?C.isub(this.p):C.strip!==void 0?C.strip():C._strip(),C},R.prototype.split=function(E,C){E.iushrn(this.n,0,C)},R.prototype.imulK=function(E){return E.imul(this.k)};function v(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(v,R),v.prototype.split=function(E,C){for(var U=4194303,j=Math.min(E.length,9),K=0;K<j;K++)C.words[K]=E.words[K];if(C.length=j,E.length<=9){E.words[0]=0,E.length=1;return}var X=E.words[9];for(C.words[C.length++]=X&U,K=10;K<E.length;K++){var te=E.words[K]|0;E.words[K-10]=(te&U)<<4|X>>>22,X=te}X>>>=22,E.words[K-10]=X,X===0&&E.length>10?E.length-=10:E.length-=9},v.prototype.imulK=function(E){E.words[E.length]=0,E.words[E.length+1]=0,E.length+=2;for(var C=0,U=0;U<E.length;U++){var j=E.words[U]|0;C+=j*977,E.words[U]=C&67108863,C=j*64+(C/67108864|0)}return E.words[E.length-1]===0&&(E.length--,E.words[E.length-1]===0&&E.length--),E};function P(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(P,R);function Y(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(Y,R);function J(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(J,R),J.prototype.imulK=function(E){for(var C=0,U=0;U<E.length;U++){var j=(E.words[U]|0)*19+C,K=j&67108863;j>>>=26,E.words[U]=K,C=j}return C!==0&&(E.words[E.length++]=C),E},s._prime=function(E){if(L[E])return L[E];var C;if(E==="k256")C=new v;else if(E==="p224")C=new P;else if(E==="p192")C=new Y;else if(E==="p25519")C=new J;else throw new Error("Unknown prime "+E);return L[E]=C,C};function ne(V){if(typeof V=="string"){var E=s._prime(V);this.m=E.p,this.prime=E}else n(V.gtn(1),"modulus must be greater than 1"),this.m=V,this.prime=null}ne.prototype._verify1=function(E){n(E.negative===0,"red works only with positives"),n(E.red,"red works only with red numbers")},ne.prototype._verify2=function(E,C){n((E.negative|C.negative)===0,"red works only with positives"),n(E.red&&E.red===C.red,"red works only with red numbers")},ne.prototype.imod=function(E){return this.prime?this.prime.ireduce(E)._forceRed(this):(p(E,E.umod(this.m)._forceRed(this)),E)},ne.prototype.neg=function(E){return E.isZero()?E.clone():this.m.sub(E)._forceRed(this)},ne.prototype.add=function(E,C){this._verify2(E,C);var U=E.add(C);return U.cmp(this.m)>=0&&U.isub(this.m),U._forceRed(this)},ne.prototype.iadd=function(E,C){this._verify2(E,C);var U=E.iadd(C);return U.cmp(this.m)>=0&&U.isub(this.m),U},ne.prototype.sub=function(E,C){this._verify2(E,C);var U=E.sub(C);return U.cmpn(0)<0&&U.iadd(this.m),U._forceRed(this)},ne.prototype.isub=function(E,C){this._verify2(E,C);var U=E.isub(C);return U.cmpn(0)<0&&U.iadd(this.m),U},ne.prototype.shl=function(E,C){return this._verify1(E),this.imod(E.ushln(C))},ne.prototype.imul=function(E,C){return this._verify2(E,C),this.imod(E.imul(C))},ne.prototype.mul=function(E,C){return this._verify2(E,C),this.imod(E.mul(C))},ne.prototype.isqr=function(E){return this.imul(E,E.clone())},ne.prototype.sqr=function(E){return this.mul(E,E)},ne.prototype.sqrt=function(E){if(E.isZero())return E.clone();var C=this.m.andln(3);if(n(C%2===1),C===3){var U=this.m.add(new s(1)).iushrn(2);return this.pow(E,U)}for(var j=this.m.subn(1),K=0;!j.isZero()&&j.andln(1)===0;)K++,j.iushrn(1);n(!j.isZero());var X=new s(1).toRed(this),te=X.redNeg(),z=this.m.subn(1).iushrn(1),D=this.m.bitLength();for(D=new s(2*D*D).toRed(this);this.pow(D,z).cmp(te)!==0;)D.redIAdd(te);for(var G=this.pow(D,j),ue=this.pow(E,j.addn(1).iushrn(1)),H=this.pow(E,j),fe=K;H.cmp(X)!==0;){for(var ie=H,re=0;ie.cmp(X)!==0;re++)ie=ie.redSqr();n(re<fe);var se=this.pow(G,new s(1).iushln(fe-re-1));ue=ue.redMul(se),G=se.redSqr(),H=H.redMul(G),fe=re}return ue},ne.prototype.invm=function(E){var C=E._invmp(this.m);return C.negative!==0?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},ne.prototype.pow=function(E,C){if(C.isZero())return new s(1).toRed(this);if(C.cmpn(1)===0)return E.clone();var U=4,j=new Array(1<<U);j[0]=new s(1).toRed(this),j[1]=E;for(var K=2;K<j.length;K++)j[K]=this.mul(j[K-1],E);var X=j[0],te=0,z=0,D=C.bitLength()%26;for(D===0&&(D=26),K=C.length-1;K>=0;K--){for(var G=C.words[K],ue=D-1;ue>=0;ue--){var H=G>>ue&1;if(X!==j[0]&&(X=this.sqr(X)),H===0&&te===0){z=0;continue}te<<=1,te|=H,z++,!(z!==U&&(K!==0||ue!==0))&&(X=this.mul(X,j[te]),z=0,te=0)}D=26}return X},ne.prototype.convertTo=function(E){var C=E.umod(this.m);return C===E?C.clone():C},ne.prototype.convertFrom=function(E){var C=E.clone();return C.red=null,C},s.mont=function(E){return new le(E)};function le(V){ne.call(this,V),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(le,ne),le.prototype.convertTo=function(E){return this.imod(E.ushln(this.shift))},le.prototype.convertFrom=function(E){var C=this.imod(E.mul(this.rinv));return C.red=null,C},le.prototype.imul=function(E,C){if(E.isZero()||C.isZero())return E.words[0]=0,E.length=1,E;var U=E.imul(C),j=U.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),K=U.isub(j).iushrn(this.shift),X=K;return K.cmp(this.m)>=0?X=K.isub(this.m):K.cmpn(0)<0&&(X=K.iadd(this.m)),X._forceRed(this)},le.prototype.mul=function(E,C){if(E.isZero()||C.isZero())return new s(0)._forceRed(this);var U=E.mul(C),j=U.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),K=U.isub(j).iushrn(this.shift),X=K;return K.cmp(this.m)>=0?X=K.isub(this.m):K.cmpn(0)<0&&(X=K.iadd(this.m)),X._forceRed(this)},le.prototype.invm=function(E){var C=this.imod(E._invmp(this.m).mul(this.r2));return C._forceRed(this)}})(r,At)})(Rm);var xz=Rm.exports;const kt=ba(xz);var pz=kt.BN;function gz(r){return new pz(r,36).toString(16)}const bz="strings/5.7.0",mz=new kr(bz);var C1;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(C1||(C1={}));var d4;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(d4||(d4={}));function mg(r,e=C1.current){e!=C1.current&&(mz.checkNormalize(),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const s=r.charCodeAt(n);if(n>=r.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const c=65536+((i&1023)<<10)+(s&1023);t.push(c>>18|240),t.push(c>>12&63|128),t.push(c>>6&63|128),t.push(c&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return un(t)}const yz=`Ethereum Signed Message:
`;function r_(r){return typeof r=="string"&&(r=mg(r)),Om(uz([mg(yz),mg(String(r.length)),r]))}const wz="address/5.7.0",Au=new kr(wz);function x4(r){uo(r,20)||Au.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=un(Om(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const vz=9007199254740991;function Ez(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const Mm={};for(let r=0;r<10;r++)Mm[String(r)]=String(r);for(let r=0;r<26;r++)Mm[String.fromCharCode(65+r)]=String(10+r);const p4=Math.floor(Ez(vz));function Az(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>Mm[n]).join("");for(;e.length>=p4;){let n=e.substring(0,p4);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function _z(r){let e=null;if(typeof r!="string"&&Au.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=x4(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&Au.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==Az(r)&&Au.throwArgumentError("bad icap checksum","address",r),e=gz(r.substring(4));e.length<40;)e="0"+e;e=x4("0x"+e)}else Au.throwArgumentError("invalid address","address",r);return e}function fu(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}var n_={},ir={},$h=i_;function i_(r,e){if(!r)throw new Error(e||"Assertion failed")}i_.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var ab={exports:{}};typeof Object.create=="function"?ab.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ab.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var Cz=ab.exports,Sz=$h,Iz=Cz;ir.inherits=Iz;function Dz(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function Tz(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),i=0;i<r.length;i+=2)t.push(parseInt(r[i]+r[i+1],16))}else for(var n=0,i=0;i<r.length;i++){var s=r.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):Dz(r,i)?(s=65536+((s&1023)<<10)+(r.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}else for(i=0;i<r.length;i++)t[i]=r[i]|0;return t}ir.toArray=Tz;function Nz(r){for(var e="",t=0;t<r.length;t++)e+=o_(r[t].toString(16));return e}ir.toHex=Nz;function s_(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}ir.htonl=s_;function Oz(r,e){for(var t="",n=0;n<r.length;n++){var i=r[n];e==="little"&&(i=s_(i)),t+=a_(i.toString(16))}return t}ir.toHex32=Oz;function o_(r){return r.length===1?"0"+r:r}ir.zero2=o_;function a_(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}ir.zero8=a_;function Rz(r,e,t,n){var i=t-e;Sz(i%4===0);for(var s=new Array(i/4),c=0,l=e;c<s.length;c++,l+=4){var h;n==="big"?h=r[l]<<24|r[l+1]<<16|r[l+2]<<8|r[l+3]:h=r[l+3]<<24|r[l+2]<<16|r[l+1]<<8|r[l],s[c]=h>>>0}return s}ir.join32=Rz;function Mz(r,e){for(var t=new Array(r.length*4),n=0,i=0;n<r.length;n++,i+=4){var s=r[n];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}ir.split32=Mz;function Bz(r,e){return r>>>e|r<<32-e}ir.rotr32=Bz;function Pz(r,e){return r<<e|r>>>32-e}ir.rotl32=Pz;function Fz(r,e){return r+e>>>0}ir.sum32=Fz;function Lz(r,e,t){return r+e+t>>>0}ir.sum32_3=Lz;function kz(r,e,t,n){return r+e+t+n>>>0}ir.sum32_4=kz;function Uz(r,e,t,n,i){return r+e+t+n+i>>>0}ir.sum32_5=Uz;function Hz(r,e,t,n){var i=r[e],s=r[e+1],c=n+s>>>0,l=(c<n?1:0)+t+i;r[e]=l>>>0,r[e+1]=c}ir.sum64=Hz;function zz(r,e,t,n){var i=e+n>>>0,s=(i<e?1:0)+r+t;return s>>>0}ir.sum64_hi=zz;function jz(r,e,t,n){var i=e+n;return i>>>0}ir.sum64_lo=jz;function Gz(r,e,t,n,i,s,c,l){var h=0,u=e;u=u+n>>>0,h+=u<e?1:0,u=u+s>>>0,h+=u<s?1:0,u=u+l>>>0,h+=u<l?1:0;var p=r+t+i+c+h;return p>>>0}ir.sum64_4_hi=Gz;function Vz(r,e,t,n,i,s,c,l){var h=e+n+s+l;return h>>>0}ir.sum64_4_lo=Vz;function qz(r,e,t,n,i,s,c,l,h,u){var p=0,b=e;b=b+n>>>0,p+=b<e?1:0,b=b+s>>>0,p+=b<s?1:0,b=b+l>>>0,p+=b<l?1:0,b=b+u>>>0,p+=b<u?1:0;var y=r+t+i+c+h+p;return y>>>0}ir.sum64_5_hi=qz;function $z(r,e,t,n,i,s,c,l,h,u){var p=e+n+s+l+u;return p>>>0}ir.sum64_5_lo=$z;function Kz(r,e,t){var n=e<<32-t|r>>>t;return n>>>0}ir.rotr64_hi=Kz;function Wz(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}ir.rotr64_lo=Wz;function Yz(r,e,t){return r>>>t}ir.shr64_hi=Yz;function Xz(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}ir.shr64_lo=Xz;var zl={},g4=ir,Qz=$h;function wx(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}zl.BlockHash=wx;wx.prototype.update=function(e,t){if(e=g4.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=g4.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};wx.prototype.digest=function(e){return this.update(this._pad()),Qz(this.pending===null),this._digest(e)};wx.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var c=8;c<this.padLength;c++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,c=8;c<this.padLength;c++)i[s++]=0;return i};var jl={},vo={},Zz=ir,ho=Zz.rotr32;function Jz(r,e,t,n){if(r===0)return c_(e,t,n);if(r===1||r===3)return l_(e,t,n);if(r===2)return f_(e,t,n)}vo.ft_1=Jz;function c_(r,e,t){return r&e^~r&t}vo.ch32=c_;function f_(r,e,t){return r&e^r&t^e&t}vo.maj32=f_;function l_(r,e,t){return r^e^t}vo.p32=l_;function ej(r){return ho(r,2)^ho(r,13)^ho(r,22)}vo.s0_256=ej;function tj(r){return ho(r,6)^ho(r,11)^ho(r,25)}vo.s1_256=tj;function rj(r){return ho(r,7)^ho(r,18)^r>>>3}vo.g0_256=rj;function nj(r){return ho(r,17)^ho(r,19)^r>>>10}vo.g1_256=nj;var _l=ir,ij=zl,sj=vo,yg=_l.rotl32,lu=_l.sum32,oj=_l.sum32_5,aj=sj.ft_1,u_=ij.BlockHash,cj=[1518500249,1859775393,2400959708,3395469782];function go(){if(!(this instanceof go))return new go;u_.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}_l.inherits(go,u_);var fj=go;go.blockSize=512;go.outSize=160;go.hmacStrength=80;go.padLength=64;go.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=yg(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],c=this.h[1],l=this.h[2],h=this.h[3],u=this.h[4];for(i=0;i<n.length;i++){var p=~~(i/20),b=oj(yg(s,5),aj(p,c,l,h),u,n[i],cj[p]);u=h,h=l,l=yg(c,30),c=s,s=b}this.h[0]=lu(this.h[0],s),this.h[1]=lu(this.h[1],c),this.h[2]=lu(this.h[2],l),this.h[3]=lu(this.h[3],h),this.h[4]=lu(this.h[4],u)};go.prototype._digest=function(e){return e==="hex"?_l.toHex32(this.h,"big"):_l.split32(this.h,"big")};var Cl=ir,lj=zl,Gl=vo,uj=$h,ps=Cl.sum32,hj=Cl.sum32_4,dj=Cl.sum32_5,xj=Gl.ch32,pj=Gl.maj32,gj=Gl.s0_256,bj=Gl.s1_256,mj=Gl.g0_256,yj=Gl.g1_256,h_=lj.BlockHash,wj=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bo(){if(!(this instanceof bo))return new bo;h_.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=wj,this.W=new Array(64)}Cl.inherits(bo,h_);var d_=bo;bo.blockSize=512;bo.outSize=256;bo.hmacStrength=192;bo.padLength=64;bo.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=hj(yj(n[i-2]),n[i-7],mj(n[i-15]),n[i-16]);var s=this.h[0],c=this.h[1],l=this.h[2],h=this.h[3],u=this.h[4],p=this.h[5],b=this.h[6],y=this.h[7];for(uj(this.k.length===n.length),i=0;i<n.length;i++){var w=dj(y,bj(u),xj(u,p,b),this.k[i],n[i]),_=ps(gj(s),pj(s,c,l));y=b,b=p,p=u,u=ps(h,w),h=l,l=c,c=s,s=ps(w,_)}this.h[0]=ps(this.h[0],s),this.h[1]=ps(this.h[1],c),this.h[2]=ps(this.h[2],l),this.h[3]=ps(this.h[3],h),this.h[4]=ps(this.h[4],u),this.h[5]=ps(this.h[5],p),this.h[6]=ps(this.h[6],b),this.h[7]=ps(this.h[7],y)};bo.prototype._digest=function(e){return e==="hex"?Cl.toHex32(this.h,"big"):Cl.split32(this.h,"big")};var cb=ir,x_=d_;function xa(){if(!(this instanceof xa))return new xa;x_.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}cb.inherits(xa,x_);var vj=xa;xa.blockSize=512;xa.outSize=224;xa.hmacStrength=192;xa.padLength=64;xa.prototype._digest=function(e){return e==="hex"?cb.toHex32(this.h.slice(0,7),"big"):cb.split32(this.h.slice(0,7),"big")};var Ai=ir,Ej=zl,Aj=$h,xo=Ai.rotr64_hi,po=Ai.rotr64_lo,p_=Ai.shr64_hi,g_=Ai.shr64_lo,Da=Ai.sum64,wg=Ai.sum64_hi,vg=Ai.sum64_lo,_j=Ai.sum64_4_hi,Cj=Ai.sum64_4_lo,Sj=Ai.sum64_5_hi,Ij=Ai.sum64_5_lo,b_=Ej.BlockHash,Dj=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ps(){if(!(this instanceof Ps))return new Ps;b_.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Dj,this.W=new Array(160)}Ai.inherits(Ps,b_);var m_=Ps;Ps.blockSize=1024;Ps.outSize=512;Ps.hmacStrength=192;Ps.padLength=128;Ps.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var s=Uj(n[i-4],n[i-3]),c=Hj(n[i-4],n[i-3]),l=n[i-14],h=n[i-13],u=Lj(n[i-30],n[i-29]),p=kj(n[i-30],n[i-29]),b=n[i-32],y=n[i-31];n[i]=_j(s,c,l,h,u,p,b,y),n[i+1]=Cj(s,c,l,h,u,p,b,y)}};Ps.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],s=this.h[1],c=this.h[2],l=this.h[3],h=this.h[4],u=this.h[5],p=this.h[6],b=this.h[7],y=this.h[8],w=this.h[9],_=this.h[10],S=this.h[11],T=this.h[12],F=this.h[13],N=this.h[14],O=this.h[15];Aj(this.k.length===n.length);for(var M=0;M<n.length;M+=2){var L=N,R=O,v=Pj(y,w),P=Fj(y,w),Y=Tj(y,w,_,S,T),J=Nj(y,w,_,S,T,F),ne=this.k[M],le=this.k[M+1],V=n[M],E=n[M+1],C=Sj(L,R,v,P,Y,J,ne,le,V,E),U=Ij(L,R,v,P,Y,J,ne,le,V,E);L=Mj(i,s),R=Bj(i,s),v=Oj(i,s,c,l,h),P=Rj(i,s,c,l,h,u);var j=wg(L,R,v,P),K=vg(L,R,v,P);N=T,O=F,T=_,F=S,_=y,S=w,y=wg(p,b,C,U),w=vg(b,b,C,U),p=h,b=u,h=c,u=l,c=i,l=s,i=wg(C,U,j,K),s=vg(C,U,j,K)}Da(this.h,0,i,s),Da(this.h,2,c,l),Da(this.h,4,h,u),Da(this.h,6,p,b),Da(this.h,8,y,w),Da(this.h,10,_,S),Da(this.h,12,T,F),Da(this.h,14,N,O)};Ps.prototype._digest=function(e){return e==="hex"?Ai.toHex32(this.h,"big"):Ai.split32(this.h,"big")};function Tj(r,e,t,n,i){var s=r&t^~r&i;return s<0&&(s+=4294967296),s}function Nj(r,e,t,n,i,s){var c=e&n^~e&s;return c<0&&(c+=4294967296),c}function Oj(r,e,t,n,i){var s=r&t^r&i^t&i;return s<0&&(s+=4294967296),s}function Rj(r,e,t,n,i,s){var c=e&n^e&s^n&s;return c<0&&(c+=4294967296),c}function Mj(r,e){var t=xo(r,e,28),n=xo(e,r,2),i=xo(e,r,7),s=t^n^i;return s<0&&(s+=4294967296),s}function Bj(r,e){var t=po(r,e,28),n=po(e,r,2),i=po(e,r,7),s=t^n^i;return s<0&&(s+=4294967296),s}function Pj(r,e){var t=xo(r,e,14),n=xo(r,e,18),i=xo(e,r,9),s=t^n^i;return s<0&&(s+=4294967296),s}function Fj(r,e){var t=po(r,e,14),n=po(r,e,18),i=po(e,r,9),s=t^n^i;return s<0&&(s+=4294967296),s}function Lj(r,e){var t=xo(r,e,1),n=xo(r,e,8),i=p_(r,e,7),s=t^n^i;return s<0&&(s+=4294967296),s}function kj(r,e){var t=po(r,e,1),n=po(r,e,8),i=g_(r,e,7),s=t^n^i;return s<0&&(s+=4294967296),s}function Uj(r,e){var t=xo(r,e,19),n=xo(e,r,29),i=p_(r,e,6),s=t^n^i;return s<0&&(s+=4294967296),s}function Hj(r,e){var t=po(r,e,19),n=po(e,r,29),i=g_(r,e,6),s=t^n^i;return s<0&&(s+=4294967296),s}var fb=ir,y_=m_;function pa(){if(!(this instanceof pa))return new pa;y_.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}fb.inherits(pa,y_);var zj=pa;pa.blockSize=1024;pa.outSize=384;pa.hmacStrength=192;pa.padLength=128;pa.prototype._digest=function(e){return e==="hex"?fb.toHex32(this.h.slice(0,12),"big"):fb.split32(this.h.slice(0,12),"big")};jl.sha1=fj;jl.sha224=vj;jl.sha256=d_;jl.sha384=zj;jl.sha512=m_;var w_={},gc=ir,jj=zl,yd=gc.rotl32,b4=gc.sum32,uu=gc.sum32_3,m4=gc.sum32_4,v_=jj.BlockHash;function mo(){if(!(this instanceof mo))return new mo;v_.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}gc.inherits(mo,v_);w_.ripemd160=mo;mo.blockSize=512;mo.outSize=160;mo.hmacStrength=192;mo.padLength=64;mo.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],s=this.h[2],c=this.h[3],l=this.h[4],h=n,u=i,p=s,b=c,y=l,w=0;w<80;w++){var _=b4(yd(m4(n,y4(w,i,s,c),e[qj[w]+t],Gj(w)),Kj[w]),l);n=l,l=c,c=yd(s,10),s=i,i=_,_=b4(yd(m4(h,y4(79-w,u,p,b),e[$j[w]+t],Vj(w)),Wj[w]),y),h=y,y=b,b=yd(p,10),p=u,u=_}_=uu(this.h[1],s,b),this.h[1]=uu(this.h[2],c,y),this.h[2]=uu(this.h[3],l,h),this.h[3]=uu(this.h[4],n,u),this.h[4]=uu(this.h[0],i,p),this.h[0]=_};mo.prototype._digest=function(e){return e==="hex"?gc.toHex32(this.h,"little"):gc.split32(this.h,"little")};function y4(r,e,t,n){return r<=15?e^t^n:r<=31?e&t|~e&n:r<=47?(e|~t)^n:r<=63?e&n|t&~n:e^(t|~n)}function Gj(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function Vj(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var qj=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],$j=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Kj=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Wj=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Yj=ir,Xj=$h;function Sl(r,e,t){if(!(this instanceof Sl))return new Sl(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(Yj.toArray(e,t))}var Qj=Sl;Sl.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),Xj(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Sl.prototype.update=function(e,t){return this.inner.update(e,t),this};Sl.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(r){var e=r;e.utils=ir,e.common=zl,e.sha=jl,e.ripemd=w_,e.hmac=Qj,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(n_);const Fo=ba(n_);function Vl(r,e,t){return t={path:e,exports:{},require:function(n,i){return Zj(n,i??t.path)}},r(t,t.exports),t.exports}function Zj(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Bm=E_;function E_(r,e){if(!r)throw new Error(e||"Assertion failed")}E_.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var Rs=Vl(function(r,e){var t=e;function n(c,l){if(Array.isArray(c))return c.slice();if(!c)return[];var h=[];if(typeof c!="string"){for(var u=0;u<c.length;u++)h[u]=c[u]|0;return h}if(l==="hex"){c=c.replace(/[^a-z0-9]+/ig,""),c.length%2!==0&&(c="0"+c);for(var u=0;u<c.length;u+=2)h.push(parseInt(c[u]+c[u+1],16))}else for(var u=0;u<c.length;u++){var p=c.charCodeAt(u),b=p>>8,y=p&255;b?h.push(b,y):h.push(y)}return h}t.toArray=n;function i(c){return c.length===1?"0"+c:c}t.zero2=i;function s(c){for(var l="",h=0;h<c.length;h++)l+=i(c[h].toString(16));return l}t.toHex=s,t.encode=function(l,h){return h==="hex"?s(l):l}}),ki=Vl(function(r,e){var t=e;t.assert=Bm,t.toArray=Rs.toArray,t.zero2=Rs.zero2,t.toHex=Rs.toHex,t.encode=Rs.encode;function n(h,u,p){var b=new Array(Math.max(h.bitLength(),p)+1);b.fill(0);for(var y=1<<u+1,w=h.clone(),_=0;_<b.length;_++){var S,T=w.andln(y-1);w.isOdd()?(T>(y>>1)-1?S=(y>>1)-T:S=T,w.isubn(S)):S=0,b[_]=S,w.iushrn(1)}return b}t.getNAF=n;function i(h,u){var p=[[],[]];h=h.clone(),u=u.clone();for(var b=0,y=0,w;h.cmpn(-b)>0||u.cmpn(-y)>0;){var _=h.andln(3)+b&3,S=u.andln(3)+y&3;_===3&&(_=-1),S===3&&(S=-1);var T;_&1?(w=h.andln(7)+b&7,(w===3||w===5)&&S===2?T=-_:T=_):T=0,p[0].push(T);var F;S&1?(w=u.andln(7)+y&7,(w===3||w===5)&&_===2?F=-S:F=S):F=0,p[1].push(F),2*b===T+1&&(b=1-b),2*y===F+1&&(y=1-y),h.iushrn(1),u.iushrn(1)}return p}t.getJSF=i;function s(h,u,p){var b="_"+u;h.prototype[u]=function(){return this[b]!==void 0?this[b]:this[b]=p.call(this)}}t.cachedProperty=s;function c(h){return typeof h=="string"?t.toArray(h,"hex"):h}t.parseBytes=c;function l(h){return new kt(h,"hex","le")}t.intFromLE=l}),S1=ki.getNAF,Jj=ki.getJSF,I1=ki.assert;function d0(r,e){this.type=r,this.p=new kt(e.p,16),this.red=e.prime?kt.red(e.prime):kt.mont(this.p),this.zero=new kt(0).toRed(this.red),this.one=new kt(1).toRed(this.red),this.two=new kt(2).toRed(this.red),this.n=e.n&&new kt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Cc=d0;d0.prototype.point=function(){throw new Error("Not implemented")};d0.prototype.validate=function(){throw new Error("Not implemented")};d0.prototype._fixedNafMul=function(e,t){I1(e.precomputed);var n=e._getDoubles(),i=S1(t,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var c=[],l,h;for(l=0;l<i.length;l+=n.step){h=0;for(var u=l+n.step-1;u>=l;u--)h=(h<<1)+i[u];c.push(h)}for(var p=this.jpoint(null,null,null),b=this.jpoint(null,null,null),y=s;y>0;y--){for(l=0;l<c.length;l++)h=c[l],h===y?b=b.mixedAdd(n.points[l]):h===-y&&(b=b.mixedAdd(n.points[l].neg()));p=p.add(b)}return p.toP()};d0.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,c=S1(t,n,this._bitLength),l=this.jpoint(null,null,null),h=c.length-1;h>=0;h--){for(var u=0;h>=0&&c[h]===0;h--)u++;if(h>=0&&u++,l=l.dblp(u),h<0)break;var p=c[h];I1(p!==0),e.type==="affine"?p>0?l=l.mixedAdd(s[p-1>>1]):l=l.mixedAdd(s[-p-1>>1].neg()):p>0?l=l.add(s[p-1>>1]):l=l.add(s[-p-1>>1].neg())}return e.type==="affine"?l.toP():l};d0.prototype._wnafMulAdd=function(e,t,n,i,s){var c=this._wnafT1,l=this._wnafT2,h=this._wnafT3,u=0,p,b,y;for(p=0;p<i;p++){y=t[p];var w=y._getNAFPoints(e);c[p]=w.wnd,l[p]=w.points}for(p=i-1;p>=1;p-=2){var _=p-1,S=p;if(c[_]!==1||c[S]!==1){h[_]=S1(n[_],c[_],this._bitLength),h[S]=S1(n[S],c[S],this._bitLength),u=Math.max(h[_].length,u),u=Math.max(h[S].length,u);continue}var T=[t[_],null,null,t[S]];t[_].y.cmp(t[S].y)===0?(T[1]=t[_].add(t[S]),T[2]=t[_].toJ().mixedAdd(t[S].neg())):t[_].y.cmp(t[S].y.redNeg())===0?(T[1]=t[_].toJ().mixedAdd(t[S]),T[2]=t[_].add(t[S].neg())):(T[1]=t[_].toJ().mixedAdd(t[S]),T[2]=t[_].toJ().mixedAdd(t[S].neg()));var F=[-3,-1,-5,-7,0,7,5,1,3],N=Jj(n[_],n[S]);for(u=Math.max(N[0].length,u),h[_]=new Array(u),h[S]=new Array(u),b=0;b<u;b++){var O=N[0][b]|0,M=N[1][b]|0;h[_][b]=F[(O+1)*3+(M+1)],h[S][b]=0,l[_]=T}}var L=this.jpoint(null,null,null),R=this._wnafT4;for(p=u;p>=0;p--){for(var v=0;p>=0;){var P=!0;for(b=0;b<i;b++)R[b]=h[b][p]|0,R[b]!==0&&(P=!1);if(!P)break;v++,p--}if(p>=0&&v++,L=L.dblp(v),p<0)break;for(b=0;b<i;b++){var Y=R[b];Y!==0&&(Y>0?y=l[b][Y-1>>1]:Y<0&&(y=l[b][-Y-1>>1].neg()),y.type==="affine"?L=L.mixedAdd(y):L=L.add(y))}}for(p=0;p<i;p++)l[p]=null;return s?L:L.toP()};function fs(r,e){this.curve=r,this.type=e,this.precomputed=null}d0.BasePoint=fs;fs.prototype.eq=function(){throw new Error("Not implemented")};fs.prototype.validate=function(){return this.curve.validate(this)};d0.prototype.decodePoint=function(e,t){e=ki.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?I1(e[e.length-1]%2===0):e[0]===7&&I1(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};fs.prototype.encodeCompressed=function(e){return this.encode(e,!0)};fs.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};fs.prototype.encode=function(e,t){return ki.encode(this._encode(t),e)};fs.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};fs.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};fs.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<t;s+=e){for(var c=0;c<e;c++)i=i.dbl();n.push(i)}return{step:e,points:n}};fs.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};fs.prototype._getBeta=function(){return null};fs.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var Pm=Vl(function(r){typeof Object.create=="function"?r.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}}),eG=ki.assert;function ls(r){Cc.call(this,"short",r),this.a=new kt(r.a,16).toRed(this.red),this.b=new kt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Pm(ls,Cc);var tG=ls;ls.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new kt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new kt(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?n=s[0]:(n=s[1],eG(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var c;return e.basis?c=e.basis.map(function(l){return{a:new kt(l.a,16),b:new kt(l.b,16)}}):c=this._getEndoBasis(n),{beta:t,lambda:n,basis:c}}};ls.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:kt.mont(e),n=new kt(2).toRed(t).redInvm(),i=n.redNeg(),s=new kt(3).toRed(t).redNeg().redSqrt().redMul(n),c=i.redAdd(s).fromRed(),l=i.redSub(s).fromRed();return[c,l]};ls.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new kt(1),c=new kt(0),l=new kt(0),h=new kt(1),u,p,b,y,w,_,S,T=0,F,N;n.cmpn(0)!==0;){var O=i.div(n);F=i.sub(O.mul(n)),N=l.sub(O.mul(s));var M=h.sub(O.mul(c));if(!b&&F.cmp(t)<0)u=S.neg(),p=s,b=F.neg(),y=N;else if(b&&++T===2)break;S=F,i=n,n=F,l=s,s=N,h=c,c=M}w=F.neg(),_=N;var L=b.sqr().add(y.sqr()),R=w.sqr().add(_.sqr());return R.cmp(L)>=0&&(w=u,_=p),b.negative&&(b=b.neg(),y=y.neg()),w.negative&&(w=w.neg(),_=_.neg()),[{a:b,b:y},{a:w,b:_}]};ls.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),c=n.b.neg().mul(e).divRound(this.n),l=s.mul(n.a),h=c.mul(i.a),u=s.mul(n.b),p=c.mul(i.b),b=e.sub(l).sub(h),y=u.add(p).neg();return{k1:b,k2:y}};ls.prototype.pointFromX=function(e,t){e=new kt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};ls.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};ls.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,c=0;c<e.length;c++){var l=this._endoSplit(t[c]),h=e[c],u=h._getBeta();l.k1.negative&&(l.k1.ineg(),h=h.neg(!0)),l.k2.negative&&(l.k2.ineg(),u=u.neg(!0)),i[c*2]=h,i[c*2+1]=u,s[c*2]=l.k1,s[c*2+1]=l.k2}for(var p=this._wnafMulAdd(1,i,s,c*2,n),b=0;b<c*2;b++)i[b]=null,s[b]=null;return p};function wn(r,e,t,n){Cc.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new kt(e,16),this.y=new kt(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Pm(wn,Cc.BasePoint);ls.prototype.point=function(e,t,n){return new wn(this,e,t,n)};ls.prototype.pointFromJSON=function(e,t){return wn.fromJSON(this,e,t)};wn.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};wn.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};wn.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function s(l){return e.point(l[0],l[1],n)}var c=t[2];return i.precomputed={beta:null,doubles:c.doubles&&{step:c.doubles.step,points:[i].concat(c.doubles.points.map(s))},naf:c.naf&&{wnd:c.naf.wnd,points:[i].concat(c.naf.points.map(s))}},i};wn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};wn.prototype.isInfinity=function(){return this.inf};wn.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};wn.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),c=s.redSqr().redISub(this.x.redAdd(this.x)),l=s.redMul(this.x.redSub(c)).redISub(this.y);return this.curve.point(c,l)};wn.prototype.getX=function(){return this.x.fromRed()};wn.prototype.getY=function(){return this.y.fromRed()};wn.prototype.mul=function(e){return e=new kt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};wn.prototype.mulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};wn.prototype.jmulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};wn.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};wn.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};wn.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Pn(r,e,t,n){Cc.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new kt(0)):(this.x=new kt(e,16),this.y=new kt(t,16),this.z=new kt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Pm(Pn,Cc.BasePoint);ls.prototype.jpoint=function(e,t,n){return new Pn(this,e,t,n)};Pn.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};Pn.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Pn.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(n),c=this.y.redMul(t.redMul(e.z)),l=e.y.redMul(n.redMul(this.z)),h=i.redSub(s),u=c.redSub(l);if(h.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var p=h.redSqr(),b=p.redMul(h),y=i.redMul(p),w=u.redSqr().redIAdd(b).redISub(y).redISub(y),_=u.redMul(y.redISub(w)).redISub(c.redMul(b)),S=this.z.redMul(e.z).redMul(h);return this.curve.jpoint(w,_,S)};Pn.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),s=this.y,c=e.y.redMul(t).redMul(this.z),l=n.redSub(i),h=s.redSub(c);if(l.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=l.redSqr(),p=u.redMul(l),b=n.redMul(u),y=h.redSqr().redIAdd(p).redISub(b).redISub(b),w=h.redMul(b.redISub(y)).redISub(s.redMul(p)),_=this.z.redMul(l);return this.curve.jpoint(y,w,_)};Pn.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,c=this.x,l=this.y,h=this.z,u=h.redSqr().redSqr(),p=l.redAdd(l);for(t=0;t<e;t++){var b=c.redSqr(),y=p.redSqr(),w=y.redSqr(),_=b.redAdd(b).redIAdd(b).redIAdd(i.redMul(u)),S=c.redMul(y),T=_.redSqr().redISub(S.redAdd(S)),F=S.redISub(T),N=_.redMul(F);N=N.redIAdd(N).redISub(w);var O=p.redMul(h);t+1<e&&(u=u.redMul(w)),c=T,h=O,p=N}return this.curve.jpoint(c,p.redMul(s),h)};Pn.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Pn.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),c=s.redSqr(),l=this.x.redAdd(s).redSqr().redISub(i).redISub(c);l=l.redIAdd(l);var h=i.redAdd(i).redIAdd(i),u=h.redSqr().redISub(l).redISub(l),p=c.redIAdd(c);p=p.redIAdd(p),p=p.redIAdd(p),e=u,t=h.redMul(l.redISub(u)).redISub(p),n=this.y.redAdd(this.y)}else{var b=this.x.redSqr(),y=this.y.redSqr(),w=y.redSqr(),_=this.x.redAdd(y).redSqr().redISub(b).redISub(w);_=_.redIAdd(_);var S=b.redAdd(b).redIAdd(b),T=S.redSqr(),F=w.redIAdd(w);F=F.redIAdd(F),F=F.redIAdd(F),e=T.redISub(_).redISub(_),t=S.redMul(_.redISub(e)).redISub(F),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};Pn.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),c=s.redSqr(),l=this.x.redAdd(s).redSqr().redISub(i).redISub(c);l=l.redIAdd(l);var h=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=h.redSqr().redISub(l).redISub(l);e=u;var p=c.redIAdd(c);p=p.redIAdd(p),p=p.redIAdd(p),t=h.redMul(l.redISub(u)).redISub(p),n=this.y.redAdd(this.y)}else{var b=this.z.redSqr(),y=this.y.redSqr(),w=this.x.redMul(y),_=this.x.redSub(b).redMul(this.x.redAdd(b));_=_.redAdd(_).redIAdd(_);var S=w.redIAdd(w);S=S.redIAdd(S);var T=S.redAdd(S);e=_.redSqr().redISub(T),n=this.y.redAdd(this.z).redSqr().redISub(y).redISub(b);var F=y.redSqr();F=F.redIAdd(F),F=F.redIAdd(F),F=F.redIAdd(F),t=_.redMul(S.redISub(e)).redISub(F)}return this.curve.jpoint(e,t,n)};Pn.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),c=t.redSqr(),l=n.redSqr(),h=c.redAdd(c).redIAdd(c).redIAdd(e.redMul(s)),u=t.redAdd(t);u=u.redIAdd(u);var p=u.redMul(l),b=h.redSqr().redISub(p.redAdd(p)),y=p.redISub(b),w=l.redSqr();w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var _=h.redMul(y).redISub(w),S=n.redAdd(n).redMul(i);return this.curve.jpoint(b,_,S)};Pn.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),c=s.redSqr(),l=this.x.redAdd(t).redSqr().redISub(e).redISub(i);l=l.redIAdd(l),l=l.redAdd(l).redIAdd(l),l=l.redISub(c);var h=l.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var p=s.redIAdd(l).redSqr().redISub(c).redISub(h).redISub(u),b=t.redMul(p);b=b.redIAdd(b),b=b.redIAdd(b);var y=this.x.redMul(h).redISub(b);y=y.redIAdd(y),y=y.redIAdd(y);var w=this.y.redMul(p.redMul(u.redISub(p)).redISub(l.redMul(h)));w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var _=this.z.redAdd(l).redSqr().redISub(n).redISub(h);return this.curve.jpoint(y,w,_)};Pn.prototype.mul=function(e,t){return e=new kt(e,t),this.curve._wnafMul(this,e)};Pn.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Pn.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Pn.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Pn.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Gd=Vl(function(r,e){var t=e;t.base=Cc,t.short=tG,t.mont=null,t.edwards=null}),Vd=Vl(function(r,e){var t=e,n=ki.assert;function i(l){l.type==="short"?this.curve=new Gd.short(l):l.type==="edwards"?this.curve=new Gd.edwards(l):this.curve=new Gd.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(l,h){Object.defineProperty(t,l,{configurable:!0,enumerable:!0,get:function(){var u=new i(h);return Object.defineProperty(t,l,{configurable:!0,enumerable:!0,value:u}),u}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Fo.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Fo.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Fo.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Fo.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Fo.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Fo.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Fo.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=null.crash()}catch{c=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Fo.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})});function n0(r){if(!(this instanceof n0))return new n0(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Rs.toArray(r.entropy,r.entropyEnc||"hex"),t=Rs.toArray(r.nonce,r.nonceEnc||"hex"),n=Rs.toArray(r.pers,r.persEnc||"hex");Bm(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}var A_=n0;n0.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};n0.prototype._hmac=function(){return new Fo.hmac(this.hash,this.K)};n0.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};n0.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=Rs.toArray(e,t),n=Rs.toArray(n,i),Bm(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};n0.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=Rs.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var c=s.slice(0,e);return this._update(n),this._reseed++,Rs.encode(c,t)};var lb=ki.assert;function Xn(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Fm=Xn;Xn.fromPublic=function(e,t,n){return t instanceof Xn?t:new Xn(e,{pub:t,pubEnc:n})};Xn.fromPrivate=function(e,t,n){return t instanceof Xn?t:new Xn(e,{priv:t,privEnc:n})};Xn.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Xn.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Xn.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Xn.prototype._importPrivate=function(e,t){this.priv=new kt(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Xn.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?lb(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&lb(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Xn.prototype.derive=function(e){return e.validate()||lb(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Xn.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};Xn.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Xn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var rG=ki.assert;function vx(r,e){if(r instanceof vx)return r;this._importDER(r,e)||(rG(r.r&&r.s,"Signature without r or s"),this.r=new kt(r.r,16),this.s=new kt(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var Ex=vx;function nG(){this.place=0}function Eg(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4)return!1;for(var i=0,s=0,c=e.place;s<n;s++,c++)i<<=8,i|=r[c],i>>>=0;return i<=127?!1:(e.place=c,i)}function w4(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}vx.prototype._importDER=function(e,t){e=ki.toArray(e,t);var n=new nG;if(e[n.place++]!==48)return!1;var i=Eg(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Eg(e,n);if(s===!1)return!1;var c=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var l=Eg(e,n);if(l===!1||e.length!==l+n.place)return!1;var h=e.slice(n.place,l+n.place);if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;return this.r=new kt(c),this.s=new kt(h),this.recoveryParam=null,!0};function Ag(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}vx.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=w4(t),n=w4(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Ag(i,t.length),i=i.concat(t),i.push(2),Ag(i,n.length);var s=i.concat(n),c=[48];return Ag(c,s.length),c=c.concat(s),ki.encode(c,e)};var iG=function(){throw new Error("unsupported")},__=ki.assert;function as(r){if(!(this instanceof as))return new as(r);typeof r=="string"&&(__(Object.prototype.hasOwnProperty.call(Vd,r),"Unknown curve "+r),r=Vd[r]),r instanceof Vd.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var sG=as;as.prototype.keyPair=function(e){return new Fm(this,e)};as.prototype.keyFromPrivate=function(e,t){return Fm.fromPrivate(this,e,t)};as.prototype.keyFromPublic=function(e,t){return Fm.fromPublic(this,e,t)};as.prototype.genKeyPair=function(e){e||(e={});for(var t=new A_({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||iG(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new kt(2));;){var s=new kt(t.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};as.prototype._truncateToN=function(e,t){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};as.prototype.sign=function(e,t,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new kt(e,16));for(var s=this.n.byteLength(),c=t.getPrivate().toArray("be",s),l=e.toArray("be",s),h=new A_({hash:this.hash,entropy:c,nonce:l,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new kt(1)),p=0;;p++){var b=i.k?i.k(p):new kt(h.generate(this.n.byteLength()));if(b=this._truncateToN(b,!0),!(b.cmpn(1)<=0||b.cmp(u)>=0)){var y=this.g.mul(b);if(!y.isInfinity()){var w=y.getX(),_=w.umod(this.n);if(_.cmpn(0)!==0){var S=b.invm(this.n).mul(_.mul(t.getPrivate()).iadd(e));if(S=S.umod(this.n),S.cmpn(0)!==0){var T=(y.getY().isOdd()?1:0)|(w.cmp(_)!==0?2:0);return i.canonical&&S.cmp(this.nh)>0&&(S=this.n.sub(S),T^=1),new Ex({r:_,s:S,recoveryParam:T})}}}}}};as.prototype.verify=function(e,t,n,i){e=this._truncateToN(new kt(e,16)),n=this.keyFromPublic(n,i),t=new Ex(t,"hex");var s=t.r,c=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||c.cmpn(1)<0||c.cmp(this.n)>=0)return!1;var l=c.invm(this.n),h=l.mul(e).umod(this.n),u=l.mul(s).umod(this.n),p;return this.curve._maxwellTrick?(p=this.g.jmulAdd(h,n.getPublic(),u),p.isInfinity()?!1:p.eqXToP(s)):(p=this.g.mulAdd(h,n.getPublic(),u),p.isInfinity()?!1:p.getX().umod(this.n).cmp(s)===0)};as.prototype.recoverPubKey=function(r,e,t,n){__((3&t)===t,"The recovery param is more than two bits"),e=new Ex(e,n);var i=this.n,s=new kt(r),c=e.r,l=e.s,h=t&1,u=t>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?c=this.curve.pointFromX(c.add(this.curve.n),h):c=this.curve.pointFromX(c,h);var p=e.r.invm(i),b=i.sub(s).mul(p).umod(i),y=l.mul(p).umod(i);return this.g.mulAdd(b,c,y)};as.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new Ex(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(r,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var oG=Vl(function(r,e){var t=e;t.version="6.5.4",t.utils=ki,t.rand=function(){throw new Error("unsupported")},t.curve=Gd,t.curves=Vd,t.ec=sG,t.eddsa=null}),aG=oG.ec;const cG="signing-key/5.7.0",ub=new kr(cG);let _g=null;function oo(){return _g||(_g=new aG("secp256k1")),_g}class fG{constructor(e){fu(this,"curve","secp256k1"),fu(this,"privateKey",bi(e)),dz(this.privateKey)!==32&&ub.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=oo().keyFromPrivate(un(this.privateKey));fu(this,"publicKey","0x"+t.getPublic(!1,"hex")),fu(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),fu(this,"_isSigningKey",!0)}_addPoint(e){const t=oo().keyFromPublic(un(this.publicKey)),n=oo().keyFromPublic(un(e));return"0x"+t.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const t=oo().keyFromPrivate(un(this.privateKey)),n=un(e);n.length!==32&&ub.throwArgumentError("bad digest length","digest",e);const i=t.sign(n,{canonical:!0});return t_({recoveryParam:i.recoveryParam,r:pf("0x"+i.r.toString(16),32),s:pf("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=oo().keyFromPrivate(un(this.privateKey)),n=oo().keyFromPublic(un(C_(e)));return pf("0x"+t.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function lG(r,e){const t=t_(e),n={r:un(t.r),s:un(t.s)};return"0x"+oo().recoverPubKey(un(r),n,t.recoveryParam).encode("hex",!1)}function C_(r,e){const t=un(r);if(t.length===32){const n=new fG(t);return e?"0x"+oo().keyFromPrivate(t).getPublic(!0,"hex"):n.publicKey}else{if(t.length===33)return e?bi(t):"0x"+oo().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+oo().keyFromPublic(t).getPublic(!0,"hex"):bi(t)}return ub.throwArgumentError("invalid public or private key","key","[REDACTED]")}var v4;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(v4||(v4={}));function uG(r){const e=C_(r);return _z(h4(Om(h4(e,1)),12))}function hG(r,e){return uG(lG(un(r),e))}let dG=class{constructor(e){this.client=e}},xG=class{constructor(e){this.opts=e}};const pG="https://rpc.walletconnect.com/v1",wd={wc_authRequest:{req:{ttl:tt.ONE_DAY,prompt:!0,tag:3e3},res:{ttl:tt.ONE_DAY,prompt:!1,tag:3001}}},Cg={min:tt.FIVE_MINUTES,max:tt.SEVEN_DAYS},S_="wc",gG=1,bG="auth",E4="authClient",qd=`${S_}@1:${bG}:`,_u=`${qd}:PUB_KEY`;function Lm(r){return r==null?void 0:r.split(":")}function mG(r){const e=r&&Lm(r);if(e)return e[3]}function yG(r){const e=r&&Lm(r);if(e)return e[2]+":"+e[3]}function A4(r){const e=r&&Lm(r);if(e)return e.pop()}async function wG(r,e,t,n,i){switch(t.t){case"eip191":return vG(r,e,t.s);case"eip1271":return await EG(r,e,t.s,n,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}function vG(r,e,t){return hG(r_(e),t).toLowerCase()===r.toLowerCase()}async function EG(r,e,t,n,i){try{const s="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",h=t.substring(2),u=r_(e).substring(2),p=s+u+c+l+h,b=await B5(`${pG}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:AG(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:p},"latest"]})}),{result:y}=await b.json();return y?y.slice(0,s.length).toLowerCase()===s.toLowerCase():!1}catch(s){return console.error("isValidEip1271Signature: ",s),!1}}function AG(){return Date.now()+Math.floor(Math.random()*1e3)}function I_(r){return r.getAll().filter(e=>"requester"in e)}function D_(r,e){return I_(r).find(t=>t.id===e)}function _G(r){const e=ez(r.aud),t=new RegExp(`${r.domain}`).test(r.aud),n=!!r.nonce,i=r.type?r.type==="eip4361":!0,s=r.expiry;if(s&&!iz(s,Cg)){const{message:c}=S0("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${Cg.min} and ${Cg.max}`);throw new Error(c)}return!!(e&&t&&n&&i)}function CG(r,e){return!!D_(e,r.id)}function SG(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function IG(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),c=s.charCodeAt(0);if(t[c]!==255)throw new TypeError(s+" is ambiguous");t[c]=i}var l=r.length,h=r.charAt(0),u=Math.log(l)/Math.log(256),p=Math.log(256)/Math.log(l);function b(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var S=0,T=0,F=0,N=_.length;F!==N&&_[F]===0;)F++,S++;for(var O=(N-F)*p+1>>>0,M=new Uint8Array(O);F!==N;){for(var L=_[F],R=0,v=O-1;(L!==0||R<T)&&v!==-1;v--,R++)L+=256*M[v]>>>0,M[v]=L%l>>>0,L=L/l>>>0;if(L!==0)throw new Error("Non-zero carry");T=R,F++}for(var P=O-T;P!==O&&M[P]===0;)P++;for(var Y=h.repeat(S);P<O;++P)Y+=r.charAt(M[P]);return Y}function y(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var S=0;if(_[S]!==" "){for(var T=0,F=0;_[S]===h;)T++,S++;for(var N=(_.length-S)*u+1>>>0,O=new Uint8Array(N);_[S];){var M=t[_.charCodeAt(S)];if(M===255)return;for(var L=0,R=N-1;(M!==0||L<F)&&R!==-1;R--,L++)M+=l*O[R]>>>0,O[R]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");F=L,S++}if(_[S]!==" "){for(var v=N-F;v!==N&&O[v]===0;)v++;for(var P=new Uint8Array(T+(N-v)),Y=T;v!==N;)P[Y++]=O[v++];return P}}}function w(_){var S=y(_);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:y,decode:w}}var DG=IG,TG=DG;const T_=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},NG=r=>new TextEncoder().encode(r),OG=r=>new TextDecoder().decode(r);class RG{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class MG{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return N_(this,e)}}let BG=class{constructor(e){this.decoders=e}or(e){return N_(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const N_=(r,e)=>new BG({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});let PG=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new RG(e,t,n),this.decoder=new MG(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Ax=({name:r,prefix:e,encode:t,decode:n})=>new PG(r,e,t,n),Kh=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=TG(t,e);return Ax({prefix:r,name:e,encode:n,decode:s=>T_(i(s))})},FG=(r,e,t,n)=>{const i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let s=r.length;for(;r[s-1]==="=";)--s;const c=new Uint8Array(s*t/8|0);let l=0,h=0,u=0;for(let p=0;p<s;++p){const b=i[r[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<t|b,l+=t,l>=8&&(l-=8,c[u++]=255&h>>l)}if(l>=t||255&h<<8-l)throw new SyntaxError("Unexpected end of data");return c},LG=(r,e,t)=>{const n=e[e.length-1]==="=",i=(1<<t)-1;let s="",c=0,l=0;for(let h=0;h<r.length;++h)for(l=l<<8|r[h],c+=8;c>t;)c-=t,s+=e[i&l>>c];if(c&&(s+=e[i&l<<t-c]),n)for(;s.length*t&7;)s+="=";return s},Fn=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Ax({prefix:e,name:r,encode(i){return LG(i,n,t)},decode(i){return FG(i,n,t,r)}}),kG=Ax({prefix:"\0",name:"identity",encode:r=>OG(r),decode:r=>NG(r)});var UG=Object.freeze({__proto__:null,identity:kG});const HG=Fn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var zG=Object.freeze({__proto__:null,base2:HG});const jG=Fn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var GG=Object.freeze({__proto__:null,base8:jG});const VG=Kh({prefix:"9",name:"base10",alphabet:"0123456789"});var qG=Object.freeze({__proto__:null,base10:VG});const $G=Fn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),KG=Fn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var WG=Object.freeze({__proto__:null,base16:$G,base16upper:KG});const YG=Fn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),XG=Fn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),QG=Fn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ZG=Fn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),JG=Fn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),eV=Fn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),tV=Fn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),rV=Fn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),nV=Fn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var iV=Object.freeze({__proto__:null,base32:YG,base32upper:XG,base32pad:QG,base32padupper:ZG,base32hex:JG,base32hexupper:eV,base32hexpad:tV,base32hexpadupper:rV,base32z:nV});const sV=Kh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),oV=Kh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var aV=Object.freeze({__proto__:null,base36:sV,base36upper:oV});const cV=Kh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),fV=Kh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var lV=Object.freeze({__proto__:null,base58btc:cV,base58flickr:fV});const uV=Fn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),hV=Fn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),dV=Fn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xV=Fn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var pV=Object.freeze({__proto__:null,base64:uV,base64pad:hV,base64url:dV,base64urlpad:xV});const O_=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),gV=O_.reduce((r,e,t)=>(r[t]=e,r),[]),bV=O_.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function mV(r){return r.reduce((e,t)=>(e+=gV[t],e),"")}function yV(r){const e=[];for(const t of r){const n=bV[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const wV=Ax({prefix:"🚀",name:"base256emoji",encode:mV,decode:yV});var vV=Object.freeze({__proto__:null,base256emoji:wV}),EV=R_,_4=128,AV=127,_V=~AV,CV=Math.pow(2,31);function R_(r,e,t){e=e||[],t=t||0;for(var n=t;r>=CV;)e[t++]=r&255|_4,r/=128;for(;r&_V;)e[t++]=r&255|_4,r>>>=7;return e[t]=r|0,R_.bytes=t-n+1,e}var SV=hb,IV=128,C4=127;function hb(r,n){var t=0,n=n||0,i=0,s=n,c,l=r.length;do{if(s>=l)throw hb.bytes=0,new RangeError("Could not decode varint");c=r[s++],t+=i<28?(c&C4)<<i:(c&C4)*Math.pow(2,i),i+=7}while(c>=IV);return hb.bytes=s-n,t}var DV=Math.pow(2,7),TV=Math.pow(2,14),NV=Math.pow(2,21),OV=Math.pow(2,28),RV=Math.pow(2,35),MV=Math.pow(2,42),BV=Math.pow(2,49),PV=Math.pow(2,56),FV=Math.pow(2,63),LV=function(r){return r<DV?1:r<TV?2:r<NV?3:r<OV?4:r<RV?5:r<MV?6:r<BV?7:r<PV?8:r<FV?9:10},kV={encode:EV,decode:SV,encodingLength:LV},M_=kV;const S4=(r,e,t=0)=>(M_.encode(r,e,t),e),I4=r=>M_.encodingLength(r),db=(r,e)=>{const t=e.byteLength,n=I4(r),i=n+I4(t),s=new Uint8Array(i+t);return S4(r,s,0),S4(t,s,n),s.set(e,i),new UV(r,t,e,s)};class UV{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}const B_=({name:r,code:e,encode:t})=>new HV(r,e,t);class HV{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?db(this.code,t):t.then(n=>db(this.code,n))}else throw Error("Unknown type, must be binary type")}}const P_=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),zV=B_({name:"sha2-256",code:18,encode:P_("SHA-256")}),jV=B_({name:"sha2-512",code:19,encode:P_("SHA-512")});var GV=Object.freeze({__proto__:null,sha256:zV,sha512:jV});const F_=0,VV="identity",L_=T_,qV=r=>db(F_,L_(r)),$V={code:F_,name:VV,encode:L_,digest:qV};var KV=Object.freeze({__proto__:null,identity:$V});new TextEncoder,new TextDecoder;const D4={...UG,...zG,...GG,...qG,...WG,...iV,...aV,...lV,...pV,...vV};({...GV,...KV});function k_(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const T4=k_("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Sg=k_("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=SG(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),U_={utf8:T4,"utf-8":T4,hex:D4.base16,latin1:Sg,ascii:Sg,binary:Sg,...D4};function WV(r,e="utf8"){const t=U_[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}function YV(r,e="utf8"){const t=U_[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}const XV="base16",QV="utf8";function N4(r){const e=Ac.hash(WV(r,QV));return YV(e,XV)}var ZV=Object.defineProperty,JV=Object.defineProperties,eq=Object.getOwnPropertyDescriptors,O4=Object.getOwnPropertySymbols,tq=Object.prototype.hasOwnProperty,rq=Object.prototype.propertyIsEnumerable,R4=(r,e,t)=>e in r?ZV(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,hu=(r,e)=>{for(var t in e||(e={}))tq.call(e,t)&&R4(r,t,e[t]);if(O4)for(var t of O4(e))rq.call(e,t)&&R4(r,t,e[t]);return r},Ig=(r,e)=>JV(r,eq(e));class nq extends dG{constructor(e){super(e),this.initialized=!1,this.name="authEngine",this.init=()=>{this.initialized||(this.registerRelayerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(wd)}),this.initialized=!0)},this.request=async(t,n)=>{if(this.isInitialized(),!_G(t))throw new Error("Invalid request");if(n!=null&&n.topic)return await this.requestOnKnownPairing(n.topic,t);const{chainId:i,statement:s,aud:c,domain:l,nonce:h,type:u,exp:p,nbf:b}=t,{topic:y,uri:w}=await this.client.core.pairing.create();this.client.logger.info({message:"Generated new pairing",pairing:{topic:y,uri:w}});const _=await this.client.core.crypto.generateKeyPair(),S=t4(_);await this.client.authKeys.set(_u,{responseTopic:S,publicKey:_}),await this.client.pairingTopics.set(S,{topic:S,pairingTopic:y}),await this.client.core.relayer.subscribe(S),this.client.logger.info(`sending request to new pairing topic: ${y}`);const T=await this.sendRequest(y,"wc_authRequest",{payloadParams:{type:u??"eip4361",chainId:i,statement:s,aud:c,domain:l,version:"1",nonce:h,iat:new Date().toISOString(),exp:p,nbf:b},requester:{publicKey:_,metadata:this.client.metadata}},{},t.expiry);return this.client.logger.info(`sent request to new pairing topic: ${y}`),{uri:w,id:T}},this.respond=async(t,n)=>{if(this.isInitialized(),!CG(t,this.client.requests))throw new Error("Invalid response");const i=D_(this.client.requests,t.id);if(!i)throw new Error(`Could not find pending auth request with id ${t.id}`);const s=i.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),l=t4(s),h={type:FH,receiverPublicKey:s,senderPublicKey:c};if("error"in t){await this.sendError(i.id,l,t,h);return}const u={h:{t:"eip4361"},p:Ig(hu({},i.cacaoPayload),{iss:n}),s:t.signature};await this.sendResult(i.id,l,u,h),await this.client.core.pairing.activate({topic:i.pairingTopic}),await this.client.requests.update(i.id,hu({},u))},this.getPendingRequests=()=>I_(this.client.requests),this.formatMessage=(t,n)=>{this.client.logger.debug(`formatMessage, cacao is: ${JSON.stringify(t)}`);const i=`${t.domain} wants you to sign in with your Ethereum account:`,s=A4(n),c=t.statement,l=`URI: ${t.aud}`,h=`Version: ${t.version}`,u=`Chain ID: ${mG(n)}`,p=`Nonce: ${t.nonce}`,b=`Issued At: ${t.iat}`,y=t.exp?`Expiry: ${t.exp}`:void 0,w=t.resources&&t.resources.length>0?`Resources:
${t.resources.map(_=>`- ${_}`).join(`
`)}`:void 0;return[i,s,"",c,"",l,h,u,p,b,y,w].filter(_=>_!=null).join(`
`)},this.setExpiry=async(t,n)=>{this.client.core.pairing.pairings.keys.includes(t)&&await this.client.core.pairing.updateExpiry({topic:t,expiry:n}),this.client.core.expirer.set(t,n)},this.sendRequest=async(t,n,i,s,c)=>{const l=oc(n,i),h=await this.client.core.crypto.encode(t,l,s),u=wd[n].req;if(c&&(u.ttl=c),this.client.core.history.set(t,l),kH()){const p=N4(JSON.stringify(l));this.client.core.verify.register({attestationId:p})}return await this.client.core.relayer.publish(t,h,Ig(hu({},u),{internal:{throwOnFailedPublish:!0}})),l.id},this.sendResult=async(t,n,i,s)=>{const c=gx(t,i),l=await this.client.core.crypto.encode(n,c,s),h=await this.client.core.history.get(n,t),u=wd[h.request.method].res;return await this.client.core.relayer.publish(n,l,Ig(hu({},u),{internal:{throwOnFailedPublish:!0}})),await this.client.core.history.resolve(c),c.id},this.sendError=async(t,n,i,s)=>{const c=bx(t,i.error),l=await this.client.core.crypto.encode(n,c,s),h=await this.client.core.history.get(n,t),u=wd[h.request.method].res;return await this.client.core.relayer.publish(n,l,u),await this.client.core.history.resolve(c),c.id},this.requestOnKnownPairing=async(t,n)=>{const i=this.client.core.pairing.pairings.getAll({active:!0}).find(w=>w.topic===t);if(!i)throw new Error(`Could not find pairing for provided topic ${t}`);const{publicKey:s}=this.client.authKeys.get(_u),{chainId:c,statement:l,aud:h,domain:u,nonce:p,type:b}=n,y=await this.sendRequest(i.topic,"wc_authRequest",{payloadParams:{type:b??"eip4361",chainId:c,statement:l,aud:h,domain:u,version:"1",nonce:p,iat:new Date().toISOString()},requester:{publicKey:s,metadata:this.client.metadata}},{},n.expiry);return this.client.logger.info(`sent request to known pairing topic: ${i.topic}`),{id:y}},this.onPairingCreated=t=>{const n=this.getPendingRequests();if(n){const i=Object.values(n).find(s=>s.pairingTopic===t.topic);i&&this.handleAuthRequest(i)}},this.onRelayEventRequest=t=>{const{topic:n,payload:i}=t,s=i.method;switch(s){case"wc_authRequest":return this.onAuthRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async t=>{const{topic:n,payload:i}=t,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_authRequest":return this.onAuthResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onAuthRequest=async(t,n)=>{const{requester:i,payloadParams:s}=n.params;this.client.logger.info({type:"onAuthRequest",topic:t,payload:n});const c=N4(JSON.stringify(n)),l=await this.getVerifyContext(c,this.client.metadata),h={requester:i,pairingTopic:t,id:n.id,cacaoPayload:s,verifyContext:l};await this.client.requests.set(n.id,h),this.handleAuthRequest(h)},this.handleAuthRequest=async t=>{const{id:n,pairingTopic:i,requester:s,cacaoPayload:c,verifyContext:l}=t;try{this.client.emit("auth_request",{id:n,topic:i,params:{requester:s,cacaoPayload:c},verifyContext:l})}catch(h){await this.sendError(t.id,t.pairingTopic,h),this.client.logger.error(h)}},this.onAuthResponse=async(t,n)=>{const{id:i}=n;if(this.client.logger.info({type:"onAuthResponse",topic:t,response:n}),Qs(n)){const{pairingTopic:s}=this.client.pairingTopics.get(t);await this.client.core.pairing.activate({topic:s});const{s:c,p:l}=n.result;await this.client.requests.set(i,hu({id:i,pairingTopic:s},n.result));const h=this.formatMessage(l,l.iss);this.client.logger.debug(`reconstructed message:
`,JSON.stringify(h)),this.client.logger.debug("payload.iss:",l.iss),this.client.logger.debug("signature:",c);const u=A4(l.iss),p=yG(l.iss);if(!u)throw new Error("Could not derive address from `payload.iss`");if(!p)throw new Error("Could not derive chainId from `payload.iss`");this.client.logger.debug("walletAddress extracted from `payload.iss`:",u),await wG(u,h,c,p,this.client.projectId)?this.client.emit("auth_response",{id:i,topic:t,params:n}):this.client.emit("auth_response",{id:i,topic:t,params:{message:"Invalid signature",code:-1}})}else rs(n)&&this.client.emit("auth_response",{id:i,topic:t,params:n})},this.getVerifyContext=async(t,n)=>{const i={verified:{verifyUrl:n.verifyUrl||"",validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:t,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s.origin,i.verified.isScam=s.isScam,i.verified.validation=origin===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i}}isInitialized(){if(!this.initialized){const{message:e}=S0("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Dn.message,async e=>{const{topic:t,message:n}=e,{responseTopic:i,publicKey:s}=this.client.authKeys.keys.includes(_u)?this.client.authKeys.get(_u):{responseTopic:void 0,publicKey:void 0};if(i&&t!==i){this.client.logger.debug("[Auth] Ignoring message from unknown topic",t);return}const c=await this.client.core.crypto.decode(t,n,{receiverPublicKey:s});mx(c)?(this.client.core.history.set(t,c),this.onRelayEventRequest({topic:t,payload:c})):Vh(c)&&(await this.client.core.history.resolve(c),this.onRelayEventResponse({topic:t,payload:c}))})}registerPairingEvents(){this.client.core.pairing.events.on(ef.create,e=>this.onPairingCreated(e))}}let iq=class H_ extends xG{constructor(e){super(e),this.protocol=S_,this.version=gG,this.name=E4,this.events=new cs.EventEmitter,this.emit=(n,i)=>this.events.emit(n,i),this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.request=async(n,i)=>{try{return await this.engine.request(n,i)}catch(s){throw this.logger.error(s.message),s}},this.respond=async(n,i)=>{try{return await this.engine.respond(n,i)}catch(s){throw this.logger.error(s.message),s}},this.getPendingRequests=()=>{try{return this.engine.getPendingRequests()}catch(n){throw this.logger.error(n.message),n}},this.formatMessage=(n,i)=>{try{return this.engine.formatMessage(n,i)}catch(s){throw this.logger.error(s.message),s}};const t=typeof e.logger<"u"&&typeof e.logger!="string"?e.logger:Zt.pino(Zt.getDefaultLoggerOptions({level:e.logger||"error"}));this.name=(e==null?void 0:e.name)||E4,this.metadata=e.metadata,this.projectId=e.projectId,this.core=e.core||new nh(e),this.logger=Zt.generateChildLogger(t,this.name),this.authKeys=new ac(this.core,this.logger,"authKeys",qd,()=>_u),this.pairingTopics=new ac(this.core,this.logger,"pairingTopics",qd),this.requests=new ac(this.core,this.logger,"requests",qd,n=>n.id),this.engine=new nq(this)}static async init(e){const t=new H_(e);return await t.initialize(),t}get context(){return Zt.getLoggerContext(this.logger)}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.authKeys.init(),await this.requests.init(),await this.pairingTopics.init(),await this.engine.init(),this.logger.info("AuthClient Initialization Success"),this.logger.info({authClient:this})}catch(e){throw this.logger.info("AuthClient Initialization Failure"),this.logger.error(e.message),e}}};const sq=iq;function z_(r,e){return r.includes(":")?[r]:e.chains||[]}const oq="base16",aq="utf8",cq=1;function Dg(r){const e=Ac.hash(Wn(r,aq));return Rn(e,oq)}const fq="ReactNative",rf={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function j_(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function lq(){return!Ll()&&!!kl()&&navigator.product===fq}function km(){return!j_()&&!!kl()&&!!Ll()}function uq(){return lq()?rf.reactNative:j_()?rf.node:km()?rf.browser:rf.unknown}function hq(){return y5()||{name:"",description:"",url:"",icons:[""]}}function B0(r,e){return r.filter(t=>e.includes(t)).length===r.length}function du(r=tt.FIVE_MINUTES,e){const t=tt.toMiliseconds(r||tt.FIVE_MINUTES);let n,i,s;return{resolve:c=>{s&&n&&(clearTimeout(s),n(c))},reject:c=>{s&&i&&(clearTimeout(s),i(c))},done:()=>new Promise((c,l)=>{s=setTimeout(()=>{l(new Error(e))},t),n=c,i=l})}}function dq(r){const[e,t]=r.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")n.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))n.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return n}function Oo(r,e){return tt.fromMiliseconds((e||Date.now())+tt.toMiliseconds(r))}function zc(r){return Date.now()>=tt.toMiliseconds(r)}function xn(r,e){return`${r}${e?`:${e}`:""}`}async function xq({id:r,topic:e,wcDeepLink:t}){try{if(!t)return;const n=typeof t=="string"?JSON.parse(t):t;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${r}&sessionTopic=${e}`,c=uq();c===rf.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):c===rf.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}async function pq(r,e){try{return await r.getItem(e)||(km()?localStorage.getItem(e):void 0)}catch(t){console.error(t)}}function ql(r){const e=[];return r.forEach(t=>{const[n,i]=t.split(":");e.push(`${n}:${i}`)}),e}function gq(r){const e=[];return Object.values(r).forEach(t=>{e.push(...ql(t.accounts))}),e}function bq(r,e){const t=[];return Object.values(r).forEach(n=>{ql(n.accounts).includes(e)&&t.push(...n.methods)}),t}function mq(r,e){const t=[];return Object.values(r).forEach(n=>{ql(n.accounts).includes(e)&&t.push(...n.events)}),t}const yq={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},wq={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Tt(r,e){const{message:t,code:n}=wq[r];return{message:e?`${t} ${e}`:t,code:n}}function jn(r,e){const{message:t,code:n}=yq[r];return{message:e?`${t} ${e}`:t,code:n}}function _x(r,e){return Array.isArray(r)?typeof e<"u"&&r.length?r.every(e):!0:!1}function D1(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function is(r){return typeof r>"u"}function $n(r,e){return e&&is(r)?!0:typeof r=="string"&&!!r.trim().length}function Um(r,e){return e&&is(r)?!0:typeof r=="number"&&!isNaN(r)}function vq(r,e){const{requiredNamespaces:t}=e,n=Object.keys(r.namespaces),i=Object.keys(t);let s=!0;return B0(i,n)?(n.forEach(c=>{const{accounts:l,methods:h,events:u}=r.namespaces[c],p=ql(l),b=t[c];(!B0(z_(c,b),p)||!B0(b.methods,h)||!B0(b.events,u))&&(s=!1)}),s):!1}function T1(r){return $n(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function Eq(r){if($n(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&T1(t)}}return!1}function Aq(r,e){let t=null;return $n(r==null?void 0:r.publicKey,!1)||(t=Tt("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function M4(r){let e=!0;return _x(r)?r.length&&(e=r.every(t=>$n(t,!1))):e=!1,e}function _q(r,e,t){let n=null;return _x(e)&&e.length?e.forEach(i=>{n||T1(i)||(n=jn("UNSUPPORTED_CHAINS",`${t}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):T1(r)||(n=jn("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Cq(r,e,t){let n=null;return Object.entries(r).forEach(([i,s])=>{if(n)return;const c=_q(i,z_(i,s),`${e} ${t}`);c&&(n=c)}),n}function Sq(r,e){let t=null;return _x(r)?r.forEach(n=>{t||Eq(n)||(t=jn("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):t=jn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function Iq(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;const i=Sq(n==null?void 0:n.accounts,`${e} namespace`);i&&(t=i)}),t}function Dq(r,e){let t=null;return M4(r==null?void 0:r.methods)?M4(r==null?void 0:r.events)||(t=jn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=jn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function G_(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;const i=Dq(n,`${e}, namespace`);i&&(t=i)}),t}function Tq(r,e,t){let n=null;if(r&&D1(r)){const i=G_(r,e);i&&(n=i);const s=Cq(r,e,t);s&&(n=s)}else n=Tt("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return n}function Tg(r,e){let t=null;if(r&&D1(r)){const n=G_(r,e);n&&(t=n);const i=Iq(r,e);i&&(t=i)}else t=Tt("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function V_(r){return $n(r.protocol,!0)}function Nq(r,e){let t=!1;return e&&!r?t=!0:r&&_x(r)&&r.length&&r.forEach(n=>{t=V_(n)}),t}function Oq(r){return typeof r=="number"}function gs(r){return typeof r<"u"&&typeof r!==null}function Rq(r){return!(!r||typeof r!="object"||!r.code||!Um(r.code,!1)||!r.message||!$n(r.message,!1))}function Mq(r){return!(is(r)||!$n(r.method,!1))}function Bq(r){return!(is(r)||is(r.result)&&is(r.error)||!Um(r.id,!1)||!$n(r.jsonrpc,!1))}function Pq(r){return!(is(r)||!$n(r.name,!1))}function B4(r,e){return!(!T1(e)||!gq(r).includes(e))}function Fq(r,e,t){return $n(t,!1)?bq(r,e).includes(t):!1}function Lq(r,e,t){return $n(t,!1)?mq(r,e).includes(t):!1}function P4(r,e,t){let n=null;const i=kq(r),s=Uq(e),c=Object.keys(i),l=Object.keys(s),h=F4(Object.keys(r)),u=F4(Object.keys(e)),p=h.filter(b=>!u.includes(b));return p.length&&(n=Tt("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${p.toString()}
      Received: ${Object.keys(e).toString()}`)),B0(c,l)||(n=Tt("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(b=>{if(!b.includes(":")||n)return;const y=ql(e[b].accounts);y.includes(b)||(n=Tt("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${b}
        Required: ${b}
        Approved: ${y.toString()}`))}),c.forEach(b=>{n||(B0(i[b].methods,s[b].methods)?B0(i[b].events,s[b].events)||(n=Tt("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${b}`)):n=Tt("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${b}`))}),n}function kq(r){const e={};return Object.keys(r).forEach(t=>{var n;t.includes(":")?e[t]=r[t]:(n=r[t].chains)==null||n.forEach(i=>{e[i]={methods:r[t].methods,events:r[t].events}})}),e}function F4(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Uq(r){const e={};return Object.keys(r).forEach(t=>{if(t.includes(":"))e[t]=r[t];else{const n=ql(r[t].accounts);n==null||n.forEach(i=>{e[i]={accounts:r[t].accounts.filter(s=>s.includes(`${i}:`)),methods:r[t].methods,events:r[t].events}})}}),e}function Hq(r,e){return Um(r,!1)&&r<=e.max&&r>=e.min}const Ng={};class vd{static get(e){return Ng[e]}static set(e,t){Ng[e]=t}static delete(e){delete Ng[e]}}const q_="wc",$_=2,K_="client",Hm=`${q_}@${$_}:${K_}:`,Og={name:K_,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},L4="WALLETCONNECT_DEEPLINK_CHOICE",zq="proposal",jq="Proposal expired",Gq="session",Ed=tt.SEVEN_DAYS,Vq="engine",Ro={wc_sessionPropose:{req:{ttl:tt.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:1104},res:{ttl:tt.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:1106},res:{ttl:tt.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:tt.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:tt.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:1112},res:{ttl:tt.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:tt.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:tt.THIRTY_SECONDS,prompt:!1,tag:1115}}},Rg={min:tt.FIVE_MINUTES,max:tt.SEVEN_DAYS},Mo={idle:"IDLE",active:"ACTIVE"},qq="request",$q=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Kq=Object.defineProperty,Wq=Object.defineProperties,Yq=Object.getOwnPropertyDescriptors,k4=Object.getOwnPropertySymbols,Xq=Object.prototype.hasOwnProperty,Qq=Object.prototype.propertyIsEnumerable,U4=(r,e,t)=>e in r?Kq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ei=(r,e)=>{for(var t in e||(e={}))Xq.call(e,t)&&U4(r,t,e[t]);if(k4)for(var t of k4(e))Qq.call(e,t)&&U4(r,t,e[t]);return r},jc=(r,e)=>Wq(r,Yq(e));class Zq extends GM{constructor(e){super(e),this.name=Vq,this.events=new jA,this.initialized=!1,this.ignoredPayloadTypes=[cq],this.requestQueue={state:Mo.idle,queue:[]},this.sessionRequestQueue={state:Mo.idle,queue:[]},this.requestQueueDelay=tt.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(Ro)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},tt.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const n=jc(ei({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:c,sessionProperties:l,relays:h}=n;let u=i,p,b=!1;if(u&&(b=this.client.core.pairing.pairings.get(u).active),!u||!b){const{topic:M,uri:L}=await this.client.core.pairing.create();u=M,p=L}const y=await this.client.core.crypto.generateKeyPair(),w=Ro.wc_sessionPropose.req.ttl||tt.FIVE_MINUTES,_=Oo(w),S=ei({requiredNamespaces:s,optionalNamespaces:c,relays:h??[{protocol:K5}],proposer:{publicKey:y,metadata:this.client.metadata},expiryTimestamp:_},l&&{sessionProperties:l}),{reject:T,resolve:F,done:N}=du(w,jq);if(this.events.once(xn("session_connect"),async({error:M,session:L})=>{if(M)T(M);else if(L){L.self.publicKey=y;const R=jc(ei({},L),{requiredNamespaces:S.requiredNamespaces,optionalNamespaces:S.optionalNamespaces});await this.client.session.set(L.topic,R),await this.setExpiry(L.topic,L.expiry),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:L.peer.metadata}),F(R)}}),!u){const{message:M}=Tt("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(M)}const O=await this.sendRequest({topic:u,method:"wc_sessionPropose",params:S,throwOnFailedPublish:!0});return await this.setProposal(O,ei({id:O},S)),{uri:p,approval:N}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:c}=t,l=this.client.proposal.get(n);let{pairingTopic:h,proposer:u,requiredNamespaces:p,optionalNamespaces:b}=l;h=h||"";const y=await this.client.core.crypto.generateKeyPair(),w=u.publicKey,_=await this.client.core.crypto.generateSharedKey(y,w);h&&n&&(await this.client.core.pairing.updateMetadata({topic:h,metadata:u.metadata}),await this.sendResult({id:n,topic:h,result:{relay:{protocol:i??"irn"},responderPublicKey:y}}),await this.client.proposal.delete(n,jn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:h}));const S=ei({relay:{protocol:i??"irn"},namespaces:s,pairingTopic:h,controller:{publicKey:y,metadata:this.client.metadata},expiry:Oo(Ed)},c&&{sessionProperties:c});await this.client.core.relayer.subscribe(_);const T=jc(ei({},S),{topic:_,requiredNamespaces:p,optionalNamespaces:b,pairingTopic:h,acknowledged:!1,self:S.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:y});await this.client.session.set(_,T);try{await this.sendRequest({topic:_,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0})}catch(F){throw this.client.logger.error(F),this.client.session.delete(_,jn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),F}return await this.setExpiry(_,Oo(Ed)),{topic:_,acknowledged:()=>new Promise(F=>setTimeout(()=>F(this.client.session.get(_)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);const{id:n,reason:i}=t,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,jn("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);const{topic:n,namespaces:i}=t,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:c,resolve:l,reject:h}=du();return this.events.once(xn("session_update",s),({error:u})=>{u?h(u):l()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:c}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);const{topic:n}=t,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:c,reject:l}=du();return this.events.once(xn("session_extend",i),({error:h})=>{h?l(h):c()}),await this.setExpiry(n,Oo(Ed)),{acknowledged:s}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:n,request:i,topic:s,expiry:c=Ro.wc_sessionRequest.req.ttl}=t,l=Dm(),{done:h,resolve:u,reject:p}=du(c,"Request expired. Please try again.");return this.events.once(xn("session_request",l),({error:b,result:y})=>{b?p(b):u(y)}),await Promise.all([new Promise(async b=>{await this.sendRequest({clientRpcId:l,topic:s,method:"wc_sessionRequest",params:{request:jc(ei({},i),{expiryTimestamp:Oo(c)}),chainId:n},expiry:c,throwOnFailedPublish:!0}).catch(y=>p(y)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:l}),b()}),new Promise(async b=>{const y=await pq(this.client.core.storage,L4);xq({id:l,topic:s,wcDeepLink:y}),b()}),h()]).then(b=>b[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:n,response:i}=t,{id:s}=i;Qs(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):rs(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);const{topic:n}=t;if(this.client.session.keys.includes(n)){const i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:c,reject:l}=du();this.events.once(xn("session_ping",i),({error:h})=>{h?l(h):c()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:n,event:i,chainId:s}=t;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:n}=t;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:jn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=Tt("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(n=>vq(n,t))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const n=this.client.core.pairing.pairings.get(t.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var c,l;return((c=s.peerMetadata)==null?void 0:c.url)&&((l=s.peerMetadata)==null?void 0:l.url)===t.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async t=>{const{topic:n,expirerHasDeleted:i=!1,emitEvent:s=!0,id:c=0}=t,{self:l}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),await this.client.session.delete(n,jn("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(l.publicKey)&&await this.client.core.crypto.deleteKeyPair(l.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),i||this.client.core.expirer.del(n),this.client.core.storage.removeItem(L4).catch(h=>this.client.logger.warn(h)),this.getPendingSessionRequests().forEach(h=>{h.topic===n&&this.deletePendingSessionRequest(h.id,jn("USER_DISCONNECTED"))}),s&&this.client.events.emit("session_delete",{id:c,topic:n})},this.deleteProposal=async(t,n)=>{await Promise.all([this.client.proposal.delete(t,jn("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,n),i?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==t),i&&(this.sessionRequestQueue.state=Mo.idle,this.client.events.emit("session_request_expire",{id:t}))},this.setExpiry=async(t,n)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:n}),this.client.core.expirer.set(t,n)},this.setProposal=async(t,n)=>{await this.client.proposal.set(t,n),this.client.core.expirer.set(t,Oo(Ro.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async t=>{const{id:n,topic:i,params:s,verifyContext:c}=t,l=s.request.expiryTimestamp||Oo(Ro.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:c}),l&&this.client.core.expirer.set(n,l)},this.sendRequest=async t=>{const{topic:n,method:i,params:s,expiry:c,relayRpcId:l,clientRpcId:h,throwOnFailedPublish:u}=t,p=oc(i,s,h);if(km()&&$q.includes(i)){const w=Dg(JSON.stringify(p));this.client.core.verify.register({attestationId:w})}const b=await this.client.core.crypto.encode(n,p),y=Ro[i].req;return c&&(y.ttl=c),l&&(y.id=l),this.client.core.history.set(n,p),u?(y.internal=jc(ei({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,b,y)):this.client.core.relayer.publish(n,b,y).catch(w=>this.client.logger.error(w)),p.id},this.sendResult=async t=>{const{id:n,topic:i,result:s,throwOnFailedPublish:c}=t,l=gx(n,s),h=await this.client.core.crypto.encode(i,l),u=await this.client.core.history.get(i,n),p=Ro[u.request.method].res;c?(p.internal=jc(ei({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,h,p)):this.client.core.relayer.publish(i,h,p).catch(b=>this.client.logger.error(b)),await this.client.core.history.resolve(l)},this.sendError=async(t,n,i)=>{const s=bx(t,i),c=await this.client.core.crypto.encode(n,s),l=await this.client.core.history.get(n,t),h=Ro[l.request.method].res;this.client.core.relayer.publish(n,c,h),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const t=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;zc(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&t.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{zc(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...t.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Mo.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Mo.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Mo.idle},this.processRequest=t=>{const{topic:n,payload:i}=t,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async t=>{const{topic:n,payload:i}=t,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:n}=t,{message:i}=Tt("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(t,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(ei({},n.params));const c=i.expiryTimestamp||Oo(Ro.wc_sessionPropose.req.ttl),l=ei({id:s,pairingTopic:t,expiryTimestamp:c},i);await this.setProposal(s,l);const h=Dg(JSON.stringify(n)),u=await this.getVerifyContext(h,l.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:l,verifyContext:u})}catch(c){await this.sendError(s,t,c),this.client.logger.error(c)}},this.onSessionProposeResponse=async(t,n)=>{const{id:i}=n;if(Qs(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const c=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:c});const l=c.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const h=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:h});const u=await this.client.core.crypto.generateSharedKey(l,h);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const p=await this.client.core.relayer.subscribe(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:p}),await this.client.core.pairing.activate({topic:t})}else rs(n)&&(await this.client.proposal.delete(i,jn("USER_DISCONNECTED")),this.events.emit(xn("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(t,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:c,controller:l,expiry:h,namespaces:u,sessionProperties:p,pairingTopic:b}=n.params,y=ei({topic:t,relay:c,expiry:h,namespaces:u,acknowledged:!0,pairingTopic:b,requiredNamespaces:{},optionalNamespaces:{},controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},p&&{sessionProperties:p});await this.sendResult({id:n.id,topic:t,result:!0}),this.events.emit(xn("session_connect"),{session:y}),this.cleanupDuplicatePairings(y)}catch(c){await this.sendError(i,t,c),this.client.logger.error(c)}},this.onSessionSettleResponse=async(t,n)=>{const{id:i}=n;Qs(n)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(xn("session_approve",i),{})):rs(n)&&(await this.client.session.delete(t,jn("USER_DISCONNECTED")),this.events.emit(xn("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(t,n)=>{const{params:i,id:s}=n;try{const c=`${t}_session_update`,l=vd.get(c);if(l&&this.isRequestOutOfSync(l,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(ei({topic:t},i)),await this.client.session.update(t,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:t,result:!0}),this.client.events.emit("session_update",{id:s,topic:t,params:i}),vd.set(c,s)}catch(c){await this.sendError(s,t,c),this.client.logger.error(c)}},this.isRequestOutOfSync=(t,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,n)=>{const{id:i}=n;Qs(n)?this.events.emit(xn("session_update",i),{}):rs(n)&&this.events.emit(xn("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(t,n)=>{const{id:i}=n;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Oo(Ed)),await this.sendResult({id:i,topic:t,result:!0}),this.client.events.emit("session_extend",{id:i,topic:t})}catch(s){await this.sendError(i,t,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(t,n)=>{const{id:i}=n;Qs(n)?this.events.emit(xn("session_extend",i),{}):rs(n)&&this.events.emit(xn("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(t,n)=>{const{id:i}=n;try{this.isValidPing({topic:t}),await this.sendResult({id:i,topic:t,result:!0}),this.client.events.emit("session_ping",{id:i,topic:t})}catch(s){await this.sendError(i,t,s),this.client.logger.error(s)}},this.onSessionPingResponse=(t,n)=>{const{id:i}=n;setTimeout(()=>{Qs(n)?this.events.emit(xn("session_ping",i),{}):rs(n)&&this.events.emit(xn("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(t,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:t,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Dn.publish,async()=>{s(await this.deleteSession({topic:t,id:i}))})}),this.sendResult({id:i,topic:t,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:jn("USER_DISCONNECTED")})])}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(t,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(ei({topic:t},s));const c=Dg(JSON.stringify(oc("wc_sessionRequest",s,i))),l=this.client.session.get(t),h=await this.getVerifyContext(c,l.peer.metadata),u={id:i,topic:t,params:s,verifyContext:h};await this.setPendingSessionRequest(u),this.addSessionRequestToSessionRequestQueue(u),this.processSessionRequestQueue()}catch(c){await this.sendError(i,t,c),this.client.logger.error(c)}},this.onSessionRequestResponse=(t,n)=>{const{id:i}=n;Qs(n)?this.events.emit(xn("session_request",i),{result:n.result}):rs(n)&&this.events.emit(xn("session_request",i),{error:n.error})},this.onSessionEventRequest=async(t,n)=>{const{id:i,params:s}=n;try{const c=`${t}_session_event_${s.event.name}`,l=vd.get(c);if(l&&this.isRequestOutOfSync(l,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(ei({topic:t},s)),this.client.events.emit("session_event",{id:i,topic:t,params:s}),vd.set(c,i)}catch(c){await this.sendError(i,t,c),this.client.logger.error(c)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Mo.idle,this.processSessionRequestQueue()},tt.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===t&&s.request.method==="wc_sessionRequest").forEach(s=>{this.events.emit(xn("session_request",s.request.id),{error:n})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Mo.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Mo.active,this.client.events.emit("session_request",t)}catch(n){this.client.logger.error(n)}},this.onPairingCreated=t=>{if(t.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===t.topic);n&&this.onSessionProposeRequest(t.topic,oc("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id))},this.isValidConnect=async t=>{if(!gs(t)){const{message:h}=Tt("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(h)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:c,relays:l}=t;if(is(n)||await this.isValidPairingTopic(n),!Nq(l,!0)){const{message:h}=Tt("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(h)}!is(i)&&D1(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!is(s)&&D1(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),is(c)||this.validateSessionProps(c,"sessionProperties")},this.validateNamespaces=(t,n)=>{const i=Tq(t,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async t=>{if(!gs(t))throw new Error(Tt("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:c}=t;await this.isValidProposalId(n);const l=this.client.proposal.get(n),h=Tg(i,"approve()");if(h)throw new Error(h.message);const u=P4(l.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!$n(s,!0)){const{message:p}=Tt("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(p)}is(c)||this.validateSessionProps(c,"sessionProperties")},this.isValidReject=async t=>{if(!gs(t)){const{message:s}=Tt("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(s)}const{id:n,reason:i}=t;if(await this.isValidProposalId(n),!Rq(i)){const{message:s}=Tt("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=t=>{if(!gs(t)){const{message:u}=Tt("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(u)}const{relay:n,controller:i,namespaces:s,expiry:c}=t;if(!V_(n)){const{message:u}=Tt("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const l=Aq(i,"onSessionSettleRequest()");if(l)throw new Error(l.message);const h=Tg(s,"onSessionSettleRequest()");if(h)throw new Error(h.message);if(zc(c)){const{message:u}=Tt("EXPIRED","onSessionSettleRequest()");throw new Error(u)}},this.isValidUpdate=async t=>{if(!gs(t)){const{message:h}=Tt("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(h)}const{topic:n,namespaces:i}=t;await this.isValidSessionTopic(n);const s=this.client.session.get(n),c=Tg(i,"update()");if(c)throw new Error(c.message);const l=P4(s.requiredNamespaces,i,"update()");if(l)throw new Error(l.message)},this.isValidExtend=async t=>{if(!gs(t)){const{message:i}=Tt("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(i)}const{topic:n}=t;await this.isValidSessionTopic(n)},this.isValidRequest=async t=>{if(!gs(t)){const{message:h}=Tt("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(h)}const{topic:n,request:i,chainId:s,expiry:c}=t;await this.isValidSessionTopic(n);const{namespaces:l}=this.client.session.get(n);if(!B4(l,s)){const{message:h}=Tt("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(h)}if(!Mq(i)){const{message:h}=Tt("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(h)}if(!Fq(l,s,i.method)){const{message:h}=Tt("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(h)}if(c&&!Hq(c,Rg)){const{message:h}=Tt("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${Rg.min} and ${Rg.max}`);throw new Error(h)}},this.isValidRespond=async t=>{var n;if(!gs(t)){const{message:c}=Tt("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:i,response:s}=t;try{await this.isValidSessionTopic(i)}catch(c){throw(n=t==null?void 0:t.response)!=null&&n.id&&this.cleanupAfterResponse(t),c}if(!Bq(s)){const{message:c}=Tt("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!gs(t)){const{message:i}=Tt("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(i)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async t=>{if(!gs(t)){const{message:l}=Tt("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(l)}const{topic:n,event:i,chainId:s}=t;await this.isValidSessionTopic(n);const{namespaces:c}=this.client.session.get(n);if(!B4(c,s)){const{message:l}=Tt("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(l)}if(!Pq(i)){const{message:l}=Tt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(l)}if(!Lq(c,s,i.name)){const{message:l}=Tt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(l)}},this.isValidDisconnect=async t=>{if(!gs(t)){const{message:i}=Tt("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(i)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(t,n)=>{const i={verified:{verifyUrl:n.verifyUrl||tf,validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:t,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s.origin,i.verified.isScam=s.isScam,i.verified.validation=s.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.info(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(t,n)=>{Object.values(t).forEach(i=>{if(!$n(i,!1)){const{message:s}=Tt("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=Tt("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Dn.message,async e=>{const{topic:t,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(t,n);try{mx(i)?(this.client.core.history.set(t,i),this.onRelayEventRequest({topic:t,payload:i})):Vh(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.client.core.history.delete(t,i.id)):this.onRelayEventUnknownPayload({topic:t,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(Wi.expired,async e=>{const{topic:t,id:n}=dq(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Tt("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(ef.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!$n(e,!1)){const{message:t}=Tt("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Tt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(zc(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Tt("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!$n(e,!1)){const{message:t}=Tt("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=Tt("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(zc(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=Tt("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=Tt("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if($n(e,!1)){const{message:t}=Tt("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=Tt("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!Oq(e)){const{message:t}=Tt("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Tt("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(zc(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=Tt("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class Jq extends ac{constructor(e,t){super(e,t,zq,Hm),this.core=e,this.logger=t}}class W_ extends ac{constructor(e,t){super(e,t,Gq,Hm),this.core=e,this.logger=t}}class e$ extends ac{constructor(e,t){super(e,t,qq,Hm,n=>n.id),this.core=e,this.logger=t}}let t$=class Y_ extends jM{constructor(e){super(e),this.protocol=q_,this.version=$_,this.name=Og.name,this.events=new cs.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||Og.name,this.metadata=(e==null?void 0:e.metadata)||hq();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Zt.pino(Zt.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Og.logger}));this.core=(e==null?void 0:e.core)||new nh(e),this.logger=Zt.generateChildLogger(t,this.name),this.session=new W_(this.core,this.logger),this.proposal=new Jq(this.core,this.logger),this.pendingRequest=new e$(this.core,this.logger),this.engine=new Zq(this)}static async init(e){const t=new Y_(e);return await t.initialize(),t}get context(){return Zt.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const r$=W_,n$=t$;var xb={exports:{}},gf=typeof Reflect=="object"?Reflect:null,H4=gf&&typeof gf.apply=="function"?gf.apply:function(r,e,t){return Function.prototype.apply.call(r,e,t)},$d;gf&&typeof gf.ownKeys=="function"?$d=gf.ownKeys:Object.getOwnPropertySymbols?$d=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:$d=function(r){return Object.getOwnPropertyNames(r)};function i$(r){console&&console.warn&&console.warn(r)}var z4=Number.isNaN||function(r){return r!==r};function Cr(){Cr.init.call(this)}xb.exports=Cr,xb.exports.once=c$,Cr.EventEmitter=Cr,Cr.prototype._events=void 0,Cr.prototype._eventsCount=0,Cr.prototype._maxListeners=void 0;var j4=10;function Kd(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Cr,"defaultMaxListeners",{enumerable:!0,get:function(){return j4},set:function(r){if(typeof r!="number"||r<0||z4(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");j4=r}}),Cr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Cr.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||z4(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function X_(r){return r._maxListeners===void 0?Cr.defaultMaxListeners:r._maxListeners}Cr.prototype.getMaxListeners=function(){return X_(this)},Cr.prototype.emit=function(r){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var n=r==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var c=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw c.context=s,c}var l=i[r];if(l===void 0)return!1;if(typeof l=="function")H4(l,this,e);else for(var h=l.length,u=Q_(l,h),t=0;t<h;++t)H4(u[t],this,e);return!0};function G4(r,e,t,n){var i,s,c;if(Kd(t),s=r._events,s===void 0?(s=r._events=Object.create(null),r._eventsCount=0):(s.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),s=r._events),c=s[e]),c===void 0)c=s[e]=t,++r._eventsCount;else if(typeof c=="function"?c=s[e]=n?[t,c]:[c,t]:n?c.unshift(t):c.push(t),i=X_(r),i>0&&c.length>i&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=r,l.type=e,l.count=c.length,i$(l)}return r}Cr.prototype.addListener=function(r,e){return G4(this,r,e,!1)},Cr.prototype.on=Cr.prototype.addListener,Cr.prototype.prependListener=function(r,e){return G4(this,r,e,!0)};function s$(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function V4(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=s$.bind(n);return i.listener=t,n.wrapFn=i,i}Cr.prototype.once=function(r,e){return Kd(e),this.on(r,V4(this,r,e)),this},Cr.prototype.prependOnceListener=function(r,e){return Kd(e),this.prependListener(r,V4(this,r,e)),this},Cr.prototype.removeListener=function(r,e){var t,n,i,s,c;if(Kd(e),n=this._events,n===void 0)return this;if(t=n[r],t===void 0)return this;if(t===e||t.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete n[r],n.removeListener&&this.emit("removeListener",r,t.listener||e));else if(typeof t!="function"){for(i=-1,s=t.length-1;s>=0;s--)if(t[s]===e||t[s].listener===e){c=t[s].listener,i=s;break}if(i<0)return this;i===0?t.shift():o$(t,i),t.length===1&&(n[r]=t[0]),n.removeListener!==void 0&&this.emit("removeListener",r,c||e)}return this},Cr.prototype.off=Cr.prototype.removeListener,Cr.prototype.removeAllListeners=function(r){var e,t,n;if(t=this._events,t===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete t[r]),this;if(arguments.length===0){var i=Object.keys(t),s;for(n=0;n<i.length;++n)s=i[n],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=t[r],typeof e=="function")this.removeListener(r,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(r,e[n]);return this};function q4(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?a$(i):Q_(i,i.length)}Cr.prototype.listeners=function(r){return q4(this,r,!0)},Cr.prototype.rawListeners=function(r){return q4(this,r,!1)},Cr.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):$4.call(r,e)},Cr.prototype.listenerCount=$4;function $4(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Cr.prototype.eventNames=function(){return this._eventsCount>0?$d(this._events):[]};function Q_(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function o$(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function a$(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function c$(r,e){return new Promise(function(t,n){function i(c){r.removeListener(e,s),n(c)}function s(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}Z_(r,e,s,{once:!0}),e!=="error"&&f$(r,i,{once:!0})})}function f$(r,e,t){typeof r.on=="function"&&Z_(r,"error",e,t)}function Z_(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(s){n.once&&r.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}const l$="Web3Wallet";class u${constructor(e){this.opts=e}}class h${constructor(e){this.client=e}}class d$ extends h${constructor(e){super(e),this.init=async()=>{this.signClient=await n$.init({core:this.client.core,metadata:this.client.metadata}),this.authClient=await sq.init({core:this.client.core,projectId:"",metadata:this.client.metadata}),this.initializeEventListeners()},this.pair=async t=>{await this.client.core.pairing.pair(t)},this.approveSession=async t=>{const{topic:n,acknowledged:i}=await this.signClient.approve({id:t.id,namespaces:t.namespaces});return await i(),this.signClient.session.get(n)},this.rejectSession=async t=>await this.signClient.reject(t),this.updateSession=async t=>await(await this.signClient.update(t)).acknowledged(),this.extendSession=async t=>await(await this.signClient.extend(t)).acknowledged(),this.respondSessionRequest=async t=>await this.signClient.respond(t),this.disconnectSession=async t=>await this.signClient.disconnect(t),this.emitSessionEvent=async t=>await this.signClient.emit(t),this.getActiveSessions=()=>this.signClient.session.getAll().reduce((t,n)=>(t[n.topic]=n,t),{}),this.getPendingSessionProposals=()=>this.signClient.proposal.getAll(),this.getPendingSessionRequests=()=>this.signClient.getPendingSessionRequests(),this.respondAuthRequest=async(t,n)=>await this.authClient.respond(t,n),this.getPendingAuthRequests=()=>this.authClient.requests.getAll().filter(t=>"requester"in t),this.formatMessage=(t,n)=>this.authClient.formatMessage(t,n),this.registerDeviceToken=t=>this.client.core.echoClient.registerDeviceToken(t),this.onSessionRequest=t=>{this.client.events.emit("session_request",t)},this.onSessionProposal=t=>{this.client.events.emit("session_proposal",t)},this.onSessionDelete=t=>{this.client.events.emit("session_delete",t)},this.onAuthRequest=t=>{this.client.events.emit("auth_request",t)},this.onProposalExpire=t=>{this.client.events.emit("proposal_expire",t)},this.onSessionRequestExpire=t=>{this.client.events.emit("session_request_expire",t)},this.initializeEventListeners=()=>{this.signClient.events.on("session_proposal",this.onSessionProposal),this.signClient.events.on("session_request",this.onSessionRequest),this.signClient.events.on("session_delete",this.onSessionDelete),this.authClient.on("auth_request",this.onAuthRequest),this.signClient.events.on("proposal_expire",this.onProposalExpire),this.signClient.events.on("session_request_expire",this.onSessionRequestExpire)},this.signClient={},this.authClient={}}}const x$={decryptMessage:async r=>{const e={core:new nh({storageOptions:r.storageOptions,storage:r.storage})};await e.core.crypto.init();const t=e.core.crypto.decode(r.topic,r.encryptedMessage);return e.core=null,t},getMetadata:async r=>{const e={core:new nh({storageOptions:r.storageOptions,storage:r.storage}),sessionStore:null};e.sessionStore=new r$(e.core,e.core.logger),await e.sessionStore.init();const t=e.sessionStore.get(r.topic),n=t==null?void 0:t.peer.metadata;return e.core=null,e.sessionStore=null,n}},J_=class extends u${constructor(r){super(r),this.events=new xb.exports,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.pair=async e=>{try{return await this.engine.pair(e)}catch(t){throw this.logger.error(t.message),t}},this.approveSession=async e=>{try{return await this.engine.approveSession(e)}catch(t){throw this.logger.error(t.message),t}},this.rejectSession=async e=>{try{return await this.engine.rejectSession(e)}catch(t){throw this.logger.error(t.message),t}},this.updateSession=async e=>{try{return await this.engine.updateSession(e)}catch(t){throw this.logger.error(t.message),t}},this.extendSession=async e=>{try{return await this.engine.extendSession(e)}catch(t){throw this.logger.error(t.message),t}},this.respondSessionRequest=async e=>{try{return await this.engine.respondSessionRequest(e)}catch(t){throw this.logger.error(t.message),t}},this.disconnectSession=async e=>{try{return await this.engine.disconnectSession(e)}catch(t){throw this.logger.error(t.message),t}},this.emitSessionEvent=async e=>{try{return await this.engine.emitSessionEvent(e)}catch(t){throw this.logger.error(t.message),t}},this.getActiveSessions=()=>{try{return this.engine.getActiveSessions()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionProposals=()=>{try{return this.engine.getPendingSessionProposals()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.respondAuthRequest=async(e,t)=>{try{return await this.engine.respondAuthRequest(e,t)}catch(n){throw this.logger.error(n.message),n}},this.getPendingAuthRequests=()=>{try{return this.engine.getPendingAuthRequests()}catch(e){throw this.logger.error(e.message),e}},this.formatMessage=(e,t)=>{try{return this.engine.formatMessage(e,t)}catch(n){throw this.logger.error(n.message),n}},this.registerDeviceToken=e=>{try{return this.engine.registerDeviceToken(e)}catch(t){throw this.logger.error(t.message),t}},this.metadata=r.metadata,this.name=r.name||l$,this.core=r.core,this.logger=this.core.logger,this.engine=new d$(this)}static async init(r){const e=new J_(r);return await e.initialize(),e}async initialize(){this.logger.trace("Initialized");try{await this.engine.init(),this.logger.info("Web3Wallet Initialization Success")}catch(r){throw this.logger.info("Web3Wallet Initialization Failure"),this.logger.error(r.message),r}}};let eC=J_;eC.notifications=x$;const p$=eC;function g$(r){let e,t,n,i,s,c,l,h,u,p,b;return{c(){e=lt("h4"),e.textContent="Scan QR Code",t=Gt(),n=lt("div"),i=Gt(),s=lt("h4"),s.textContent="Or paste link",c=Gt(),l=lt("input"),h=Gt(),u=lt("button"),u.textContent="OK",Xt(n,"id","reader"),cc(n,"width","95%"),Xt(l,"type","text"),Xt(l,"id","wcLink")},m(y,w){Ue(y,e,w),Ue(y,t,w),Ue(y,n,w),Ue(y,i,w),Ue(y,s,w),Ue(y,c,w),Ue(y,l,w),Ue(y,h,w),Ue(y,u,w),p||(b=Vr(u,"click",r[3]),p=!0)},p:mn,d(y){y&&(ke(e),ke(t),ke(n),ke(i),ke(s),ke(c),ke(l),ke(h),ke(u)),p=!1,b()}}}function b$(r){let e;function t(s,c){return s[1]?w$:y$}let n=t(r),i=n(r);return{c(){i.c(),e=gb()},m(s,c){i.m(s,c),Ue(s,e,c)},p(s,c){n===(n=t(s))&&i?i.p(s,c):(i.d(1),i=n(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){s&&ke(e),i.d(s)}}}function m$(r){let e;return{c(){e=lt("h4"),e.textContent="WAIT"},m(t,n){Ue(t,e,n)},p:mn,d(t){t&&ke(e)}}}function y$(r){let e,t,n=r[0].peer.metadata.name+"",i,s,c,l,h;return{c(){e=lt("h4"),t=Hr("Connected to "),i=Hr(n),s=Gt(),c=lt("div"),c.innerHTML=`<button class="circleMenu"><i class="las la-plug"></i></button> <br/>
          Disconnect`,Xt(c,"class","menuItem")},m(u,p){Ue(u,e,p),Bt(e,t),Bt(e,i),Ue(u,s,p),Ue(u,c,p),l||(h=Vr(c,"click",r[4]),l=!0)},p(u,p){p&1&&n!==(n=u[0].peer.metadata.name+"")&&ss(i,n)},d(u){u&&(ke(e),ke(s),ke(c)),l=!1,h()}}}function w$(r){let e,t,n,i,s,c,l;return{c(){e=lt("h4"),e.textContent="New Transaction",t=Gt(),n=lt("div"),n.innerHTML=`<button class="circleMenu"><i class="las la-check-circle"></i></button> <br/>
          Confirm`,i=Gt(),s=lt("div"),s.innerHTML=`<button class="circleMenu"><i class="las la-times-circle"></i></button> <br/>
          Cancel`,Xt(n,"class","menuItem"),Xt(s,"class","menuItem")},m(h,u){Ue(h,e,u),Ue(h,t,u),Ue(h,n,u),Ue(h,i,u),Ue(h,s,u),c||(l=[Vr(n,"click",r[5]),Vr(s,"click",r[6])],c=!0)},p:mn,d(h){h&&(ke(e),ke(t),ke(n),ke(i),ke(s)),c=!1,i0(l)}}}function v$(r){let e;function t(s,c){return s[2]?m$:s[0]?b$:g$}let n=t(r),i=n(r);return{c(){e=lt("div"),i.c()},m(s,c){Ue(s,e,c),i.m(e,null)},p(s,[c]){n===(n=t(s))&&i?i.p(s,c):(i.d(1),i=n(s),i&&(i.c(),i.m(e,null)))},i:mn,o:mn,d(s){s&&ke(e),i.d()}}}function E$(r){console.warn(`Code scan error = ${r}`)}function A$(r,e,t){let{cardInfo:n}=e,{signer:i}=e,s,c,l,h,u=!1;function p(T,F){s.clear(),y(T)}function b(){y(document.getElementById("wcLink").value)}async function y(T){u||l||(console.log("PAIRING",T),t(2,u=!0),c.on("session_proposal",async F=>{const N=$H({proposal:F.params,supportedNamespaces:{eip155:{chains:["eip155:137"],methods:["eth_sendTransaction","personal_sign"],events:["accountsChanged","chainChanged"],accounts:["eip155:137:"+n.pub.toLowerCase()]}}});t(0,l=await c.approveSession({id:F.id,namespaces:N})),c.on("session_request",async O=>{console.log("SESSION REQUEST",O),t(1,h=O)}),console.log("SESSION OPEN",l),t(2,u=!1)}),await c.pair({uri:T}))}async function w(){await c.disconnectSession({topic:l.topic,reason:XH("USER_DISCONNECTED")}),t(0,l=null)}async function _(){let T=h.params.request.params[0];const F=await i.sendTransaction(T),N={id:h.id,result:F.hash,jsonrpc:"2.0"};await c.respondSessionRequest({topic:l.topic,response:N}),t(1,h=null)}async function S(){const T={id:h.id,jsonrpc:"2.0",error:{code:5e3,message:"User rejected."}};await c.respondSessionRequest({topic:l.topic,response:T}),t(1,h=null)}return l6(async()=>{const T=new nh({projectId:"71d4d66b28f7a00fbd864c766c793ae5"});c=await p$.init({core:T,metadata:{name:"Tap3 Web",description:"Web Wallet for Tap3 cards",url:"tap3.me",icons:[]}}),s=new _O("reader",{fps:10,qrbox:{width:300,height:300},supportedScanTypes:[da.SCAN_TYPE_CAMERA],formatsToSupport:[et.QR_CODE]},!1),s.render(p,E$)}),r.$$set=T=>{"cardInfo"in T&&t(7,n=T.cardInfo),"signer"in T&&t(8,i=T.signer)},[l,h,u,b,w,_,S,n,i]}class _$ extends b6{constructor(e){super(),g6(this,e,A$,v$,pb,{cardInfo:7,signer:8})}}function K4(r,e,t){const n=r.slice();return n[40]=e[t],n}function W4(r){let e,t;return{c(){e=lt("div"),t=Hr(r[4]),Xt(e,"id","errorMessage")},m(n,i){Ue(n,e,i),Bt(e,t)},p(n,i){i[0]&16&&ss(t,n[4])},d(n){n&&ke(e)}}}function Y4(r){let e,t,n,i,s,c=r[2]=="cardInfo"&&X4(r),l=r[2]=="payAmount"&&r6(r),h=r[2]=="payScan"&&n6(),u=r[2]=="walletConnect"&&i6(r);return{c(){c&&c.c(),e=Gt(),l&&l.c(),t=Gt(),h&&h.c(),n=Gt(),u&&u.c(),i=gb()},m(p,b){c&&c.m(p,b),Ue(p,e,b),l&&l.m(p,b),Ue(p,t,b),h&&h.m(p,b),Ue(p,n,b),u&&u.m(p,b),Ue(p,i,b),s=!0},p(p,b){p[2]=="cardInfo"?c?c.p(p,b):(c=X4(p),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),p[2]=="payAmount"?l?l.p(p,b):(l=r6(p),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),p[2]=="payScan"?h||(h=n6(),h.c(),h.m(n.parentNode,n)):h&&(h.d(1),h=null),p[2]=="walletConnect"?u?(u.p(p,b),b[0]&4&&Qa(u,1)):(u=i6(p),u.c(),Qa(u,1),u.m(i.parentNode,i)):u&&(h6(),Fu(u,1,1,()=>{u=null}),d6())},i(p){s||(Qa(u),s=!0)},o(p){Fu(u),s=!1},d(p){p&&(ke(e),ke(t),ke(n),ke(i)),c&&c.d(p),l&&l.d(p),h&&h.d(p),u&&u.d(p)}}}function X4(r){let e,t,n,i,s,c;function l(w,_){return w[6]?S$:C$}let h=l(r),u=h(r);function p(w,_){return w[1].key?D$:I$}let b=p(r),y=b(r);return{c(){e=lt("div"),u.c(),t=Gt(),n=lt("div"),i=lt("div"),s=lt("br"),c=Gt(),y.c(),Xt(i,"id","menuMain"),Xt(n,"id","menu"),Xt(e,"id","cardInfo")},m(w,_){Ue(w,e,_),u.m(e,null),Bt(e,t),Bt(e,n),Bt(n,i),Bt(i,s),Bt(i,c),y.m(i,null)},p(w,_){h===(h=l(w))&&u?u.p(w,_):(u.d(1),u=h(w),u&&(u.c(),u.m(e,t))),b===(b=p(w))&&y?y.p(w,_):(y.d(1),y=b(w),y&&(y.c(),y.m(i,null)))},d(w){w&&ke(e),u.d(),y.d()}}}function C$(r){let e,t,n,i,s=s6(r[1].id)+"",c,l,h,u=r[1].pub.substr(0,7)+"..."+r[1].pub.substr(37,5),p,b,y,w,_,S=r[1].svg&&Q4(r),T=r[1].balance&&Z4(r);return{c(){e=lt("div"),S&&S.c(),t=Gt(),n=lt("div"),i=Hr("#"),c=Hr(s),l=Gt(),h=lt("div"),p=Hr(u),b=Gt(),T&&T.c(),Xt(n,"class","cardId"),Xt(h,"class","cardAddr"),Xt(e,"class","cardPic"),Xt(e,"style",y=r[1].css)},m(F,N){Ue(F,e,N),S&&S.m(e,null),Bt(e,t),Bt(e,n),Bt(n,i),Bt(n,c),Bt(e,l),Bt(e,h),Bt(h,p),Bt(e,b),T&&T.m(e,null),w||(_=Vr(e,"click",r[15]),w=!0)},p(F,N){F[1].svg?S?S.p(F,N):(S=Q4(F),S.c(),S.m(e,t)):S&&(S.d(1),S=null),N[0]&2&&s!==(s=s6(F[1].id)+"")&&ss(c,s),N[0]&2&&u!==(u=F[1].pub.substr(0,7)+"..."+F[1].pub.substr(37,5))&&ss(p,u),F[1].balance?T?T.p(F,N):(T=Z4(F),T.c(),T.m(e,null)):T&&(T.d(1),T=null),N[0]&2&&y!==(y=F[1].css)&&Xt(e,"style",y)},d(F){F&&ke(e),S&&S.d(),T&&T.d(),w=!1,_()}}}function S$(r){let e;return{c(){e=lt("canvas"),Xt(e,"id","qrCode")},m(t,n){Ue(t,e,n)},p:mn,d(t){t&&ke(e)}}}function Q4(r){let e,t,n;return{c(){e=ey("svg"),t=ey("image"),ty(t,"xlink:href",n="./cards/"+r[1].svg+".svg"),Xt(e,"class","cardSvg")},m(i,s){Ue(i,e,s),Bt(e,t)},p(i,s){s[0]&2&&n!==(n="./cards/"+i[1].svg+".svg")&&ty(t,"xlink:href",n)},d(i){i&&ke(e)}}}function Z4(r){let e,t,n=(r[1].balance*r[7]).toFixed(2)+"",i,s,c,l,h,u=r[1].balance+"",p,b,y,w=r[7]&&r[1].balance&&J4();return{c(){e=lt("div"),t=Hr("~"),i=Hr(n),s=Hr(` USD
                `),c=lt("br"),l=Gt(),h=lt("span"),p=Hr(u),b=Hr(" MATIC"),y=Gt(),w&&w.c(),Xt(e,"class","nativeBalance")},m(_,S){Ue(_,e,S),Bt(e,t),Bt(e,i),Bt(e,s),Bt(e,c),Bt(e,l),Bt(e,h),Bt(h,p),Bt(h,b),Bt(e,y),w&&w.m(e,null)},p(_,S){S[0]&130&&n!==(n=(_[1].balance*_[7]).toFixed(2)+"")&&ss(i,n),S[0]&2&&u!==(u=_[1].balance+"")&&ss(p,u),_[7]&&_[1].balance?w||(w=J4(),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},d(_){_&&ke(e),w&&w.d()}}}function J4(r){let e;return{c(){e=lt("div"),e.innerHTML="<span></span>",Xt(e,"class","convertBalance")},m(t,n){Ue(t,e,n)},d(t){t&&ke(e)}}}function I$(r){let e,t,n,i,s,c,l,h,u;return{c(){e=lt("div"),e.innerHTML=`<button class="circleMenu"><i class="las la-donate"></i></button> <br/>
                Pay`,t=Gt(),n=lt("div"),n.innerHTML=`<button class="circleMenu"><i class="las la-qrcode"></i></button> <br/>
                QR Code`,i=Gt(),s=lt("div"),s.innerHTML=`<button class="circleMenu"><i class="las la-copy"></i></button> <br/>
                Copy Addr`,c=Gt(),l=lt("div"),l.innerHTML=`<button class="circleMenu"><i class="las la-external-link-square-alt"></i></button> <br/>
                Explorer`,Xt(e,"class","menuItem"),Xt(n,"class","menuItem"),Xt(s,"class","menuItem"),Xt(l,"class","menuItem")},m(p,b){Ue(p,e,b),Ue(p,t,b),Ue(p,n,b),Ue(p,i,b),Ue(p,s,b),Ue(p,c,b),Ue(p,l,b),h||(u=[Vr(e,"click",r[12]),Vr(n,"click",r[16]),Vr(s,"click",r[17]),Vr(l,"click",r[18])],h=!0)},p:mn,d(p){p&&(ke(e),ke(t),ke(n),ke(i),ke(s),ke(c),ke(l)),h=!1,i0(u)}}}function D$(r){let e,t,n,i,s,c,l,h,u=r[9][r[1].pub]&&e6(r);return{c(){e=lt("div"),e.innerHTML=`<button class="circleMenu"><i class="las la-camera"></i></button> <br/>
                WalletConnect`,t=Gt(),n=lt("table"),i=lt("thead"),i.innerHTML="<tr><td>Date</td> <td>Details</td> <td>Amount</td></tr>",s=Gt(),c=lt("tbody"),u&&u.c(),Xt(e,"class","menuItem"),Xt(n,"id","txHistory"),cc(n,"width","100%"),cc(n,"padding-top","1rem")},m(p,b){Ue(p,e,b),Ue(p,t,b),Ue(p,n,b),Bt(n,i),Bt(n,s),Bt(n,c),u&&u.m(c,null),l||(h=Vr(e,"click",r[11]),l=!0)},p(p,b){p[9][p[1].pub]?u?u.p(p,b):(u=e6(p),u.c(),u.m(c,null)):u&&(u.d(1),u=null)},d(p){p&&(ke(e),ke(t),ke(n)),u&&u.d(),l=!1,h()}}}function e6(r){let e,t=iy(r[9][r[1].pub]),n=[];for(let i=0;i<t.length;i+=1)n[i]=t6(K4(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=gb()},m(i,s){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(i,s);Ue(i,e,s)},p(i,s){if(s[0]&514){t=iy(i[9][i[1].pub]);let c;for(c=0;c<t.length;c+=1){const l=K4(i,t,c);n[c]?n[c].p(l,s):(n[c]=t6(l),n[c].c(),n[c].m(e.parentNode,e))}for(;c<n.length;c+=1)n[c].d(1);n.length=t.length}},d(i){i&&ke(e),mC(n,i)}}}function t6(r){let e,t,n=new Date(r[40][0]).toISOString().split("T")[0]+"",i,s,c,l=r[40][1].substr(0,7)+"..."+r[40][1].substr(37,5),h,u,p,b,y=r[40][2]+"",w,_;return{c(){e=lt("tr"),t=lt("td"),i=Hr(n),s=Gt(),c=lt("td"),h=Hr(l),u=Gt(),p=lt("td"),b=Hr("- "),w=Hr(y),_=Gt(),cc(p,"color","red")},m(S,T){Ue(S,e,T),Bt(e,t),Bt(t,i),Bt(e,s),Bt(e,c),Bt(c,h),Bt(e,u),Bt(e,p),Bt(p,b),Bt(p,w),Bt(e,_)},p(S,T){T[0]&514&&n!==(n=new Date(S[40][0]).toISOString().split("T")[0]+"")&&ss(i,n),T[0]&514&&l!==(l=S[40][1].substr(0,7)+"..."+S[40][1].substr(37,5))&&ss(h,l),T[0]&514&&y!==(y=S[40][2]+"")&&ss(w,y)},d(S){S&&ke(e)}}}function r6(r){let e;function t(s,c){return s[5]?N$:T$}let n=t(r),i=n(r);return{c(){e=lt("div"),i.c(),Xt(e,"id","numberInput")},m(s,c){Ue(s,e,c),i.m(e,null)},p(s,c){n===(n=t(s))&&i?i.p(s,c):(i.d(1),i=n(s),i&&(i.c(),i.m(e,null)))},d(s){s&&ke(e),i.d()}}}function T$(r){let e,t,n=r[8].substr(0,7)+"..."+r[8].substr(37,5),i,s,c,l,h,u,p,b,y,w,_,S,T,F,N,O,M,L,R,v,P,Y,J,ne,le,V,E,C,U,j,K,X,te,z,D,G,ue;function H(ee,de){return ee[10]?R$:O$}let ie=H(r)(r);function re(ee,de){return de[0]&8&&(K=null),K==null&&(K=ee[3].indexOf(".")>-1),K?F$:P$}let se=re(r,[-1,-1]),B=se(r);return{c(){e=lt("h2"),t=Hr("Pay "),i=Hr(n),s=Gt(),ie.c(),c=Gt(),l=lt("button"),l.textContent="1",h=Gt(),u=lt("button"),u.textContent="2",p=Gt(),b=lt("button"),b.textContent="3",y=Gt(),w=lt("br"),_=lt("br"),S=Gt(),T=lt("button"),T.textContent="4",F=Gt(),N=lt("button"),N.textContent="5",O=Gt(),M=lt("button"),M.textContent="6",L=Gt(),R=lt("br"),v=lt("br"),P=Gt(),Y=lt("button"),Y.textContent="7",J=Gt(),ne=lt("button"),ne.textContent="8",le=Gt(),V=lt("button"),V.textContent="9",E=Gt(),C=lt("br"),U=lt("br"),j=Gt(),B.c(),X=Gt(),te=lt("button"),te.textContent="0",z=Gt(),D=lt("button"),D.textContent="✓",Xt(l,"class","numpadButton"),Xt(u,"class","numpadButton"),Xt(b,"class","numpadButton"),Xt(T,"class","numpadButton"),Xt(N,"class","numpadButton"),Xt(M,"class","numpadButton"),Xt(Y,"class","numpadButton"),Xt(ne,"class","numpadButton"),Xt(V,"class","numpadButton"),Xt(te,"class","numpadButton"),Xt(D,"class","numpadButton"),cc(D,"background-color","green")},m(ee,de){Ue(ee,e,de),Bt(e,t),Bt(e,i),Ue(ee,s,de),ie.m(ee,de),Ue(ee,c,de),Ue(ee,l,de),Ue(ee,h,de),Ue(ee,u,de),Ue(ee,p,de),Ue(ee,b,de),Ue(ee,y,de),Ue(ee,w,de),Ue(ee,_,de),Ue(ee,S,de),Ue(ee,T,de),Ue(ee,F,de),Ue(ee,N,de),Ue(ee,O,de),Ue(ee,M,de),Ue(ee,L,de),Ue(ee,R,de),Ue(ee,v,de),Ue(ee,P,de),Ue(ee,Y,de),Ue(ee,J,de),Ue(ee,ne,de),Ue(ee,le,de),Ue(ee,V,de),Ue(ee,E,de),Ue(ee,C,de),Ue(ee,U,de),Ue(ee,j,de),B.m(ee,de),Ue(ee,X,de),Ue(ee,te,de),Ue(ee,z,de),Ue(ee,D,de),G||(ue=[Vr(l,"click",r[19]),Vr(u,"click",r[20]),Vr(b,"click",r[21]),Vr(T,"click",r[22]),Vr(N,"click",r[23]),Vr(M,"click",r[24]),Vr(Y,"click",r[25]),Vr(ne,"click",r[26]),Vr(V,"click",r[27]),Vr(te,"click",r[29]),Vr(D,"click",r[14])],G=!0)},p(ee,de){de[0]&256&&n!==(n=ee[8].substr(0,7)+"..."+ee[8].substr(37,5))&&ss(i,n),ie.p(ee,de),se===(se=re(ee,de))&&B?B.p(ee,de):(B.d(1),B=se(ee),B&&(B.c(),B.m(X.parentNode,X)))},d(ee){ee&&(ke(e),ke(s),ke(c),ke(l),ke(h),ke(u),ke(p),ke(b),ke(y),ke(w),ke(_),ke(S),ke(T),ke(F),ke(N),ke(O),ke(M),ke(L),ke(R),ke(v),ke(P),ke(Y),ke(J),ke(ne),ke(le),ke(V),ke(E),ke(C),ke(U),ke(j),ke(X),ke(te),ke(z),ke(D)),ie.d(ee),B.d(ee),G=!1,i0(ue)}}}function N$(r){let e;return{c(){e=lt("h1"),e.textContent="WAIT..."},m(t,n){Ue(t,e,n)},p:mn,d(t){t&&ke(e)}}}function O$(r){let e;function t(s,c){return s[3]?B$:M$}let n=t(r),i=n(r);return{c(){e=lt("h2"),i.c()},m(s,c){Ue(s,e,c),i.m(e,null)},p(s,c){n===(n=t(s))&&i?i.p(s,c):(i.d(1),i=n(s),i&&(i.c(),i.m(e,null)))},d(s){s&&ke(e),i.d()}}}function R$(r){let e,t,n,i;return{c(){e=lt("h2"),t=Hr("Sent "),n=Hr(r[3]),i=Hr(" MATIC"),cc(e,"color","green")},m(s,c){Ue(s,e,c),Bt(e,t),Bt(e,n),Bt(e,i)},p(s,c){c[0]&8&&ss(n,s[3])},d(s){s&&ke(e)}}}function M$(r){let e;return{c(){e=Hr("...")},m(t,n){Ue(t,e,n)},p:mn,d(t){t&&ke(e)}}}function B$(r){let e,t;return{c(){e=Hr(r[3]),t=Hr(" MATIC")},m(n,i){Ue(n,e,i),Ue(n,t,i)},p(n,i){i[0]&8&&ss(e,n[3])},d(n){n&&(ke(e),ke(t))}}}function P$(r){let e,t,n;return{c(){e=lt("button"),e.textContent=".",Xt(e,"class","numpadButton")},m(i,s){Ue(i,e,s),t||(n=Vr(e,"click",r[28]),t=!0)},p:mn,d(i){i&&ke(e),t=!1,n()}}}function F$(r){let e,t,n;return{c(){e=lt("button"),e.textContent="X",Xt(e,"class","numpadButton"),cc(e,"background-color","red")},m(i,s){Ue(i,e,s),t||(n=Vr(e,"click",r[13]),t=!0)},p:mn,d(i){i&&ke(e),t=!1,n()}}}function n6(r){let e;return{c(){e=lt("h1"),e.textContent="Tap payment card"},m(t,n){Ue(t,e,n)},d(t){t&&ke(e)}}}function i6(r){let e,t;return e=new _$({props:{cardInfo:r[1],signer:r[0]}}),{c(){CC(e.$$.fragment)},m(n,i){x6(e,n,i),t=!0},p(n,i){const s={};i[0]&2&&(s.cardInfo=n[1]),i[0]&1&&(s.signer=n[0]),e.$set(s)},i(n){t||(Qa(e.$$.fragment,n),t=!0)},o(n){Fu(e.$$.fragment,n),t=!1},d(n){p6(e,n)}}}function L$(r){let e,t,n,i=r[4]&&W4(r),s=r[1].pub&&Y4(r);return{c(){e=lt("main"),i&&i.c(),t=Gt(),s&&s.c()},m(c,l){Ue(c,e,l),i&&i.m(e,null),Bt(e,t),s&&s.m(e,null),n=!0},p(c,l){c[4]?i?i.p(c,l):(i=W4(c),i.c(),i.m(e,t)):i&&(i.d(1),i=null),c[1].pub?s?(s.p(c,l),l[0]&2&&Qa(s,1)):(s=Y4(c),s.c(),Qa(s,1),s.m(e,null)):s&&(h6(),Fu(s,1,1,()=>{s=null}),d6())},i(c){n||(Qa(s),n=!0)},o(c){Fu(s),n=!1},d(c){c&&ke(e),i&&i.d(),s&&s.d()}}}let k$="https://api.tap3.me/catalogue/";function U$(r){const e=atob(r);let t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n).toString(16);t+=i.length===2?i:"0"+i}return t.toLowerCase()}function H$(r){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",t=e.length,n=0,i;r.length;)i=e.indexOf(r.charAt(0)),r=r.substr(1),n*=t,n+=i;return n}function s6(r){let e="";if(r<1e4){let t=4-r.toString().length;for(;t>0;)e+="0",t--;e+=r}else throw"card id too big";return e}function z$(r,e,t){let n,i;Jm(r,Uc,G=>t(8,n=G)),Jm(r,Yp,G=>t(9,i=G)),S();let s=new mD("https://polygon-rpc.com"),c,l={},h="cardInfo",u="",p,b,y=!1,w=!1,_=null;async function S(){qs.init("949cebe20ce072369654cc8d2ca1524c",{debug:!0,track_pageview:!0,persistence:"localStorage"})}async function T(){t(2,h="walletConnect")}function F(){document.body.style.backgroundColor="red",setTimeout(()=>{document.body.style.backgroundColor="black"},1e3),setTimeout(()=>{t(4,p="")},3500)}function N(){if(l.key)return l.key;let G=prompt("Enter password"),ue=l.priv,H=Kp.AES.decrypt(Kp.enc.Base64.stringify(ue),G).toString();if(!H||H==""||H.length!=64){F(),t(4,p="Failed to decrypt");return}return t(1,l.key=H,l),t(0,c=new E2(l.key,s)),H}function O(){qs.track("Pay Init",{addr:l.pub,cardId:l.id}),Uc.set(l.pub),t(2,h="payScan")}function M(){qs.track("Pay Cancel",{addr:l.pub,cardId:l.id}),t(2,h="cardInfo"),Uc.set(null)}async function L(){t(1,l.key=N(),l),t(5,y=!0);try{const G=await c.sendTransaction({to:ed(Uc),value:e7(u,"ether")});t(5,y=!1),document.body.style.backgroundColor="green",setTimeout(()=>{document.body.style.backgroundColor="black"},1e3);let ue=ed(Yp);ue[l.pub]?ue[l.pub].push([new Date().getTime(),ed(Uc),u]):ue[l.pub]=[[new Date().getTime(),ed(Uc),u]],Yp.set(ue),qs.track("Pay Finish",{addr:l.pub,cardId:l.id})}catch(G){t(5,y=!1),t(4,p=G.code),F()}}async function R(){qs.track("Unlock",{addr:l.pub,cardId:l.id}),t(1,l.key=N(),l),document.getElementsByClassName("cardPic")[0].classList.add("animate__animated"),l.key?document.getElementsByClassName("cardPic")[0].classList.add("animate__flip"):document.getElementsByClassName("cardPic")[0].classList.add("animate__headShake"),setTimeout(()=>{document.getElementsByClassName("cardPic")[0].classList.remove("animate__animated"),document.getElementsByClassName("cardPic")[0].classList.remove("animate__flip"),document.getElementsByClassName("cardPic")[0].classList.remove("animate__headShake")},1e3)}function v(){qs.track("QRCode",{addr:l.pub,cardId:l.id}),t(6,w=!w),w&&setTimeout(function(){bl.toCanvas(document.getElementById("qrCode"),l.pub,{toSJISFunc:bl.toSJIS,width:300},G=>{G&&console.log(G)})},100)}async function P(){n!=null&&t(2,h="payAmount");let G=window.location.hash.replace("#","").split(":");if(G.length!=3){qs.track("Redirect Landing",{addr:l.pub,cardId:l.id}),window.location.replace("https://card.tap3.me");return}t(1,l={id:H$(G[2]),priv:Kp.enc.Base64.parse(G[1])}),t(1,l.pub=await or("0x"+U$(G[0])),l),t(1,l.bal=await s.getBalance(l.pub),l),t(1,l.balance=Number(t7(l.bal)).toFixed(4),l),qs.identify(l.id),qs.track("Card Load",{addr:l.pub,cardId:l.id});let ue=await fetch(k$+l.id);switch(ue=await ue.json(),t(1,l.css=ue[0].css,l),t(1,l.svg=ue[0].svg,l),t(1,l.model=ue[0].id_model,l),l.model){case 4:t(1,l.css="background-color: black; "+l.css,l);break;case 5:t(1,l.css="background-color: #c7252b; "+l.css,l);break;case 6:t(1,l.css="background-color: #006faf; "+l.css,l);break;default:t(1,l.css="background-color: white; "+l.css,l);break}}async function Y(){let ue=await(await fetch("https://api.coinpaprika.com/v1/tickers/matic-polygon")).json();t(7,_=ue.quotes.USD.price)}async function J(){navigator.clipboard.writeText(l.pub),document.body.style.backgroundColor="green",setTimeout(()=>{document.body.style.backgroundColor="black"},1e3)}async function ne(){qs.track("Explorer",{addr:l.pub,cardId:l.id}),window.open("https://polygonscan.com/address/"+l.pub)}return l6(async()=>{await P(),window.addEventListener("hashchange",async function(){await P()}),Y()}),[c,l,h,u,p,y,w,_,n,i,b,T,O,M,L,R,v,J,ne,()=>{t(3,u+="1")},()=>{t(3,u+="2")},()=>{t(3,u+="3")},()=>{t(3,u+="4")},()=>{t(3,u+="5")},()=>{t(3,u+="6")},()=>{t(3,u+="7")},()=>{t(3,u+="8")},()=>{t(3,u+="9")},()=>{t(3,u+=".")},()=>{t(3,u+="0")}]}class j$ extends b6{constructor(e){super(),g6(this,e,z$,L$,pb,{},null,[-1,-1])}}new j$({target:document.getElementById("app")});
